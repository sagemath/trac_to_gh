# Issue 26389: Listing meataxe matrices with zero rows is broken

archive/issues_026152.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: Matrix(GF(9), 0, 3)._list()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-673c5638db92> in <module>()\n----> 1 Matrix(GF(Integer(9)), Integer(0), Integer(3))._list()\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()\n    908             FfStepPtr(&(p))\n    909             sig_check()\n--> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])\n    911         self.cache('list', x)\n    912         return x\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()\n    135 \n    136         \"\"\"\n--> 137         return self.field(x)\n    138     cpdef int field_to_int(self, x):\n    139         \"\"\"\n\n/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()\n    591 \n    592         if n<0 or n>k.cardinality():\n--> 593             raise TypeError(\"n must be between 0 and self.order()\")\n    594 \n    595         for i from 0 <= i < k.exponent():\n\nTypeError: n must be between 0 and self.order()\n```\n\nCC:  @simon-king-jena\n\nBranch/Commit: **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26389_\n\n",
    "closed_at": "2018-10-20T11:58:32Z",
    "created_at": "2018-10-03T10:34:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Listing meataxe matrices with zero rows is broken",
    "type": "issue",
    "updated_at": "2018-10-28T14:52:23Z",
    "url": "https://github.com/sagemath/sage/issues/26389",
    "user": "https://github.com/tscrim"
}
```

```
sage: Matrix(GF(9), 0, 3)._list()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-673c5638db92> in <module>()
----> 1 Matrix(GF(Integer(9)), Integer(0), Integer(3))._list()

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()
    908             FfStepPtr(&(p))
    909             sig_check()
--> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])
    911         self.cache('list', x)
    912         return x

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()
    135 
    136         """
--> 137         return self.field(x)
    138     cpdef int field_to_int(self, x):
    139         """

/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()
    591 
    592         if n<0 or n>k.cardinality():
--> 593             raise TypeError("n must be between 0 and self.order()")
    594 
    595         for i from 0 <= i < k.exponent():

TypeError: n must be between 0 and self.order()
```

CC:  @simon-king-jena

Branch/Commit: **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**

Reviewer: **Travis Scrimshaw**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/26389_





---

archive/issue_events_333192.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T10:34:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333192"
}
```



---

archive/issue_events_333193.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T10:34:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
    "label_color": "0000ff",
    "label_name": "component: interfaces: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333193"
}
```



---

archive/issue_events_333194.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T10:34:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333194"
}
```



---

archive/issue_events_333195.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T10:34:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333195"
}
```



---

archive/issue_events_333196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-10-03T15:42:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "title_is": "Heisenbug with Matrix_gfpn_dense or meataxe",
    "title_was": "Hisenbug with Matrix_gfpn_dense or meataxe",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333196"
}
```



---

archive/issue_events_333197.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-10-03T15:42:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333197"
}
```



---

archive/issue_events_333198.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-10-03T15:42:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333198"
}
```



---

archive/issue_comments_409619.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\n> Do you know offhand (i.e., don't spend much time on this) of a simple way I can extract out the relevant matrix >computation? This is not a minimal example, and it would be useful to get it down smaller.\n\nRight. But I didn't see the failure from the doctest yet, even after I installed meataxe to my installation (on mac). Do you have a specific procedure likely to encounter the failure?",
    "created_at": "2018-10-04T00:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409619",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'>Comment 2:</a>
> Do you know offhand (i.e., don't spend much time on this) of a simple way I can extract out the relevant matrix >computation? This is not a minimal example, and it would be useful to get it down smaller.

Right. But I didn't see the failure from the doctest yet, even after I installed meataxe to my installation (on mac). Do you have a specific procedure likely to encounter the failure?



---

archive/issue_comments_409620.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [@kwankyu](#comment%3A2):\n> > Do you know offhand (i.e., don't spend much time on this) of a simple way I can extract out the relevant matrix >computation? This is not a minimal example, and it would be useful to get it down smaller.\n\n> \n> Right. But I didn't see the failure from the doctest yet, even after I installed meataxe to my installation (on mac). Do you have a specific procedure likely to encounter the failure?  \n\nYou may also have to run `sage -b`. However, it doesn't always happen, which is the annoying part. Usually I just run `sage -tp` on the file a bunch of times and it happens with some reasonable frequency.",
    "created_at": "2018-10-04T00:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409620",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [@kwankyu](#comment%3A2):
> > Do you know offhand (i.e., don't spend much time on this) of a simple way I can extract out the relevant matrix >computation? This is not a minimal example, and it would be useful to get it down smaller.

> 
> Right. But I didn't see the failure from the doctest yet, even after I installed meataxe to my installation (on mac). Do you have a specific procedure likely to encounter the failure?  

You may also have to run `sage -b`. However, it doesn't always happen, which is the annoying part. Usually I just run `sage -tp` on the file a bunch of times and it happens with some reasonable frequency.



---

archive/issue_comments_409621.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nStill no failure from \n\n```\n for i in {1..100}; do sage -tp src/sage/rings/function_field/ideal.py; done\n```\non mac, after `sage -i meataxe; make`",
    "created_at": "2018-10-04T04:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409621",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:4'>Comment 4:</a>
Still no failure from 

```
 for i in {1..100}; do sage -tp src/sage/rings/function_field/ideal.py; done
```
on mac, after `sage -i meataxe; make`



---

archive/issue_comments_409622.json:
```json
{
    "body": "Replying to [ticket:26389 tscrim]:\n> There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:\n\nQuestion: Are you using a special branch? Or do you mean the test in `sage/rings/function_field/function_field_ideal.py`, not `sage/rings/function_field/ideal.py` (which doesn't exist)?\n\nWhen running the tests in `.../function_field_ideal.py` a hundred times, I get no problems whatsoever. And yes, I do have meataxe installed (using it intensively in computations with the p_group_cohomology package).\n\nThis raises the question what kind of machine you are using. Anything special concerning endianness, size of long, I think I recall there can also be issues regarding whether char is signed or not?",
    "created_at": "2018-10-05T10:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409622",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [ticket:26389 tscrim]:
> There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:

Question: Are you using a special branch? Or do you mean the test in `sage/rings/function_field/function_field_ideal.py`, not `sage/rings/function_field/ideal.py` (which doesn't exist)?

When running the tests in `.../function_field_ideal.py` a hundred times, I get no problems whatsoever. And yes, I do have meataxe installed (using it intensively in computations with the p_group_cohomology package).

This raises the question what kind of machine you are using. Anything special concerning endianness, size of long, I think I recall there can also be issues regarding whether char is signed or not?



---

archive/issue_comments_409623.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@simon-king-jena](#comment%3A5):\n> Replying to [ticket:26389 tscrim]:\n> > There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:\n\n> \n> Question: Are you using a special branch? Or do you mean the test in `sage/rings/function_field/function_field_ideal.py`, not `sage/rings/function_field/ideal.py` (which doesn't exist)?\n> \n> When running the tests in `.../function_field_ideal.py` a hundred times, I get no problems whatsoever. And yes, I do have meataxe installed (using it intensively in computations with the p_group_cohomology package).\n\nNo, I am running vanilla 8.4.beta7. It seems like you are running 8.4.beta6 or below (specifically, this was added in #25435).\n\n> This raises the question what kind of machine you are using. Anything special concerning endianness, size of long, I think I recall there can also be issues regarding whether char is signed or not?\n\nI have seen this arise on multiple patchbots from multiple tickets ([sardonis on 25477](https://patchbot.sagemath.org/log/25477/Ubuntu/16.04/ppc64le/4.4.0-124-generic/sardonis/2018-10-03%2003:21:26?short), [sage4 on 12053](https://patchbot.sagemath.org/log/12053/Gentoo%20Base%20System/2.2/x86_64/4.4.26-gentoo/sage4/2018-10-05%2001:58:09?short), [sage4 on 26400](https://patchbot.sagemath.org/log/26400/Gentoo%20Base%20System/2.2/x86_64/4.4.26-gentoo/sage4/2018-10-04%2015:16:29?short)). I don't think I have anything special. I kinda recall there being a signed char issue, but I thought you had fixed that.",
    "created_at": "2018-10-05T10:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409623",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@simon-king-jena](#comment%3A5):
> Replying to [ticket:26389 tscrim]:
> > There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:

> 
> Question: Are you using a special branch? Or do you mean the test in `sage/rings/function_field/function_field_ideal.py`, not `sage/rings/function_field/ideal.py` (which doesn't exist)?
> 
> When running the tests in `.../function_field_ideal.py` a hundred times, I get no problems whatsoever. And yes, I do have meataxe installed (using it intensively in computations with the p_group_cohomology package).

No, I am running vanilla 8.4.beta7. It seems like you are running 8.4.beta6 or below (specifically, this was added in #25435).

> This raises the question what kind of machine you are using. Anything special concerning endianness, size of long, I think I recall there can also be issues regarding whether char is signed or not?

I have seen this arise on multiple patchbots from multiple tickets ([sardonis on 25477](https://patchbot.sagemath.org/log/25477/Ubuntu/16.04/ppc64le/4.4.0-124-generic/sardonis/2018-10-03%2003:21:26?short), [sage4 on 12053](https://patchbot.sagemath.org/log/12053/Gentoo%20Base%20System/2.2/x86_64/4.4.26-gentoo/sage4/2018-10-05%2001:58:09?short), [sage4 on 26400](https://patchbot.sagemath.org/log/26400/Gentoo%20Base%20System/2.2/x86_64/4.4.26-gentoo/sage4/2018-10-04%2015:16:29?short)). I don't think I have anything special. I kinda recall there being a signed char issue, but I thought you had fixed that.



---

archive/issue_comments_409624.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@kwankyu](#comment%3A4):\n> Still no failure from \n> \n> ```\n>  for i in {1..100}; do sage -tp src/sage/rings/function_field/ideal.py; done\n> ```\n> on mac, after `sage -i meataxe; make`\n\nMaybe it is not something that shows up on macs (I am running Ubuntu 16.04 LTS).",
    "created_at": "2018-10-05T10:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409624",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@kwankyu](#comment%3A4):
> Still no failure from 
> 
> ```
>  for i in {1..100}; do sage -tp src/sage/rings/function_field/ideal.py; done
> ```
> on mac, after `sage -i meataxe; make`

Maybe it is not something that shows up on macs (I am running Ubuntu 16.04 LTS).



---

archive/issue_comments_409625.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@tscrim](#comment%3A6):\n> No, I am running vanilla 8.4.beta7. It seems like you are running 8.4.beta6 or below (specifically, this was added in #25435).\n\nThat would explain it: I got\n\n```\nsage: version()\n'SageMath version 8.4.beta5, Release Date: 2018-09-15'\n```\n\nOK, I'll try to see what I can do.\n\nEDIT: I'll use the current develop branch merged with the branch that introduces singular-4.1.1.p3.",
    "created_at": "2018-10-05T10:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409625",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@tscrim](#comment%3A6):
> No, I am running vanilla 8.4.beta7. It seems like you are running 8.4.beta6 or below (specifically, this was added in #25435).

That would explain it: I got

```
sage: version()
'SageMath version 8.4.beta5, Release Date: 2018-09-15'
```

OK, I'll try to see what I can do.

EDIT: I'll use the current develop branch merged with the branch that introduces singular-4.1.1.p3.



---

archive/issue_comments_409626.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nAfter upgrading, I indeed get frequent errors with that test, namely twice the same test in the same file:\n\n```\nFile \"src/sage/rings/function_field/ideal.py\", line 2581, in sage.rings.function_field.ideal.FunctionFieldIdealInfinite_global.is_prime\nFailed example:\n    I.factor()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 659, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1070, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.function_field.ideal.FunctionFieldIdealInfinite_global.is_prime[4]>\", line 1, in <module>\n        I.factor()\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py\", line 2673, in factor\n        return Factorization(self._factor(), cr=True)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py\", line 2695, in _factor\n        for iprime, exp in O._to_iF(self).factor():\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py\", line 1574, in factor\n        return Factorization(self._factor(), cr=True)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py\", line 1600, in _factor\n        qs = [q[0] for q in O.decomposition(prime)]\n      File \"sage/misc/cachefunc.pyx\", line 1953, in sage.misc.cachefunc.CachedMethodCaller.__call__ (build/cythonized/sage/misc/cachefunc.c:10824)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1829, in sage.misc.cachefunc.CachedMethodCaller._instance_call (build/cythonized/sage/misc/cachefunc.c:10280)\n        return self.f(self._instance, *args, **kwds)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.py\", line 1840, in decomposition\n        Jb =[Kb[0]] + [div(Kb[j],Kb[j-1]) for j in range(1,len(Kb))]\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.py\", line 1807, in div\n        sJbsIb,proj_sJbsIb,lift_sJbsIb = sJb.quotient_abstract(sIb)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py\", line 4548, in quotient_abstract\n        if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py\", line 3792, in is_subspace\n        return self.is_submodule(other)\n      File \"/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py\", line 1460, in is_submodule\n        return all(x in S for x in M.list())\n      File \"sage/matrix/matrix0.pyx\", line 156, in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)\n        return list(self._list())\n      File \"sage/matrix/matrix_gfpn_dense.pyx\", line 910, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)\n        x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])\n      File \"sage/matrix/matrix_gfpn_dense.pyx\", line 137, in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)\n        return self.field(x)\n      File \"sage/rings/finite_rings/element_givaro.pyx\", line 593, in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)\n        raise TypeError(\"n must be between 0 and self.order()\")\n    TypeError: n must be between 0 and self.order()\n```\nThe error seems to indicate that the matrix contains items that do not belong to the underlying field. And that sounds pretty much like a memory corruption.\n\nI cannot dive into it at the moment (need to prepare a written exam to be held tomorrow), but at least I can confirm the problem.",
    "created_at": "2018-10-07T06:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409626",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'>Comment 9:</a>
After upgrading, I indeed get frequent errors with that test, namely twice the same test in the same file:

```
File "src/sage/rings/function_field/ideal.py", line 2581, in sage.rings.function_field.ideal.FunctionFieldIdealInfinite_global.is_prime
Failed example:
    I.factor()
Exception raised:
    Traceback (most recent call last):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 659, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1070, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.function_field.ideal.FunctionFieldIdealInfinite_global.is_prime[4]>", line 1, in <module>
        I.factor()
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py", line 2673, in factor
        return Factorization(self._factor(), cr=True)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py", line 2695, in _factor
        for iprime, exp in O._to_iF(self).factor():
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py", line 1574, in factor
        return Factorization(self._factor(), cr=True)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.py", line 1600, in _factor
        qs = [q[0] for q in O.decomposition(prime)]
      File "sage/misc/cachefunc.pyx", line 1953, in sage.misc.cachefunc.CachedMethodCaller.__call__ (build/cythonized/sage/misc/cachefunc.c:10824)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1829, in sage.misc.cachefunc.CachedMethodCaller._instance_call (build/cythonized/sage/misc/cachefunc.c:10280)
        return self.f(self._instance, *args, **kwds)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.py", line 1840, in decomposition
        Jb =[Kb[0]] + [div(Kb[j],Kb[j-1]) for j in range(1,len(Kb))]
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.py", line 1807, in div
        sJbsIb,proj_sJbsIb,lift_sJbsIb = sJb.quotient_abstract(sIb)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py", line 4548, in quotient_abstract
        if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py", line 3792, in is_subspace
        return self.is_submodule(other)
      File "/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/modules/free_module.py", line 1460, in is_submodule
        return all(x in S for x in M.list())
      File "sage/matrix/matrix0.pyx", line 156, in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)
        return list(self._list())
      File "sage/matrix/matrix_gfpn_dense.pyx", line 910, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)
        x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])
      File "sage/matrix/matrix_gfpn_dense.pyx", line 137, in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)
        return self.field(x)
      File "sage/rings/finite_rings/element_givaro.pyx", line 593, in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)
        raise TypeError("n must be between 0 and self.order()")
    TypeError: n must be between 0 and self.order()
```
The error seems to indicate that the matrix contains items that do not belong to the underlying field. And that sounds pretty much like a memory corruption.

I cannot dive into it at the moment (need to prepare a written exam to be held tomorrow), but at least I can confirm the problem.



---

archive/issue_comments_409627.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThe good thing is that it seems not to be caused by some obscure side-effect of other tests: I did\n\n```\nsage: K.<x> = FunctionField(GF(3^2)); _.<t> = PolynomialRing(K)\nsage: F.<y> = K.extension(t^3 + t^2 - x^4)\nsage: Oinf = F.maximal_order_infinite()\nsage: I = Oinf.ideal(1/x)\nsage: I.factor()\n```\nin three new Sage sessions. The first two times the test worked. The third time it failed.",
    "created_at": "2018-10-07T06:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409627",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:10'>Comment 10:</a>
The good thing is that it seems not to be caused by some obscure side-effect of other tests: I did

```
sage: K.<x> = FunctionField(GF(3^2)); _.<t> = PolynomialRing(K)
sage: F.<y> = K.extension(t^3 + t^2 - x^4)
sage: Oinf = F.maximal_order_infinite()
sage: I = Oinf.ideal(1/x)
sage: I.factor()
```
in three new Sage sessions. The first two times the test worked. The third time it failed.



---

archive/issue_comments_409628.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,123 +1,67 @@\n-There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:\n+This is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the bug:\n \n ```\n-sage: K.<x> = FunctionField(GF(3^2)); R.<t> = K[]\n-sage: F.<y> = K.extension(t^3 + t^2 - x^4)\n-sage: Oinf = F.maximal_order_infinite()\n-sage: I = Oinf.ideal(1/y)\n-sage: I.factor()   # This will sometimes fail\n+sage: A = FreeModule(GF(3^2), 3)\n+....: V = A.subspace([A([0,1,0])])\n+....: W = A.subspace([A([0,0,0])])\n+....: V.quotient_abstract(W)\n+....: \n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-2-b9ca13965ba4> in <module>()\n-----> 1 I.factor()\n+<ipython-input-1-ec765d1b10a4> in <module>()\n+      2 V = A.subspace([A([Integer(0),Integer(1),Integer(0)])])\n+      3 W = A.subspace([A([Integer(0),Integer(0),Integer(0)])])\n+----> 4 V.quotient_abstract(W)\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in factor(self)\n-   2671             defined by y^2 + y + (x^2 + 1)/x)^2\n-   2672         \"\"\"\n--> 2673         return Factorization(self._factor(), cr=True)\n-   2674\n-   2675     def _factor(self):\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in _factor(self)\n-   2693\n-   2694         factors = []\n--> 2695         for iprime, exp in O._to_iF(self).factor():\n-   2696             prime = FunctionFieldIdealInfinite_global(O, iprime)\n-   2697             factors.append((prime, exp))\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in factor(self)\n-   1572             True\n-   1573         \"\"\"\n--> 1574         return Factorization(self._factor(), cr=True)\n-   1575\n-   1576     def _factor(self):\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in _factor(self)\n-   1598         primes = set([o.ideal(p) for p,_ in d.factor()] + [p for p,_ in i.ideal_below().factor()])\n-   1599         for prime in primes:\n--> 1600             qs = [q[0] for q in O.decomposition(prime)]\n-   1601             for q in qs:\n-   1602                 exp = q.valuation(self)\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCaller.__call__ (build/cythonized/sage/misc/cachefunc.c:10824)()\n-   1951                 return cache[k]\n-   1952         except KeyError:\n--> 1953             w = self._instance_call(*args, **kwds)\n-   1954             cache[k] = w\n-   1955             return w\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCaller._instance_call (build/cythonized/sage/misc/cachefunc.c:10280)()\n-   1827             True\n-   1828         \"\"\"\n--> 1829         return self.f(self._instance, *args, **kwds)\n-   1830\n-   1831     cdef fix_args_kwds(self, tuple args, dict kwds):\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.pyc in decomposition(self, ideal)\n-   1838\n-   1839             # J_1, J_2, ...\n--> 1840             Jb =[Kb[0]] + [div(Kb[j],Kb[j-1]) for j in range(1,len(Kb))]\n-   1841\n-   1842             # H_1, H_2, ...\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.pyc in div(Ib, Jb)\n-   1805                 sJb = Jb.row_space()\n-   1806                 sIb = Ib.row_space()\n--> 1807                 sJbsIb,proj_sJbsIb,lift_sJbsIb = sJb.quotient_abstract(sIb)\n-   1808                 supplement_basis = [lift_sJbsIb(v) for v in sJbsIb.basis()]\n-   1809\n-\n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)\n    4546         # Calling is_subspace may be way too slow and repeat work done below.\n    4547         # It will be very desirable to somehow do this step better.\n -> 4548         if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):\n    4549             try:\n    4550                 sub = self.subspace(sub)\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)\n    3790             True\n    3791         \"\"\"\n -> 3792         return self.is_submodule(other)\n-   3793\n+   3793 \n    3794     def span(self, gens, base_ring=None, check=True, already_echelonized=False):\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)\n    1458             from sage.misc.flatten import flatten\n    1459             return all(x in S for x in flatten(M))\n -> 1460         return all(x in S for x in M.list())\n-   1461\n+   1461 \n    1462     def __iter__(self):\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()\n     154             [      y       x 2*x + y]\n     155         \"\"\"\n --> 156         return list(self._list())\n-    157\n+    157 \n     158     def _list(self):\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()\n     908             FfStepPtr(&(p))\n     909             sig_check()\n --> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])\n     911         self.cache('list', x)\n     912         return x\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()\n-    135\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()\n+    135 \n     136         \"\"\"\n --> 137         return self.field(x)\n     138     cpdef int field_to_int(self, x):\n     139         \"\"\"\n \n-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()\n-    591\n+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()\n+    591 \n     592         if n<0 or n>k.cardinality():\n --> 593             raise TypeError(\"n must be between 0 and self.order()\")\n-    594\n+    594 \n     595         for i from 0 <= i < k.exponent():\n \n TypeError: n must be between 0 and self.order()\n-sage: I.factor()\n-(Ideal (1/x,1/x^3*y^2) of Maximal infinite order of Function field in y defined by y^3 + y^2 + 2*x^4)^4\n ```\n-(This is not the only test that can fail in this file.) However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.\n+However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.\n``````\n",
    "created_at": "2018-10-08T04:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409628",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,123 +1,67 @@
-There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. This was first noticed by the following test in `rings/function_field/ideal.py`:
+This is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the bug:
 
 ```
-sage: K.<x> = FunctionField(GF(3^2)); R.<t> = K[]
-sage: F.<y> = K.extension(t^3 + t^2 - x^4)
-sage: Oinf = F.maximal_order_infinite()
-sage: I = Oinf.ideal(1/y)
-sage: I.factor()   # This will sometimes fail
+sage: A = FreeModule(GF(3^2), 3)
+....: V = A.subspace([A([0,1,0])])
+....: W = A.subspace([A([0,0,0])])
+....: V.quotient_abstract(W)
+....: 
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-2-b9ca13965ba4> in <module>()
-----> 1 I.factor()
+<ipython-input-1-ec765d1b10a4> in <module>()
+      2 V = A.subspace([A([Integer(0),Integer(1),Integer(0)])])
+      3 W = A.subspace([A([Integer(0),Integer(0),Integer(0)])])
+----> 4 V.quotient_abstract(W)
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in factor(self)
-   2671             defined by y^2 + y + (x^2 + 1)/x)^2
-   2672         """
--> 2673         return Factorization(self._factor(), cr=True)
-   2674
-   2675     def _factor(self):
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in _factor(self)
-   2693
-   2694         factors = []
--> 2695         for iprime, exp in O._to_iF(self).factor():
-   2696             prime = FunctionFieldIdealInfinite_global(O, iprime)
-   2697             factors.append((prime, exp))
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in factor(self)
-   1572             True
-   1573         """
--> 1574         return Factorization(self._factor(), cr=True)
-   1575
-   1576     def _factor(self):
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/ideal.pyc in _factor(self)
-   1598         primes = set([o.ideal(p) for p,_ in d.factor()] + [p for p,_ in i.ideal_below().factor()])
-   1599         for prime in primes:
--> 1600             qs = [q[0] for q in O.decomposition(prime)]
-   1601             for q in qs:
-   1602                 exp = q.valuation(self)
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCaller.__call__ (build/cythonized/sage/misc/cachefunc.c:10824)()
-   1951                 return cache[k]
-   1952         except KeyError:
--> 1953             w = self._instance_call(*args, **kwds)
-   1954             cache[k] = w
-   1955             return w
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCaller._instance_call (build/cythonized/sage/misc/cachefunc.c:10280)()
-   1827             True
-   1828         """
--> 1829         return self.f(self._instance, *args, **kwds)
-   1830
-   1831     cdef fix_args_kwds(self, tuple args, dict kwds):
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.pyc in decomposition(self, ideal)
-   1838
-   1839             # J_1, J_2, ...
--> 1840             Jb =[Kb[0]] + [div(Kb[j],Kb[j-1]) for j in range(1,len(Kb))]
-   1841
-   1842             # H_1, H_2, ...
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/function_field/order.pyc in div(Ib, Jb)
-   1805                 sJb = Jb.row_space()
-   1806                 sIb = Ib.row_space()
--> 1807                 sJbsIb,proj_sJbsIb,lift_sJbsIb = sJb.quotient_abstract(sIb)
-   1808                 supplement_basis = [lift_sJbsIb(v) for v in sJbsIb.basis()]
-   1809
-
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)
    4546         # Calling is_subspace may be way too slow and repeat work done below.
    4547         # It will be very desirable to somehow do this step better.
 -> 4548         if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):
    4549             try:
    4550                 sub = self.subspace(sub)
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)
    3790             True
    3791         """
 -> 3792         return self.is_submodule(other)
-   3793
+   3793 
    3794     def span(self, gens, base_ring=None, check=True, already_echelonized=False):
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)
    1458             from sage.misc.flatten import flatten
    1459             return all(x in S for x in flatten(M))
 -> 1460         return all(x in S for x in M.list())
-   1461
+   1461 
    1462     def __iter__(self):
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()
     154             [      y       x 2*x + y]
     155         """
 --> 156         return list(self._list())
-    157
+    157 
     158     def _list(self):
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()
     908             FfStepPtr(&(p))
     909             sig_check()
 --> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])
     911         self.cache('list', x)
     912         return x
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()
-    135
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()
+    135 
     136         """
 --> 137         return self.field(x)
     138     cpdef int field_to_int(self, x):
     139         """
 
-/home/uqtscrim/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()
-    591
+/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()
+    591 
     592         if n<0 or n>k.cardinality():
 --> 593             raise TypeError("n must be between 0 and self.order()")
-    594
+    594 
     595         for i from 0 <= i < k.exponent():
 
 TypeError: n must be between 0 and self.order()
-sage: I.factor()
-(Ideal (1/x,1/x^3*y^2) of Maximal infinite order of Function field in y defined by y^3 + y^2 + 2*x^4)^4
 ```
-(This is not the only test that can fail in this file.) However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.
+However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.
``````




---

archive/issue_comments_409629.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -64,4 +64,4 @@\n \n TypeError: n must be between 0 and self.order()\n ```\n-However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.\n+The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.\n``````\n",
    "created_at": "2018-10-08T04:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409629",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -64,4 +64,4 @@
 
 TypeError: n must be between 0 and self.order()
 ```
-However, once this does finish, it never seems to fail (maybe due to some cache deep down in the call). The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.
+The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.
``````




---

archive/issue_comments_409630.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the bug:\n+There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the issue:\n \n ```\n sage: A = FreeModule(GF(3^2), 3)\n``````\n",
    "created_at": "2018-10-08T04:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409630",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the bug:
+There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the issue:
 
 ```
 sage: A = FreeModule(GF(3^2), 3)
``````




---

archive/issue_events_333199.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-10-08T06:45:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "title_is": "A bug likely with Matrix_gfpn_dense or meataxe",
    "title_was": "Heisenbug with Matrix_gfpn_dense or meataxe",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333199"
}
```



---

archive/issue_comments_409631.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,37 +2,13 @@\n \n ```\n sage: A = FreeModule(GF(3^2), 3)\n-....: V = A.subspace([A([0,1,0])])\n-....: W = A.subspace([A([0,0,0])])\n-....: V.quotient_abstract(W)\n-....: \n+sage: W = A.subspace([A([0,0,0])])\n+sage: N = W.basis_matrix()\n+sage: N.list()\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-1-ec765d1b10a4> in <module>()\n-      2 V = A.subspace([A([Integer(0),Integer(1),Integer(0)])])\n-      3 W = A.subspace([A([Integer(0),Integer(0),Integer(0)])])\n-----> 4 V.quotient_abstract(W)\n-\n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)\n-   4546         # Calling is_subspace may be way too slow and repeat work done below.\n-   4547         # It will be very desirable to somehow do this step better.\n--> 4548         if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):\n-   4549             try:\n-   4550                 sub = self.subspace(sub)\n-\n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)\n-   3790             True\n-   3791         \"\"\"\n--> 3792         return self.is_submodule(other)\n-   3793 \n-   3794     def span(self, gens, base_ring=None, check=True, already_echelonized=False):\n-\n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)\n-   1458             from sage.misc.flatten import flatten\n-   1459             return all(x in S for x in flatten(M))\n--> 1460         return all(x in S for x in M.list())\n-   1461 \n-   1462     def __iter__(self):\n+<ipython-input-126-c002d05d4061> in <module>()\n+----> 1 N.list()\n \n /home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()\n     154             [      y       x 2*x + y]\n@@ -64,4 +40,32 @@\n \n TypeError: n must be between 0 and self.order()\n ```\n-The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.\n+The exact values that are returned with this error are `n = 255` and `self.order() = 9`. \n+\n+On other hand, \n+\n+```\n+sage: A = FreeModule(GF(19^2), 3)\n+sage: W = A.subspace([A([0,0,0])])\n+sage: N = W.basis_matrix()\n+sage: N.list()\n+[]\n+```\n+\n+This does not seem to be a problem when `meataxe` is not installed or on Mac. On Mac, there is a different issue:\n+\n+```\n+sage: A = FreeModule(GF(3^2), 3)\n+sage: W = A.subspace([A([0,0,0])])\n+sage: N = W.basis_matrix()\n+sage: N.list()\n+[0, 0, 0]\n+```\n+\n+```\n+sage: A = FreeModule(GF(19^2), 3)\n+sage: W = A.subspace([A([0,0,0])])\n+sage: N = W.basis_matrix()\n+sage: N.list()\n+[]\n+```\n``````\n",
    "created_at": "2018-10-08T06:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409631",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,37 +2,13 @@
 
 ```
 sage: A = FreeModule(GF(3^2), 3)
-....: V = A.subspace([A([0,1,0])])
-....: W = A.subspace([A([0,0,0])])
-....: V.quotient_abstract(W)
-....: 
+sage: W = A.subspace([A([0,0,0])])
+sage: N = W.basis_matrix()
+sage: N.list()
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-1-ec765d1b10a4> in <module>()
-      2 V = A.subspace([A([Integer(0),Integer(1),Integer(0)])])
-      3 W = A.subspace([A([Integer(0),Integer(0),Integer(0)])])
-----> 4 V.quotient_abstract(W)
-
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in quotient_abstract(self, sub, check)
-   4546         # Calling is_subspace may be way too slow and repeat work done below.
-   4547         # It will be very desirable to somehow do this step better.
--> 4548         if check and (not is_FreeModule(sub) or not sub.is_subspace(self)):
-   4549             try:
-   4550                 sub = self.subspace(sub)
-
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_subspace(self, other)
-   3790             True
-   3791         """
--> 3792         return self.is_submodule(other)
-   3793 
-   3794     def span(self, gens, base_ring=None, check=True, already_echelonized=False):
-
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/modules/free_module.pyc in is_submodule(self, other)
-   1458             from sage.misc.flatten import flatten
-   1459             return all(x in S for x in flatten(M))
--> 1460         return all(x in S for x in M.list())
-   1461 
-   1462     def __iter__(self):
+<ipython-input-126-c002d05d4061> in <module>()
+----> 1 N.list()
 
 /home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()
     154             [      y       x 2*x + y]
@@ -64,4 +40,32 @@
 
 TypeError: n must be between 0 and self.order()
 ```
-The exact values that are returned with this error are `n = 255` and `self.order() = 9`. This does not seem to be a problem when using `GF(19^2)` or when `meataxe` is not installed.
+The exact values that are returned with this error are `n = 255` and `self.order() = 9`. 
+
+On other hand, 
+
+```
+sage: A = FreeModule(GF(19^2), 3)
+sage: W = A.subspace([A([0,0,0])])
+sage: N = W.basis_matrix()
+sage: N.list()
+[]
+```
+
+This does not seem to be a problem when `meataxe` is not installed or on Mac. On Mac, there is a different issue:
+
+```
+sage: A = FreeModule(GF(3^2), 3)
+sage: W = A.subspace([A([0,0,0])])
+sage: N = W.basis_matrix()
+sage: N.list()
+[0, 0, 0]
+```
+
+```
+sage: A = FreeModule(GF(19^2), 3)
+sage: W = A.subspace([A([0,0,0])])
+sage: N = W.basis_matrix()
+sage: N.list()
+[]
+```
``````




---

archive/issue_comments_409632.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n ```\n sage: A = FreeModule(GF(3^2), 3)\n-sage: W = A.subspace([A([0,0,0])])\n+sage: W = A.zero_submodule()\n sage: N = W.basis_matrix()\n sage: N.list()\n ---------------------------------------------------------------------------\n@@ -46,7 +46,7 @@\n \n ```\n sage: A = FreeModule(GF(19^2), 3)\n-sage: W = A.subspace([A([0,0,0])])\n+sage: W = A.zero_submodule()\n sage: N = W.basis_matrix()\n sage: N.list()\n []\n@@ -56,7 +56,7 @@\n \n ```\n sage: A = FreeModule(GF(3^2), 3)\n-sage: W = A.subspace([A([0,0,0])])\n+sage: W = A.zero_submodule()\n sage: N = W.basis_matrix()\n sage: N.list()\n [0, 0, 0]\n@@ -64,7 +64,7 @@\n \n ```\n sage: A = FreeModule(GF(19^2), 3)\n-sage: W = A.subspace([A([0,0,0])])\n+sage: W = A.zero_submodule()\n sage: N = W.basis_matrix()\n sage: N.list()\n []\n``````\n",
    "created_at": "2018-10-08T06:48:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409632",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 ```
 sage: A = FreeModule(GF(3^2), 3)
-sage: W = A.subspace([A([0,0,0])])
+sage: W = A.zero_submodule()
 sage: N = W.basis_matrix()
 sage: N.list()
 ---------------------------------------------------------------------------
@@ -46,7 +46,7 @@
 
 ```
 sage: A = FreeModule(GF(19^2), 3)
-sage: W = A.subspace([A([0,0,0])])
+sage: W = A.zero_submodule()
 sage: N = W.basis_matrix()
 sage: N.list()
 []
@@ -56,7 +56,7 @@
 
 ```
 sage: A = FreeModule(GF(3^2), 3)
-sage: W = A.subspace([A([0,0,0])])
+sage: W = A.zero_submodule()
 sage: N = W.basis_matrix()
 sage: N.list()
 [0, 0, 0]
@@ -64,7 +64,7 @@
 
 ```
 sage: A = FreeModule(GF(19^2), 3)
-sage: W = A.subspace([A([0,0,0])])
+sage: W = A.zero_submodule()
 sage: N = W.basis_matrix()
 sage: N.list()
 []
``````




---

archive/issue_comments_409633.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nPlease do not always change the ticket description. It makes me get a long mail (stating the old description but not the new one). Moreover it hides what you have actually changed (unless one clicks on the \"diff\" button).\n\nSo please, when you dig further, write a comment.",
    "created_at": "2018-10-08T09:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409633",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'>Comment 16:</a>
Please do not always change the ticket description. It makes me get a long mail (stating the old description but not the new one). Moreover it hides what you have actually changed (unless one clicks on the "diff" button).

So please, when you dig further, write a comment.



---

archive/issue_comments_409634.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSince its optional I don't really see this as a blocker; Though if a simple bugfix materializes really soon I'd consider merging it...",
    "created_at": "2018-10-11T22:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409634",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'>Comment 17:</a>
Since its optional I don't really see this as a blocker; Though if a simple bugfix materializes really soon I'd consider merging it...



---

archive/issue_events_333200.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-10-12T00:32:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333200"
}
```



---

archive/issue_events_333201.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2018-10-12T00:32:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333201"
}
```



---

archive/issue_comments_409635.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2018-10-15T11:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409635",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_409636.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,37 +1,27 @@\n-There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the issue:\n+Listing a meataxe matrix with zero rows is broken:\n \n ```\n-sage: A = FreeModule(GF(3^2), 3)\n-sage: W = A.zero_submodule()\n-sage: N = W.basis_matrix()\n-sage: N.list()\n+sage: Matrix(GF(9), 0, 3)._list()\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-126-c002d05d4061> in <module>()\n-----> 1 N.list()\n+<ipython-input-3-673c5638db92> in <module>()\n+----> 1 Matrix(GF(Integer(9)), Integer(0), Integer(3))._list()\n \n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()\n-    154             [      y       x 2*x + y]\n-    155         \"\"\"\n---> 156         return list(self._list())\n-    157 \n-    158     def _list(self):\n-\n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()\n     908             FfStepPtr(&(p))\n     909             sig_check()\n --> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])\n     911         self.cache('list', x)\n     912         return x\n \n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()\n     135 \n     136         \"\"\"\n --> 137         return self.field(x)\n     138     cpdef int field_to_int(self, x):\n     139         \"\"\"\n \n-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()\n+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()\n     591 \n     592         if n<0 or n>k.cardinality():\n --> 593             raise TypeError(\"n must be between 0 and self.order()\")\n@@ -40,32 +30,3 @@\n \n TypeError: n must be between 0 and self.order()\n ```\n-The exact values that are returned with this error are `n = 255` and `self.order() = 9`. \n-\n-On other hand, \n-\n-```\n-sage: A = FreeModule(GF(19^2), 3)\n-sage: W = A.zero_submodule()\n-sage: N = W.basis_matrix()\n-sage: N.list()\n-[]\n-```\n-\n-This does not seem to be a problem when `meataxe` is not installed or on Mac. On Mac, there is a different issue:\n-\n-```\n-sage: A = FreeModule(GF(3^2), 3)\n-sage: W = A.zero_submodule()\n-sage: N = W.basis_matrix()\n-sage: N.list()\n-[0, 0, 0]\n-```\n-\n-```\n-sage: A = FreeModule(GF(19^2), 3)\n-sage: W = A.zero_submodule()\n-sage: N = W.basis_matrix()\n-sage: N.list()\n-[]\n-```\n``````\n",
    "created_at": "2018-10-15T11:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409636",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,37 +1,27 @@
-There is likely an issue with `Matrix_gfpn_dense` or `meataxe`, which is likely caused by where things are in memory. To see the issue:
+Listing a meataxe matrix with zero rows is broken:
 
 ```
-sage: A = FreeModule(GF(3^2), 3)
-sage: W = A.zero_submodule()
-sage: N = W.basis_matrix()
-sage: N.list()
+sage: Matrix(GF(9), 0, 3)._list()
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-126-c002d05d4061> in <module>()
-----> 1 N.list()
+<ipython-input-3-673c5638db92> in <module>()
+----> 1 Matrix(GF(Integer(9)), Integer(0), Integer(3))._list()
 
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.list (build/cythonized/sage/matrix/matrix0.c:4165)()
-    154             [      y       x 2*x + y]
-    155         """
---> 156         return list(self._list())
-    157 
-    158     def _list(self):
-
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._list (build/cythonized/sage/matrix/matrix_gfpn_dense.c:9038)()
     908             FfStepPtr(&(p))
     909             sig_check()
 --> 910         x.extend([self._converter.int_to_field(FfToInt(FfExtract(p,j))) for j in range(self.Data.Noc)])
     911         self.cache('list', x)
     912         return x
 
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/matrix/matrix_gfpn_dense.pyx in sage.matrix.matrix_gfpn_dense.FieldConverter_class.int_to_field (build/cythonized/sage/matrix/matrix_gfpn_dense.c:3717)()
     135 
     136         """
 --> 137         return self.field(x)
     138     cpdef int field_to_int(self, x):
     139         """
 
-/home/sage/patchbot/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()
+/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/rings/finite_rings/element_givaro.pyx in sage.rings.finite_rings.element_givaro.Cache_givaro.fetch_int (build/cythonized/sage/rings/finite_rings/element_givaro.cpp:8618)()
     591 
     592         if n<0 or n>k.cardinality():
 --> 593             raise TypeError("n must be between 0 and self.order()")
@@ -40,32 +30,3 @@
 
 TypeError: n must be between 0 and self.order()
 ```
-The exact values that are returned with this error are `n = 255` and `self.order() = 9`. 
-
-On other hand, 
-
-```
-sage: A = FreeModule(GF(19^2), 3)
-sage: W = A.zero_submodule()
-sage: N = W.basis_matrix()
-sage: N.list()
-[]
-```
-
-This does not seem to be a problem when `meataxe` is not installed or on Mac. On Mac, there is a different issue:
-
-```
-sage: A = FreeModule(GF(3^2), 3)
-sage: W = A.zero_submodule()
-sage: N = W.basis_matrix()
-sage: N.list()
-[0, 0, 0]
-```
-
-```
-sage: A = FreeModule(GF(19^2), 3)
-sage: W = A.zero_submodule()
-sage: N = W.basis_matrix()
-sage: N.list()
-[]
-```
``````




---

archive/issue_comments_409637.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nNice! So, the problem is just a corner case that was forgotten to be dealt with in my *wrapper* for SharedMeatAxe. That's a big relief. I thought it would be caused by a problem in SharedMeatAxe's memory management.",
    "created_at": "2018-10-15T11:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409637",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'>Comment 20:</a>
Nice! So, the problem is just a corner case that was forgotten to be dealt with in my *wrapper* for SharedMeatAxe. That's a big relief. I thought it would be caused by a problem in SharedMeatAxe's memory management.



---

archive/issue_comments_409638.json:
```json
{
    "body": "Branch: **[u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe)**",
    "created_at": "2018-10-15T11:23:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409638",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe)**



---

archive/issue_events_333202.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-10-15T11:24:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "title_is": "Listing meataxe matrices with zero rows is broken",
    "title_was": "A bug likely with Matrix_gfpn_dense or meataxe",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333202"
}
```



---

archive/issue_comments_409639.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391\">828b188</a></td><td><code>Fix listing meataxe matrices with zero rows</code></td></tr></table>\n",
    "created_at": "2018-10-15T11:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409639",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>Comment 22:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391">828b188</a></td><td><code>Fix listing meataxe matrices with zero rows</code></td></tr></table>




---

archive/issue_comments_409640.json:
```json
{
    "body": "Commit: **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**",
    "created_at": "2018-10-15T11:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409640",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**



---

archive/issue_comments_409641.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-Listing a meataxe matrix with zero rows is broken:\n \n ```\n sage: Matrix(GF(9), 0, 3)._list()\n``````\n",
    "created_at": "2018-10-15T11:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409641",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-Listing a meataxe matrix with zero rows is broken:
 
 ```
 sage: Matrix(GF(9), 0, 3)._list()
``````




---

archive/issue_events_333203.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-10-15T11:24:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333203"
}
```



---

archive/issue_comments_409642.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThe mystery is why this bug suddenly shows up now. As far as I can tell (by looking at git history), this has been broken all the time since #12103.",
    "created_at": "2018-10-15T11:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409642",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>Comment 23:</a>
The mystery is why this bug suddenly shows up now. As far as I can tell (by looking at git history), this has been broken all the time since #12103.



---

archive/issue_comments_409643.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@jdemeyer](#comment%3A23):\n> The mystery is why this bug suddenly shows up now. As far as I can tell (by looking at git history), this has been broken all the time since #12103.\n\nWell, it is not a big surprise if the old code accessed uninitialised memory.",
    "created_at": "2018-10-15T15:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409643",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@jdemeyer](#comment%3A23):
> The mystery is why this bug suddenly shows up now. As far as I can tell (by looking at git history), this has been broken all the time since #12103.

Well, it is not a big surprise if the old code accessed uninitialised memory.



---

archive/issue_comments_409644.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nPatchbot passed on sage4 which has `meataxe` installed.",
    "created_at": "2018-10-15T15:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409644",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>Comment 25:</a>
Patchbot passed on sage4 which has `meataxe` installed.



---

archive/issue_comments_409645.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-10-18T17:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409645",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_333204.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-18T17:10:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333204"
}
```



---

archive/issue_events_333205.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-18T17:10:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333205"
}
```



---

archive/issue_comments_409646.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nLGTM. Thank you Jeroen.",
    "created_at": "2018-10-18T17:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409646",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'>Comment 26:</a>
LGTM. Thank you Jeroen.



---

archive/issue_comments_409647.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe)** to **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**",
    "created_at": "2018-10-20T11:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409647",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/a_bug_likely_with_matrix_gfpn_dense_or_meataxe)** to **[828b188](https://github.com/sagemath/sagetrac-mirror/commit/828b18891f09f40960bc6a7f3aa1510cfb679391)**



---

archive/issue_events_333206.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-20T11:58:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333206"
}
```



---

archive/issue_events_333207.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c6fe9ebcc0eb7cffc5b5c3ef911e2a16cdd5d40b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-10-20T11:58:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333207"
}
```



---

archive/issue_events_333208.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T14:52:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333208"
}
```



---

archive/issue_events_333209.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T14:52:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26389#event-333209"
}
```



---

archive/issue_comments_409648.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThis should be re-targeted for 8.5.",
    "created_at": "2018-10-28T14:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26389#issuecomment-409648",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'>Comment 28:</a>
This should be re-targeted for 8.5.
