# Issue 26561: clean static_sparse_graph.pyx

archive/issues_026324.json:
```json
{
    "body": "Done in this ticket:\n- update the module's documentation as we forgot to do it in #26447\n- use `vertex_list` in several methods and also free data structure\n- PEP8\n\nNot done:\n- method `spectral_radius` is untouched to avoid conflict with #26559\n\nCC:  @tscrim @fchapoton @nthiery\n\nKeywords: py3, graph\n\nBranch/Commit: 0c0ab5e9387f591c738fa097881b07dd650a48f0\n\nReviewer: Travis Scrimshaw\n\nAuthor: David Coudert\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26561\n\n",
    "closed_at": "2018-10-28T20:26:14Z",
    "created_at": "2018-10-26T17:21:52Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "clean static_sparse_graph.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26561",
    "user": "https://github.com/dcoudert"
}
```
Done in this ticket:
- update the module's documentation as we forgot to do it in #26447
- use `vertex_list` in several methods and also free data structure
- PEP8

Not done:
- method `spectral_radius` is untouched to avoid conflict with #26559

CC:  @tscrim @fchapoton @nthiery

Keywords: py3, graph

Branch/Commit: 0c0ab5e9387f591c738fa097881b07dd650a48f0

Reviewer: Travis Scrimshaw

Author: David Coudert

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26561





---

archive/issue_comments_504193.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[4e49999](https://github.com/sagemath/sagetrac-mirror/commit/4e49999df3d8f68567343e6ff26b39929b6adf3f)|`trac #26561: clean static_sparse_graph.pyx`|",
    "created_at": "2018-10-26T17:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504193",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[4e49999](https://github.com/sagemath/sagetrac-mirror/commit/4e49999df3d8f68567343e6ff26b39929b6adf3f)|`trac #26561: clean static_sparse_graph.pyx`|



---

archive/issue_comments_504194.json:
```json
{
    "body": "Changing commit from \"\" to \"4e49999df3d8f68567343e6ff26b39929b6adf3f\"",
    "created_at": "2018-10-26T17:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504194",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "" to "4e49999df3d8f68567343e6ff26b39929b6adf3f"



---

archive/issue_comments_504195.json:
```json
{
    "body": "Changing branch from \"\" to \"public/26561_static_sparse_graph\"",
    "created_at": "2018-10-26T17:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504195",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "public/26561_static_sparse_graph"



---

archive/issue_comments_504196.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-26T17:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504196",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_504197.json:
```json
{
    "body": "<a id='comment:2'></a>\nLittle thing, but is is probably better to do `Integer(count[i]/2)` -> `Integer(count[i]//2)` (do we even need the `Integer` after that change?). Otherwise LGTM.",
    "created_at": "2018-10-27T02:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504197",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Little thing, but is is probably better to do `Integer(count[i]/2)` -> `Integer(count[i]//2)` (do we even need the `Integer` after that change?). Otherwise LGTM.



---

archive/issue_comments_504198.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-10-27T02:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504198",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_504199.json:
```json
{
    "body": "<a id='comment:3'></a>\nActually, the patchbot has one seemingly real failure:\n\n```\nsage -t --long src/sage/categories/finite_semigroups.py  # 1 doctest failed\n```\ndue to a change in the output order.",
    "created_at": "2018-10-27T02:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504199",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Actually, the patchbot has one seemingly real failure:

```
sage -t --long src/sage/categories/finite_semigroups.py  # 1 doctest failed
```
due to a change in the output order.



---

archive/issue_comments_504200.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[0c0ab5e](https://github.com/sagemath/sagetrac-mirror/commit/0c0ab5e9387f591c738fa097881b07dd650a48f0)|`trac #26561: fix doctests in finite_semigroups.py`|",
    "created_at": "2018-10-27T06:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[0c0ab5e](https://github.com/sagemath/sagetrac-mirror/commit/0c0ab5e9387f591c738fa097881b07dd650a48f0)|`trac #26561: fix doctests in finite_semigroups.py`|



---

archive/issue_comments_504201.json:
```json
{
    "body": "Changing commit from \"4e49999df3d8f68567343e6ff26b39929b6adf3f\" to \"0c0ab5e9387f591c738fa097881b07dd650a48f0\"",
    "created_at": "2018-10-27T06:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4e49999df3d8f68567343e6ff26b39929b6adf3f" to "0c0ab5e9387f591c738fa097881b07dd650a48f0"



---

archive/issue_comments_504202.json:
```json
{
    "body": "<a id='comment:5'></a>\nWithout `Integer`, we get:\n\n```\nsage: triangles_count(graphs.PetersenGraph())\n{0: 0L, 1: 0L, 2: 0L, 3: 0L, 4: 0L, 5: 0L, 6: 0L, 7: 0L, 8: 0L, 9: 0L}\n```\n\n`@`Nicolas: can you check the impact of what is done here on `finite_semigroups`. Roughly, we change the internal ordering of vertices during computations, and so the order in which strongly connected components are returned might change. Thanks.",
    "created_at": "2018-10-27T07:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504202",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>
Without `Integer`, we get:

```
sage: triangles_count(graphs.PetersenGraph())
{0: 0L, 1: 0L, 2: 0L, 3: 0L, 4: 0L, 5: 0L, 6: 0L, 7: 0L, 8: 0L, 9: 0L}
```

`@`Nicolas: can you check the impact of what is done here on `finite_semigroups`. Roughly, we change the internal ordering of vertices during computations, and so the order in which strongly connected components are returned might change. Thanks.



---

archive/issue_comments_504203.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for the notice. As far as I can remember, the algorithm in finite semigroups do not depend on the order in which strongly connected components are returned. So worst comes to worst, this will only require to update some doctests w.r.t. change of orders.",
    "created_at": "2018-10-27T10:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504203",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
Thanks for the notice. As far as I can remember, the algorithm in finite semigroups do not depend on the order in which strongly connected components are returned. So worst comes to worst, this will only require to update some doctests w.r.t. change of orders.



---

archive/issue_comments_504204.json:
```json
{
    "body": "<a id='comment:7'></a>\nThank you Nicolas. We have already change the failing doctest in `finite_semigroups`.",
    "created_at": "2018-10-27T10:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504204",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
Thank you Nicolas. We have already change the failing doctest in `finite_semigroups`.



---

archive/issue_comments_504205.json:
```json
{
    "body": "<a id='comment:8'></a>\n`@`dcoudert Thanks for checking. LGTM.",
    "created_at": "2018-10-27T13:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504205",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
`@`dcoudert Thanks for checking. LGTM.



---

archive/issue_comments_504206.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-27T13:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504206",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_504207.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-28T20:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504207",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_504208.json:
```json
{
    "body": "Changing branch from \"public/26561_static_sparse_graph\" to \"0c0ab5e9387f591c738fa097881b07dd650a48f0\"",
    "created_at": "2018-10-28T20:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26561#issuecomment-504208",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/26561_static_sparse_graph" to "0c0ab5e9387f591c738fa097881b07dd650a48f0"



---

archive/issue_events_082773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-28T20:26:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26561",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26561#event-82773"
}
```
