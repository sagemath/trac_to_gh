# Issue 26964: ./bootstrap: Format build/pkgs/SPKG/distros/ information to produce the apt-get/yum command lines shown in the installation manual

archive/issues_026727.json:
```json
{
    "assignees": [],
    "body": "When trying to build Sage on a very bare fedora install (e.g. a Docker container) the packages listed in the build instructions at:\n\nhttps://doc.sagemath.org/html/en/installation/source.html#linux-prerequisite-installation\n\nare insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953. The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.\n\nWith #29053, the necessary distribution packages for an installation are cataloged in `build/pkgs/fedora.txt`, `build/pkgs/SPKG/distros/fedora.txt` and similar for other distributions.\n\nIn this ticket, we add to `bootstrap` some code to keep the `yum` (and `apt-get` for debian) command-lines in the  installation manual up to date. #29053 prepared this by isolating these command lines in separate .txt files in `src/doc`.\n\n\n\nCC:  @dimpase @embray @jhpalmieri\n\nComponent: **documentation**\n\nAuthor: **Matthias Koeppe**\n\nBranch: **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**\n\nReviewer: **John Palmieri, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26964_\n\n",
    "closed_at": "2020-02-21T22:17:28Z",
    "created_at": "2018-12-28T15:49:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "./bootstrap: Format build/pkgs/SPKG/distros/ information to produce the apt-get/yum command lines shown in the installation manual",
    "type": "issue",
    "updated_at": "2020-02-22T16:06:04Z",
    "url": "https://github.com/sagemath/sage/issues/26964",
    "user": "https://github.com/embray"
}
```
When trying to build Sage on a very bare fedora install (e.g. a Docker container) the packages listed in the build instructions at:

https://doc.sagemath.org/html/en/installation/source.html#linux-prerequisite-installation

are insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953. The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.

With #29053, the necessary distribution packages for an installation are cataloged in `build/pkgs/fedora.txt`, `build/pkgs/SPKG/distros/fedora.txt` and similar for other distributions.

In this ticket, we add to `bootstrap` some code to keep the `yum` (and `apt-get` for debian) command-lines in the  installation manual up to date. #29053 prepared this by isolating these command lines in separate .txt files in `src/doc`.



CC:  @dimpase @embray @jhpalmieri

Component: **documentation**

Author: **Matthias Koeppe**

Branch: **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**

Reviewer: **John Palmieri, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/26964_





---

archive/issue_events_367567.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T15:49:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367567"
}
```



---

archive/issue_events_367568.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T15:49:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367568"
}
```



---

archive/issue_events_367569.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T15:49:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367569"
}
```



---

archive/issue_events_367570.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T15:49:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367570"
}
```



---

archive/issue_events_367571.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T15:56:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "title_is": "missing packages in instructions for building Sage on fedora",
    "title_was": "missing packages for building Sage on fedora",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367571"
}
```



---

archive/issue_comments_415670.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nRetarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415670",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_367572.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367572"
}
```



---

archive/issue_events_367573.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367573"
}
```



---

archive/issue_events_367574.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:44:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367574"
}
```



---

archive/issue_events_367575.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:44:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367575"
}
```



---

archive/issue_comments_415671.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nRemoving most of the rest of my open tickets out of the 8.7 milestone, which should be closed.",
    "created_at": "2019-03-25T10:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415671",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.



---

archive/issue_comments_415672.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAdded these 2 packages to #29053.",
    "created_at": "2020-01-27T19:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415672",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Added these 2 packages to #29053.



---

archive/issue_comments_415673.json:
```json
{
    "body": "Dependencies: **#29053**",
    "created_at": "2020-01-27T19:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415673",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29053**



---

archive/issue_comments_415674.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,10 @@\n \n https://doc.sagemath.org/html/en/installation/source.html#linux-prerequisite-installation\n \n-are insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953.\n+are insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953. The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.\n \n-The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.\n+With #29053, the necessary distribution packages for an installation are cataloged in `build/pkgs/fedora.txt`, `build/pkgs/SPKG/distros/fedora.txt` and similar for other distributions.\n+\n+In this ticket, we add to `bootstrap` some code to keep the `yum` (and `apt-get` for debian) command-lines in the  installation manual up to date. #29053 prepared this by isolating these command lines in separate .txt files in `src/doc`.\n+\n+\n``````\n",
    "created_at": "2020-02-01T15:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415674",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,10 @@
 
 https://doc.sagemath.org/html/en/installation/source.html#linux-prerequisite-installation
 
-are insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953.
+are insufficient.  At the very least it also needs `findutils` and `which`, and currently it also requires `python2`, though that should be fixed as part of  #26953. The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.
 
-The need for `which` comes, at the very least, from MPIR's `configure` script, which uses `which` at least on Linux.
+With #29053, the necessary distribution packages for an installation are cataloged in `build/pkgs/fedora.txt`, `build/pkgs/SPKG/distros/fedora.txt` and similar for other distributions.
+
+In this ticket, we add to `bootstrap` some code to keep the `yum` (and `apt-get` for debian) command-lines in the  installation manual up to date. #29053 prepared this by isolating these command lines in separate .txt files in `src/doc`.
+
+
``````




---

archive/issue_events_367576.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-01T15:03:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "title_is": "./bootstrap: Format build/pkgs/SPKG/distros/ information to produce the apt-get/yum command lines shown in the installation manual",
    "title_was": "missing packages in instructions for building Sage on fedora",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367576"
}
```



---

archive/issue_events_367577.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-01T15:03:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367577"
}
```



---

archive/issue_events_367578.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-01T15:03:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367578"
}
```



---

archive/issue_comments_415675.json:
```json
{
    "body": "Changed dependencies from **#29053** to none",
    "created_at": "2020-02-01T15:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415675",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29053** to none



---

archive/issue_comments_415676.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm not sure how I feel about using the bootstrap script for this purpose.  I think I would prefer if it were done by configure instead.  Reason: The bootstrap script should really be limited to tasks specific to generating the `configure` file (whether running autoreconf or downloadng it).  Other than that, I think this is a great idea!",
    "created_at": "2020-02-05T11:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415676",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm not sure how I feel about using the bootstrap script for this purpose.  I think I would prefer if it were done by configure instead.  Reason: The bootstrap script should really be limited to tasks specific to generating the `configure` file (whether running autoreconf or downloadng it).  Other than that, I think this is a great idea!



---

archive/issue_events_367579.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-05T13:50:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367579"
}
```



---

archive/issue_comments_415677.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNo, no, `bootstrap` is exactly the right phase for this, not `configure`. Let me explain more.\n\n`bootstrap` will prepare a source tree so that\n- `make sdist` can be run\n- `configure` can be run by a user (who does not have autotools)\n- `src/setup.py sdist` can be run.\n- `src/configure` can be run (#29119)\n\nNone of this depends on the configuration determined by `configure`!\n\nAs the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.",
    "created_at": "2020-02-05T13:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415677",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

No, no, `bootstrap` is exactly the right phase for this, not `configure`. Let me explain more.

`bootstrap` will prepare a source tree so that
- `make sdist` can be run
- `configure` can be run by a user (who does not have autotools)
- `src/setup.py sdist` can be run.
- `src/configure` can be run (#29119)

None of this depends on the configuration determined by `configure`!

As the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.



---

archive/issue_comments_415678.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> As the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.\n\nI want to clarify something about this here:  Do you mean the sagelib sdist, or the sage-the-distribution sdist?\n\nI sort of see your point, but I'm still not sure why it needs to go here.  Also, as part of #29119 I'm adding a `src/bootstrap` script for sagelib itself, so maybe something like this would make more sense to go there.\n\nAnyways, setting back to needs_work since no branch is attached.  Maybe then I'll see what you're talking about.",
    "created_at": "2020-02-06T11:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415678",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mkoeppe](#comment%3A7):
> As the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.

I want to clarify something about this here:  Do you mean the sagelib sdist, or the sage-the-distribution sdist?

I sort of see your point, but I'm still not sure why it needs to go here.  Also, as part of #29119 I'm adding a `src/bootstrap` script for sagelib itself, so maybe something like this would make more sense to go there.

Anyways, setting back to needs_work since no branch is attached.  Maybe then I'll see what you're talking about.



---

archive/issue_events_367580.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-06T11:45:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367580"
}
```



---

archive/issue_events_367581.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-06T11:45:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367581"
}
```



---

archive/issue_comments_415679.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCouldn't this also be done as part of `make sdist`?",
    "created_at": "2020-02-06T11:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415679",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

Couldn't this also be done as part of `make sdist`?



---

archive/issue_comments_415680.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@embray](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A7):\n> > As the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.\n\n> \n> I want to clarify something about this here:  Do you mean the sagelib sdist, or the sage-the-distribution sdist?\n\nBoth.\n\nCurrently, of course, only sage-the-distribution has a working sdist.\n\nsagelib's sdist needs fixing. You might remember ticket #21516 - Fix sagelib sdist (`src/setup.py sdist`). \n\n\n> I sort of see your point, but I'm still not sure why it needs to go here.  Also, as part of #29119 I'm adding a `src/bootstrap` script for sagelib itself, so maybe something like this would make more sense to go there.\n\nIn my opinion, there should only be one developer-invoked `bootstrap` script (the one for the distribution) -- because everything will depend on the distribution's `build/pkgs` files. \n\n`SAGE_ROOT/bootstrap` could certainly call a new script `src/bootstrap` for generating files that end up in `src/`. If you create that in #29119, fine. \n\n\n> Anyways, setting back to needs_work since no branch is attached.  Maybe then I'll see what you're talking about.\n\nSure. #29041 (src/requirements.txt, src/constraints.txt, src/setup.cfg) has a branch, needs review.",
    "created_at": "2020-02-06T12:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415680",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@embray](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A7):
> > As the installation manual sources are part of the sagelib sdist, the command lines of this ticket should be prepared in the bootstrap phase.

> 
> I want to clarify something about this here:  Do you mean the sagelib sdist, or the sage-the-distribution sdist?

Both.

Currently, of course, only sage-the-distribution has a working sdist.

sagelib's sdist needs fixing. You might remember ticket #21516 - Fix sagelib sdist (`src/setup.py sdist`). 


> I sort of see your point, but I'm still not sure why it needs to go here.  Also, as part of #29119 I'm adding a `src/bootstrap` script for sagelib itself, so maybe something like this would make more sense to go there.

In my opinion, there should only be one developer-invoked `bootstrap` script (the one for the distribution) -- because everything will depend on the distribution's `build/pkgs` files. 

`SAGE_ROOT/bootstrap` could certainly call a new script `src/bootstrap` for generating files that end up in `src/`. If you create that in #29119, fine. 


> Anyways, setting back to needs_work since no branch is attached.  Maybe then I'll see what you're talking about.

Sure. #29041 (src/requirements.txt, src/constraints.txt, src/setup.cfg) has a branch, needs review.



---

archive/issue_comments_415681.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@embray](#comment%3A9):\n> Couldn't this also be done as part of `make sdist`?\n\nNo, because developers who build sage out of a git worktree do not run `make sdist`.",
    "created_at": "2020-02-06T12:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415681",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@embray](#comment%3A9):
> Couldn't this also be done as part of `make sdist`?

No, because developers who build sage out of a git worktree do not run `make sdist`.



---

archive/issue_comments_415682.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual)**",
    "created_at": "2020-02-08T03:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415682",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual)**



---

archive/issue_comments_415683.json:
```json
{
    "body": "Commit: **[`438bc7f`](https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8)**",
    "created_at": "2020-02-09T19:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415683",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`438bc7f`](https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8)**



---

archive/issue_comments_415684.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8\"><code>438bc7f</code></a></td><td><code>./bootstrap, src/doc/bootstrap: Auto-generate apt-get/yum command lines</code></td></tr></table>\n",
    "created_at": "2020-02-09T19:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8"><code>438bc7f</code></a></td><td><code>./bootstrap, src/doc/bootstrap: Auto-generate apt-get/yum command lines</code></td></tr></table>




---

archive/issue_events_367582.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-09T19:34:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367582"
}
```



---

archive/issue_events_367583.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-09T19:34:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367583"
}
```



---

archive/issue_comments_415685.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-02-09T19:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415685",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_415686.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77\"><code>3810bc9</code></a></td><td><code>Clean and ignore the generated files</code></td></tr></table>\n",
    "created_at": "2020-02-09T19:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415686",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77"><code>3810bc9</code></a></td><td><code>Clean and ignore the generated files</code></td></tr></table>




---

archive/issue_comments_415687.json:
```json
{
    "body": "Changed commit from **[`438bc7f`](https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8)** to **[`3810bc9`](https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77)**",
    "created_at": "2020-02-09T19:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`438bc7f`](https://github.com/sagemath/sagetrac-mirror/commit/438bc7fb739b571e82674e69210f81e7ec29c5e8)** to **[`3810bc9`](https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77)**



---

archive/issue_comments_415688.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85\"><code>bdd69c3</code></a></td><td><code>build/bin/write-dockerfile.sh: Copy src/doc/bootstrap early</code></td></tr></table>\n",
    "created_at": "2020-02-11T21:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85"><code>bdd69c3</code></a></td><td><code>build/bin/write-dockerfile.sh: Copy src/doc/bootstrap early</code></td></tr></table>




---

archive/issue_comments_415689.json:
```json
{
    "body": "Changed commit from **[`3810bc9`](https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77)** to **[`bdd69c3`](https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85)**",
    "created_at": "2020-02-11T21:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415689",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3810bc9`](https://github.com/sagemath/sagetrac-mirror/commit/3810bc9835050073f663109d576eae1157bf4f77)** to **[`bdd69c3`](https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85)**



---

archive/issue_comments_415690.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b\"><code>8be072b</code></a></td><td><code>build/bin/write-dockerfile.sh: Copy src/doc/bootstrap early</code></td></tr></table>\n",
    "created_at": "2020-02-11T21:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415690",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b"><code>8be072b</code></a></td><td><code>build/bin/write-dockerfile.sh: Copy src/doc/bootstrap early</code></td></tr></table>




---

archive/issue_comments_415691.json:
```json
{
    "body": "Changed commit from **[`bdd69c3`](https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85)** to **[`8be072b`](https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b)**",
    "created_at": "2020-02-11T21:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415691",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bdd69c3`](https://github.com/sagemath/sagetrac-mirror/commit/bdd69c3bd85b2d33a253ef8c7edde6ca8adffb85)** to **[`8be072b`](https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b)**



---

archive/issue_comments_415692.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3b5fde2de16af33fdb0624b6484104b88642ca9\"><code>e3b5fde</code></a></td><td><code>bootstrap: Pass SAGE_ROOT to src/doc/bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50\"><code>3874194</code></a></td><td><code>src/doc/bootstrap: Create output dir if it does not exist (for Docker run)</code></td></tr></table>\n",
    "created_at": "2020-02-11T21:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415692",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3b5fde2de16af33fdb0624b6484104b88642ca9"><code>e3b5fde</code></a></td><td><code>bootstrap: Pass SAGE_ROOT to src/doc/bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50"><code>3874194</code></a></td><td><code>src/doc/bootstrap: Create output dir if it does not exist (for Docker run)</code></td></tr></table>




---

archive/issue_comments_415693.json:
```json
{
    "body": "Changed commit from **[`8be072b`](https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b)** to **[`3874194`](https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50)**",
    "created_at": "2020-02-11T21:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8be072b`](https://github.com/sagemath/sagetrac-mirror/commit/8be072b7244b342c6b70737cc36409121b70b41b)** to **[`3874194`](https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50)**



---

archive/issue_comments_415694.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nsomething is not quite right:\n\n```\n(sage-sh) dimpase@clpc171:sage$ ./build/bin/sage-print-system-package-command debian gmp\nsudo apt-get gmp \n(sage-sh) dimpase@clpc171:sage$ ./build/bin/sage-print-system-package-command conda gmp\n# gmp the following packages: \n```\n- so `debian` works, `conda` does not...",
    "created_at": "2020-02-11T22:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415694",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

something is not quite right:

```
(sage-sh) dimpase@clpc171:sage$ ./build/bin/sage-print-system-package-command debian gmp
sudo apt-get gmp 
(sage-sh) dimpase@clpc171:sage$ ./build/bin/sage-print-system-package-command conda gmp
# gmp the following packages: 
```
- so `debian` works, `conda` does not...



---

archive/issue_comments_415695.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nyou forgot the verb `install` in both commands",
    "created_at": "2020-02-12T02:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415695",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

you forgot the verb `install` in both commands



---

archive/issue_comments_415696.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007\"><code>eb7a1d9</code></a></td><td><code>build/bin/sage-print-system-package-command: Print usage message if not enough arguments provided</code></td></tr></table>\n",
    "created_at": "2020-02-12T02:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415696",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007"><code>eb7a1d9</code></a></td><td><code>build/bin/sage-print-system-package-command: Print usage message if not enough arguments provided</code></td></tr></table>




---

archive/issue_comments_415697.json:
```json
{
    "body": "Changed commit from **[`3874194`](https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50)** to **[`eb7a1d9`](https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007)**",
    "created_at": "2020-02-12T02:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415697",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3874194`](https://github.com/sagemath/sagetrac-mirror/commit/38741947257da00371142bd7ca4099909717cc50)** to **[`eb7a1d9`](https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007)**



---

archive/issue_comments_415698.json:
```json
{
    "body": "Changed commit from **[`eb7a1d9`](https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007)** to **[`146a520`](https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d)**",
    "created_at": "2020-02-12T02:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415698",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eb7a1d9`](https://github.com/sagemath/sagetrac-mirror/commit/eb7a1d9b9a16c40a5a30c9451d14b5e078b88007)** to **[`146a520`](https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d)**



---

archive/issue_comments_415699.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d\"><code>146a520</code></a></td><td><code>build/bin/sage-print-system-package-command: Do not print a command if no packages are to be installed</code></td></tr></table>\n",
    "created_at": "2020-02-12T02:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d"><code>146a520</code></a></td><td><code>build/bin/sage-print-system-package-command: Do not print a command if no packages are to be installed</code></td></tr></table>




---

archive/issue_comments_415700.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment%3A11):\n> Replying to [@embray](#comment%3A9):\n> > Couldn't this also be done as part of `make sdist`?\n\n> \n> No, because developers who build sage out of a git worktree do not run `make sdist`.\n\nSure, but what is required for running `make sdist`?  It seems to me this should be done in two separate cases: One when running `make sdist` and one when developing out of source.  In either case I don't think the bootstrap script is the appropriate place for it.\n\nThe only reason you seem to be putting it there is that it would happen to cover both cases, but I think both cases should be handled separately.",
    "created_at": "2020-02-12T17:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415700",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment%3A11):
> Replying to [@embray](#comment%3A9):
> > Couldn't this also be done as part of `make sdist`?

> 
> No, because developers who build sage out of a git worktree do not run `make sdist`.

Sure, but what is required for running `make sdist`?  It seems to me this should be done in two separate cases: One when running `make sdist` and one when developing out of source.  In either case I don't think the bootstrap script is the appropriate place for it.

The only reason you seem to be putting it there is that it would happen to cover both cases, but I think both cases should be handled separately.



---

archive/issue_comments_415701.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think I might see part of the problem here:  It is true that the information you need to generate these documentation pages lives in sage-the-distribution, above the sagelib sources.  If you want to package sagelib in a stand-alone fashion you need to get access to this data somehow, but you can't, so the file is generated sort of externally to sagelib, using data from sage-the-distribution.\n\nA similar problem applies to #29119.  In the prototype for that I am working on a more general solution to the problem, which is that `./bootstrap` makes hard links of files sagelib needs into the sagelib sources under `src/`.  That way, only one copy of the relevant files needs to exist in the existing combined repository, but if sagelib is packaged separately it will retain the necessary files.\n\nI think having that might serve as a solution here too.  My feeling is that these documentation pages should be generated by the docbuilder itself.  As long as it has access to information about Sage's dependencies it can do this, without the top-level `./bootstrap` script having to take any special action.\n\nIn other words, what we ultimately want is to be able to build Sage's docs without direct dependency on the sage-the-distribution stuff.  As it stands, I fear this PR is introducing too much direct dependency on sage-the-distribution just to be able to build Sage's docs.  What we would really want is to be able to run `setup.py sdist`, the a source tarball just for sagelib and its docs, and later unpack it somewhere else and still be able to build the docs (and sage itself).",
    "created_at": "2020-02-12T17:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415701",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

I think I might see part of the problem here:  It is true that the information you need to generate these documentation pages lives in sage-the-distribution, above the sagelib sources.  If you want to package sagelib in a stand-alone fashion you need to get access to this data somehow, but you can't, so the file is generated sort of externally to sagelib, using data from sage-the-distribution.

A similar problem applies to #29119.  In the prototype for that I am working on a more general solution to the problem, which is that `./bootstrap` makes hard links of files sagelib needs into the sagelib sources under `src/`.  That way, only one copy of the relevant files needs to exist in the existing combined repository, but if sagelib is packaged separately it will retain the necessary files.

I think having that might serve as a solution here too.  My feeling is that these documentation pages should be generated by the docbuilder itself.  As long as it has access to information about Sage's dependencies it can do this, without the top-level `./bootstrap` script having to take any special action.

In other words, what we ultimately want is to be able to build Sage's docs without direct dependency on the sage-the-distribution stuff.  As it stands, I fear this PR is introducing too much direct dependency on sage-the-distribution just to be able to build Sage's docs.  What we would really want is to be able to run `setup.py sdist`, the a source tarball just for sagelib and its docs, and later unpack it somewhere else and still be able to build the docs (and sage itself).



---

archive/issue_comments_415702.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHow is this supposed to work with an incremental build?\n\n```\n$ make bootstrap\nmake: `bootstrap' is up to date.\n$ make configure\nmake: `configure' is up to date.\n$ make\n...\nOSError: /Users/jpalmier/Desktop/Sage/git/sage/src/doc/en/installation/source.rst:228: WARNING: Include file '/Users/jpalmier/Desktop/Sage/git/sage/src/doc/en/installation/debian.txt' not found or reading it failed\n```",
    "created_at": "2020-02-12T18:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415702",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

How is this supposed to work with an incremental build?

```
$ make bootstrap
make: `bootstrap' is up to date.
$ make configure
make: `configure' is up to date.
$ make
...
OSError: /Users/jpalmier/Desktop/Sage/git/sage/src/doc/en/installation/source.rst:228: WARNING: Include file '/Users/jpalmier/Desktop/Sage/git/sage/src/doc/en/installation/debian.txt' not found or reading it failed
```



---

archive/issue_comments_415703.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jhpalmieri](#comment%3A26):\n> How is this supposed to work with an incremental build?\n\nThanks for catching this -- I need to add some dependencies",
    "created_at": "2020-02-12T18:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415703",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jhpalmieri](#comment%3A26):
> How is this supposed to work with an incremental build?

Thanks for catching this -- I need to add some dependencies



---

archive/issue_comments_415704.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@embray](#comment%3A25):\n> I think I might see part of the problem here:  It is true that the information you need to generate these documentation pages lives in sage-the-distribution, above the sagelib sources.  If you want to package sagelib in a stand-alone fashion you need to get access to this data somehow, but you can't, so the file is generated sort of externally to sagelib, using data from sage-the-distribution.\n> \n> A similar problem applies to #29119.  [...]\n\nThere is a really easy solution:  \n- `bootstrap` is only allowed in the full distribution source, not in a separate sagelib source. No hardlinks necessary. Only developers bootstrap.\n- Users don't bootstrap, they start with the configure phase. \n- sdist of the distribution and sdist of sagelib generate bootstrapped source archives.",
    "created_at": "2020-02-12T18:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415704",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@embray](#comment%3A25):
> I think I might see part of the problem here:  It is true that the information you need to generate these documentation pages lives in sage-the-distribution, above the sagelib sources.  If you want to package sagelib in a stand-alone fashion you need to get access to this data somehow, but you can't, so the file is generated sort of externally to sagelib, using data from sage-the-distribution.
> 
> A similar problem applies to #29119.  [...]

There is a really easy solution:  
- `bootstrap` is only allowed in the full distribution source, not in a separate sagelib source. No hardlinks necessary. Only developers bootstrap.
- Users don't bootstrap, they start with the configure phase. 
- sdist of the distribution and sdist of sagelib generate bootstrapped source archives.



---

archive/issue_comments_415705.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@embray](#comment%3A24):\n> Sure, but what is required for running `make sdist`? \n\nObviously, it requires exactly a bootstrapped source tree!\n\n>  It seems to me this should be done in two separate cases: One when running `make sdist` and one when developing out of source.  In either case I don't think the bootstrap script is the appropriate place for it.\n> \n> The only reason you seem to be putting it there is that it would happen to cover both cases, but I think both cases should be handled separately.\n\n`bootstrap` is the phase before `configure`, which does not depend on the configuration of the system.",
    "created_at": "2020-02-12T18:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415705",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@embray](#comment%3A24):
> Sure, but what is required for running `make sdist`? 

Obviously, it requires exactly a bootstrapped source tree!

>  It seems to me this should be done in two separate cases: One when running `make sdist` and one when developing out of source.  In either case I don't think the bootstrap script is the appropriate place for it.
> 
> The only reason you seem to be putting it there is that it would happen to cover both cases, but I think both cases should be handled separately.

`bootstrap` is the phase before `configure`, which does not depend on the configuration of the system.



---

archive/issue_comments_415706.json:
```json
{
    "body": "Changed commit from **[`146a520`](https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d)** to **[`ce34ce1`](https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1)**",
    "created_at": "2020-02-12T19:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415706",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`146a520`](https://github.com/sagemath/sagetrac-mirror/commit/146a52052b48c4f97aaa6be1122f9a63d5f44e8d)** to **[`ce34ce1`](https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1)**



---

archive/issue_comments_415707.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1\"><code>ce34ce1</code></a></td><td><code>Makefile: Add dependencies on build/pkgs/*.txt build/pkgs/*/distros/*.txt</code></td></tr></table>\n",
    "created_at": "2020-02-12T19:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415707",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1"><code>ce34ce1</code></a></td><td><code>Makefile: Add dependencies on build/pkgs/*.txt build/pkgs/*/distros/*.txt</code></td></tr></table>




---

archive/issue_comments_415708.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@mkoeppe](#comment%3A27):\n> Replying to [@jhpalmieri](#comment%3A26):\n> > How is this supposed to work with an incremental build?\n\n> Thanks for catching this -- I need to add some dependencies\n\nDone.",
    "created_at": "2020-02-12T19:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415708",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@mkoeppe](#comment%3A27):
> Replying to [@jhpalmieri](#comment%3A26):
> > How is this supposed to work with an incremental build?

> Thanks for catching this -- I need to add some dependencies

Done.



---

archive/issue_comments_415709.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThat doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. By the way, I'm not sure whether I like the old style\n\n```\n     $ sudo apt-get install binutils pixz gcc g++ gfortran make m4 perl tar \\\n       git patch openssl libssl-dev libz-dev bc libbz2-dev liblzma-dev libgmp-dev \\\n       libffi-dev libgf2x-dev libcurl4-openssl-dev libzmq3-dev curl yasm \\\n       pkg-config libntl-dev libmpfr-dev libmpc-dev libflint-dev \\\n       libpcre3-dev libgd-dev libflint-dev libflint-arb-dev \\\n       libsymmetrica2-dev gmp-ecm libecm-dev libisl-dev libgivaro-dev \\\n       libpari-dev pari-gp2c libec-dev liblrcalc-dev \\\n       libm4ri-dev libm4rie-dev liblfunction-dev lcalc \\\n       libopenblas-dev r-base-dev libgsl-dev libcliquer-dev cliquer\n```\nor the new style\n\n```\n    $ sudo yum install binutils boost-devel bzip2 bzip2-devel curl eclib-devel findutils gcc gcc gcc-c++ gcc-c++ gcc-gfortran gcc-gfortran gfan git givaro-devel gmp gmp-devel gmp-ecm-devel libcurl-devel libmpc-devel lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ntl-devel openblas-devel pari-devel pari-elldata pari-galdata pari-galdata pari-galpol pari-gp pari-seadata patch perl perl-ExtUtils-MakeMaker pkg-config python3 readline-devel rw-devel symmetrica-devel tar which xz xz-devel yasm zlib-devel\n```\nbetter.\n\nIs there a ticket which adds homebrew information to the `installation/source.rst`?",
    "created_at": "2020-02-12T19:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415709",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. By the way, I'm not sure whether I like the old style

```
     $ sudo apt-get install binutils pixz gcc g++ gfortran make m4 perl tar \
       git patch openssl libssl-dev libz-dev bc libbz2-dev liblzma-dev libgmp-dev \
       libffi-dev libgf2x-dev libcurl4-openssl-dev libzmq3-dev curl yasm \
       pkg-config libntl-dev libmpfr-dev libmpc-dev libflint-dev \
       libpcre3-dev libgd-dev libflint-dev libflint-arb-dev \
       libsymmetrica2-dev gmp-ecm libecm-dev libisl-dev libgivaro-dev \
       libpari-dev pari-gp2c libec-dev liblrcalc-dev \
       libm4ri-dev libm4rie-dev liblfunction-dev lcalc \
       libopenblas-dev r-base-dev libgsl-dev libcliquer-dev cliquer
```
or the new style

```
    $ sudo yum install binutils boost-devel bzip2 bzip2-devel curl eclib-devel findutils gcc gcc gcc-c++ gcc-c++ gcc-gfortran gcc-gfortran gfan git givaro-devel gmp gmp-devel gmp-ecm-devel libcurl-devel libmpc-devel lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ntl-devel openblas-devel pari-devel pari-elldata pari-galdata pari-galdata pari-galpol pari-gp pari-seadata patch perl perl-ExtUtils-MakeMaker pkg-config python3 readline-devel rw-devel symmetrica-devel tar which xz xz-devel yasm zlib-devel
```
better.

Is there a ticket which adds homebrew information to the `installation/source.rst`?



---

archive/issue_comments_415710.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jhpalmieri](#comment%3A32):\n> That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. \n\nThe *generated* files are in `src/doc/en/installation`. The source files are in `build/pkgs/`. Hence the dependency that I added. Changes to the .txt files trigger bootstrapping.",
    "created_at": "2020-02-12T19:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415710",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jhpalmieri](#comment%3A32):
> That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. 

The *generated* files are in `src/doc/en/installation`. The source files are in `build/pkgs/`. Hence the dependency that I added. Changes to the .txt files trigger bootstrapping.



---

archive/issue_comments_415711.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@jhpalmieri](#comment%3A32):\n> Is there a ticket which adds homebrew information to the `installation/source.rst`?\n\n#29104 is for homebrew. I haven't added the package information there yet -- any help is very welcome!",
    "created_at": "2020-02-12T19:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415711",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@jhpalmieri](#comment%3A32):
> Is there a ticket which adds homebrew information to the `installation/source.rst`?

#29104 is for homebrew. I haven't added the package information there yet -- any help is very welcome!



---

archive/issue_comments_415712.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mkoeppe](#comment%3A33):\n> Replying to [@jhpalmieri](#comment%3A32):\n> > That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. \n\n> \n> The *generated* files are in `src/doc/en/installation`. The source files are in `build/pkgs/`. Hence the dependency that I added. Changes to the .txt files trigger bootstrapping.\n\nBut this ticket doesn't change any of those .txt files. In my case I have Sage 9.1.beta3, then I switch to this branch and `make` fails, even with your latest branch. Is there no way to avoid this?\n\n```\n$ git checkout t/26964/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual \nSwitched to branch 't/26964/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual'\n$ make configure\nmake: `configure' is up to date.\n```\n`./bootstrap -d` generates the correct files, but I have to run it manually.",
    "created_at": "2020-02-12T19:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415712",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mkoeppe](#comment%3A33):
> Replying to [@jhpalmieri](#comment%3A32):
> > That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. 

> 
> The *generated* files are in `src/doc/en/installation`. The source files are in `build/pkgs/`. Hence the dependency that I added. Changes to the .txt files trigger bootstrapping.

But this ticket doesn't change any of those .txt files. In my case I have Sage 9.1.beta3, then I switch to this branch and `make` fails, even with your latest branch. Is there no way to avoid this?

```
$ git checkout t/26964/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual 
Switched to branch 't/26964/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual'
$ make configure
make: `configure' is up to date.
```
`./bootstrap -d` generates the correct files, but I have to run it manually.



---

archive/issue_comments_415713.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nthe idea is that one can `make configure` is not a good one. `configure` is \"built\" by autoconf, not by make.\n\ncan we get rid of `configure` target?",
    "created_at": "2020-02-12T20:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415713",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

the idea is that one can `make configure` is not a good one. `configure` is "built" by autoconf, not by make.

can we get rid of `configure` target?



---

archive/issue_comments_415714.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jhpalmieri](#comment%3A32):\n> That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. By the way, I'm not sure whether I like the old style\n> \n> ```\n>      $ sudo apt-get install binutils pixz gcc g++ gfortran make m4 perl tar \\\n>        git patch openssl libssl-dev libz-dev bc libbz2-dev liblzma-dev libgmp-dev \\\n>        libffi-dev libgf2x-dev libcurl4-openssl-dev libzmq3-dev curl yasm \\\n>        pkg-config libntl-dev libmpfr-dev libmpc-dev libflint-dev \\\n>        libpcre3-dev libgd-dev libflint-dev libflint-arb-dev \\\n>        libsymmetrica2-dev gmp-ecm libecm-dev libisl-dev libgivaro-dev \\\n>        libpari-dev pari-gp2c libec-dev liblrcalc-dev \\\n>        libm4ri-dev libm4rie-dev liblfunction-dev lcalc \\\n>        libopenblas-dev r-base-dev libgsl-dev libcliquer-dev cliquer\n> ```\n> or the new style\n> \n> ```\n>     $ sudo yum install binutils boost-devel bzip2 bzip2-devel curl eclib-devel findutils gcc gcc gcc-c++ gcc-c++ gcc-gfortran gcc-gfortran gfan git givaro-devel gmp gmp-devel gmp-ecm-devel libcurl-devel libmpc-devel lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ntl-devel openblas-devel pari-devel pari-elldata pari-galdata pari-galdata pari-galpol pari-gp pari-seadata patch perl perl-ExtUtils-MakeMaker pkg-config python3 readline-devel rw-devel symmetrica-devel tar which xz xz-devel yasm zlib-devel\n> ```\n> better.\n\nthe new style is built automatically, whereas the old one was manual.\nOne can surely hack further to add insertion of ` \\` after ~80 chars, but it's certainlty minor...",
    "created_at": "2020-02-12T20:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415714",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jhpalmieri](#comment%3A32):
> That doesn't help, because the necessary text files are not `build/pkgs/*.txt build/pkgs/*/distros/*.txt` but rather in `src/doc/en/installation`. By the way, I'm not sure whether I like the old style
> 
> ```
>      $ sudo apt-get install binutils pixz gcc g++ gfortran make m4 perl tar \
>        git patch openssl libssl-dev libz-dev bc libbz2-dev liblzma-dev libgmp-dev \
>        libffi-dev libgf2x-dev libcurl4-openssl-dev libzmq3-dev curl yasm \
>        pkg-config libntl-dev libmpfr-dev libmpc-dev libflint-dev \
>        libpcre3-dev libgd-dev libflint-dev libflint-arb-dev \
>        libsymmetrica2-dev gmp-ecm libecm-dev libisl-dev libgivaro-dev \
>        libpari-dev pari-gp2c libec-dev liblrcalc-dev \
>        libm4ri-dev libm4rie-dev liblfunction-dev lcalc \
>        libopenblas-dev r-base-dev libgsl-dev libcliquer-dev cliquer
> ```
> or the new style
> 
> ```
>     $ sudo yum install binutils boost-devel bzip2 bzip2-devel curl eclib-devel findutils gcc gcc gcc-c++ gcc-c++ gcc-gfortran gcc-gfortran gfan git givaro-devel gmp gmp-devel gmp-ecm-devel libcurl-devel libmpc-devel lrcalc-devel m4 m4ri-devel m4rie-devel make mpfr-devel nauty ncurses-devel ntl-devel openblas-devel pari-devel pari-elldata pari-galdata pari-galdata pari-galpol pari-gp pari-seadata patch perl perl-ExtUtils-MakeMaker pkg-config python3 readline-devel rw-devel symmetrica-devel tar which xz xz-devel yasm zlib-devel
> ```
> better.

the new style is built automatically, whereas the old one was manual.
One can surely hack further to add insertion of ` \` after ~80 chars, but it's certainlty minor...



---

archive/issue_comments_415715.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27\"><code>688c68e</code></a></td><td><code>Makefile [configure]: Add dependency on bootstrap, src/doc/bootstrap</code></td></tr></table>\n",
    "created_at": "2020-02-12T20:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415715",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27"><code>688c68e</code></a></td><td><code>Makefile [configure]: Add dependency on bootstrap, src/doc/bootstrap</code></td></tr></table>




---

archive/issue_comments_415716.json:
```json
{
    "body": "Changed commit from **[`ce34ce1`](https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1)** to **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**",
    "created_at": "2020-02-12T20:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415716",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce34ce1`](https://github.com/sagemath/sagetrac-mirror/commit/ce34ce1fcc5e8669c9e05b758bb8576cc8afa8d1)** to **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**



---

archive/issue_comments_415717.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jhpalmieri](#comment%3A35):\n> But this ticket doesn't change any of those .txt files. In my case I have Sage 9.1.beta3, then I switch to this branch and `make` fails, even with your latest branch. Is there no way to avoid this?\n\nThanks! \nI've added more dependencies to the `make configure` target that should take care of this case.",
    "created_at": "2020-02-12T20:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415717",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jhpalmieri](#comment%3A35):
> But this ticket doesn't change any of those .txt files. In my case I have Sage 9.1.beta3, then I switch to this branch and `make` fails, even with your latest branch. Is there no way to avoid this?

Thanks! 
I've added more dependencies to the `make configure` target that should take care of this case.



---

archive/issue_comments_415718.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@dimpase](#comment%3A36):\n> the idea is that one can `make configure` is not a good one. `configure` is \"built\" by autoconf, not by make.\n\nI don't think there's anything wrong with these make targets -- also autotools have them (in maintainer mode).",
    "created_at": "2020-02-12T20:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415718",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@dimpase](#comment%3A36):
> the idea is that one can `make configure` is not a good one. `configure` is "built" by autoconf, not by make.

I don't think there's anything wrong with these make targets -- also autotools have them (in maintainer mode).



---

archive/issue_comments_415719.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\na typical autotools project won't have a Makefile in unbuilt state, only Makefile.am",
    "created_at": "2020-02-12T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415719",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

a typical autotools project won't have a Makefile in unbuilt state, only Makefile.am



---

archive/issue_comments_415720.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThat is true, but there are Makefile targets that regenerate configure etc. from configure.ac.",
    "created_at": "2020-02-12T21:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415720",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

That is true, but there are Makefile targets that regenerate configure etc. from configure.ac.



---

archive/issue_comments_415721.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThat works for me, thanks.\n\nI don't in general ever use `make configure` explicitly, but I was trying to get the previous versions of this branch to work so I tried it. With the most recent branch, I can just check it out and run `make`.",
    "created_at": "2020-02-12T21:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415721",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:43" align="right">comment:43</div>

That works for me, thanks.

I don't in general ever use `make configure` explicitly, but I was trying to get the previous versions of this branch to work so I tried it. With the most recent branch, I can just check it out and run `make`.



---

archive/issue_comments_415722.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nis `sage-print-system-package-command` meant to runnable by the user, or it's a \"service\" script?",
    "created_at": "2020-02-14T19:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415722",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

is `sage-print-system-package-command` meant to runnable by the user, or it's a "service" script?



---

archive/issue_comments_415723.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIt's an internal script of sage the distribution. That's why it's in build/bin.",
    "created_at": "2020-02-14T19:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415723",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

It's an internal script of sage the distribution. That's why it's in build/bin.



---

archive/issue_comments_415724.json:
```json
{
    "body": "Reviewer: **John Palmieri, Dima Pasechnik**",
    "created_at": "2020-02-14T20:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415724",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **John Palmieri, Dima Pasechnik**



---

archive/issue_events_367584.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-14T20:23:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367584"
}
```



---

archive/issue_events_367585.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-14T20:23:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367585"
}
```



---

archive/issue_comments_415725.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nOK, the only nitpck is that on modern Fedora's it's `dnf`, not `yum`.",
    "created_at": "2020-02-14T20:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415725",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

OK, the only nitpck is that on modern Fedora's it's `dnf`, not `yum`.



---

archive/issue_comments_415726.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThank you!",
    "created_at": "2020-02-14T20:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415726",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Thank you!



---

archive/issue_comments_415727.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual)** to **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**",
    "created_at": "2020-02-21T22:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415727",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__bootstrap__format_build_pkgs_spkg_distros__information_to_produce_the_apt_get_yum_command_lines_shown_in_the_installation_manual)** to **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)**



---

archive/issue_events_367586.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-21T22:17:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367586"
}
```



---

archive/issue_events_367587.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5d008d89bfcd05ca623f6656b4935ef9400cd903",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-02-21T22:17:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26964#event-367587"
}
```



---

archive/issue_comments_415728.json:
```json
{
    "body": "Changed commit from **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)** to none",
    "created_at": "2020-02-22T16:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415728",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`688c68e`](https://github.com/sagemath/sagetrac-mirror/commit/688c68e7a4d0b17d0a8093585389c6c4f2fc8c27)** to none



---

archive/issue_comments_415729.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThis breaks incremental builds: #29233",
    "created_at": "2020-02-22T16:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26964#issuecomment-415729",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">comment:49</div>

This breaks incremental builds: #29233
