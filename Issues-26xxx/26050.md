# Issue 26050: Upgrade zn_poly

archive/issues_025813.json:
```json
{
    "assignees": [],
    "body": "sage 8.4beta0 fails to compile on my cygwin, even after a distclean, because \"ld: cannot find -lzn_poly\". This happens at the sagelib compilation stage (zn_poly itself seems to have installed correctly; at least sage doesn't let me install it again):\n\n```\n[sagelib-8.4.beta0] [  1/184] gcc -I/usr/include/ncurses -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/cpython -I./sage/libs/ntl -I/home/skraeling/sage/local/lib/python2.7/site-packages/cypari2 -I/home/skraeling/sage/local/include -I/home/skraeling/sage/local/include/python2.7 -I/home/skraeling/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/skraeling/sage/src -I/home/skraeling/sage/src/sage/ext -Ibuild/cythonized -I/home/skraeling/sage/local/include/python2.7 -c build/cythonized/sage/modular/pollack_stevens/dist.c -o build/temp.cygwin-2.10.0-x86_64-2.7/build/cythonized/sage/modular/pollack_stevens/dist.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -D_XPG6 -std=gnu99\n[sagelib-8.4.beta0] gcc -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-2.10.0-x86_64-2.7/build/cythonized/sage/modular/pollack_stevens/dist.o -L/home/skraeling/sage/local/lib -L/home/skraeling/sage/local/lib/python2.7/config -L/home/skraeling/sage/local/lib -lflint -lgmp -lzn_poly -lpython2.7 -o build/lib.cygwin-2.10.0-x86_64-2.7/sage/modular/pollack_stevens/dist.dll\n[sagelib-8.4.beta0] /usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lzn_poly\n```\n\nReverting #25085 fixes the bug on my machine.\n\n**Update:** I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.\n\n**Upstream tarball:** https://trac.sagemath.org/raw-attachment/ticket/26050/zn_poly-0.9.1.tar.gz\n\nAssignee: **@embray**\n\nCC:  @embray @tscrim\n\nKeywords: **zn_poly, build, ld, gcc**\n\nBranch: **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**\n\nReviewer: **Travis Scrimshaw, Darij Grinberg**\n\nAuthor: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26050_\n\n",
    "closed_at": "2018-10-01T22:35:52Z",
    "created_at": "2018-08-12T14:19:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade zn_poly",
    "type": "issue",
    "updated_at": "2018-10-08T10:04:31Z",
    "url": "https://github.com/sagemath/sage/issues/26050",
    "user": "https://github.com/darijgr"
}
```
sage 8.4beta0 fails to compile on my cygwin, even after a distclean, because "ld: cannot find -lzn_poly". This happens at the sagelib compilation stage (zn_poly itself seems to have installed correctly; at least sage doesn't let me install it again):

```
[sagelib-8.4.beta0] [  1/184] gcc -I/usr/include/ncurses -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/cpython -I./sage/libs/ntl -I/home/skraeling/sage/local/lib/python2.7/site-packages/cypari2 -I/home/skraeling/sage/local/include -I/home/skraeling/sage/local/include/python2.7 -I/home/skraeling/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/skraeling/sage/src -I/home/skraeling/sage/src/sage/ext -Ibuild/cythonized -I/home/skraeling/sage/local/include/python2.7 -c build/cythonized/sage/modular/pollack_stevens/dist.c -o build/temp.cygwin-2.10.0-x86_64-2.7/build/cythonized/sage/modular/pollack_stevens/dist.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -D_XPG6 -std=gnu99
[sagelib-8.4.beta0] gcc -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-2.10.0-x86_64-2.7/build/cythonized/sage/modular/pollack_stevens/dist.o -L/home/skraeling/sage/local/lib -L/home/skraeling/sage/local/lib/python2.7/config -L/home/skraeling/sage/local/lib -lflint -lgmp -lzn_poly -lpython2.7 -o build/lib.cygwin-2.10.0-x86_64-2.7/sage/modular/pollack_stevens/dist.dll
[sagelib-8.4.beta0] /usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lzn_poly
```

Reverting #25085 fixes the bug on my machine.

**Update:** I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.

**Upstream tarball:** https://trac.sagemath.org/raw-attachment/ticket/26050/zn_poly-0.9.1.tar.gz

Assignee: **@embray**

CC:  @embray @tscrim

Keywords: **zn_poly, build, ld, gcc**

Branch: **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**

Reviewer: **Travis Scrimshaw, Darij Grinberg**

Author: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/26050_





---

archive/issue_events_329438.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-08-12T14:19:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329438"
}
```



---

archive/issue_events_329439.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-08-12T14:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329439"
}
```



---

archive/issue_events_329440.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-08-12T14:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329440"
}
```



---

archive/issue_events_329441.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-08-12T14:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329441"
}
```



---

archive/issue_comments_403994.json:
```json
{
    "body": "Assignee: **@embray**",
    "created_at": "2018-08-13T11:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403994",
    "user": "https://github.com/embray"
}
```

Assignee: **@embray**



---

archive/issue_comments_403995.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThanks, I'll look into it.  I think I see what the problem might be.\n\nI didn't have any problems with this, but it looks like I still have an old `libzn_poly-0.9.so` hanging out in my `$SAGE_LOCAL/lib`.  That *should* have been cleaned away but it wasn't--it appears the zn_poly package doesn't do anything to clean up old versions.  So building from scratch would still fail.",
    "created_at": "2018-08-13T11:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403995",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>Comment 1:</a>
Thanks, I'll look into it.  I think I see what the problem might be.

I didn't have any problems with this, but it looks like I still have an old `libzn_poly-0.9.so` hanging out in my `$SAGE_LOCAL/lib`.  That *should* have been cleaned away but it wasn't--it appears the zn_poly package doesn't do anything to clean up old versions.  So building from scratch would still fail.



---

archive/issue_events_329442.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T12:19:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329442"
}
```



---

archive/issue_events_329443.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T12:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329443"
}
```



---

archive/issue_comments_403996.json:
```json
{
    "body": "Branch: **[u/embray/build/zn_poly/cygwin](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/zn_poly/cygwin)**",
    "created_at": "2018-09-06T13:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403996",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/build/zn_poly/cygwin](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/zn_poly/cygwin)**



---

archive/issue_comments_403997.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc\">e27973b</a></td><td><code>trac #26050: ensure when linking zn_poly on Cygwin that it outputs an</code></td></tr></table>\n",
    "created_at": "2018-09-06T13:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403997",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>Comment 3:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc">e27973b</a></td><td><code>trac #26050: ensure when linking zn_poly on Cygwin that it outputs an</code></td></tr></table>




---

archive/issue_comments_403998.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2018-09-06T13:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403998",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_events_329444.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-06T13:35:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329444"
}
```



---

archive/issue_comments_403999.json:
```json
{
    "body": "Commit: **[e27973b](https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc)**",
    "created_at": "2018-09-06T13:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-403999",
    "user": "https://github.com/embray"
}
```

Commit: **[e27973b](https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc)**



---

archive/issue_events_329445.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-07T13:17:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329445"
}
```



---

archive/issue_events_329446.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-07T13:17:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329446"
}
```



---

archive/issue_comments_404000.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nThere is still a problem, which is that since the build outputs the libzn_poly DLL as `libzn_poly-0.9.so`, that is also set to its DLL name in the binary; simply renaming the file to `cygzn_poly.dll` when moving it does not change this, so modules linked to it are still looking for a `libzn_poly-0.9.so`.  Really need to fix that.",
    "created_at": "2018-09-07T13:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404000",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>Comment 4:</a>
There is still a problem, which is that since the build outputs the libzn_poly DLL as `libzn_poly-0.9.so`, that is also set to its DLL name in the binary; simply renaming the file to `cygzn_poly.dll` when moving it does not change this, so modules linked to it are still looking for a `libzn_poly-0.9.so`.  Really need to fix that.



---

archive/issue_comments_404001.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIt seems the `-soname` flag for GNU `ld` has no impact on the DLL name used in DLL export sections, only the actual output filename.\n\nDoes anyone know the most recent status of zn_poly?  According to http://web.maths.unsw.edu.au/~davidharvey/code/zn_poly/ it is \"no longer maintained\".  Should we just make a new upstream repo for it and become its maintainers?",
    "created_at": "2018-09-07T13:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404001",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'>Comment 5:</a>
It seems the `-soname` flag for GNU `ld` has no impact on the DLL name used in DLL export sections, only the actual output filename.

Does anyone know the most recent status of zn_poly?  According to http://web.maths.unsw.edu.au/~davidharvey/code/zn_poly/ it is "no longer maintained".  Should we just make a new upstream repo for it and become its maintainers?



---

archive/issue_comments_404002.json:
```json
{
    "body": "Changed commit from **[e27973b](https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc)** to none",
    "created_at": "2018-09-10T14:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404002",
    "user": "https://github.com/embray"
}
```

Changed commit from **[e27973b](https://github.com/sagemath/sagetrac-mirror/commit/e27973b2e4fd4922ac6b680cc0e38284049487dc)** to none



---

archive/issue_comments_404003.json:
```json
{
    "body": "Changed branch from **[u/embray/build/zn_poly/cygwin](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/zn_poly/cygwin)** to none",
    "created_at": "2018-09-10T14:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404003",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/embray/build/zn_poly/cygwin](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/zn_poly/cygwin)** to none



---

archive/issue_events_329447.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-10T14:26:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "title_is": "Upgrade zn_poly",
    "title_was": "zn_poly breaks Cygwin64 build",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329447"
}
```



---

archive/issue_comments_404004.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,5 @@\n ```\n \n Reverting #25085 fixes the bug on my machine.\n+\n+*Update:* I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.\n``````\n",
    "created_at": "2018-09-10T14:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404004",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,5 @@
 ```
 
 Reverting #25085 fixes the bug on my machine.
+
+*Update:* I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.
``````




---

archive/issue_comments_404005.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThanks for doing this, Erik!",
    "created_at": "2018-09-10T14:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404005",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'>Comment 7:</a>
Thanks for doing this, Erik!



---

archive/issue_events_329448.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-10T15:06:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329448"
}
```



---

archive/issue_events_329449.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-10T15:06:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329449"
}
```



---

archive/issue_comments_404006.json:
```json
{
    "body": "Branch: **[u/embray/pkgs/zn_poly/upgrade](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pkgs/zn_poly/upgrade)**",
    "created_at": "2018-09-10T15:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404006",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/pkgs/zn_poly/upgrade](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pkgs/zn_poly/upgrade)**



---

archive/issue_comments_404007.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,6 @@\n \n Reverting #25085 fixes the bug on my machine.\n \n-*Update:* I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.\n+**Update:** I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.\n+\n+**Upstream tarball:** https://trac.sagemath.org/raw-attachment/ticket/26050/zn_poly-0.9.1.tar.gz\n``````\n",
    "created_at": "2018-09-10T15:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404007",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,6 @@
 
 Reverting #25085 fixes the bug on my machine.
 
-*Update:* I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.
+**Update:** I have taken over maintenance (to be clear maintenance only, not development) of zn_poly in a new upstream repository: https://gitlab.com/sagemath/zn_poly  It includes all previous patches from Sage and I will creating a new release tarball based on that.
+
+**Upstream tarball:** https://trac.sagemath.org/raw-attachment/ticket/26050/zn_poly-0.9.1.tar.gz
``````




---

archive/issue_comments_404008.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nNew upstream tarball for an 0.9.1 release candidate based on https://gitlab.com/sagemath/zn_poly  \n\nIf this works in Sage then I'll \"release\" it for real.\n\nThe new tarball has all the previous patches from Sage applied, and few other changes besides that.  It also contains improved Cygwin build support so this remains a blocker for fixing the Cygwin build.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d\">fd3d6e1</a></td><td><code>Trac #26050 upgrade zn_poly to 0.9.1</code></td></tr></table>\n",
    "created_at": "2018-09-10T15:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404008",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>Comment 8:</a>
New upstream tarball for an 0.9.1 release candidate based on https://gitlab.com/sagemath/zn_poly  

If this works in Sage then I'll "release" it for real.

The new tarball has all the previous patches from Sage applied, and few other changes besides that.  It also contains improved Cygwin build support so this remains a blocker for fixing the Cygwin build.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d">fd3d6e1</a></td><td><code>Trac #26050 upgrade zn_poly to 0.9.1</code></td></tr></table>




---

archive/issue_comments_404009.json:
```json
{
    "body": "Commit: **[fd3d6e1](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d)**",
    "created_at": "2018-09-10T15:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404009",
    "user": "https://github.com/embray"
}
```

Commit: **[fd3d6e1](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d)**



---

archive/issue_comments_404010.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nDarij, does this work for you? I am ready to set this to a positive review.",
    "created_at": "2018-09-16T04:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404010",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'>Comment 9:</a>
Darij, does this work for you? I am ready to set this to a positive review.



---

archive/issue_comments_404011.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nOuch, I forgot to check. Await an answer in a day or longer (Cygwin full compiles aren't a laughing matter).",
    "created_at": "2018-09-16T04:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404011",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:10'>Comment 10:</a>
Ouch, I forgot to check. Await an answer in a day or longer (Cygwin full compiles aren't a laughing matter).



---

archive/issue_comments_404012.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nHmm :(\n\n```\n[zn_poly-0.9.1] http://sagepad.org/spkg/upstream/zn_poly/zn_poly-0.9.1.tar.gz\n[zn_poly-0.9.1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n[zn_poly-0.9.1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/zn_poly/zn_poly-0.9.1.tar.gz'\n[zn_poly-0.9.1] Traceback (most recent call last):\n[zn_poly-0.9.1]   File \"/home/skraeling/sage/build/bin/sage-download-file\", line 28, in <module>\n[zn_poly-0.9.1]     run_safe()\n[zn_poly-0.9.1]   File \"/home/skraeling/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 118, in run_safe\n[zn_poly-0.9.1]     run()\n[zn_poly-0.9.1]   File \"/home/skraeling/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in run\n[zn_poly-0.9.1]     app.download_tarball(args.url_or_tarball, args.destination)\n[zn_poly-0.9.1]   File \"/home/skraeling/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n[zn_poly-0.9.1]     tarball.download()\n[zn_poly-0.9.1]   File \"/home/skraeling/sage/build/bin/../sage_bootstrap/tarball.py\", line 162, in download\n[zn_poly-0.9.1]     raise FileNotMirroredError('tarball does not exist on mirror network')\n[zn_poly-0.9.1] sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network\n[zn_poly-0.9.1] ************************************************************************\n[zn_poly-0.9.1] Error downloading zn_poly-0.9.1.tar.gz\n[zn_poly-0.9.1] ************************************************************************\n[zn_poly-0.9.1] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[zn_poly-0.9.1] explaining the problem and including the log file\n[zn_poly-0.9.1]   /home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log\n[zn_poly-0.9.1] Describe your computer, operating system, etc.\n[zn_poly-0.9.1] ************************************************************************\nmake[3]: *** [Makefile:2099: /home/skraeling/sage/local/var/lib/sage/installed/zn_poly-0.9.1] Error 1\nmake[3]: Leaving directory '/home/skraeling/sage/build/make'\nmake[2]: *** [Makefile:1792: all-build] Error 2\nmake[2]: Leaving directory '/home/skraeling/sage/build/make'\n\nreal    195m21.143s\nuser    101m24.436s\nsys     49m44.530s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all-build'):\n\n* package: zn_poly-0.9.1\n  log file: /home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log\n  build directory: /home/skraeling/sage/local/var/tmp/sage/build/zn_poly-0.9.1\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nmake[1]: *** [Makefile:33: all-build] Error 1\nmake[1]: Leaving directory '/home/skraeling/sage'\nmake: *** [Makefile:16: build] Error 2\n```\n\nThis is with your branch merged into 8.4.beta5. But at least this looks like an easy one to fix.",
    "created_at": "2018-09-16T19:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404012",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'>Comment 11:</a>
Hmm :(

```
[zn_poly-0.9.1] http://sagepad.org/spkg/upstream/zn_poly/zn_poly-0.9.1.tar.gz
[zn_poly-0.9.1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[zn_poly-0.9.1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/zn_poly/zn_poly-0.9.1.tar.gz'
[zn_poly-0.9.1] Traceback (most recent call last):
[zn_poly-0.9.1]   File "/home/skraeling/sage/build/bin/sage-download-file", line 28, in <module>
[zn_poly-0.9.1]     run_safe()
[zn_poly-0.9.1]   File "/home/skraeling/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 118, in run_safe
[zn_poly-0.9.1]     run()
[zn_poly-0.9.1]   File "/home/skraeling/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in run
[zn_poly-0.9.1]     app.download_tarball(args.url_or_tarball, args.destination)
[zn_poly-0.9.1]   File "/home/skraeling/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
[zn_poly-0.9.1]     tarball.download()
[zn_poly-0.9.1]   File "/home/skraeling/sage/build/bin/../sage_bootstrap/tarball.py", line 162, in download
[zn_poly-0.9.1]     raise FileNotMirroredError('tarball does not exist on mirror network')
[zn_poly-0.9.1] sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network
[zn_poly-0.9.1] ************************************************************************
[zn_poly-0.9.1] Error downloading zn_poly-0.9.1.tar.gz
[zn_poly-0.9.1] ************************************************************************
[zn_poly-0.9.1] Please email sage-devel (http://groups.google.com/group/sage-devel)
[zn_poly-0.9.1] explaining the problem and including the log file
[zn_poly-0.9.1]   /home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log
[zn_poly-0.9.1] Describe your computer, operating system, etc.
[zn_poly-0.9.1] ************************************************************************
make[3]: *** [Makefile:2099: /home/skraeling/sage/local/var/lib/sage/installed/zn_poly-0.9.1] Error 1
make[3]: Leaving directory '/home/skraeling/sage/build/make'
make[2]: *** [Makefile:1792: all-build] Error 2
make[2]: Leaving directory '/home/skraeling/sage/build/make'

real    195m21.143s
user    101m24.436s
sys     49m44.530s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all-build'):

* package: zn_poly-0.9.1
  log file: /home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log
  build directory: /home/skraeling/sage/local/var/tmp/sage/build/zn_poly-0.9.1

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

make[1]: *** [Makefile:33: all-build] Error 1
make[1]: Leaving directory '/home/skraeling/sage'
make: *** [Makefile:16: build] Error 2
```

This is with your branch merged into 8.4.beta5. But at least this looks like an easy one to fix.



---

archive/issue_comments_404013.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nYou need to manually download the tar ball and put it in your upstream folder. Is that what you did?",
    "created_at": "2018-09-16T20:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404013",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>Comment 12:</a>
You need to manually download the tar ball and put it in your upstream folder. Is that what you did?



---

archive/issue_comments_404014.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNo; how does it work?=",
    "created_at": "2018-09-16T20:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404014",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'>Comment 13:</a>
No; how does it work?=



---

archive/issue_comments_404015.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nDownload the tar file in the ticket description and put it in the \"$SAGE_ROOT/upstream\" flder. Then run make.",
    "created_at": "2018-09-16T21:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404015",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'>Comment 14:</a>
Download the tar file in the ticket description and put it in the "$SAGE_ROOT/upstream" flder. Then run make.



---

archive/issue_comments_404016.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nOK, I did, but it's still searching the web:\n\n```\nsage-logger -p 'sage-spkg zn_poly-0.9.1' '/home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log'\n[zn_poly-0.9.1] Found local metadata for zn_poly-0.9.1\n[zn_poly-0.9.1] Attempting to download package zn_poly-0.9.1.tar.gz from mirrors\n```",
    "created_at": "2018-09-16T21:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404016",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'>Comment 15:</a>
OK, I did, but it's still searching the web:

```
sage-logger -p 'sage-spkg zn_poly-0.9.1' '/home/skraeling/sage/logs/pkgs/zn_poly-0.9.1.log'
[zn_poly-0.9.1] Found local metadata for zn_poly-0.9.1
[zn_poly-0.9.1] Attempting to download package zn_poly-0.9.1.tar.gz from mirrors
```



---

archive/issue_comments_404017.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOoooh, it was a wget issue. Sorry.",
    "created_at": "2018-09-16T21:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404017",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:16'>Comment 16:</a>
Ooooh, it was a wget issue. Sorry.



---

archive/issue_comments_404018.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nIt works! Thanks, Erik!\n\n(Note to future self: wget mangles .gz on download; use curl instead.)",
    "created_at": "2018-09-16T21:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404018",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'>Comment 17:</a>
It works! Thanks, Erik!

(Note to future self: wget mangles .gz on download; use curl instead.)



---

archive/issue_events_329450.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-16T22:28:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329450"
}
```



---

archive/issue_events_329451.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-16T22:28:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329451"
}
```



---

archive/issue_comments_404019.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw, Darij Grinberg**",
    "created_at": "2018-09-16T22:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404019",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw, Darij Grinberg**



---

archive/issue_comments_404020.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThis causes massive breakage on incremental builds. Some modules link to libzn_poly-0.9.so which no longer exists:\n\n```\n$ ldd src/build/lib.linux-x86_64-2.7/sage/modular/pollack_stevens/dist.so\n\tlinux-vdso.so.1 (0x00007ffc8a5f8000)\n\tlibflint.so.13 => /mnt/disk/home/release/Sage/local/lib/libflint.so.13 (0x00007f70f46db000)\n\tlibgmp.so.23 => /mnt/disk/home/release/Sage/local/lib/libgmp.so.23 (0x00007f70f4467000)\n\tlibzn_poly-0.9.so => not found\n$ ll local/lib/libzn_poly*\n-rwxrwxr-x. 1 release release 527456 Sep 18 00:22 local/lib/libzn_poly-0.9.1.so\nlrwxrwxrwx. 1 release release     19 Sep 18 00:22 local/lib/libzn_poly.so -> libzn_poly-0.9.1.so\n```",
    "created_at": "2018-09-18T22:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404020",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'>Comment 19:</a>
This causes massive breakage on incremental builds. Some modules link to libzn_poly-0.9.so which no longer exists:

```
$ ldd src/build/lib.linux-x86_64-2.7/sage/modular/pollack_stevens/dist.so
	linux-vdso.so.1 (0x00007ffc8a5f8000)
	libflint.so.13 => /mnt/disk/home/release/Sage/local/lib/libflint.so.13 (0x00007f70f46db000)
	libgmp.so.23 => /mnt/disk/home/release/Sage/local/lib/libgmp.so.23 (0x00007f70f4467000)
	libzn_poly-0.9.so => not found
$ ll local/lib/libzn_poly*
-rwxrwxr-x. 1 release release 527456 Sep 18 00:22 local/lib/libzn_poly-0.9.1.so
lrwxrwxrwx. 1 release release     19 Sep 18 00:22 local/lib/libzn_poly.so -> libzn_poly-0.9.1.so
```



---

archive/issue_events_329452.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-18T22:39:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329452"
}
```



---

archive/issue_events_329453.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-18T22:39:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329453"
}
```



---

archive/issue_comments_404021.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI'm not sure I understand.  Shouldn't they just be rebuilt?",
    "created_at": "2018-09-19T14:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404021",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'>Comment 20:</a>
I'm not sure I understand.  Shouldn't they just be rebuilt?



---

archive/issue_comments_404022.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nPerhaps I'll just modify it so that the soname still uses \"0.9\" instead of \"0.9.1\".  After all, the ABI is identical so there's no reason to change it.\n\nBut really Sage should just be rebuilt.  It lists zn_poly as a dependency, but there's no mechanism to recompile/link all modules that depend on a library that changed...",
    "created_at": "2018-09-19T14:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404022",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>Comment 21:</a>
Perhaps I'll just modify it so that the soname still uses "0.9" instead of "0.9.1".  After all, the ABI is identical so there's no reason to change it.

But really Sage should just be rebuilt.  It lists zn_poly as a dependency, but there's no mechanism to recompile/link all modules that depend on a library that changed...



---

archive/issue_comments_404023.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@embray](#comment%3A21):\n> Perhaps I'll just modify it so that the soname still uses \"0.9\" instead of \"0.9.1\".  After all, the ABI is identical so there's no reason to change it.\n> \n> But really Sage should just be rebuilt.  It lists zn_poly as a dependency, but there's no mechanism to recompile/link all modules that depend on a library that changed...\n\nThat doesn't see like a good thing to do. What if there happens to be a major upgrade? A less-bad-but-still-major-hack way to do this might be to touch all of the Cython files so they will be forced to be rebuilt and link against the new library.\n\nI agree that all of these files should just be rebuilt because the dependency changed. Maybe there is a bug somewhere in the build system?",
    "created_at": "2018-09-20T02:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404023",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@embray](#comment%3A21):
> Perhaps I'll just modify it so that the soname still uses "0.9" instead of "0.9.1".  After all, the ABI is identical so there's no reason to change it.
> 
> But really Sage should just be rebuilt.  It lists zn_poly as a dependency, but there's no mechanism to recompile/link all modules that depend on a library that changed...

That doesn't see like a good thing to do. What if there happens to be a major upgrade? A less-bad-but-still-major-hack way to do this might be to touch all of the Cython files so they will be forced to be rebuilt and link against the new library.

I agree that all of these files should just be rebuilt because the dependency changed. Maybe there is a bug somewhere in the build system?



---

archive/issue_comments_404024.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAFAICT there's no bug--although zn_poly is listed among the dependencies for Sage in the makefile, the result of updating them is to effectively run `./sage -b`, which has no mechanism by which to determine if any libraries modules are linked to changed.  As you suggested, the only obvious way to is touch all the Cython files, which should probably happen any time one of Sage's link-time dependencies change.\n\nSo that's something that clearly needs to be fixed.\n\nHowever, in the meantime, for zn_poly I really should have included a `libzn_poly-0.9` symlink, since there is effectively no difference between 0.9 and 0.9.1.  If/when I get around to redoing zn_poly's build system with automake I can easily handle this better.",
    "created_at": "2018-09-20T08:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404024",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'>Comment 23:</a>
AFAICT there's no bug--although zn_poly is listed among the dependencies for Sage in the makefile, the result of updating them is to effectively run `./sage -b`, which has no mechanism by which to determine if any libraries modules are linked to changed.  As you suggested, the only obvious way to is touch all the Cython files, which should probably happen any time one of Sage's link-time dependencies change.

So that's something that clearly needs to be fixed.

However, in the meantime, for zn_poly I really should have included a `libzn_poly-0.9` symlink, since there is effectively no difference between 0.9 and 0.9.1.  If/when I get around to redoing zn_poly's build system with automake I can easily handle this better.



---

archive/issue_comments_404025.json:
```json
{
    "body": "Attachment: **[zn_poly-0.9.1.tar.gz](https://github.com/sagemath/sage/files/ticket26050/zn_poly-0.9.1.tar.gz)**",
    "created_at": "2018-09-20T09:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404025",
    "user": "https://github.com/embray"
}
```

Attachment: **[zn_poly-0.9.1.tar.gz](https://github.com/sagemath/sage/files/ticket26050/zn_poly-0.9.1.tar.gz)**



---

archive/issue_comments_404026.json:
```json
{
    "body": "Changed commit from **[fd3d6e1](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d)** to **[11a44a1](https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9)**",
    "created_at": "2018-09-20T09:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd3d6e1](https://github.com/sagemath/sagetrac-mirror/commit/fd3d6e1cc53245d2e22b9b4a2c02f63dc9cb682d)** to **[11a44a1](https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9)**



---

archive/issue_comments_404027.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9\">11a44a1</a></td><td><code>Trac #26050 upgrade zn_poly to 0.9.1</code></td></tr></table>\n",
    "created_at": "2018-09-20T09:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404027",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9">11a44a1</a></td><td><code>Trac #26050 upgrade zn_poly to 0.9.1</code></td></tr></table>




---

archive/issue_comments_404028.json:
```json
{
    "body": "Changed commit from **[11a44a1](https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9)** to **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**",
    "created_at": "2018-09-20T09:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404028",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[11a44a1](https://github.com/sagemath/sagetrac-mirror/commit/11a44a1648471f922f68492547aab3b597699ca9)** to **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**



---

archive/issue_comments_404029.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7\">3e1ce90</a></td><td><code>this bit is not actually needed anymore</code></td></tr></table>\n",
    "created_at": "2018-09-20T09:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404029",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7">3e1ce90</a></td><td><code>this bit is not actually needed anymore</code></td></tr></table>




---

archive/issue_comments_404030.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nUpdated tarball and branch.  This version should retain the original \"libzn_poly-0.9.so\" SONAME on Linux, for a smooth upgrade.",
    "created_at": "2018-09-20T09:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404030",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'>Comment 26:</a>
Updated tarball and branch.  This version should retain the original "libzn_poly-0.9.so" SONAME on Linux, for a smooth upgrade.



---

archive/issue_events_329454.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-20T09:16:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329454"
}
```



---

archive/issue_events_329455.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-20T09:16:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329455"
}
```



---

archive/issue_comments_404031.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nCan you also bump the version when making a new release; the old tarball is already on the mirrors.",
    "created_at": "2018-09-20T17:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404031",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'>Comment 27:</a>
Can you also bump the version when making a new release; the old tarball is already on the mirrors.



---

archive/issue_comments_404032.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI am still not in favor of making a symlink, but I will not object to this as this ticket is a net improvement and my solution is still a hack.",
    "created_at": "2018-09-20T22:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404032",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'>Comment 28:</a>
I am still not in favor of making a symlink, but I will not object to this as this ticket is a net improvement and my solution is still a hack.



---

archive/issue_comments_404033.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nIt's not really a question of making a symlink.  In fact, really that has nothing to do with it--the problem is everything to do with the SONAME embedded in the binary.",
    "created_at": "2018-09-21T08:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404033",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'>Comment 29:</a>
It's not really a question of making a symlink.  In fact, really that has nothing to do with it--the problem is everything to do with the SONAME embedded in the binary.



---

archive/issue_comments_404034.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@vbraun](#comment%3A27):\n> Can you also bump the version when making a new release; the old tarball is already on the mirrors.\n\nI'm not sure what you mean.  I stated that the original 0.9.1 tarball I uploaded was a release candidate.  Perhaps I should have appended something to the filename to that effect.  The tarball attached to this ticket is different from the original one of the same name.  Can't you just replace it on the mirrors?  I don't think anyone cares if you do.",
    "created_at": "2018-09-21T08:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404034",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@vbraun](#comment%3A27):
> Can you also bump the version when making a new release; the old tarball is already on the mirrors.

I'm not sure what you mean.  I stated that the original 0.9.1 tarball I uploaded was a release candidate.  Perhaps I should have appended something to the filename to that effect.  The tarball attached to this ticket is different from the original one of the same name.  Can't you just replace it on the mirrors?  I don't think anyone cares if you do.



---

archive/issue_comments_404035.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@embray](#comment%3A29):\n> It's not really a question of making a symlink.  In fact, really that has nothing to do with it--the problem is everything to do with the SONAME embedded in the binary. \n\nI was going off what you said in [comment:23](#comment%3A23) (I'm still a bit out of my depth on these issues). But my objection still applies in either case: 0.9.1 should not be masquerading as 0.9. Yet, like I said, this should not block this ticket from getting a positive review.",
    "created_at": "2018-09-21T14:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404035",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@embray](#comment%3A29):
> It's not really a question of making a symlink.  In fact, really that has nothing to do with it--the problem is everything to do with the SONAME embedded in the binary. 

I was going off what you said in [comment:23](#comment%3A23) (I'm still a bit out of my depth on these issues). But my objection still applies in either case: 0.9.1 should not be masquerading as 0.9. Yet, like I said, this should not block this ticket from getting a positive review.



---

archive/issue_comments_404036.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI think I see what you're saying here, and I admit I'm not 100% sure if it's the best way to go either.  I'm being inspired partially by https://www.debian.org/doc/debian-policy/ch-sharedlibs.html, though the exact file naming scheme is not the same (for now) as Debian prescribes.\n\nThere the convention is generally that the *actual* .so file has the full library version in the filename (this allows multiple versions to be installed simultaneously, in principle.  Then there is usually at least once.  Then there's a symlink that is named the same as the library's SONAME, pointing to the real file.  Finally in some cases (but not all) there is a symlink that's just `libwhatever.so` with no version.\n\nFor example on my Debian system I have:\n\n```\nlrwxrwxrwx 1 root root       16 May 29  2017 libtiff.so -> libtiff.so.5.2.0\nlrwxrwxrwx 1 root root       16 May 29  2017 libtiff.so.5 -> libtiff.so.5.2.0\n-rw-r--r-- 1 root root   467208 May 29  2017 libtiff.so.5.2.0\n```\n\nThough for most libs there's no `libfoo.so`; usually just `libfoo.so.<ABI version>`.  I don't know why that's the case.\n\nIn this case for zn_poly what I have is:\n\n```\nlibzn_poly-0.9.1.so  (where 0.9.1 is the library version)\nlibzn_poly-0.9.so -> libzn_poly-0.9.1.so (where in this case I'm saying 0.9 is just the ABI version--in a future release I will probably change this to just \"1\")\nlibzn_poly.so -> libzn_poly-0.9.1.so  (generic libzn_poly without version info)\n```\n\nSo I think this makes sense, but is it \"right\"? I'm not really sure.  I plan to redo it later anyways when it's not as urgent :)",
    "created_at": "2018-09-21T14:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404036",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'>Comment 32:</a>
I think I see what you're saying here, and I admit I'm not 100% sure if it's the best way to go either.  I'm being inspired partially by https://www.debian.org/doc/debian-policy/ch-sharedlibs.html, though the exact file naming scheme is not the same (for now) as Debian prescribes.

There the convention is generally that the *actual* .so file has the full library version in the filename (this allows multiple versions to be installed simultaneously, in principle.  Then there is usually at least once.  Then there's a symlink that is named the same as the library's SONAME, pointing to the real file.  Finally in some cases (but not all) there is a symlink that's just `libwhatever.so` with no version.

For example on my Debian system I have:

```
lrwxrwxrwx 1 root root       16 May 29  2017 libtiff.so -> libtiff.so.5.2.0
lrwxrwxrwx 1 root root       16 May 29  2017 libtiff.so.5 -> libtiff.so.5.2.0
-rw-r--r-- 1 root root   467208 May 29  2017 libtiff.so.5.2.0
```

Though for most libs there's no `libfoo.so`; usually just `libfoo.so.<ABI version>`.  I don't know why that's the case.

In this case for zn_poly what I have is:

```
libzn_poly-0.9.1.so  (where 0.9.1 is the library version)
libzn_poly-0.9.so -> libzn_poly-0.9.1.so (where in this case I'm saying 0.9 is just the ABI version--in a future release I will probably change this to just "1")
libzn_poly.so -> libzn_poly-0.9.1.so  (generic libzn_poly without version info)
```

So I think this makes sense, but is it "right"? I'm not really sure.  I plan to redo it later anyways when it's not as urgent :)



---

archive/issue_comments_404037.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nI'm not quite sure either about Volker's [comment:27](#comment%3A27). Perhaps it was a misunderstanding? If not, Volker, could you explain a bit more when you set this back from positive review?",
    "created_at": "2018-09-22T22:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404037",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'>Comment 33:</a>
I'm not quite sure either about Volker's [comment:27](#comment%3A27). Perhaps it was a misunderstanding? If not, Volker, could you explain a bit more when you set this back from positive review?



---

archive/issue_events_329456.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-22T22:52:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329456"
}
```



---

archive/issue_events_329457.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-22T22:52:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329457"
}
```



---

archive/issue_comments_404038.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nThe mirrors don't update instantaneously, rather it takes some number of days that is up to the mirror admin. In the meantime everybody will download stale tarballs from the mirrors, note that the checksum does not match, and fail to build.\n\nI can update the tarball on the mirror and then you wait until **all** mirrors have updated if you prefer.",
    "created_at": "2018-09-22T23:08:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404038",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'>Comment 34:</a>
The mirrors don't update instantaneously, rather it takes some number of days that is up to the mirror admin. In the meantime everybody will download stale tarballs from the mirrors, note that the checksum does not match, and fail to build.

I can update the tarball on the mirror and then you wait until **all** mirrors have updated if you prefer.



---

archive/issue_events_329458.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-22T23:08:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329458"
}
```



---

archive/issue_events_329459.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-22T23:08:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329459"
}
```



---

archive/issue_comments_404039.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nI'm sorry, I still don't quite understand. The current (8.4.beta6) tarball is 0.9, but this new tarball is 0.9.1. Why is this different than any other spkg upgrade? At least, I see that as a version bump. Or did 0.9.1 get put onto the mirrors?",
    "created_at": "2018-09-23T22:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'>Comment 35:</a>
I'm sorry, I still don't quite understand. The current (8.4.beta6) tarball is 0.9, but this new tarball is 0.9.1. Why is this different than any other spkg upgrade? At least, I see that as a version bump. Or did 0.9.1 get put onto the mirrors?



---

archive/issue_comments_404040.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nTarballs are uploaded before the ticket is tested on the buildbot. On this ticket Eric had one 0.9.1 tarball, I tested it (hence uploaded to mirrors), then Eric make a different 0.9.1 tarball, the problem is going to be due to the different tarball.",
    "created_at": "2018-09-23T23:00:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404040",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'>Comment 36:</a>
Tarballs are uploaded before the ticket is tested on the buildbot. On this ticket Eric had one 0.9.1 tarball, I tested it (hence uploaded to mirrors), then Eric make a different 0.9.1 tarball, the problem is going to be due to the different tarball.



---

archive/issue_comments_404041.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nI see, I was not aware of that. Thank you for the explanation.",
    "created_at": "2018-09-23T23:10:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404041",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'>Comment 37:</a>
I see, I was not aware of that. Thank you for the explanation.



---

archive/issue_comments_404042.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\n> Tarballs are uploaded before the ticket is tested on the buildbot.\n\nWhy?  That doesn't make a lot of sense.  At the very least, shouldn't there be a couple of testing mirrors that the buildbots can be pointed to, rather that ones used for releases?\n\nWhat do I need to do here?  This issue not only blocks Cygwin builds, it is also preventing the Cygwin patchbot from proceeding.",
    "created_at": "2018-09-24T10:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404042",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'>Comment 38:</a>
> Tarballs are uploaded before the ticket is tested on the buildbot.

Why?  That doesn't make a lot of sense.  At the very least, shouldn't there be a couple of testing mirrors that the buildbots can be pointed to, rather that ones used for releases?

What do I need to do here?  This issue not only blocks Cygwin builds, it is also preventing the Cygwin patchbot from proceeding.



---

archive/issue_events_329460.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-24T10:15:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329460"
}
```



---

archive/issue_events_329461.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-24T10:15:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329461"
}
```



---

archive/issue_comments_404043.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nI'm just going to go ahead and set this back to positive review.  I'm going to go ahead now and put the updated tarball on the mirrors (now that I know how to do that).",
    "created_at": "2018-09-24T10:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404043",
    "user": "https://github.com/embray"
}
```

<a id='comment:39'>Comment 39:</a>
I'm just going to go ahead and set this back to positive review.  I'm going to go ahead now and put the updated tarball on the mirrors (now that I know how to do that).



---

archive/issue_events_329462.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-24T17:43:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329462"
}
```



---

archive/issue_events_329463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-24T17:43:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329463"
}
```



---

archive/issue_comments_404044.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nPlease set it back to positive review after all mirrors have synced",
    "created_at": "2018-09-24T17:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404044",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'>Comment 40:</a>
Please set it back to positive review after all mirrors have synced



---

archive/issue_events_329464.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-25T09:07:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329464"
}
```



---

archive/issue_events_329465.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-25T09:07:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329465"
}
```



---

archive/issue_comments_404045.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nI have no idea how to know that all mirrors have synced.  Look: The change has been reviewed positively in of its own right.  You are within your own power to determine if/when it is safe for you to merge--that's a matter of your process, not the review status of the change.",
    "created_at": "2018-09-25T09:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404045",
    "user": "https://github.com/embray"
}
```

<a id='comment:41'>Comment 41:</a>
I have no idea how to know that all mirrors have synced.  Look: The change has been reviewed positively in of its own right.  You are within your own power to determine if/when it is safe for you to merge--that's a matter of your process, not the review status of the change.



---

archive/issue_comments_404046.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nTo follow up: I'm not trying to pick a fight here; I just feel like you're creating a double-standard around this for some reason.  I've never seen you or anyone claim a ticket that updates a package does not have \"positive review\" just because the package tarball has not \"synced to all the mirrors\" (which IMO should not be part of the process in the first place but nevermind...)",
    "created_at": "2018-09-25T09:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404046",
    "user": "https://github.com/embray"
}
```

<a id='comment:42'>Comment 42:</a>
To follow up: I'm not trying to pick a fight here; I just feel like you're creating a double-standard around this for some reason.  I've never seen you or anyone claim a ticket that updates a package does not have "positive review" just because the package tarball has not "synced to all the mirrors" (which IMO should not be part of the process in the first place but nevermind...)



---

archive/issue_events_329466.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-25T09:20:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329466"
}
```



---

archive/issue_events_329467.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-25T09:20:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329467"
}
```



---

archive/issue_comments_404047.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nIn good faith, I'll set it back to \"needs_work\" but as I have no idea how to know if \"all mirrors are synced\" I will leave that to you.",
    "created_at": "2018-09-25T09:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404047",
    "user": "https://github.com/embray"
}
```

<a id='comment:43'>Comment 43:</a>
In good faith, I'll set it back to "needs_work" but as I have no idea how to know if "all mirrors are synced" I will leave that to you.



---

archive/issue_comments_404048.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nJust wait a day or two...",
    "created_at": "2018-09-25T22:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404048",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'>Comment 44:</a>
Just wait a day or two...



---

archive/issue_comments_404049.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nThat's fine, I'm in no hurry.  I am just confused.",
    "created_at": "2018-09-26T09:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404049",
    "user": "https://github.com/embray"
}
```

<a id='comment:45'>Comment 45:</a>
That's fine, I'm in no hurry.  I am just confused.



---

archive/issue_comments_404050.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nSince it has been 5 days, I am setting this back to positive review.",
    "created_at": "2018-09-30T22:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404050",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'>Comment 46:</a>
Since it has been 5 days, I am setting this back to positive review.



---

archive/issue_events_329468.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-30T22:06:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329468"
}
```



---

archive/issue_events_329469.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-30T22:06:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329469"
}
```



---

archive/issue_events_329470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-01T22:35:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329470"
}
```



---

archive/issue_events_329471.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5dc3fd2a5cfdc679bd2d020dded6fd1ccd0deb3a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-10-01T22:35:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26050#event-329471"
}
```



---

archive/issue_comments_404051.json:
```json
{
    "body": "Changed branch from **[u/embray/pkgs/zn_poly/upgrade](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pkgs/zn_poly/upgrade)** to **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**",
    "created_at": "2018-10-01T22:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404051",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/pkgs/zn_poly/upgrade](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/pkgs/zn_poly/upgrade)** to **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)**



---

archive/issue_comments_404052.json:
```json
{
    "body": "Changed commit from **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)** to none",
    "created_at": "2018-10-03T14:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404052",
    "user": "https://github.com/timokau"
}
```

Changed commit from **[3e1ce90](https://github.com/sagemath/sagetrac-mirror/commit/3e1ce9065ef499e47ab82f3cc30df03f690bdbe7)** to none



---

archive/issue_comments_404053.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nApparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional? And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?\n\nThanks for taking over maintenance!",
    "created_at": "2018-10-03T14:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404053",
    "user": "https://github.com/timokau"
}
```

<a id='comment:48'>Comment 48:</a>
Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional? And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?

Thanks for taking over maintenance!



---

archive/issue_comments_404054.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nReplying to [@timokau](#comment%3A48):\n> Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?\n\nYes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.\n\n> And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?\n\nYou can look at the commit log on the fork, but that's mainly it, modulo a few other minor build changes.\n\nI intend to redo the build system for this package, but it's low priority as long a the existing one is \"working\".",
    "created_at": "2018-10-03T15:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404054",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'>Comment 49:</a>
Replying to [@timokau](#comment%3A48):
> Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?

Yes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.

> And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?

You can look at the commit log on the fork, but that's mainly it, modulo a few other minor build changes.

I intend to redo the build system for this package, but it's low priority as long a the existing one is "working".



---

archive/issue_comments_404055.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nReplying to [@embray](#comment%3A49):\n> Replying to [@timokau](#comment%3A48):\n> > Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?\n\n> \n> Yes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.\n\nSo since that is done and sage and arch already ship 0.9.1, can you add the tag now?\n \n> > And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?\n\n> \n> You can look at the commit log on the fork, but that's mainly it, modulo a few other minor build changes.\n> \n> I intend to redo the build system for this package, but it's low priority as long a the existing one is \"working\".",
    "created_at": "2018-10-03T16:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404055",
    "user": "https://github.com/timokau"
}
```

<a id='comment:50'>Comment 50:</a>
Replying to [@embray](#comment%3A49):
> Replying to [@timokau](#comment%3A48):
> > Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?

> 
> Yes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.

So since that is done and sage and arch already ship 0.9.1, can you add the tag now?
 
> > And what are the differences between 0.9 and 0.9.1? Did you just apply all the sage patches?

> 
> You can look at the commit log on the fork, but that's mainly it, modulo a few other minor build changes.
> 
> I intend to redo the build system for this package, but it's low priority as long a the existing one is "working".



---

archive/issue_comments_404056.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nReplying to [@timokau](#comment%3A50):\n> Replying to [@embray](#comment%3A49):\n> > Replying to [@timokau](#comment%3A48):\n> > > Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?\n\n> > \n> > Yes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.\n\n> \n> So since that is done and sage and arch already ship 0.9.1, can you add the tag now?\n\nYup! I'll do it before the end of the week.",
    "created_at": "2018-10-03T16:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404056",
    "user": "https://github.com/embray"
}
```

<a id='comment:51'>Comment 51:</a>
Replying to [@timokau](#comment%3A50):
> Replying to [@embray](#comment%3A49):
> > Replying to [@timokau](#comment%3A48):
> > > Apparently sage ships zn_poly 0.9.1 now, but there is no tagged release on the fork. Is that intentional?

> > 
> > Yes. It says elsewhere here that I'll tag the new release after this ticket is approved (which it looks like it has been) since testing it against sage's buildbots was the best way to test it.

> 
> So since that is done and sage and arch already ship 0.9.1, can you add the tag now?

Yup! I'll do it before the end of the week.



---

archive/issue_comments_404057.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nOk done.  The new release can be obtained from its new canonical home at: https://gitlab.com/sagemath/zn_poly/tags/0.9.1",
    "created_at": "2018-10-04T09:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404057",
    "user": "https://github.com/embray"
}
```

<a id='comment:52'>Comment 52:</a>
Ok done.  The new release can be obtained from its new canonical home at: https://gitlab.com/sagemath/zn_poly/tags/0.9.1



---

archive/issue_comments_404058.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nThank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?",
    "created_at": "2018-10-04T20:42:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404058",
    "user": "https://github.com/timokau"
}
```

<a id='comment:53'>Comment 53:</a>
Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?



---

archive/issue_comments_404059.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@timokau](#comment%3A53):\n> Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?\n\nTBH I'm not sure it much matters.  If you build without running the \"tune\" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.\n\nIf I had the time and inclination I would redesign it to be able to read the tunings from a file rather than hard-coded, so the tuning program can be re-run on individual machines without having to recompile.  IIUC how the tuning program works, there's no deep reason it couldn't be done this way.",
    "created_at": "2018-10-05T09:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404059",
    "user": "https://github.com/embray"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@timokau](#comment%3A53):
> Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?

TBH I'm not sure it much matters.  If you build without running the "tune" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.

If I had the time and inclination I would redesign it to be able to read the tunings from a file rather than hard-coded, so the tuning program can be re-run on individual machines without having to recompile.  IIUC how the tuning program works, there's no deep reason it couldn't be done this way.



---

archive/issue_comments_404060.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nReplying to [@embray](#comment%3A54):\n> Replying to [@timokau](#comment%3A53):\n> > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?\n\n> \n> TBH I'm not sure it much matters.  If you build without running the \"tune\" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.\n\nThats good to know. I thought it may depend on some particular hardware aspects after tuning.\nOne other reason against always tuning is binary reproducibilty. I don't know if that is a goal\nof SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.\n\n> If I had the time and inclination I would redesign it to be able to read the tunings from a file rather than hard-coded, so the tuning program can be re-run on individual machines without having to recompile.  IIUC how the tuning program works, there's no deep reason it couldn't be done this way.",
    "created_at": "2018-10-05T16:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404060",
    "user": "https://github.com/timokau"
}
```

<a id='comment:55'>Comment 55:</a>
Replying to [@embray](#comment%3A54):
> Replying to [@timokau](#comment%3A53):
> > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?

> 
> TBH I'm not sure it much matters.  If you build without running the "tune" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.

Thats good to know. I thought it may depend on some particular hardware aspects after tuning.
One other reason against always tuning is binary reproducibilty. I don't know if that is a goal
of SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.

> If I had the time and inclination I would redesign it to be able to read the tunings from a file rather than hard-coded, so the tuning program can be re-run on individual machines without having to recompile.  IIUC how the tuning program works, there's no deep reason it couldn't be done this way.



---

archive/issue_comments_404061.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nReplying to [@timokau](#comment%3A55):\n> Replying to [@embray](#comment%3A54):\n> > Replying to [@timokau](#comment%3A53):\n> > > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?\n\n> > \n> > TBH I'm not sure it much matters.  If you build without running the \"tune\" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.\n\nIn this case it doesn't result in machine-specific code.  I don't fully understand how this code works to be honest, but my vague understanding is that it implements a number of different algorithms that may work at different speeds on different machines, and it adjusts how many times to run each algorithm to converge on the best solution the most efficiently.  Something to that effect... *waves hands*\n\n> Thats good to know. I thought it may depend on some particular hardware aspects after tuning.\n> One other reason against always tuning is binary reproducibilty. I don't know if that is a goal\n> of SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.\n\nI don't know if that's a goal for SAGE_FAT_BINARY either.  That might be something to bring up on the mailing list.  But yes, for binary reproducibility you'll want to disable tuning, so now (as document) the way to do that is to run `./configure --disable-tuning`.",
    "created_at": "2018-10-08T09:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404061",
    "user": "https://github.com/embray"
}
```

<a id='comment:56'>Comment 56:</a>
Replying to [@timokau](#comment%3A55):
> Replying to [@embray](#comment%3A54):
> > Replying to [@timokau](#comment%3A53):
> > > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?

> > 
> > TBH I'm not sure it much matters.  If you build without running the "tune" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.

In this case it doesn't result in machine-specific code.  I don't fully understand how this code works to be honest, but my vague understanding is that it implements a number of different algorithms that may work at different speeds on different machines, and it adjusts how many times to run each algorithm to converge on the best solution the most efficiently.  Something to that effect... *waves hands*

> Thats good to know. I thought it may depend on some particular hardware aspects after tuning.
> One other reason against always tuning is binary reproducibilty. I don't know if that is a goal
> of SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.

I don't know if that's a goal for SAGE_FAT_BINARY either.  That might be something to bring up on the mailing list.  But yes, for binary reproducibility you'll want to disable tuning, so now (as document) the way to do that is to run `./configure --disable-tuning`.



---

archive/issue_comments_404062.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nReplying to [@embray](#comment%3A56):\n> Replying to [@timokau](#comment%3A55):\n> > Replying to [@embray](#comment%3A54):\n> > > Replying to [@timokau](#comment%3A53):\n> > > > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?\n\n> > > \n> > > TBH I'm not sure it much matters.  If you build without running the \"tune\" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.\n\n> \n> In this case it doesn't result in machine-specific code.  I don't fully understand how this code works to be honest, but my vague understanding is that it implements a number of different algorithms that may work at different speeds on different machines, and it adjusts how many times to run each algorithm to converge on the best solution the most efficiently.  Something to that effect... *waves hands*\n> \n> > Thats good to know. I thought it may depend on some particular hardware aspects after tuning.\n> > One other reason against always tuning is binary reproducibilty. I don't know if that is a goal\n> > of SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.\n\n> \n> I don't know if that's a goal for SAGE_FAT_BINARY either.  That might be something to bring up on the mailing list.  But yes, for binary reproducibility you'll want to disable tuning, so now (as document) the way to do that is to run `./configure --disable-tuning`.\n\nBinary reproducibility is probably overkill for `SAGE_FAT_BINARY`, so it should be fine as-is. Thanks for the clarification.",
    "created_at": "2018-10-08T10:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26050",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26050#issuecomment-404062",
    "user": "https://github.com/timokau"
}
```

<a id='comment:57'>Comment 57:</a>
Replying to [@embray](#comment%3A56):
> Replying to [@timokau](#comment%3A55):
> > Replying to [@embray](#comment%3A54):
> > > Replying to [@timokau](#comment%3A53):
> > > > Thank you! I noticed that tuning is enabled by default now. Shouldn't it be disabled in spkg-install when `SAGE_FAT_BINARY` is set? I see that it wasn't before either, but it should right?

> > > 
> > > TBH I'm not sure it much matters.  If you build without running the "tune" program it just uses some default tunings from David Harvey's own machine from god-knows-when, so it's arbitrary either way.

> 
> In this case it doesn't result in machine-specific code.  I don't fully understand how this code works to be honest, but my vague understanding is that it implements a number of different algorithms that may work at different speeds on different machines, and it adjusts how many times to run each algorithm to converge on the best solution the most efficiently.  Something to that effect... *waves hands*
> 
> > Thats good to know. I thought it may depend on some particular hardware aspects after tuning.
> > One other reason against always tuning is binary reproducibilty. I don't know if that is a goal
> > of SAGE_FAT_BINARY, but at least thats the reason why I still disable tuning on nix.

> 
> I don't know if that's a goal for SAGE_FAT_BINARY either.  That might be something to bring up on the mailing list.  But yes, for binary reproducibility you'll want to disable tuning, so now (as document) the way to do that is to run `./configure --disable-tuning`.

Binary reproducibility is probably overkill for `SAGE_FAT_BINARY`, so it should be fine as-is. Thanks for the clarification.
