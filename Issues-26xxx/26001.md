# Issue 26001: Upgrade p_group_cohomology to version 3.1

archive/issues_025764.json:
```json
{
    "assignees": [],
    "body": "A recent fix in Singular makes computing a certain invariant of modular cohomology rings of finite groups faster, but another recent fix in Singular makes the p_group_cohomology package fail.\n\nThe new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).\n\nWhile I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.\n\n[Upstream tarball v3.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.1.tar.xz)\n\nDepends on #24735\nDepends on #22626\nDepends on #26389\nDepends on #26856\n\nCC:  @jdemeyer @tscrim @vbraun\n\nKeywords: **group cohomology singular**\n\nBranch/Commit: **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**\n\nReviewer: **Travis Scrimshaw, Dima Pasechnik**\n\nAuthor: **Simon King**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26001_\n\n",
    "closed_at": "2019-01-10T17:26:55Z",
    "created_at": "2018-08-05T11:17:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade p_group_cohomology to version 3.1",
    "type": "issue",
    "updated_at": "2019-01-10T17:26:55Z",
    "url": "https://github.com/sagemath/sage/issues/26001",
    "user": "https://github.com/simon-king-jena"
}
```
A recent fix in Singular makes computing a certain invariant of modular cohomology rings of finite groups faster, but another recent fix in Singular makes the p_group_cohomology package fail.

The new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).

While I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.

[Upstream tarball v3.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.1.tar.xz)

Depends on #24735
Depends on #22626
Depends on #26389
Depends on #26856

CC:  @jdemeyer @tscrim @vbraun

Keywords: **group cohomology singular**

Branch/Commit: **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**

Reviewer: **Travis Scrimshaw, Dima Pasechnik**

Author: **Simon King**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/26001_





---

archive/issue_events_359180.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-05T11:17:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359180"
}
```



---

archive/issue_events_359181.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-05T11:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359181"
}
```



---

archive/issue_events_359182.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-05T11:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359182"
}
```



---

archive/issue_events_359183.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-05T11:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359183"
}
```



---

archive/issue_comments_400540.json:
```json
{
    "body": "Dependencies: **#24735**",
    "created_at": "2018-08-05T11:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400540",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **#24735**



---

archive/issue_comments_400541.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come. And actually the problems already seem to be caused by #24735, not only #25993.",
    "created_at": "2018-08-05T16:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400541",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

For the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come. And actually the problems already seem to be caused by #24735, not only #25993.



---

archive/issue_comments_400542.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@simon-king-jena](#comment:2):\n> For the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come.\n\nI ran the Sage testsuite with #24735 and didn't get any failures. But maybe you are talking about issues in p_group_cohomology which do not affect Sage doctests?",
    "created_at": "2018-08-05T17:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400542",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@simon-king-jena](#comment:2):
> For the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come.

I ran the Sage testsuite with #24735 and didn't get any failures. But maybe you are talking about issues in p_group_cohomology which do not affect Sage doctests?



---

archive/issue_comments_400543.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jdemeyer](#comment:3):\n> Replying to [@simon-king-jena](#comment:2):\n> > For the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come.\n\n> \n> I ran the Sage testsuite with #24735 and didn't get any failures. But maybe you are talking about issues in p_group_cohomology which do not affect Sage doctests?\n\nRight, it seems that this one had a different reason.",
    "created_at": "2018-08-05T18:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400543",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jdemeyer](#comment:3):
> Replying to [@simon-king-jena](#comment:2):
> > For the record: I fixed one problem resulting from a change in Singular, but apparently there are more to come.

> 
> I ran the Sage testsuite with #24735 and didn't get any failures. But maybe you are talking about issues in p_group_cohomology which do not affect Sage doctests?

Right, it seems that this one had a different reason.



---

archive/issue_comments_400544.json:
```json
{
    "body": "Branch: **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1)**",
    "created_at": "2018-08-13T04:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400544",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1)**



---

archive/issue_events_359184.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-13T05:41:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359184"
}
```



---

archive/issue_comments_400545.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n A recent fix in Singular makes computing a certain invariant of modular cohomology rings of finite groups faster, but another recent fix in Singular makes the p_group_cohomology package fail.\n \n The new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).\n+\n+[Upstream](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)\n``````\n",
    "created_at": "2018-08-13T05:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400545",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 A recent fix in Singular makes computing a certain invariant of modular cohomology rings of finite groups faster, but another recent fix in Singular makes the p_group_cohomology package fail.
 
 The new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).
+
+[Upstream](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)
``````




---

archive/issue_comments_400546.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe new version copes with the changes in Singular also adds a new method that allows to find filter regular parameters in very small degrees after the computation of the cohomology ring has been completed. This may be useful to verify a conjecture of Benson in some open case.\n\n**__Known problem__**\n\nIn some Singular procedures, I use a Hilbert driven computation, which in older versions of Singular used to be a lot faster and less buggy than what Singular could offer (this is in the computation of intersections, quotients etc.). In the new p_group_cohomology version, I found that in one example, my Hilbert driven procedures would give a wrong result. So, I changed the procedures, using Singular's built-in functions.\n\nNow, **all tests pass**. However, some of these tests need a very long time, htop showing that the time is spent in Singular. Thus, I suppose it is because of dropping the Hilbert driven computations.\n\nSo, for now I am changing the ticket to \"needs_review\" --- after all, the tests pass. Nonetheless, I am investigating whether the slowness persists with Singular-4.1.1.p3 (after all, p3 fixes a performance problem in `std(id1,id2)` that was uncovered by my cohomology computations). If it doesn't, I will see how to work around the problem (such as: Use Hilbert only in characteristic two).",
    "created_at": "2018-08-13T05:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400546",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">comment:7</div>

The new version copes with the changes in Singular also adds a new method that allows to find filter regular parameters in very small degrees after the computation of the cohomology ring has been completed. This may be useful to verify a conjecture of Benson in some open case.

**__Known problem__**

In some Singular procedures, I use a Hilbert driven computation, which in older versions of Singular used to be a lot faster and less buggy than what Singular could offer (this is in the computation of intersections, quotients etc.). In the new p_group_cohomology version, I found that in one example, my Hilbert driven procedures would give a wrong result. So, I changed the procedures, using Singular's built-in functions.

Now, **all tests pass**. However, some of these tests need a very long time, htop showing that the time is spent in Singular. Thus, I suppose it is because of dropping the Hilbert driven computations.

So, for now I am changing the ticket to "needs_review" --- after all, the tests pass. Nonetheless, I am investigating whether the slowness persists with Singular-4.1.1.p3 (after all, p3 fixes a performance problem in `std(id1,id2)` that was uncovered by my cohomology computations). If it doesn't, I will see how to work around the problem (such as: Use Hilbert only in characteristic two).



---

archive/issue_comments_400547.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2018-08-13T05:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400547",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_comments_400548.json:
```json
{
    "body": "Commit: **[0c40f3e](https://github.com/sagemath/sagetrac-mirror/commit/0c40f3efc06cbc01f946cb6704090a704cf64a02)**",
    "created_at": "2018-08-13T05:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400548",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[0c40f3e](https://github.com/sagemath/sagetrac-mirror/commit/0c40f3efc06cbc01f946cb6704090a704cf64a02)**



---

archive/issue_comments_400549.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt seems that there is another problem: Documentation. It seems that all pages except index.html are basically empty. Could a reviewer please have a look what is going wrong there that didn't go wrong before?",
    "created_at": "2018-08-13T07:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400549",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

It seems that there is another problem: Documentation. It seems that all pages except index.html are basically empty. Could a reviewer please have a look what is going wrong there that didn't go wrong before?



---

archive/issue_comments_400550.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWith Singular-4.1.1.p3, one test fails. Again, it is related with `std(id1,id2)`: In the old version, the Krull dimension of an ideal in some example was 5, in the new version it is 4.\n\nBut actually that could be my own fault: The ideal `id1` is supposed to be a Gr\u00f6bner basis, but in my example it isn't. So, this I need to change.\n\nUnfortunately, the \"long time\" problem persists in Singular-4.1.1.p3. So, I have to return to using my Hilbert driven computations.",
    "created_at": "2018-08-13T08:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400550",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

With Singular-4.1.1.p3, one test fails. Again, it is related with `std(id1,id2)`: In the old version, the Krull dimension of an ideal in some example was 5, in the new version it is 4.

But actually that could be my own fault: The ideal `id1` is supposed to be a Gröbner basis, but in my example it isn't. So, this I need to change.

Unfortunately, the "long time" problem persists in Singular-4.1.1.p3. So, I have to return to using my Hilbert driven computations.



---

archive/issue_events_359185.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-13T08:09:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359185"
}
```



---

archive/issue_events_359186.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-13T08:09:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359186"
}
```



---

archive/issue_comments_400551.json:
```json
{
    "body": "Work Issues: **Work around Singular bugs and slowness**",
    "created_at": "2018-08-13T08:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400551",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Work around Singular bugs and slowness**



---

archive/issue_comments_400552.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCan the documentation problem be caused by having a wrong version number in the conf.py?? I couldn't test yet whether building the docs during package installation works. But building the docs in a separate directory does work.",
    "created_at": "2018-08-13T09:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400552",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

Can the documentation problem be caused by having a wrong version number in the conf.py?? I couldn't test yet whether building the docs during package installation works. But building the docs in a separate directory does work.



---

archive/issue_comments_400553.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nNot good at all.\n\n- Although the documentation builds fine when I build it separately, it consists of basically empty pages when I build it during package installation.\n- Some doctests are very slow, because of Singular, regardless whether it is Singular-4.1.1.p2 or .p3; at least it seems that it is not caused by my Hilbert driven computations. It could actually be that the slowness is in a function that could use a Hilbert driven computation, but currently doesn't. I need to investigate.",
    "created_at": "2018-08-13T10:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400553",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">comment:12</div>

Not good at all.

- Although the documentation builds fine when I build it separately, it consists of basically empty pages when I build it during package installation.
- Some doctests are very slow, because of Singular, regardless whether it is Singular-4.1.1.p2 or .p3; at least it seems that it is not caused by my Hilbert driven computations. It could actually be that the slowness is in a function that could use a Hilbert driven computation, but currently doesn't. I need to investigate.



---

archive/issue_comments_400554.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nConcerning the timings, I am not sure what is happening. As part of the test suite, I get\n\n```\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/cohomology.pyx\", line 5178, in pGroupCohomology.cohomology.COHO.essential_ideal\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     I = H.essential_ideal()    #long time\n[p_group_cohomology-3.0.1] Test ran for 60.72 s\n```\nIn an interactive session, the same test becomes\n\n```\nCPU times: user 5.26 s, sys: 1.03 s, total: 6.29 s\nWall time: 36.3 s\n```\nwhich is the expected long times, but not as long as during the tests.",
    "created_at": "2018-08-13T10:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400554",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Concerning the timings, I am not sure what is happening. As part of the test suite, I get

```
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/cohomology.pyx", line 5178, in pGroupCohomology.cohomology.COHO.essential_ideal
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     I = H.essential_ideal()    #long time
[p_group_cohomology-3.0.1] Test ran for 60.72 s
```
In an interactive session, the same test becomes

```
CPU times: user 5.26 s, sys: 1.03 s, total: 6.29 s
Wall time: 36.3 s
```
which is the expected long times, but not as long as during the tests.



---

archive/issue_comments_400555.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nEven more extreme is that one:\n\n```\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/__init__.py\", line 2391, in pGroupCohomology\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     H.make(14)\n[p_group_cohomology-3.0.1] Test ran for 892.58 s\n```\nversus\n\n```\nsage: %time H.make(14)                                            \nCPU times: user 7.32 s, sys: 1.52 s, total: 8.84 s\nWall time: 14.1 s\n```\nCould the problem lie in Sage's doctest framework? Are there known issues, maybe related with pexpect (which the computations heavily rely on)",
    "created_at": "2018-08-13T10:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400555",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Even more extreme is that one:

```
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/__init__.py", line 2391, in pGroupCohomology
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     H.make(14)
[p_group_cohomology-3.0.1] Test ran for 892.58 s
```
versus

```
sage: %time H.make(14)                                            
CPU times: user 7.32 s, sys: 1.52 s, total: 8.84 s
Wall time: 14.1 s
```
Could the problem lie in Sage's doctest framework? Are there known issues, maybe related with pexpect (which the computations heavily rely on)



---

archive/issue_comments_400556.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAre these computations being run in parallel? Sage doctesting (done in parallel) can get into some thrashing issues when tests use parallel code not handled through Sage (I noticed similar behavior for some of my tests, which farmed out things to normaliz and ran code in parallel).",
    "created_at": "2018-08-13T10:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400556",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Are these computations being run in parallel? Sage doctesting (done in parallel) can get into some thrashing issues when tests use parallel code not handled through Sage (I noticed similar behavior for some of my tests, which farmed out things to normaliz and ran code in parallel).



---

archive/issue_comments_400557.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tscrim](#comment:15):\n> Are these computations being run in parallel? Sage doctesting (done in parallel) can get into some thrashing issues when tests use parallel code not handled through Sage (I noticed similar behavior for some of my tests, which farmed out things to normaliz and ran code in parallel).\n\nI am not aware that the code uses threading. But that is maybe worth asking Hans Sch\u00f6nemann: It may be a possibility that the latest version of Singular uses parallel computations.",
    "created_at": "2018-08-13T10:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400557",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tscrim](#comment:15):
> Are these computations being run in parallel? Sage doctesting (done in parallel) can get into some thrashing issues when tests use parallel code not handled through Sage (I noticed similar behavior for some of my tests, which farmed out things to normaliz and ran code in parallel).

I am not aware that the code uses threading. But that is maybe worth asking Hans Schönemann: It may be a possibility that the latest version of Singular uses parallel computations.



---

archive/issue_comments_400558.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI don't think it's the doctest framework. Maybe the earlier doctests do something causing a slowdown later?",
    "created_at": "2018-08-13T11:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400558",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

I don't think it's the doctest framework. Maybe the earlier doctests do something causing a slowdown later?



---

archive/issue_comments_400559.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment:15):\n> Sage doctesting (done in parallel)\n\nThat's an important point: do you get the problems with doctesting in parallel or also when doctesting a single file?",
    "created_at": "2018-08-13T11:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400559",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment:15):
> Sage doctesting (done in parallel)

That's an important point: do you get the problems with doctesting in parallel or also when doctesting a single file?



---

archive/issue_comments_400560.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment:18):\n> Replying to [@tscrim](#comment:15):\n> > Sage doctesting (done in parallel)\n\n> \n> That's an important point: do you get the problems with doctesting in parallel or also when doctesting a single file?\n\nIf that is a question to me, in my case, it was whenever I did `sage -tp`. See this [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/8eTF_yP_maQ).",
    "created_at": "2018-08-13T11:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400560",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment:18):
> Replying to [@tscrim](#comment:15):
> > Sage doctesting (done in parallel)

> 
> That's an important point: do you get the problems with doctesting in parallel or also when doctesting a single file?

If that is a question to me, in my case, it was whenever I did `sage -tp`. See this [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/8eTF_yP_maQ).



---

archive/issue_comments_400561.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nFrom spgk-check:\n\n```\n# testing pGroupCohomology\nsage -tp 0 --long --force_lib --timeout=0 pyxsources/pGroupCohomology/ || sdh_die \"Error testing pGroupCohomology\"\n```\nI don't recall what `-tp 0` does. As many processes as available, resp. as specified by `MAKE=\"make -jN\"`?\n\nI didn't try without `-tp 0` yet, but will soon.",
    "created_at": "2018-08-13T12:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400561",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">comment:20</div>

From spgk-check:

```
# testing pGroupCohomology
sage -tp 0 --long --force_lib --timeout=0 pyxsources/pGroupCohomology/ || sdh_die "Error testing pGroupCohomology"
```
I don't recall what `-tp 0` does. As many processes as available, resp. as specified by `MAKE="make -jN"`?

I didn't try without `-tp 0` yet, but will soon.



---

archive/issue_comments_400562.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWhen running `sage -btp 0`, it uses all my cpus; so I am guessing it is equivalent to not passing any number. However, I am tempted to say it should run forever since it is testing something by using 0 cores. :P",
    "created_at": "2018-08-13T12:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400562",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

When running `sage -btp 0`, it uses all my cpus; so I am guessing it is equivalent to not passing any number. However, I am tempted to say it should run forever since it is testing something by using 0 cores. :P



---

archive/issue_comments_400563.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI would try it with just `-t`.",
    "created_at": "2018-08-13T12:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400563",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

I would try it with just `-t`.



---

archive/issue_comments_400564.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe undue doctest slowness did not go away with `sage -t`. Here is what I got:\n\n```\n[p_group_cohomology-3.0.1] Using --optional=ccache,database_gap,gap_packages,gfortran,meataxe,mpir,python2,sage\n[p_group_cohomology-3.0.1] Doctesting 12 files.\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cochain.pyx\n[p_group_cohomology-3.0.1]     [1459 tests, 293.21 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/barcode.py\n[p_group_cohomology-3.0.1]     [143 tests, 11.61 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/modular_cohomology.pyx\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/modular_cohomology.pyx\", line 132, in pGroupCohomology.modular_cohomology._IdGroup\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     _IdGroup(G2,D,H)\n[p_group_cohomology-3.0.1] Test ran for 38.77 s\n[p_group_cohomology-3.0.1]     [452 tests, 247.64 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution_bindings.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cohomology.pyx\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/cohomology.pyx\", line 10525, in pGroupCohomology.cohomology.COHO._poincare_series_old_implementation\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     for n in range(1,268):               #long time\n[p_group_cohomology-3.0.1]         H = CohomologyRing(64, n)\n[p_group_cohomology-3.0.1]         H.make()\n[p_group_cohomology-3.0.1]         if H.poincare_series() != H._poincare_series_old_implementation(): # indirect doctest\n[p_group_cohomology-3.0.1]             print(n)\n[p_group_cohomology-3.0.1] Test ran for 59.41 s\n[p_group_cohomology-3.0.1]     [1381 tests, 302.76 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cochain.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/factory.py\n[p_group_cohomology-3.0.1]     [216 tests, 43.12 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/auxiliaries.py\n[p_group_cohomology-3.0.1]     [69 tests, 1.87 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/__init__.py\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/__init__.py\", line 2391, in pGroupCohomology\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     H.make(14)\n[p_group_cohomology-3.0.1] Test ran for 561.11 s\n[p_group_cohomology-3.0.1]     [349 tests, 644.05 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/dickson.pyx\n[p_group_cohomology-3.0.1]     [28 tests, 1.57 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution.pyx\n[p_group_cohomology-3.0.1]     [882 tests, 10.83 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.0.1] All tests passed!\n[p_group_cohomology-3.0.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.0.1] Total time for all tests: 1562.4 seconds\n[p_group_cohomology-3.0.1]     cpu time: 709.4 seconds\n[p_group_cohomology-3.0.1]     cumulative wall time: 1556.7 seconds\n```\n\nSo, it is not unlikely that some stale data has accumulated in Singular, which thus became slow. The next thing to try: Let `CohomologyRing.doctest_setup()` restart Singular. In that way, the test would be closer to what one does in an interactive session.",
    "created_at": "2018-08-13T13:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400564",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">comment:23</div>

The undue doctest slowness did not go away with `sage -t`. Here is what I got:

```
[p_group_cohomology-3.0.1] Using --optional=ccache,database_gap,gap_packages,gfortran,meataxe,mpir,python2,sage
[p_group_cohomology-3.0.1] Doctesting 12 files.
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cochain.pyx
[p_group_cohomology-3.0.1]     [1459 tests, 293.21 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/barcode.py
[p_group_cohomology-3.0.1]     [143 tests, 11.61 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/modular_cohomology.pyx
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/modular_cohomology.pyx", line 132, in pGroupCohomology.modular_cohomology._IdGroup
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     _IdGroup(G2,D,H)
[p_group_cohomology-3.0.1] Test ran for 38.77 s
[p_group_cohomology-3.0.1]     [452 tests, 247.64 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution_bindings.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cohomology.pyx
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/cohomology.pyx", line 10525, in pGroupCohomology.cohomology.COHO._poincare_series_old_implementation
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     for n in range(1,268):               #long time
[p_group_cohomology-3.0.1]         H = CohomologyRing(64, n)
[p_group_cohomology-3.0.1]         H.make()
[p_group_cohomology-3.0.1]         if H.poincare_series() != H._poincare_series_old_implementation(): # indirect doctest
[p_group_cohomology-3.0.1]             print(n)
[p_group_cohomology-3.0.1] Test ran for 59.41 s
[p_group_cohomology-3.0.1]     [1381 tests, 302.76 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/cochain.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/factory.py
[p_group_cohomology-3.0.1]     [216 tests, 43.12 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/auxiliaries.py
[p_group_cohomology-3.0.1]     [69 tests, 1.87 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/__init__.py
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/__init__.py", line 2391, in pGroupCohomology
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     H.make(14)
[p_group_cohomology-3.0.1] Test ran for 561.11 s
[p_group_cohomology-3.0.1]     [349 tests, 644.05 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/dickson.pyx
[p_group_cohomology-3.0.1]     [28 tests, 1.57 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution.pyx
[p_group_cohomology-3.0.1]     [882 tests, 10.83 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 38.6 pyxsources/pGroupCohomology/resolution.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] ----------------------------------------------------------------------
[p_group_cohomology-3.0.1] All tests passed!
[p_group_cohomology-3.0.1] ----------------------------------------------------------------------
[p_group_cohomology-3.0.1] Total time for all tests: 1562.4 seconds
[p_group_cohomology-3.0.1]     cpu time: 709.4 seconds
[p_group_cohomology-3.0.1]     cumulative wall time: 1556.7 seconds
```

So, it is not unlikely that some stale data has accumulated in Singular, which thus became slow. The next thing to try: Let `CohomologyRing.doctest_setup()` restart Singular. In that way, the test would be closer to what one does in an interactive session.



---

archive/issue_comments_400565.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe situation has slightly improved: When restarting Singular more often, I get\n\n```\n[p_group_cohomology-3.0.1] Using --optional=ccache,database_gap,gap_packages,gfortran,meataxe,mpir,python2,sage\n[p_group_cohomology-3.0.1] Doctesting 12 files.\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cochain.pyx\n[p_group_cohomology-3.0.1]     [1459 tests, 289.01 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/barcode.py\n[p_group_cohomology-3.0.1]     [143 tests, 12.56 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/modular_cohomology.pyx\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/modular_cohomology.pyx\", line 132, in pGroupCohomology.modular_cohomology._IdGroup\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     _IdGroup(G2,D,H)\n[p_group_cohomology-3.0.1] Test ran for 39.07 s\n[p_group_cohomology-3.0.1]     [452 tests, 245.99 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution_bindings.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cohomology.pyx\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/cohomology.pyx\", line 10525, in pGroupCohomology.cohomology.COHO._poincare_series_old_implementation\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     for n in range(1,268):               #long time\n[p_group_cohomology-3.0.1]         H = CohomologyRing(64, n)\n[p_group_cohomology-3.0.1]         H.make()\n[p_group_cohomology-3.0.1]         if H.poincare_series() != H._poincare_series_old_implementation(): # indirect doctest\n[p_group_cohomology-3.0.1]             print(n)\n[p_group_cohomology-3.0.1] Test ran for 53.76 s\n[p_group_cohomology-3.0.1]     [1381 tests, 314.09 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cochain.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/factory.py\n[p_group_cohomology-3.0.1]     [216 tests, 43.32 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/auxiliaries.py\n[p_group_cohomology-3.0.1]     [69 tests, 2.24 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/__init__.py\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/__init__.py\", line 984, in pGroupCohomology\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     I = H.essential_ideal()    #long time\n[p_group_cohomology-3.0.1] Test ran for 36.48 s\n[p_group_cohomology-3.0.1] **********************************************************************\n[p_group_cohomology-3.0.1] File \"pyxsources/pGroupCohomology/__init__.py\", line 2386, in pGroupCohomology\n[p_group_cohomology-3.0.1] Warning, slow doctest:\n[p_group_cohomology-3.0.1]     H.make(14)\n[p_group_cohomology-3.0.1] Test ran for 561.76 s\n[p_group_cohomology-3.0.1]     [348 tests, 644.03 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/dickson.pyx\n[p_group_cohomology-3.0.1]     [28 tests, 1.56 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution.pyx\n[p_group_cohomology-3.0.1]     [882 tests, 11.85 s]\n[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution.pxd\n[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.0.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.0.1] All tests passed!\n[p_group_cohomology-3.0.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.0.1] Total time for all tests: 1592.2 seconds\n[p_group_cohomology-3.0.1]     cpu time: 729.7 seconds\n[p_group_cohomology-3.0.1]     cumulative wall time: 1564.6 seconds\n[p_group_cohomology-3.0.1] \n[p_group_cohomology-3.0.1] real\t26m36.275s\n[p_group_cohomology-3.0.1] user\t13m11.855s\n[p_group_cohomology-3.0.1] sys\t2m25.020s\n```\n\n**Edit**\n\nI originally thought I'd seen an improvement, but it's as bad as before.\n\nSo, what do you recommend to do?",
    "created_at": "2018-08-13T14:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400565",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">comment:24</div>

The situation has slightly improved: When restarting Singular more often, I get

```
[p_group_cohomology-3.0.1] Using --optional=ccache,database_gap,gap_packages,gfortran,meataxe,mpir,python2,sage
[p_group_cohomology-3.0.1] Doctesting 12 files.
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cochain.pyx
[p_group_cohomology-3.0.1]     [1459 tests, 289.01 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/barcode.py
[p_group_cohomology-3.0.1]     [143 tests, 12.56 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/modular_cohomology.pyx
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/modular_cohomology.pyx", line 132, in pGroupCohomology.modular_cohomology._IdGroup
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     _IdGroup(G2,D,H)
[p_group_cohomology-3.0.1] Test ran for 39.07 s
[p_group_cohomology-3.0.1]     [452 tests, 245.99 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution_bindings.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cohomology.pyx
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/cohomology.pyx", line 10525, in pGroupCohomology.cohomology.COHO._poincare_series_old_implementation
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     for n in range(1,268):               #long time
[p_group_cohomology-3.0.1]         H = CohomologyRing(64, n)
[p_group_cohomology-3.0.1]         H.make()
[p_group_cohomology-3.0.1]         if H.poincare_series() != H._poincare_series_old_implementation(): # indirect doctest
[p_group_cohomology-3.0.1]             print(n)
[p_group_cohomology-3.0.1] Test ran for 53.76 s
[p_group_cohomology-3.0.1]     [1381 tests, 314.09 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/cochain.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/factory.py
[p_group_cohomology-3.0.1]     [216 tests, 43.32 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/auxiliaries.py
[p_group_cohomology-3.0.1]     [69 tests, 2.24 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/__init__.py
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/__init__.py", line 984, in pGroupCohomology
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     I = H.essential_ideal()    #long time
[p_group_cohomology-3.0.1] Test ran for 36.48 s
[p_group_cohomology-3.0.1] **********************************************************************
[p_group_cohomology-3.0.1] File "pyxsources/pGroupCohomology/__init__.py", line 2386, in pGroupCohomology
[p_group_cohomology-3.0.1] Warning, slow doctest:
[p_group_cohomology-3.0.1]     H.make(14)
[p_group_cohomology-3.0.1] Test ran for 561.76 s
[p_group_cohomology-3.0.1]     [348 tests, 644.03 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/dickson.pyx
[p_group_cohomology-3.0.1]     [28 tests, 1.56 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution.pyx
[p_group_cohomology-3.0.1]     [882 tests, 11.85 s]
[p_group_cohomology-3.0.1] sage -t --long --warn-long 35.6 pyxsources/pGroupCohomology/resolution.pxd
[p_group_cohomology-3.0.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.0.1] ----------------------------------------------------------------------
[p_group_cohomology-3.0.1] All tests passed!
[p_group_cohomology-3.0.1] ----------------------------------------------------------------------
[p_group_cohomology-3.0.1] Total time for all tests: 1592.2 seconds
[p_group_cohomology-3.0.1]     cpu time: 729.7 seconds
[p_group_cohomology-3.0.1]     cumulative wall time: 1564.6 seconds
[p_group_cohomology-3.0.1] 
[p_group_cohomology-3.0.1] real	26m36.275s
[p_group_cohomology-3.0.1] user	13m11.855s
[p_group_cohomology-3.0.1] sys	2m25.020s
```

**Edit**

I originally thought I'd seen an improvement, but it's as bad as before.

So, what do you recommend to do?



---

archive/issue_comments_400566.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83c8ac26d40bfa342d4fe37d43ec9db84e1055ba\">83c8ac2</a></td><td><code>Upgrade to Singular 4.1.1p3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f10f27cdee580f6d3ea16e2ace2bb6be36fd04a2\">f10f27c</a></td><td><code>Merge branch 't/25993/ticket/25993' into t/26001/upgrade_p_group_cohomology_to_version_3_0_1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605\">f7c8acf</a></td><td><code>p_group_cohomology-3.0.1: Some upstream fixes</code></td></tr></table>\n",
    "created_at": "2018-08-14T09:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83c8ac26d40bfa342d4fe37d43ec9db84e1055ba">83c8ac2</a></td><td><code>Upgrade to Singular 4.1.1p3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f10f27cdee580f6d3ea16e2ace2bb6be36fd04a2">f10f27c</a></td><td><code>Merge branch 't/25993/ticket/25993' into t/26001/upgrade_p_group_cohomology_to_version_3_0_1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605">f7c8acf</a></td><td><code>p_group_cohomology-3.0.1: Some upstream fixes</code></td></tr></table>




---

archive/issue_comments_400567.json:
```json
{
    "body": "Changed commit from **[0c40f3e](https://github.com/sagemath/sagetrac-mirror/commit/0c40f3efc06cbc01f946cb6704090a704cf64a02)** to **[f7c8acf](https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605)**",
    "created_at": "2018-08-14T09:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0c40f3e](https://github.com/sagemath/sagetrac-mirror/commit/0c40f3efc06cbc01f946cb6704090a704cf64a02)** to **[f7c8acf](https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605)**



---

archive/issue_comments_400568.json:
```json
{
    "body": "Changed work issues from **Work around Singular bugs and slowness** to none",
    "created_at": "2018-08-14T09:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400568",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Work around Singular bugs and slowness** to none



---

archive/issue_events_359187.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-14T09:20:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359187"
}
```



---

archive/issue_events_359188.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-08-14T09:20:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359188"
}
```



---

archive/issue_comments_400569.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI have pushed my recent changes. The tests should pass.\n\nProblems:\n1. Some tests are MUCH slower than they should be. In an interactive session, they work a lot faster. I do not have the faintest idea what is causing the problem - if I understand correctly, it has not been the case with previous Singular versions.\n2. While the documentation builds fine in a separate directory, it totally fails to correctly build during package installation.\n\nDo you have an idea how to fix the above? If not, then I hope it doesn't prevent the package from being reviewed. In that way, it would at least be possible to upgrade to Singular-4.1.1.p3.",
    "created_at": "2018-08-14T09:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400569",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:26" align="right">comment:26</div>

I have pushed my recent changes. The tests should pass.

Problems:
1. Some tests are MUCH slower than they should be. In an interactive session, they work a lot faster. I do not have the faintest idea what is causing the problem - if I understand correctly, it has not been the case with previous Singular versions.
2. While the documentation builds fine in a separate directory, it totally fails to correctly build during package installation.

Do you have an idea how to fix the above? If not, then I hope it doesn't prevent the package from being reviewed. In that way, it would at least be possible to upgrade to Singular-4.1.1.p3.



---

archive/issue_comments_400570.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nPing.\n\nMeanwhile I consider to release version 3.1 of the cohomology package. News and changes:\n- I found that in an important example Singular has not been able to compute the Hilbert Poincar\u00e9 series, because of int overflow (upstream didn't answer my question whether it is possible to make Singular use bigint). I changed my programs so that my own implementation is used when the int overflow occurs.\n- My own implementation of Hilbert Poincar\u00e9 series computation will be improved and extended in the next version. It incorporates techniques that I learnt from an article of Anna Bigatti, whereas the old implementation followed the less efficient algorithm presented in Greuel's and Pfister's book.\n- The reason why I want to improve the computation of Hilbert Poincar\u00e9 series: I want to verify a conjecture of Dave Benson on the so-called filter degree type of modular group cohomology rings. So far, I thought that the computation of the filter degree type involves very expensive computations, but recently I realised that all what needs to be done is computed a couple of Hilbert Poincar\u00e9 series. And this will be in v3.1, too.\n\n**__QUESTION__**\n\nWhat shall happen with this ticket? The options I see are:\n1. Open a new ticket for p_group_cohomology-3.1 and close this one as wontfix.\n2. Open a new ticket for v3.1, but still wait for a review here.\n3. Change the topic of this ticket from \"Upgrade to v3.0.1\" to \"Upgrade to v3.1\".\n\nNote that I still have no clue concerning slow doctests (that aren't slow interactively and weren't slow in previous package versions) and the docbuild failure (that only occurs while installing the package, but not when building the docs in a separate step).",
    "created_at": "2018-09-01T16:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400570",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:27" align="right">comment:27</div>

Ping.

Meanwhile I consider to release version 3.1 of the cohomology package. News and changes:
- I found that in an important example Singular has not been able to compute the Hilbert Poincaré series, because of int overflow (upstream didn't answer my question whether it is possible to make Singular use bigint). I changed my programs so that my own implementation is used when the int overflow occurs.
- My own implementation of Hilbert Poincaré series computation will be improved and extended in the next version. It incorporates techniques that I learnt from an article of Anna Bigatti, whereas the old implementation followed the less efficient algorithm presented in Greuel's and Pfister's book.
- The reason why I want to improve the computation of Hilbert Poincaré series: I want to verify a conjecture of Dave Benson on the so-called filter degree type of modular group cohomology rings. So far, I thought that the computation of the filter degree type involves very expensive computations, but recently I realised that all what needs to be done is computed a couple of Hilbert Poincaré series. And this will be in v3.1, too.

**__QUESTION__**

What shall happen with this ticket? The options I see are:
1. Open a new ticket for p_group_cohomology-3.1 and close this one as wontfix.
2. Open a new ticket for v3.1, but still wait for a review here.
3. Change the topic of this ticket from "Upgrade to v3.0.1" to "Upgrade to v3.1".

Note that I still have no clue concerning slow doctests (that aren't slow interactively and weren't slow in previous package versions) and the docbuild failure (that only occurs while installing the package, but not when building the docs in a separate step).



---

archive/issue_comments_400571.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI would say go with option 3.",
    "created_at": "2018-09-06T13:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400571",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

I would say go with option 3.



---

archive/issue_comments_400572.json:
```json
{
    "body": "Work Issues: **Provide v3.1 instad of 3.0.1**",
    "created_at": "2018-09-28T17:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400572",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Provide v3.1 instad of 3.0.1**



---

archive/issue_events_359189.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-09-28T17:20:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359189"
}
```



---

archive/issue_events_359190.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-09-28T17:20:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359190"
}
```



---

archive/issue_comments_400573.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n The new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).\n \n-[Upstream](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)\n+While I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.\n+\n+[Upstream of version 3.0.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)\n``````\n",
    "created_at": "2018-09-28T17:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400573",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 The new version p_group_cohomology-3.0.1 is supposed to cope with the changes in Singular. I suggest to base it on top of #24735 and make it a dependency for #25993 (which contains the above mentioned changes in Singular).
 
-[Upstream](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)
+While I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.
+
+[Upstream of version 3.0.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)
``````




---

archive/issue_events_359191.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-09-28T17:20:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "title_is": "Upgrade p_group_cohomology to version 3.1",
    "title_was": "Upgrade p_group_cohomology to version 3.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359191"
}
```



---

archive/issue_comments_400574.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThis ticket is a dependency of #25993, but currently I have #25993 in my branch for this ticket. Is that a problem? I think a logical resolution would be to merge both into the same Sage release.",
    "created_at": "2018-09-28T18:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400574",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:30" align="right">comment:30</div>

This ticket is a dependency of #25993, but currently I have #25993 in my branch for this ticket. Is that a problem? I think a logical resolution would be to merge both into the same Sage release.



---

archive/issue_comments_400575.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThere are two options. The first is what you propose: merge both simultaneously. The second is to provide a patch file on #25993, and here, when you upgrade, you remove the patch file because of the upgrade. While the latter seems more complicated, it is in line with how we would handle the same situation for other packages (but usually with a less direct link to upstream). So I would say go with the first and make sure both are merged simultaneously (we might have to ask Volker about how to do this so his release scripts would handle it gracefully).",
    "created_at": "2018-09-28T22:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400575",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

There are two options. The first is what you propose: merge both simultaneously. The second is to provide a patch file on #25993, and here, when you upgrade, you remove the patch file because of the upgrade. While the latter seems more complicated, it is in line with how we would handle the same situation for other packages (but usually with a less direct link to upstream). So I would say go with the first and make sure both are merged simultaneously (we might have to ask Volker about how to do this so his release scripts would handle it gracefully).



---

archive/issue_comments_400576.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nSee #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).",
    "created_at": "2018-12-15T13:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400576",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

See #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).



---

archive/issue_comments_400577.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@dimpase](#comment:32):\n> See #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).\n\nI am not sure if I understand what you are saying.\n\nAre you saying that #26901 updates GAP but not libgap, and I shouldn't do a transition of my package to libgap till Sage got rid of pexpect GAP? That wouldn't be an option for me.\n\nBy the way, inside of the cohomology package I am not using Sage's groups at all. So, for me it simply doesn't matter whether Sage uses GAP or libgap for permutation groups. In the old version of my package, I directly use pexpect-GAP to do group computations, and in the upcoming version, I will directly use libgap for the same purpose. So, no Sage-groups are involved, if that's what you meant in your comment.\n\nSo, my plan is: Do the transition to libgap *now*. Reading the \"work issues\" of #22626, I will probably be done before #22626 is ready for review. And then, if issues arise, I can upgrade p_group_cohomology again (which will likely be trivial compared with the transition from pexpect GAP to libgap).",
    "created_at": "2018-12-15T15:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400577",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@dimpase](#comment:32):
> See #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).

I am not sure if I understand what you are saying.

Are you saying that #26901 updates GAP but not libgap, and I shouldn't do a transition of my package to libgap till Sage got rid of pexpect GAP? That wouldn't be an option for me.

By the way, inside of the cohomology package I am not using Sage's groups at all. So, for me it simply doesn't matter whether Sage uses GAP or libgap for permutation groups. In the old version of my package, I directly use pexpect-GAP to do group computations, and in the upcoming version, I will directly use libgap for the same purpose. So, no Sage-groups are involved, if that's what you meant in your comment.

So, my plan is: Do the transition to libgap *now*. Reading the "work issues" of #22626, I will probably be done before #22626 is ready for review. And then, if issues arise, I can upgrade p_group_cohomology again (which will likely be trivial compared with the transition from pexpect GAP to libgap).



---

archive/issue_comments_400578.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@simon-king-jena](#comment:33):\n> Replying to [@dimpase](#comment:32):\n> > See #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).\n\n> \n> I am not sure if I understand what you are saying.\n> \n> Are you saying that #26901 updates GAP but not libgap, and I shouldn't do a transition of my package to libgap till Sage got rid of pexpect GAP? That wouldn't be an option for me.\n\n\nCertainly, #26901 updates GAP and libGAP, moreover it gets rid of Sage's libGAP in favour of GAP's native libgap, which has finally arrived.\n\n> \n> By the way, inside of the cohomology package I am not using Sage's groups at all. So, for me it simply doesn't matter whether Sage uses GAP or libgap for permutation groups. In the old version of my package, I directly use pexpect-GAP to do group computations, and in the upcoming version, I will directly use libgap for the same purpose. So, no Sage-groups are involved, if that's what you meant in your comment.\n> \n> So, my plan is: Do the transition to libgap *now*. \n\nOK, in this case it sounds like a good plan.\n\n> Reading the \"work issues\" of #22626,\n\nthey haven't been updated for 5 weeks, it's now quite close to be finished in fact.\nErik has been working on it basically full-time for a couple of weeks.",
    "created_at": "2018-12-15T15:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400578",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@simon-king-jena](#comment:33):
> Replying to [@dimpase](#comment:32):
> > See #26901 for updating this package for new GAP 4.10. While it's desirable to update to libgap as well, the more logical procedure would be to get rid of pexpect GAP in core GAP-related functionality of Sage, in particular in permutation groups. Otherwise one has extra hassle interfacing libgap and gap, see e.g. #26889 (which is by the way ready for review).

> 
> I am not sure if I understand what you are saying.
> 
> Are you saying that #26901 updates GAP but not libgap, and I shouldn't do a transition of my package to libgap till Sage got rid of pexpect GAP? That wouldn't be an option for me.


Certainly, #26901 updates GAP and libGAP, moreover it gets rid of Sage's libGAP in favour of GAP's native libgap, which has finally arrived.

> 
> By the way, inside of the cohomology package I am not using Sage's groups at all. So, for me it simply doesn't matter whether Sage uses GAP or libgap for permutation groups. In the old version of my package, I directly use pexpect-GAP to do group computations, and in the upcoming version, I will directly use libgap for the same purpose. So, no Sage-groups are involved, if that's what you meant in your comment.
> 
> So, my plan is: Do the transition to libgap *now*. 

OK, in this case it sounds like a good plan.

> Reading the "work issues" of #22626,

they haven't been updated for 5 weeks, it's now quite close to be finished in fact.
Erik has been working on it basically full-time for a couple of weeks.



---

archive/issue_comments_400579.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dimpase](#comment:34):\n> > Reading the \"work issues\" of #22626,\n\n> \n> they haven't been updated for 5 weeks, it's now quite close to be finished in fact.\n> Erik has been working on it basically full-time for a couple of weeks.\n\nI see. In that case, I think it will be safe to use #22626 as a dependency and try the switch from pexpect to libgap with the new version.",
    "created_at": "2018-12-15T15:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400579",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dimpase](#comment:34):
> > Reading the "work issues" of #22626,

> 
> they haven't been updated for 5 weeks, it's now quite close to be finished in fact.
> Erik has been working on it basically full-time for a couple of weeks.

I see. In that case, I think it will be safe to use #22626 as a dependency and try the switch from pexpect to libgap with the new version.



---

archive/issue_comments_400580.json:
```json
{
    "body": "Changed dependencies from **#24735** to **#24735 #22626**",
    "created_at": "2018-12-15T15:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400580",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **#24735** to **#24735 #22626**



---

archive/issue_comments_400581.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI just tried to build the current development version of my package (manually, i.e., using `python setup.py build`). I get this warning:\n\n```\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/Cython/Compiler/Main.py:367: FutureWarning: Cython directive 'language_level' not set, using 2 for now (Py2). This will change in a later release! File: /home/king/Projekte/coho/coho-devel/src/pGroupCohomology/cochain.pxd\n```\nWhat to do?",
    "created_at": "2018-12-15T18:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400581",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:36" align="right">comment:36</div>

I just tried to build the current development version of my package (manually, i.e., using `python setup.py build`). I get this warning:

```
/home/king/Sage/git/sage/local/lib/python2.7/site-packages/Cython/Compiler/Main.py:367: FutureWarning: Cython directive 'language_level' not set, using 2 for now (Py2). This will change in a later release! File: /home/king/Projekte/coho/coho-devel/src/pGroupCohomology/cochain.pxd
```
What to do?



---

archive/issue_comments_400582.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nOK, I guess it is\n\n```\ncythonize(ext_mods, compiler_directives={'embedsignature': True,\n                                                       'language_level': 2})\n```",
    "created_at": "2018-12-15T18:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400582",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">comment:37</div>

OK, I guess it is

```
cythonize(ext_mods, compiler_directives={'embedsignature': True,
                                                       'language_level': 2})
```



---

archive/issue_comments_400583.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@simon-king-jena](#comment:37):\n> OK, I guess it is\n> \n> ```\n> cythonize(ext_mods, compiler_directives={'embedsignature': True,\n>                                                        'language_level': 2})\n> ```\n\nYes, adding the `language_level` should fix that deprecation warning.",
    "created_at": "2018-12-24T15:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400583",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@simon-king-jena](#comment:37):
> OK, I guess it is
> 
> ```
> cythonize(ext_mods, compiler_directives={'embedsignature': True,
>                                                        'language_level': 2})
> ```

Yes, adding the `language_level` should fix that deprecation warning.



---

archive/issue_comments_400584.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nAFAIC, the only remaining critical problem of the cohomology package after the switch to libgap is in the computation of barcodes. I am currently rewriting that function from scratch.\n\nAfter that, I hope that the other doctest errors will only be changed logging or changed sorting. So, hopefully it is ready for review before the end of the year.",
    "created_at": "2018-12-24T15:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400584",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:39" align="right">comment:39</div>

AFAIC, the only remaining critical problem of the cohomology package after the switch to libgap is in the computation of barcodes. I am currently rewriting that function from scratch.

After that, I hope that the other doctest errors will only be changed logging or changed sorting. So, hopefully it is ready for review before the end of the year.



---

archive/issue_comments_400585.json:
```json
{
    "body": "Changed dependencies from **#24735 #22626** to **#24735 #22626 #26389**",
    "created_at": "2018-12-27T20:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400585",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **#24735 #22626** to **#24735 #22626 #26389**



---

archive/issue_comments_400586.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI am trying to create a branch with all the dependencies for this ticket. My idea was to checkout the current develop branch and then to do `git trac pull` from the dependencies. Result:\n- `git trac pull 24735` says there is nothing to do, so, I guess it is merged already.\n- `git trac pull 22626` fails:\n\n  ```\n  king@klap:~/Sage/git/sage$ git trac checkout 22626\n  Loading ticket #22626...\n  Checking out Trac #22626 remote branch b446ebb496d45c4408aa949f98f855f962d9388a -> local branch t/22626/b446ebb496d45c4408aa949f98f855f962d9388a...\n  Traceback (most recent call last):\n    File \"/home/king/.local/bin/git-trac\", line 18, in <module>\n      cmdline.launch()\n    File \"/home/king/Sage/git/git-trac-command/git_trac/cmdline.py\", line 220, in launch\n      app.checkout(args.ticket_or_branch, args.branch_name)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/app.py\", line 118, in checkout\n      self._checkout_ticket(int(ticket_or_branch), branch_name)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/app.py\", line 146, in _checkout_ticket\n      self.repo.checkout_new_branch(ticket.branch, branch)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/git_repository.py\", line 136, in checkout_new_branch\n      self.git.fetch('trac', remote)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 341, in meth\n      return self.execute(git_cmd, *args, **kwds)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 328, in execute\n      popen_stderr=subprocess.PIPE)\n    File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 263, in _run\n      raise GitError(result)\n  git_trac.git_error.GitError: git returned with non-zero exit code (1) when executing \"git fetch trac b446ebb496d45c4408aa949f98f855f962d9388a\"\n  ```\n\nSo, what can I do?",
    "created_at": "2018-12-27T20:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400586",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:41" align="right">comment:41</div>

I am trying to create a branch with all the dependencies for this ticket. My idea was to checkout the current develop branch and then to do `git trac pull` from the dependencies. Result:
- `git trac pull 24735` says there is nothing to do, so, I guess it is merged already.
- `git trac pull 22626` fails:

  ```
  king@klap:~/Sage/git/sage$ git trac checkout 22626
  Loading ticket #22626...
  Checking out Trac #22626 remote branch b446ebb496d45c4408aa949f98f855f962d9388a -> local branch t/22626/b446ebb496d45c4408aa949f98f855f962d9388a...
  Traceback (most recent call last):
    File "/home/king/.local/bin/git-trac", line 18, in <module>
      cmdline.launch()
    File "/home/king/Sage/git/git-trac-command/git_trac/cmdline.py", line 220, in launch
      app.checkout(args.ticket_or_branch, args.branch_name)
    File "/home/king/Sage/git/git-trac-command/git_trac/app.py", line 118, in checkout
      self._checkout_ticket(int(ticket_or_branch), branch_name)
    File "/home/king/Sage/git/git-trac-command/git_trac/app.py", line 146, in _checkout_ticket
      self.repo.checkout_new_branch(ticket.branch, branch)
    File "/home/king/Sage/git/git-trac-command/git_trac/git_repository.py", line 136, in checkout_new_branch
      self.git.fetch('trac', remote)
    File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 341, in meth
      return self.execute(git_cmd, *args, **kwds)
    File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 328, in execute
      popen_stderr=subprocess.PIPE)
    File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 263, in _run
      raise GitError(result)
  git_trac.git_error.GitError: git returned with non-zero exit code (1) when executing "git fetch trac b446ebb496d45c4408aa949f98f855f962d9388a"
  ```

So, what can I do?



---

archive/issue_comments_400587.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nStrangely enough, it works now.",
    "created_at": "2018-12-27T20:23:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400587",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:42" align="right">comment:42</div>

Strangely enough, it works now.



---

archive/issue_comments_400588.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIf I understand correctly, the package dependency `database_gap` can now be removed.",
    "created_at": "2018-12-27T20:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400588",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">comment:43</div>

If I understand correctly, the package dependency `database_gap` can now be removed.



---

archive/issue_comments_400589.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@simon-king-jena](#comment:43):\n> If I understand correctly, the package dependency `database_gap` can now be removed.\n\nof course,it must - there is no more such package after #22626",
    "created_at": "2018-12-28T06:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400589",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@simon-king-jena](#comment:43):
> If I understand correctly, the package dependency `database_gap` can now be removed.

of course,it must - there is no more such package after #22626



---

archive/issue_comments_400590.json:
```json
{
    "body": "Changed work issues from **Provide v3.1 instad of 3.0.1** to none",
    "created_at": "2018-12-29T12:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400590",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Provide v3.1 instad of 3.0.1** to none



---

archive/issue_comments_400591.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n While I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.\n \n-[Upstream of version 3.0.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)\n+[Upstream tarball v3.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.1.tar.xz)\n``````\n",
    "created_at": "2018-12-29T12:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400591",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 While I was at it, I also improved more features of the package. Hence, I propose to upgrade to p_group_cohomology-3.1.
 
-[Upstream of version 3.0.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.0.1.tar.xz)
+[Upstream tarball v3.1](https://users.fmi.uni-jena.de/cohomology/p_group_cohomology-3.1.tar.xz)
``````




---

archive/issue_comments_400592.json:
```json
{
    "body": "Changed commit from **[f7c8acf](https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605)** to none",
    "created_at": "2018-12-29T12:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400592",
    "user": "https://github.com/simon-king-jena"
}
```

Changed commit from **[f7c8acf](https://github.com/sagemath/sagetrac-mirror/commit/f7c8acf5d0f259411628c288b74b63149ba8c605)** to none



---

archive/issue_comments_400593.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1)** to none",
    "created_at": "2018-12-29T12:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400593",
    "user": "https://github.com/simon-king-jena"
}
```

Changed branch from **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_0_1)** to none



---

archive/issue_comments_400594.json:
```json
{
    "body": "Branch: **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_1)**",
    "created_at": "2018-12-29T12:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400594",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_1)**



---

archive/issue_events_359192.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T12:55:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359192"
}
```



---

archive/issue_events_359193.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T12:55:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359193"
}
```



---

archive/issue_comments_400595.json:
```json
{
    "body": "Commit: **[53f3e3f](https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf)**",
    "created_at": "2018-12-29T12:55:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400595",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[53f3e3f](https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf)**



---

archive/issue_comments_400596.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI think the work is done. For me, the new version 3.1 of p_group_cohomology works with what currently is in develop, i.e., with Singular-4.1.1p2.p0 and GAP-4.10.0.\n\nNote that the total computation time for all groups of order 64 is now only about 6:15min walltime.\n\n```\nsage: from pGroupCohomology.factory import unit_test_64\nsage: unit_test_64()\n...\n#267: Walltime   6:12.67 min\n      CPU-time   5:46.87 min\n      Singular   0:42.96 min\n\n([], [372.67809295654297, 346.87493, 42.97])\n```\nIn the first package version, it used to be 45min or so.\n\nChanges wrt. v3.0:\n- Hilbert series computation by using a new implementation in SageMath.\n- Vastly improved computation of filter degree type (now relying on\n  Hilbert series).\n- Use libgap instead of the GAP pexpect interface.\n- Sub-package upgrade: modres-1.1\n- New routine to compute filter regular parameters in small degrees\n  by enumeration.\n- Cope with some changes in Singular.\n\nConcerning the last point: It has often been the case that changes in Singular or in the Sage library forced me to create a new version of the cohomology package. While this is still mentioned in SPKG.txt, I removed such details from the changelog that is part of the [package documentation](https://users.fmi.uni-jena.de/cohomology/documentation/).\n\nPlan for version 4.0: Replace the Singular pexpect interface with libsingular. It will be a lot more work than the change from gap to libgap, but I am sure that it will bring even more speed-up and stability, since the singular interface is used much more intensely than the gap interface.\n\nAnyway: I think it can now be reviewed!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ac3e183327c7e1cd0819edd9a5c8647a90dd31\">68ac3e1</a></td><td><code>Merge commit 'b446ebb496d45c4408aa949f98f855f962d9388a' of git://trac.sagemath.org/sage into m/26001/dependencies_for_p_group_cohomology-3.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82f945424cea48b760ca76c3ec1d120ccd3b4f58\">82f9454</a></td><td><code>Merge branch 'develop' into m/26001/dependencies_for_p_group_cohomology-3.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ecff0b4b771c0d17cfae906c6ba30598e8eb4d0\">6ecff0b</a></td><td><code>Upgrade to p_group_cohomology-3.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf\">53f3e3f</a></td><td><code>Upgrade to p_group_cohomology-3.1</code></td></tr></table>\n",
    "created_at": "2018-12-29T12:55:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400596",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:48" align="right">comment:48</div>

I think the work is done. For me, the new version 3.1 of p_group_cohomology works with what currently is in develop, i.e., with Singular-4.1.1p2.p0 and GAP-4.10.0.

Note that the total computation time for all groups of order 64 is now only about 6:15min walltime.

```
sage: from pGroupCohomology.factory import unit_test_64
sage: unit_test_64()
...
#267: Walltime   6:12.67 min
      CPU-time   5:46.87 min
      Singular   0:42.96 min

([], [372.67809295654297, 346.87493, 42.97])
```
In the first package version, it used to be 45min or so.

Changes wrt. v3.0:
- Hilbert series computation by using a new implementation in SageMath.
- Vastly improved computation of filter degree type (now relying on
  Hilbert series).
- Use libgap instead of the GAP pexpect interface.
- Sub-package upgrade: modres-1.1
- New routine to compute filter regular parameters in small degrees
  by enumeration.
- Cope with some changes in Singular.

Concerning the last point: It has often been the case that changes in Singular or in the Sage library forced me to create a new version of the cohomology package. While this is still mentioned in SPKG.txt, I removed such details from the changelog that is part of the [package documentation](https://users.fmi.uni-jena.de/cohomology/documentation/).

Plan for version 4.0: Replace the Singular pexpect interface with libsingular. It will be a lot more work than the change from gap to libgap, but I am sure that it will bring even more speed-up and stability, since the singular interface is used much more intensely than the gap interface.

Anyway: I think it can now be reviewed!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ac3e183327c7e1cd0819edd9a5c8647a90dd31">68ac3e1</a></td><td><code>Merge commit 'b446ebb496d45c4408aa949f98f855f962d9388a' of git://trac.sagemath.org/sage into m/26001/dependencies_for_p_group_cohomology-3.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82f945424cea48b760ca76c3ec1d120ccd3b4f58">82f9454</a></td><td><code>Merge branch 'develop' into m/26001/dependencies_for_p_group_cohomology-3.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ecff0b4b771c0d17cfae906c6ba30598e8eb4d0">6ecff0b</a></td><td><code>Upgrade to p_group_cohomology-3.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf">53f3e3f</a></td><td><code>Upgrade to p_group_cohomology-3.1</code></td></tr></table>




---

archive/issue_events_359194.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T14:21:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359194"
}
```



---

archive/issue_events_359195.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T14:21:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359195"
}
```



---

archive/issue_comments_400597.json:
```json
{
    "body": "Work Issues: **Upstream changes in documentation**",
    "created_at": "2018-12-29T14:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400597",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Upstream changes in documentation**



---

archive/issue_comments_400598.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSorry, I found that I should do some editorial changes.\n\nWhile I am at it, I now think that I should try to remove some of the very long tests. Indeed, some of theses tests only demonstrate how one should *not* proceed, and some of these tests appear twice in two different locations.\n\nSo, wait a few more hours before you review `;-)`...",
    "created_at": "2018-12-29T14:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400598",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:49" align="right">comment:49</div>

Sorry, I found that I should do some editorial changes.

While I am at it, I now think that I should try to remove some of the very long tests. Indeed, some of theses tests only demonstrate how one should *not* proceed, and some of these tests appear twice in two different locations.

So, wait a few more hours before you review `;-)`...



---

archive/issue_comments_400599.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50\">318f0ad</a></td><td><code>Update p_group_cohomology-3.1 checksum</code></td></tr></table>\n",
    "created_at": "2018-12-29T15:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400599",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50">318f0ad</a></td><td><code>Update p_group_cohomology-3.1 checksum</code></td></tr></table>




---

archive/issue_comments_400600.json:
```json
{
    "body": "Changed commit from **[53f3e3f](https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf)** to **[318f0ad](https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50)**",
    "created_at": "2018-12-29T15:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400600",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[53f3e3f](https://github.com/sagemath/sagetrac-mirror/commit/53f3e3f4e0272be687514a00b3836851a2624ccf)** to **[318f0ad](https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50)**



---

archive/issue_events_359196.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T16:12:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359196"
}
```



---

archive/issue_events_359197.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-12-29T16:12:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359197"
}
```



---

archive/issue_comments_400601.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nNow it's done. Copied from `sage -f -c p_group_cohomology`:\n\n```\n[p_group_cohomology-3.1] PASS: mnttest.sh\n[p_group_cohomology-3.1] ============================================================================\n[p_group_cohomology-3.1] Testsuite summary for modular_resolution 1.1\n[p_group_cohomology-3.1] ============================================================================\n[p_group_cohomology-3.1] # TOTAL: 1\n[p_group_cohomology-3.1] # PASS:  1\n[p_group_cohomology-3.1] # SKIP:  0\n[p_group_cohomology-3.1] # XFAIL: 0\n[p_group_cohomology-3.1] # FAIL:  0\n[p_group_cohomology-3.1] # XPASS: 0\n[p_group_cohomology-3.1] # ERROR: 0\n[p_group_cohomology-3.1] ============================================================================\n...\n[p_group_cohomology-3.1] Running doctests with ID 2018-12-29-16-14-41-55dab330.\n[p_group_cohomology-3.1] Git branch: t/26001/upgrade_p_group_cohomology_to_version_3_1\n[p_group_cohomology-3.1] Using --optional=ccache,database_gap,dochtml,frobby,gap_packages,gdb,gfortran,meataxe,memlimit,mpir,python2,sage\n[p_group_cohomology-3.1] Sorting sources by runtime so that slower doctests are run first....\n[p_group_cohomology-3.1] Doctesting 12 files using 3 threads.\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cochain.pxd\n[p_group_cohomology-3.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cohomology.pyx\n[p_group_cohomology-3.1] **********************************************************************\n[p_group_cohomology-3.1] File \"pyxsources/pGroupCohomology/cohomology.pyx\", line 5303, in pGroupCohomology.cohomology.COHO.essential_ideal\n[p_group_cohomology-3.1] Warning, slow doctest:\n[p_group_cohomology-3.1]     I = H.essential_ideal()    #long time\n[p_group_cohomology-3.1] Test ran for 57.93 s\n[p_group_cohomology-3.1]     [1372 tests, 313.75 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/modular_cohomology.pyx\n[p_group_cohomology-3.1]     [459 tests, 271.15 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cochain.pyx\n[p_group_cohomology-3.1]     [1460 tests, 345.80 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/factory.py\n[p_group_cohomology-3.1] **********************************************************************\n[p_group_cohomology-3.1] File \"pyxsources/pGroupCohomology/factory.py\", line 116, in pGroupCohomology.factory.unit_test_64\n[p_group_cohomology-3.1] Warning, slow doctest:\n[p_group_cohomology-3.1]     L,t = unit_test_64(from_scratch=False)    # long time\n[p_group_cohomology-3.1] Test ran for 37.09 s\n[p_group_cohomology-3.1]     [216 tests, 46.28 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/barcode.py\n[p_group_cohomology-3.1]     [143 tests, 12.35 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/dickson.pyx\n[p_group_cohomology-3.1]     [28 tests, 1.52 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/auxiliaries.py\n[p_group_cohomology-3.1]     [39 tests, 0.86 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution.pxd\n[p_group_cohomology-3.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution_bindings.pxd\n[p_group_cohomology-3.1]     [0 tests, 0.00 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/__init__.py\n[p_group_cohomology-3.1]     [343 tests, 104.25 s]\n[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution.pyx\n[p_group_cohomology-3.1]     [882 tests, 11.17 s]\n[p_group_cohomology-3.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.1] All tests passed!\n[p_group_cohomology-3.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.1] Total time for all tests: 384.9 seconds\n[p_group_cohomology-3.1]     cpu time: 779.8 seconds\n[p_group_cohomology-3.1]     cumulative wall time: 1107.1 seconds\n[p_group_cohomology-3.1] \n[p_group_cohomology-3.1] real\t6m27.444s\n[p_group_cohomology-3.1] user\t15m15.893s\n[p_group_cohomology-3.1] sys\t2m21.782s\n[p_group_cohomology-3.1] Successfully installed p_group_cohomology-3.1\n[p_group_cohomology-3.1] Deleting temporary build directory\n[p_group_cohomology-3.1] /home/king/Sage/git/sage/local/var/tmp/sage/build/p_group_cohomology-3.1\n[p_group_cohomology-3.1] Finished installing p_group_cohomology-3.1.spkg\n```\n\nSo, there are only two tests for which a \"long time\" warning arises.\n- One long test demonstrates a result on \"essential classes\" and show-cases capabilities of the method `essential_ideal()`. This test actually used to appear in the docs twice, but I have removed one copy of that test.\n- The other long test is a \"quick\" version of `unit_test_64`. The full test would take more than 6 minutes and would compute the cohomology rings of all 268 groups of order 64 from scratch, and compare with the stored results. The \"quick\" version merely tests that the 268 cohomology rings can all be unpickled. So, it tests the integrity of the data base that is shipped with the package.\n\nI prefer to keep both long tests.\n\nAnyway. Since `sage.tests.modular_group_cohomology` and the package's test suite pass, I think it is now in the shape to be reviewed.",
    "created_at": "2018-12-29T16:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400601",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:51" align="right">comment:51</div>

Now it's done. Copied from `sage -f -c p_group_cohomology`:

```
[p_group_cohomology-3.1] PASS: mnttest.sh
[p_group_cohomology-3.1] ============================================================================
[p_group_cohomology-3.1] Testsuite summary for modular_resolution 1.1
[p_group_cohomology-3.1] ============================================================================
[p_group_cohomology-3.1] # TOTAL: 1
[p_group_cohomology-3.1] # PASS:  1
[p_group_cohomology-3.1] # SKIP:  0
[p_group_cohomology-3.1] # XFAIL: 0
[p_group_cohomology-3.1] # FAIL:  0
[p_group_cohomology-3.1] # XPASS: 0
[p_group_cohomology-3.1] # ERROR: 0
[p_group_cohomology-3.1] ============================================================================
...
[p_group_cohomology-3.1] Running doctests with ID 2018-12-29-16-14-41-55dab330.
[p_group_cohomology-3.1] Git branch: t/26001/upgrade_p_group_cohomology_to_version_3_1
[p_group_cohomology-3.1] Using --optional=ccache,database_gap,dochtml,frobby,gap_packages,gdb,gfortran,meataxe,memlimit,mpir,python2,sage
[p_group_cohomology-3.1] Sorting sources by runtime so that slower doctests are run first....
[p_group_cohomology-3.1] Doctesting 12 files using 3 threads.
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cochain.pxd
[p_group_cohomology-3.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cohomology.pyx
[p_group_cohomology-3.1] **********************************************************************
[p_group_cohomology-3.1] File "pyxsources/pGroupCohomology/cohomology.pyx", line 5303, in pGroupCohomology.cohomology.COHO.essential_ideal
[p_group_cohomology-3.1] Warning, slow doctest:
[p_group_cohomology-3.1]     I = H.essential_ideal()    #long time
[p_group_cohomology-3.1] Test ran for 57.93 s
[p_group_cohomology-3.1]     [1372 tests, 313.75 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/modular_cohomology.pyx
[p_group_cohomology-3.1]     [459 tests, 271.15 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/cochain.pyx
[p_group_cohomology-3.1]     [1460 tests, 345.80 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/factory.py
[p_group_cohomology-3.1] **********************************************************************
[p_group_cohomology-3.1] File "pyxsources/pGroupCohomology/factory.py", line 116, in pGroupCohomology.factory.unit_test_64
[p_group_cohomology-3.1] Warning, slow doctest:
[p_group_cohomology-3.1]     L,t = unit_test_64(from_scratch=False)    # long time
[p_group_cohomology-3.1] Test ran for 37.09 s
[p_group_cohomology-3.1]     [216 tests, 46.28 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/barcode.py
[p_group_cohomology-3.1]     [143 tests, 12.35 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/dickson.pyx
[p_group_cohomology-3.1]     [28 tests, 1.52 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/auxiliaries.py
[p_group_cohomology-3.1]     [39 tests, 0.86 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution.pxd
[p_group_cohomology-3.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution_bindings.pxd
[p_group_cohomology-3.1]     [0 tests, 0.00 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/__init__.py
[p_group_cohomology-3.1]     [343 tests, 104.25 s]
[p_group_cohomology-3.1] sage -t --long --warn-long 30.9 pyxsources/pGroupCohomology/resolution.pyx
[p_group_cohomology-3.1]     [882 tests, 11.17 s]
[p_group_cohomology-3.1] ----------------------------------------------------------------------
[p_group_cohomology-3.1] All tests passed!
[p_group_cohomology-3.1] ----------------------------------------------------------------------
[p_group_cohomology-3.1] Total time for all tests: 384.9 seconds
[p_group_cohomology-3.1]     cpu time: 779.8 seconds
[p_group_cohomology-3.1]     cumulative wall time: 1107.1 seconds
[p_group_cohomology-3.1] 
[p_group_cohomology-3.1] real	6m27.444s
[p_group_cohomology-3.1] user	15m15.893s
[p_group_cohomology-3.1] sys	2m21.782s
[p_group_cohomology-3.1] Successfully installed p_group_cohomology-3.1
[p_group_cohomology-3.1] Deleting temporary build directory
[p_group_cohomology-3.1] /home/king/Sage/git/sage/local/var/tmp/sage/build/p_group_cohomology-3.1
[p_group_cohomology-3.1] Finished installing p_group_cohomology-3.1.spkg
```

So, there are only two tests for which a "long time" warning arises.
- One long test demonstrates a result on "essential classes" and show-cases capabilities of the method `essential_ideal()`. This test actually used to appear in the docs twice, but I have removed one copy of that test.
- The other long test is a "quick" version of `unit_test_64`. The full test would take more than 6 minutes and would compute the cohomology rings of all 268 groups of order 64 from scratch, and compare with the stored results. The "quick" version merely tests that the 268 cohomology rings can all be unpickled. So, it tests the integrity of the data base that is shipped with the package.

I prefer to keep both long tests.

Anyway. Since `sage.tests.modular_group_cohomology` and the package's test suite pass, I think it is now in the shape to be reviewed.



---

archive/issue_comments_400602.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nLGTM.",
    "created_at": "2018-12-30T19:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400602",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

LGTM.



---

archive/issue_events_359198.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-12-30T19:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359198"
}
```



---

archive/issue_events_359199.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-12-30T19:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359199"
}
```



---

archive/issue_comments_400603.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-12-30T19:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400603",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_359200.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-12-30T19:40:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359200"
}
```



---

archive/issue_events_359201.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-12-30T19:40:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359201"
}
```



---

archive/issue_comments_400604.json:
```json
{
    "body": "Changed work issues from **Upstream changes in documentation** to none",
    "created_at": "2018-12-30T19:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400604",
    "user": "https://github.com/tscrim"
}
```

Changed work issues from **Upstream changes in documentation** to none



---

archive/issue_comments_400605.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nMerge conflict",
    "created_at": "2018-12-31T10:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400605",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Merge conflict



---

archive/issue_events_359202.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-31T10:51:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359202"
}
```



---

archive/issue_events_359203.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-31T10:51:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359203"
}
```



---

archive/issue_comments_400606.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@vbraun](#comment:53):\n> Merge conflict\n\nPlease be more specific when you claim a merge conflict.\n\nAll what this ticket does is to touch files in `build/pkgs/p_group_cohomology` and `src/sage/tests/modular_group_cohomology/`, and I guess as the author of that package I would know if there had been a recent conflicting change in these files.",
    "created_at": "2018-12-31T12:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400606",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@vbraun](#comment:53):
> Merge conflict

Please be more specific when you claim a merge conflict.

All what this ticket does is to touch files in `build/pkgs/p_group_cohomology` and `src/sage/tests/modular_group_cohomology/`, and I guess as the author of that package I would know if there had been a recent conflicting change in these files.



---

archive/issue_comments_400607.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nIt seems that the merge conflict with #26856. Volker, next time please just tell it.",
    "created_at": "2019-01-01T11:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400607",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:55" align="right">comment:55</div>

It seems that the merge conflict with #26856. Volker, next time please just tell it.



---

archive/issue_comments_400608.json:
```json
{
    "body": "Changed dependencies from **#24735 #22626 #26389** to **#24735 #22626 #26389 #26856**",
    "created_at": "2019-01-01T11:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400608",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **#24735 #22626 #26389** to **#24735 #22626 #26389 #26856**



---

archive/issue_comments_400609.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nGosh, what is wrong now?\n\n```\nking@klap:~/Sage/git/sage$ git trac checkout 26856\nLoading ticket #26856...\nChecking out Trac #26856 remote branch 8bf1044efda750d8a767d88aa6a2afda69edadbe -> local branch t/26856/8bf1044efda750d8a767d88aa6a2afda69edadbe...\nTraceback (most recent call last):\n  File \"/home/king/.local/bin/git-trac\", line 18, in <module>\n    cmdline.launch()\n  File \"/home/king/Sage/git/git-trac-command/git_trac/cmdline.py\", line 220, in launch\n    app.checkout(args.ticket_or_branch, args.branch_name)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/app.py\", line 118, in checkout\n    self._checkout_ticket(int(ticket_or_branch), branch_name)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/app.py\", line 146, in _checkout_ticket\n    self.repo.checkout_new_branch(ticket.branch, branch)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_repository.py\", line 136, in checkout_new_branch\n    self.git.fetch('trac', remote)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 341, in meth\n    return self.execute(git_cmd, *args, **kwds)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 328, in execute\n    popen_stderr=subprocess.PIPE)\n  File \"/home/king/Sage/git/git-trac-command/git_trac/git_interface.py\", line 263, in _run\n    raise GitError(result)\ngit_trac.git_error.GitError: git returned with non-zero exit code (1) when executing \"git fetch trac 8bf1044efda750d8a767d88aa6a2afda69edadbe\"\n```",
    "created_at": "2019-01-01T11:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400609",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:56" align="right">comment:56</div>

Gosh, what is wrong now?

```
king@klap:~/Sage/git/sage$ git trac checkout 26856
Loading ticket #26856...
Checking out Trac #26856 remote branch 8bf1044efda750d8a767d88aa6a2afda69edadbe -> local branch t/26856/8bf1044efda750d8a767d88aa6a2afda69edadbe...
Traceback (most recent call last):
  File "/home/king/.local/bin/git-trac", line 18, in <module>
    cmdline.launch()
  File "/home/king/Sage/git/git-trac-command/git_trac/cmdline.py", line 220, in launch
    app.checkout(args.ticket_or_branch, args.branch_name)
  File "/home/king/Sage/git/git-trac-command/git_trac/app.py", line 118, in checkout
    self._checkout_ticket(int(ticket_or_branch), branch_name)
  File "/home/king/Sage/git/git-trac-command/git_trac/app.py", line 146, in _checkout_ticket
    self.repo.checkout_new_branch(ticket.branch, branch)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_repository.py", line 136, in checkout_new_branch
    self.git.fetch('trac', remote)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 341, in meth
    return self.execute(git_cmd, *args, **kwds)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 328, in execute
    popen_stderr=subprocess.PIPE)
  File "/home/king/Sage/git/git-trac-command/git_trac/git_interface.py", line 263, in _run
    raise GitError(result)
git_trac.git_error.GitError: git returned with non-zero exit code (1) when executing "git fetch trac 8bf1044efda750d8a767d88aa6a2afda69edadbe"
```



---

archive/issue_comments_400610.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nHow about just using plain git?\n\n(git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)",
    "created_at": "2019-01-01T12:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400610",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:57" align="right">comment:57</div>

How about just using plain git?

(git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)



---

archive/issue_comments_400611.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@dimpase](#comment:57):\n> How about just using plain git?\n> \n> (git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)\n\nHow?",
    "created_at": "2019-01-01T13:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400611",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@dimpase](#comment:57):
> How about just using plain git?
> 
> (git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)

How?



---

archive/issue_comments_400612.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@simon-king-jena](#comment:58):\n> Replying to [@dimpase](#comment:57):\n> > How about just using plain git?\n> > \n> > (git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)\n\n> \n> How?\n\nassuming trac is the tag of the correct remote, \n(i.e. the output of `git remote -v` contains the line\n`trac\tgit@trac.sagemath.org:sage.git (fetch)` ), do\n\n```\ngit fetch trac public/ticket-26856\ngit checkout -b foo_whatever FETCH_HEAD\n```\nchecks out the branch of #26856 (which is still there, just not reflected in the ticket's form any more; you can see the name in #26856, comment 137) and\ntags it `foo_whatever`.\nIf you don't need to give it a name, then the last line could be just\n\n```\ngit checkout FETCH_HEAD\n```",
    "created_at": "2019-01-01T14:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400612",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@simon-king-jena](#comment:58):
> Replying to [@dimpase](#comment:57):
> > How about just using plain git?
> > 
> > (git trac is really more of a release manager tool nowadays, using it on closed tickets is iffy...)

> 
> How?

assuming trac is the tag of the correct remote, 
(i.e. the output of `git remote -v` contains the line
`trac	git@trac.sagemath.org:sage.git (fetch)` ), do

```
git fetch trac public/ticket-26856
git checkout -b foo_whatever FETCH_HEAD
```
checks out the branch of #26856 (which is still there, just not reflected in the ticket's form any more; you can see the name in #26856, comment 137) and
tags it `foo_whatever`.
If you don't need to give it a name, then the last line could be just

```
git checkout FETCH_HEAD
```



---

archive/issue_comments_400613.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nIMHO doing anything with closed tickets is iffy; If the branch was changed in the meantime (because the author deleted it, or reused the branch name for another ticket) then its easy to get into a situaiton where you either cannot download it (only named branches can be downloaded, not sha1s) or where you are merging in the wrong code.",
    "created_at": "2019-01-01T14:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400613",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:60" align="right">comment:60</div>

IMHO doing anything with closed tickets is iffy; If the branch was changed in the meantime (because the author deleted it, or reused the branch name for another ticket) then its easy to get into a situaiton where you either cannot download it (only named branches can be downloaded, not sha1s) or where you are merging in the wrong code.



---

archive/issue_comments_400614.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e\">2c99aca</a></td><td><code>Merge branch 'develop' into t/26001/upgrade_p_group_cohomology_to_version_3_1</code></td></tr></table>\n",
    "created_at": "2019-01-01T14:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e">2c99aca</a></td><td><code>Merge branch 'develop' into t/26001/upgrade_p_group_cohomology_to_version_3_1</code></td></tr></table>




---

archive/issue_comments_400615.json:
```json
{
    "body": "Changed commit from **[318f0ad](https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50)** to **[2c99aca](https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e)**",
    "created_at": "2019-01-01T14:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400615",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[318f0ad](https://github.com/sagemath/sagetrac-mirror/commit/318f0ad695ebd0a5cbd0d5164dc1fe9cc3005e50)** to **[2c99aca](https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e)**



---

archive/issue_events_359204.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T14:21:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359204"
}
```



---

archive/issue_events_359205.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T14:21:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359205"
}
```



---

archive/issue_comments_400616.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThe merge conflict has only been in the \"dependencies\" file: #26856 changed it so that gap is a dependency, I changed it so that gap isn't mentioned. I hope it is fine to take the \"dependencies\" version of #26856.\n\nAm I right that it needs another review? I am rebuilding Sage (with the latest develop) right now and will then try to rebuild and test the package.",
    "created_at": "2019-01-01T14:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400616",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:62" align="right">comment:62</div>

The merge conflict has only been in the "dependencies" file: #26856 changed it so that gap is a dependency, I changed it so that gap isn't mentioned. I hope it is fine to take the "dependencies" version of #26856.

Am I right that it needs another review? I am rebuilding Sage (with the latest develop) right now and will then try to rebuild and test the package.



---

archive/issue_comments_400617.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI hate to think what could happen if a ticket merged in a beta-release stage gets unmerged before the release, while its branch is gone...\n \nAnyway, I merely illustrated a basic two-liner to check out a named branch using plain git, no more than that.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e\">2c99aca</a></td><td><code>Merge branch 'develop' into t/26001/upgrade_p_group_cohomology_to_version_3_1</code></td></tr></table>\n",
    "created_at": "2019-01-01T14:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400617",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">comment:63</div>

I hate to think what could happen if a ticket merged in a beta-release stage gets unmerged before the release, while its branch is gone...
 
Anyway, I merely illustrated a basic two-liner to check out a named branch using plain git, no more than that.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e">2c99aca</a></td><td><code>Merge branch 'develop' into t/26001/upgrade_p_group_cohomology_to_version_3_1</code></td></tr></table>




---

archive/issue_comments_400618.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@simon-king-jena](#comment:62):\n> The merge conflict has only been in the \"dependencies\" file: #26856 changed it so that gap is a dependency, I changed it so that gap isn't mentioned. I hope it is fine to take the \"dependencies\" version of #26856.\n\nI think the deps of an optional package ought to be as explicit as ones of a standard one, after all nothing prevents a user to try to install an optional package on an incomplete build of Sage, and then omitting deps would be lethal. So `gap` is there by right...\n\n> \n> Am I right that it needs another review? I am rebuilding Sage (with the latest develop) right now and will then try to rebuild and test the package.\n\nI think you could run the package's tests and mark the ticket positively reviewed if everything is OK.",
    "created_at": "2019-01-01T14:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400618",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@simon-king-jena](#comment:62):
> The merge conflict has only been in the "dependencies" file: #26856 changed it so that gap is a dependency, I changed it so that gap isn't mentioned. I hope it is fine to take the "dependencies" version of #26856.

I think the deps of an optional package ought to be as explicit as ones of a standard one, after all nothing prevents a user to try to install an optional package on an incomplete build of Sage, and then omitting deps would be lethal. So `gap` is there by right...

> 
> Am I right that it needs another review? I am rebuilding Sage (with the latest develop) right now and will then try to rebuild and test the package.

I think you could run the package's tests and mark the ticket positively reviewed if everything is OK.



---

archive/issue_events_359206.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T14:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359206"
}
```



---

archive/issue_events_359207.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T14:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359207"
}
```



---

archive/issue_comments_400619.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nSigh. It happened again. By some change, the package now fails completely. One cannot even import CohomologyRing. I have yet to find out what is happening there.",
    "created_at": "2019-01-01T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400619",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:65" align="right">comment:65</div>

Sigh. It happened again. By some change, the package now fails completely. One cannot even import CohomologyRing. I have yet to find out what is happening there.



---

archive/issue_comments_400620.json:
```json
{
    "body": "Work Issues: **Cope with a downstream change**",
    "created_at": "2019-01-01T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400620",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Cope with a downstream change**



---

archive/issue_comments_400621.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n\n```\nsage: from pGroupCohomology import CohomologyRing\nTraceback (most recent call last):\n...\nRuntimeError: Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:75\n  if isPrimePower(Size(G)) then\n                 ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:76\n     RegAct := Group(verifiedMinGens(regularPermutationAction(G: forceDefiningGenerators)));\n                                    ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:76\n     RegAct := Group(verifiedMinGens(regularPermutationAction(G: forceDefiningGenerators)));\n                                                             ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:78\n     RegAct := regularPermutationAction(G: forceDefiningGenerators);\n                                       ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:393\n  Exec(Concatenation(exportMTXLIB, \"makeActionMatrices \", name));\n                                 ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:418\n  Exec(Concatenation(exportMTXLIB, \"makeNontips -O \", orderString, \"  \",\n                                 ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:517\n    Exec(Concatenation(exportMTXLIB, \"makeActionMatrices \", name));\n                                   ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:548\n  Exec(Concatenation(exportMTXLIB, \"makeNontips -OJ \", String(ThePrime(ngg)), \" \", name));\n                                 ^\nSyntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:549\n  Exec(Concatenation(exportMTXLIB, \"makeActionMatrices \", name));\n                                 ^\nError, Variable: 'GroupName' is read only\n```",
    "created_at": "2019-01-01T14:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400621",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:66" align="right">comment:66</div>


```
sage: from pGroupCohomology import CohomologyRing
Traceback (most recent call last):
...
RuntimeError: Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:75
  if isPrimePower(Size(G)) then
                 ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:76
     RegAct := Group(verifiedMinGens(regularPermutationAction(G: forceDefiningGenerators)));
                                    ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:76
     RegAct := Group(verifiedMinGens(regularPermutationAction(G: forceDefiningGenerators)));
                                                             ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:78
     RegAct := regularPermutationAction(G: forceDefiningGenerators);
                                       ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:393
  Exec(Concatenation(exportMTXLIB, "makeActionMatrices ", name));
                                 ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:418
  Exec(Concatenation(exportMTXLIB, "makeNontips -O ", orderString, "  ",
                                 ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:517
    Exec(Concatenation(exportMTXLIB, "makeActionMatrices ", name));
                                   ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:548
  Exec(Concatenation(exportMTXLIB, "makeNontips -OJ ", String(ThePrime(ngg)), " ", name));
                                 ^
Syntax warning: Unbound global variable in /home/king/Sage/git/sage/local/share/sage/ext/gap/modular_cohomology/GapMB.g:549
  Exec(Concatenation(exportMTXLIB, "makeActionMatrices ", name));
                                 ^
Error, Variable: 'GroupName' is read only
```



---

archive/issue_comments_400622.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThis is GAP (one of its packages, I guess) that is using `GroupName` now:\n\n```\n$ ./sage --gap\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP 4.10.0 of 01-Nov-2018\n \u2502  GAP  \u2502   https://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: x86_64-pc-linux-gnu-default64\n Configuration:  gmp 6.0.0, readline\n Loading the library and packages ...\n Packages:   AClib 1.3.1, Alnuth 3.1.0, AtlasRep 1.5.1, AutoDoc 2018.09.20, \n             AutPGrp 1.10, CRISP 1.4.4, Cryst 4.1.18, CrystCat 1.1.8, \n             CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, GAPDoc 1.6.2, IO 4.5.4, \n             IRREDSOL 1.4, LAGUNA 3.9.0, Polenta 1.3.8, Polycyclic 2.14, \n             PrimGrp 3.3.2, RadiRoot 2.8, ResClasses 4.7.1, SmallGrp 1.3, \n             Sophus 1.24, TomLib 1.2.7, TransGrp 2.0.4, utils 0.59\n Try '??help' for help. See also '?copyright', '?cite' and '?authors'\ngap> GroupName:=1;\nError, Variable: 'GroupName' is read only\nnot in any function at *stdin*:1\nyou can 'return;' after making it writable\nbrk> \n```\n\nuser GAP code should not use such generic variable names, as GAP has no proper namespaces---whereas you have\n\n```\nGroupName := function(Gid)\n  local Gname, Gsize;\n  Gsize := Gid[1];\n  Gname := Concatenation(String(Gsize), \"gp\", String(Gid[2]));\n  return Gname;\nend;\n```\nin `pyxsources/pGroupCohomology/GapSgs.g`. So renaming this function would do...",
    "created_at": "2019-01-01T14:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400622",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:67" align="right">comment:67</div>

This is GAP (one of its packages, I guess) that is using `GroupName` now:

```
$ ./sage --gap
 ┌───────┐   GAP 4.10.0 of 01-Nov-2018
 │  GAP  │   https://www.gap-system.org
 └───────┘   Architecture: x86_64-pc-linux-gnu-default64
 Configuration:  gmp 6.0.0, readline
 Loading the library and packages ...
 Packages:   AClib 1.3.1, Alnuth 3.1.0, AtlasRep 1.5.1, AutoDoc 2018.09.20, 
             AutPGrp 1.10, CRISP 1.4.4, Cryst 4.1.18, CrystCat 1.1.8, 
             CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, GAPDoc 1.6.2, IO 4.5.4, 
             IRREDSOL 1.4, LAGUNA 3.9.0, Polenta 1.3.8, Polycyclic 2.14, 
             PrimGrp 3.3.2, RadiRoot 2.8, ResClasses 4.7.1, SmallGrp 1.3, 
             Sophus 1.24, TomLib 1.2.7, TransGrp 2.0.4, utils 0.59
 Try '??help' for help. See also '?copyright', '?cite' and '?authors'
gap> GroupName:=1;
Error, Variable: 'GroupName' is read only
not in any function at *stdin*:1
you can 'return;' after making it writable
brk> 
```

user GAP code should not use such generic variable names, as GAP has no proper namespaces---whereas you have

```
GroupName := function(Gid)
  local Gname, Gsize;
  Gsize := Gid[1];
  Gname := Concatenation(String(Gsize), "gp", String(Gid[2]));
  return Gname;
end;
```
in `pyxsources/pGroupCohomology/GapSgs.g`. So renaming this function would do...



---

archive/issue_comments_400623.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@dimpase](#comment:67):\n> So renaming this function would do...\n\nOK. GroupName is a bad description of that function anyway. It takes a SmallGroup address (otherwise named `Gid`), say, `(128,160)`, and turns it not into the name of the group (which would be `\"Modular group of order 128\"`, but into the string `\"128gp160\"` (otherwise named `GStem`), which is used to create the names of data directories associated with that group.\n\nSo, I'll call it `Gid2GStem`.",
    "created_at": "2019-01-01T15:52:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400623",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@dimpase](#comment:67):
> So renaming this function would do...

OK. GroupName is a bad description of that function anyway. It takes a SmallGroup address (otherwise named `Gid`), say, `(128,160)`, and turns it not into the name of the group (which would be `"Modular group of order 128"`, but into the string `"128gp160"` (otherwise named `GStem`), which is used to create the names of data directories associated with that group.

So, I'll call it `Gid2GStem`.



---

archive/issue_comments_400624.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI actually checked that with such a change (editing one GAP source file in like 4 places) the import above works.\n(As you don't host your package publicly, I can't send you a pull request :-P)",
    "created_at": "2019-01-01T16:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400624",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:69" align="right">comment:69</div>

I actually checked that with such a change (editing one GAP source file in like 4 places) the import above works.
(As you don't host your package publicly, I can't send you a pull request :-P)



---

archive/issue_comments_400625.json:
```json
{
    "body": "Changed commit from **[2c99aca](https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e)** to **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**",
    "created_at": "2019-01-01T16:36:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2c99aca](https://github.com/sagemath/sagetrac-mirror/commit/2c99aca999e2932ed58ec6219cde8e47f67bf90e)** to **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**



---

archive/issue_comments_400626.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2\">076cbf2</a></td><td><code>p_group_cohomology: Avoid conflict with a new global variable name in Gap</code></td></tr></table>\n",
    "created_at": "2019-01-01T16:36:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400626",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2">076cbf2</a></td><td><code>p_group_cohomology: Avoid conflict with a new global variable name in Gap</code></td></tr></table>




---

archive/issue_comments_400627.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI have updated the tarball (same address as before). After the change, I get\n\n```\n[p_group_cohomology-3.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.1] All tests passed!\n[p_group_cohomology-3.1] ----------------------------------------------------------------------\n[p_group_cohomology-3.1] Total time for all tests: 467.4 seconds\n[p_group_cohomology-3.1]     cpu time: 920.5 seconds\n[p_group_cohomology-3.1]     cumulative wall time: 1350.9 seconds\n```\nSince the change hasn't been totally trivial, I leave it up to decide whether it can be \"positive review\".",
    "created_at": "2019-01-01T16:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400627",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:71" align="right">comment:71</div>

I have updated the tarball (same address as before). After the change, I get

```
[p_group_cohomology-3.1] ----------------------------------------------------------------------
[p_group_cohomology-3.1] All tests passed!
[p_group_cohomology-3.1] ----------------------------------------------------------------------
[p_group_cohomology-3.1] Total time for all tests: 467.4 seconds
[p_group_cohomology-3.1]     cpu time: 920.5 seconds
[p_group_cohomology-3.1]     cumulative wall time: 1350.9 seconds
```
Since the change hasn't been totally trivial, I leave it up to decide whether it can be "positive review".



---

archive/issue_events_359208.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T16:38:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359208"
}
```



---

archive/issue_events_359209.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2019-01-01T16:38:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359209"
}
```



---

archive/issue_comments_400628.json:
```json
{
    "body": "Changed work issues from **Cope with a downstream change** to none",
    "created_at": "2019-01-01T16:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400628",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Cope with a downstream change** to none



---

archive/issue_comments_400629.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nHappy New Year, Simon :-)",
    "created_at": "2019-01-01T16:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400629",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:73" align="right">comment:73</div>

Happy New Year, Simon :-)



---

archive/issue_events_359210.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-01T16:41:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359210"
}
```



---

archive/issue_events_359211.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-01T16:41:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359211"
}
```



---

archive/issue_comments_400630.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Dima Pasechnik**",
    "created_at": "2019-01-01T16:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400630",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Dima Pasechnik**



---

archive/issue_comments_400631.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@dimpase](#comment:73):\n> Happy New Year, Simon :-)\n\nTo you as well, Dima!",
    "created_at": "2019-01-01T16:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400631",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@dimpase](#comment:73):
> Happy New Year, Simon :-)

To you as well, Dima!



---

archive/issue_events_359212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-08T11:22:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359212"
}
```



---

archive/issue_events_359213.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-08T11:22:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359213"
}
```



---

archive/issue_comments_400632.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nSince the old package no longer works with Sage 8.6.rc0, this should be merged in 8.6",
    "created_at": "2019-01-08T11:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400632",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:75" align="right">comment:75</div>

Since the old package no longer works with Sage 8.6.rc0, this should be merged in 8.6



---

archive/issue_events_359214.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-10T17:26:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359214"
}
```



---

archive/issue_events_359215.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4c97235a2c91f2cbbf4ae659a595b814abe6b33e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-01-10T17:26:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26001#event-359215"
}
```



---

archive/issue_comments_400633.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_1)** to **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**",
    "created_at": "2019-01-10T17:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26001#issuecomment-400633",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/SimonKing/upgrade_p_group_cohomology_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_p_group_cohomology_to_version_3_1)** to **[076cbf2](https://github.com/sagemath/sagetrac-mirror/commit/076cbf20c8ac18a1ef3d3d9c364f8dcc299f7ae2)**
