# Issue 26288: upgrade matplotlib to 2.2.3

archive/issues_026051.json:
```json
{
    "assignees": [],
    "body": "This fixes compilation errors with clang 6.0.1\n\n**Tarball** (created using spkg-src):\nhttp://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2\n\nWe also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions. This is needed for #27000.\n\nOur last upgrade was to matplotlib 2.2.2 in #25702.\n\nNote that matplotlib 3.x.y versions require Python 3.\n\n\n\nCC:  @antonio-rojas @kiwifb @timokau @infinity0 @kcrisman @saraedum @slel @tobihan\n\nKeywords: **upgrade, matplotlib**\n\nBranch/Commit: **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Dima Pasechnik, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26288_\n\n",
    "closed_at": "2019-01-30T19:18:19Z",
    "created_at": "2018-09-15T04:08:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade matplotlib to 2.2.3",
    "type": "issue",
    "updated_at": "2019-01-30T19:18:19Z",
    "url": "https://github.com/sagemath/sage/issues/26288",
    "user": "https://github.com/dimpase"
}
```
This fixes compilation errors with clang 6.0.1

**Tarball** (created using spkg-src):
http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2

We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions. This is needed for #27000.

Our last upgrade was to matplotlib 2.2.2 in #25702.

Note that matplotlib 3.x.y versions require Python 3.



CC:  @antonio-rojas @kiwifb @timokau @infinity0 @kcrisman @saraedum @slel @tobihan

Keywords: **upgrade, matplotlib**

Branch/Commit: **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**

Reviewer: **Dima Pasechnik**

Author: **Dima Pasechnik, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/26288_





---

archive/issue_events_344317.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-09-15T04:08:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344317"
}
```



---

archive/issue_events_344318.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-09-15T04:08:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344318"
}
```



---

archive/issue_events_344319.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-09-15T04:08:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344319"
}
```



---

archive/issue_events_344320.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-09-15T04:08:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344320"
}
```



---

archive/issue_comments_408158.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/matplotlib223)**",
    "created_at": "2018-09-15T04:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408158",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/matplotlib223)**



---

archive/issue_events_344321.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-09-15T04:18:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344321"
}
```



---

archive/issue_comments_408159.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605\">72526fc</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr></table>\n",
    "created_at": "2018-09-15T04:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408159",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605">72526fc</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr></table>




---

archive/issue_comments_408160.json:
```json
{
    "body": "Commit: **[72526fc](https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605)**",
    "created_at": "2018-09-15T04:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408160",
    "user": "https://github.com/dimpase"
}
```

Commit: **[72526fc](https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605)**



---

archive/issue_comments_408161.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBuilding `cvxopt` with `SAGE_CHECK=\"yes\"` still fails when running headless (#24657). Not sure if that's strictly a `cvxopt` or a `matplotlib` issue.",
    "created_at": "2018-11-07T12:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408161",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:2" align="right">Comment 2</div>

Building `cvxopt` with `SAGE_CHECK="yes"` still fails when running headless (#24657). Not sure if that's strictly a `cvxopt` or a `matplotlib` issue.



---

archive/issue_events_344322.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-21T17:14:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344322"
}
```



---

archive/issue_events_344323.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-21T17:14:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344323"
}
```



---

archive/issue_comments_408162.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI don't think cvxopt (which needs to be updated) has to be dealt with here. Can we proceed with this update?",
    "created_at": "2018-11-27T17:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408162",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

I don't think cvxopt (which needs to be updated) has to be dealt with here. Can we proceed with this update?



---

archive/issue_comments_408163.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI expressed my opinion on `cvxopt` so called test failures in #24657. I heard nothing back. And I definitely think we should proceed.",
    "created_at": "2018-11-27T19:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408163",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">Comment 6</div>

I expressed my opinion on `cvxopt` so called test failures in #24657. I heard nothing back. And I definitely think we should proceed.



---

archive/issue_comments_408164.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n This fixes compilation errors with clang 6.0.1\n \n-tarball (created using spkg-src) at \n+**Tarball** (created using spkg-src):\n http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2\n \n+Our last upgrade was to matplotlib 2.2.2 in #25702.\n+\n+Note that matplotlib 3.x.y versions require Python 3, so upgrading would depend on #15530.\n \n \n-\n``````\n",
    "created_at": "2018-12-21T11:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408164",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 This fixes compilation errors with clang 6.0.1
 
-tarball (created using spkg-src) at 
+**Tarball** (created using spkg-src):
 http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2
 
+Our last upgrade was to matplotlib 2.2.2 in #25702.
+
+Note that matplotlib 3.x.y versions require Python 3, so upgrading would depend on #15530.
 
 
-
``````




---

archive/issue_comments_408165.json:
```json
{
    "body": "Changed keywords from none to **upgrade, matplotlib**",
    "created_at": "2018-12-21T11:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408165",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, matplotlib**



---

archive/issue_comments_408166.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nsagemath depends on python 2 version of matplotlib (which was removed from debian unstable)\n\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=917428",
    "created_at": "2019-01-01T15:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408166",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">Comment 8</div>

sagemath depends on python 2 version of matplotlib (which was removed from debian unstable)

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=917428



---

archive/issue_events_344324.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-01T16:54:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344324"
}
```



---

archive/issue_events_344325.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-01T16:54:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344325"
}
```



---

archive/issue_comments_408167.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSee also [discussions on debian-science-sagemath](https://alioth-lists.debian.net/pipermail/debian-science-sagemath/2018-December/thread.html).",
    "created_at": "2019-01-01T16:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408167",
    "user": "https://github.com/slel"
}
```

<div id="comment:9" align="right">Comment 9</div>

See also [discussions on debian-science-sagemath](https://alioth-lists.debian.net/pipermail/debian-science-sagemath/2018-December/thread.html).



---

archive/issue_comments_408168.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@fchapoton](#comment%3A8):\n> sagemath depends on python 2 version of matplotlib (which was removed from debian unstable)\n> \n> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=917428\n\nThe python 2 version of matplotlib was just moved to a new package (matplotlib2), so it's fine. False alarm.",
    "created_at": "2019-01-02T08:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408168",
    "user": "https://github.com/tobihan"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@fchapoton](#comment%3A8):
> sagemath depends on python 2 version of matplotlib (which was removed from debian unstable)
> 
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=917428

The python 2 version of matplotlib was just moved to a new package (matplotlib2), so it's fine. False alarm.



---

archive/issue_comments_408169.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nping?",
    "created_at": "2019-01-20T22:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408169",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">Comment 11</div>

ping?



---

archive/issue_comments_408170.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI would prefer to add the patches removing `np.isscalar` which will otherwise cause breakage with the numpy upgrade.\n\nCan you look into that or should I?",
    "created_at": "2019-01-25T09:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408170",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

I would prefer to add the patches removing `np.isscalar` which will otherwise cause breakage with the numpy upgrade.

Can you look into that or should I?



---

archive/issue_comments_408171.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThere is this matplotlib PR, but I don't know if it is sufficient: https://github.com/matplotlib/matplotlib/pull/12070",
    "created_at": "2019-01-25T09:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408171",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">Comment 13</div>

There is this matplotlib PR, but I don't know if it is sufficient: https://github.com/matplotlib/matplotlib/pull/12070



---

archive/issue_comments_408172.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to **Dima Pasechnik, Jeroen Demeyer**",
    "created_at": "2019-01-28T12:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408172",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Dima Pasechnik** to **Dima Pasechnik, Jeroen Demeyer**



---

archive/issue_comments_408173.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,8 +3,10 @@\n **Tarball** (created using spkg-src):\n http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2\n \n+We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions.\n+\n Our last upgrade was to matplotlib 2.2.2 in #25702.\n \n-Note that matplotlib 3.x.y versions require Python 3, so upgrading would depend on #15530.\n+Note that matplotlib 3.x.y versions require Python 3.\n \n \n``````\n",
    "created_at": "2019-01-28T12:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408173",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,8 +3,10 @@
 **Tarball** (created using spkg-src):
 http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2
 
+We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions.
+
 Our last upgrade was to matplotlib 2.2.2 in #25702.
 
-Note that matplotlib 3.x.y versions require Python 3, so upgrading would depend on #15530.
+Note that matplotlib 3.x.y versions require Python 3.
 
 
``````




---

archive/issue_events_344326.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T12:09:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344326"
}
```



---

archive/issue_events_344327.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T12:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344327"
}
```



---

archive/issue_events_344328.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T12:25:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344328"
}
```



---

archive/issue_events_344329.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T12:25:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344329"
}
```



---

archive/issue_comments_408174.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI don't understand what numpy upgrade that might cause anything to matplotlib is meant.\nThings still seem to work here with Sage 8.7.beta1.\n\nI don't think it's a good idea to try to backport stuff just to hopefully fix bugs we don't see yet.",
    "created_at": "2019-01-28T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408174",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">Comment 15</div>

I don't understand what numpy upgrade that might cause anything to matplotlib is meant.
Things still seem to work here with Sage 8.7.beta1.

I don't think it's a good idea to try to backport stuff just to hopefully fix bugs we don't see yet.



---

archive/issue_comments_408175.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/matplotlib223)** to **[u/jdemeyer/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/packages/matplotlib223)**",
    "created_at": "2019-01-28T12:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408175",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/dimpase/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/matplotlib223)** to **[u/jdemeyer/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/packages/matplotlib223)**



---

archive/issue_comments_408176.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c009e77af9cd98b353704f1d648482bf632ab1c8\">c009e77</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134\">7794b09</a></td><td><code>Avoid numpy.isscalar()</code></td></tr></table>\n",
    "created_at": "2019-01-28T12:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408176",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c009e77af9cd98b353704f1d648482bf632ab1c8">c009e77</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134">7794b09</a></td><td><code>Avoid numpy.isscalar()</code></td></tr></table>




---

archive/issue_comments_408177.json:
```json
{
    "body": "Changed commit from **[72526fc](https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605)** to **[7794b09](https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134)**",
    "created_at": "2019-01-28T12:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408177",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[72526fc](https://github.com/sagemath/sagetrac-mirror/commit/72526fc9632cb7c2a643ef7215d1d3867b740605)** to **[7794b09](https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134)**



---

archive/issue_comments_408178.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@dimpase](#comment%3A15):\n> I don't understand what numpy upgrade that might cause anything to matplotlib is meant.\n\nI mean the numpy upgrade to 1.16.0 at #27000.\n\n> I don't think it's a good idea to try to backport stuff just to hopefully fix bugs we don't see yet.\n\nWhy not? If this issue is blocking #27000, it should be addressed.",
    "created_at": "2019-01-28T12:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408178",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@dimpase](#comment%3A15):
> I don't understand what numpy upgrade that might cause anything to matplotlib is meant.

I mean the numpy upgrade to 1.16.0 at #27000.

> I don't think it's a good idea to try to backport stuff just to hopefully fix bugs we don't see yet.

Why not? If this issue is blocking #27000, it should be addressed.



---

archive/issue_comments_408179.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n **Tarball** (created using spkg-src):\n http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2\n \n-We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions.\n+We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions. This is needed for #27000.\n \n Our last upgrade was to matplotlib 2.2.2 in #25702.\n \n``````\n",
    "created_at": "2019-01-28T12:44:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408179",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 **Tarball** (created using spkg-src):
 http://users.ox.ac.uk/~coml0531/sage/matplotlib-2.2.3.tar.bz2
 
-We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions.
+We also add a patch (taken from upstream) to fix deprecation warnings with recent numpy versions. This is needed for #27000.
 
 Our last upgrade was to matplotlib 2.2.2 in #25702.
 
``````




---

archive/issue_comments_408180.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nlooks good.",
    "created_at": "2019-01-28T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408180",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

looks good.



---

archive/issue_comments_408181.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-01-28T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408181",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_344330.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T13:53:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344330"
}
```



---

archive/issue_events_344331.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T13:53:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344331"
}
```



---

archive/issue_events_344332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T14:12:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344332"
}
```



---

archive/issue_events_344333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T14:12:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344333"
}
```



---

archive/issue_comments_408182.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThis needs more `isscalar` fixes.",
    "created_at": "2019-01-28T14:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408182",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

This needs more `isscalar` fixes.



---

archive/issue_comments_408183.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nDo you mean `np.asscalar` ?\nIndeed, with `numpy 1.16` I see\n\n```\n    DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n```",
    "created_at": "2019-01-28T14:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408183",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">Comment 22</div>

Do you mean `np.asscalar` ?
Indeed, with `numpy 1.16` I see

```
    DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
```



---

archive/issue_comments_408184.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nIn fact, I don't get why you need to do anything with isscalar:\n\n```\nsage: import numpy as np\nsage: np.version.version\n'1.16.0'\nsage: np.isscalar(1)\nTrue\n```\n\nThe problem is in asscalar!\n\n```\nsage: import numpy as np\nsage: np.version.version\n'1.16.0'\nsage: np.asscalar(np.array([24]))\n/home/scratch2/dimpase/sage/sage/local/lib/python2.7/site-packages/numpy/lib/type_check.py:546: DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n  'a.item() instead', DeprecationWarning, stacklevel=1)\n24\n```",
    "created_at": "2019-01-28T14:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408184",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">Comment 23</div>

In fact, I don't get why you need to do anything with isscalar:

```
sage: import numpy as np
sage: np.version.version
'1.16.0'
sage: np.isscalar(1)
True
```

The problem is in asscalar!

```
sage: import numpy as np
sage: np.version.version
'1.16.0'
sage: np.asscalar(np.array([24]))
/home/scratch2/dimpase/sage/sage/local/lib/python2.7/site-packages/numpy/lib/type_check.py:546: DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
  'a.item() instead', DeprecationWarning, stacklevel=1)
24
```



---

archive/issue_comments_408185.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\n`isscalar` vs `asscalar`: it's just a 1 bit difference. Somebody in matplotlib didn't pay attention during their coding theory course :-)\n\nThe relevant PR is https://github.com/matplotlib/matplotlib/pull/12508",
    "created_at": "2019-01-28T16:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408185",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

`isscalar` vs `asscalar`: it's just a 1 bit difference. Somebody in matplotlib didn't pay attention during their coding theory course :-)

The relevant PR is https://github.com/matplotlib/matplotlib/pull/12508



---

archive/issue_comments_408186.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820\">c892da7</a></td><td><code>Avoid numpy.asscalar()</code></td></tr></table>\n",
    "created_at": "2019-01-28T16:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408186",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820">c892da7</a></td><td><code>Avoid numpy.asscalar()</code></td></tr></table>




---

archive/issue_comments_408187.json:
```json
{
    "body": "Changed commit from **[7794b09](https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134)** to **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**",
    "created_at": "2019-01-28T16:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408187",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7794b09](https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134)** to **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**



---

archive/issue_events_344334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T16:29:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344334"
}
```



---

archive/issue_events_344335.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T16:29:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344335"
}
```



---

archive/issue_comments_408188.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nOK, works, also with numpy from #27000",
    "created_at": "2019-01-28T17:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408188",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">Comment 27</div>

OK, works, also with numpy from #27000



---

archive/issue_events_344336.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T17:43:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344336"
}
```



---

archive/issue_events_344337.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T17:43:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344337"
}
```



---

archive/issue_comments_408189.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/packages/matplotlib223)** to **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**",
    "created_at": "2019-01-30T19:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26288#issuecomment-408189",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/packages/matplotlib223](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/packages/matplotlib223)** to **[c892da7](https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820)**



---

archive/issue_events_344338.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-30T19:18:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344338"
}
```



---

archive/issue_events_344339.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ae8601fba7a1d247b923399d30282c2e8d450119",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-01-30T19:18:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26288#event-344339"
}
```
