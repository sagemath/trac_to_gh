# Issue 26556: multiplicative order for square matrices over ZZ

archive/issues_026319.json:
```json
{
    "body": "references:\n\nhttps://magma.maths.usyd.edu.au/magma/handbook/text/659\n\nand https://www.jstor.org/stable/2695329\n\nCC:  @videlec @ClementPernet @tscrim\n\nBranch/Commit: 1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26556\n\n",
    "closed_at": "2018-10-28T20:26:16Z",
    "created_at": "2018-10-25T19:16:02Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "multiplicative order for square matrices over ZZ",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26556",
    "user": "https://github.com/fchapoton"
}
```
references:

https://magma.maths.usyd.edu.au/magma/handbook/text/659

and https://www.jstor.org/stable/2695329

CC:  @videlec @ClementPernet @tscrim

Branch/Commit: 1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26556





---

archive/issue_comments_504113.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[fe11103](https://github.com/sagemath/sagetrac-mirror/commit/fe111033adf5cfc0d068a1f2fb2b4e588f10da52)|`multiplicative order for matrices over ZZ`|",
    "created_at": "2018-10-25T19:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504113",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[fe11103](https://github.com/sagemath/sagetrac-mirror/commit/fe111033adf5cfc0d068a1f2fb2b4e588f10da52)|`multiplicative order for matrices over ZZ`|



---

archive/issue_comments_504114.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/26556\"",
    "created_at": "2018-10-25T19:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504114",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/26556"



---

archive/issue_comments_504115.json:
```json
{
    "body": "Changing commit from \"\" to \"fe111033adf5cfc0d068a1f2fb2b4e588f10da52\"",
    "created_at": "2018-10-25T19:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504115",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "fe111033adf5cfc0d068a1f2fb2b4e588f10da52"



---

archive/issue_comments_504116.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-25T19:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504116",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_504117.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am not sure it makes sense to test twice if the base ring is finite. Why not do\n\n```\nif K in Fields.Finite:\n    ...\nelif K is ZZ:\n    ...\nelse:\n    raise NotImplementedError\n```\n(note that you do not have to actually construct the instance of the category to check containment).\n\nAlso, in `impossible_order`, should it be `GL_n(ZZ)`?\n\nI might be too much an iterative programmer, but I don't see the point of having the `impossible_order` as a separate function, I don't see much benefit to not doing\n\n```python\n            # Check if o1 can be an order of a matrix in GL_n(QQ)\n            # Uses Thm 2.7 [KuPa2002]\n            fac = o1.factor()\n            S = sum((pi - 1) * pi**(ei - 1) for pi, ei in fac)\n            if S > n + int(fac[0] == (2, 1)):\n                return Infinity\n```",
    "created_at": "2018-10-26T01:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504117",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
I am not sure it makes sense to test twice if the base ring is finite. Why not do

```
if K in Fields.Finite:
    ...
elif K is ZZ:
    ...
else:
    raise NotImplementedError
```
(note that you do not have to actually construct the instance of the category to check containment).

Also, in `impossible_order`, should it be `GL_n(ZZ)`?

I might be too much an iterative programmer, but I don't see the point of having the `impossible_order` as a separate function, I don't see much benefit to not doing

```python
            # Check if o1 can be an order of a matrix in GL_n(QQ)
            # Uses Thm 2.7 [KuPa2002]
            fac = o1.factor()
            S = sum((pi - 1) * pi**(ei - 1) for pi, ei in fac)
            if S > n + int(fac[0] == (2, 1)):
                return Infinity
```



---

archive/issue_comments_504118.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[721c966](https://github.com/sagemath/sagetrac-mirror/commit/721c96632573081510754089b05137b6956f2edf)|`trac 26556 some details`|",
    "created_at": "2018-10-26T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[721c966](https://github.com/sagemath/sagetrac-mirror/commit/721c96632573081510754089b05137b6956f2edf)|`trac 26556 some details`|



---

archive/issue_comments_504119.json:
```json
{
    "body": "Changing commit from \"fe111033adf5cfc0d068a1f2fb2b4e588f10da52\" to \"721c96632573081510754089b05137b6956f2edf\"",
    "created_at": "2018-10-26T06:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fe111033adf5cfc0d068a1f2fb2b4e588f10da52" to "721c96632573081510754089b05137b6956f2edf"



---

archive/issue_comments_504120.json:
```json
{
    "body": "<a id='comment:4'></a>\ncuriosity: why is that valid?\n\n```\nif o1 != o2:\n    return Infinity\n```",
    "created_at": "2018-10-26T07:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504120",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
curiosity: why is that valid?

```
if o1 != o2:
    return Infinity
```



---

archive/issue_comments_504121.json:
```json
{
    "body": "<a id='comment:5'></a>\nAccording to the given reference (Jstor) and magma doc, the projection of every finite subgroup  of GL_n(QQ) modulo any odd prime number is injective. So if we find two different orders for a matrix modulo two different primes, the original matrix cannot have finite order.",
    "created_at": "2018-10-26T07:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504121",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
According to the given reference (Jstor) and magma doc, the projection of every finite subgroup  of GL_n(QQ) modulo any odd prime number is injective. So if we find two different orders for a matrix modulo two different primes, the original matrix cannot have finite order.



---

archive/issue_comments_504122.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[f829c4e](https://github.com/sagemath/sagetrac-mirror/commit/f829c4eb13a3b226b6916a940e522ea9844cd870)|`trac 26556 adding more doctests`|",
    "created_at": "2018-10-26T14:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[f829c4e](https://github.com/sagemath/sagetrac-mirror/commit/f829c4eb13a3b226b6916a940e522ea9844cd870)|`trac 26556 adding more doctests`|



---

archive/issue_comments_504123.json:
```json
{
    "body": "Changing commit from \"721c96632573081510754089b05137b6956f2edf\" to \"f829c4eb13a3b226b6916a940e522ea9844cd870\"",
    "created_at": "2018-10-26T14:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "721c96632573081510754089b05137b6956f2edf" to "f829c4eb13a3b226b6916a940e522ea9844cd870"



---

archive/issue_comments_504124.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe doctests in `f829c4e` is likely to test only infinite order examples (a random matrix has infinite order). You would better add some known finite order examples (and also test conjugates).",
    "created_at": "2018-10-26T15:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504124",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
The doctests in `f829c4e` is likely to test only infinite order examples (a random matrix has infinite order). You would better add some known finite order examples (and also test conjugates).



---

archive/issue_comments_504125.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [vdelecroix](#comment%3A7):\n> The doctests in `f829c4e` is likely to test only infinite order examples (a random matrix has infinite order). You would better add some known finite order examples (and also test conjugates).\n\n\nNo, it does also provide a few finite order examples..",
    "created_at": "2018-10-26T15:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504125",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
Replying to [vdelecroix](#comment%3A7):
> The doctests in `f829c4e` is likely to test only infinite order examples (a random matrix has infinite order). You would better add some known finite order examples (and also test conjugates).


No, it does also provide a few finite order examples..



---

archive/issue_comments_504126.json:
```json
{
    "body": "Changing commit from \"f829c4eb13a3b226b6916a940e522ea9844cd870\" to \"1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474\"",
    "created_at": "2018-10-26T15:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f829c4eb13a3b226b6916a940e522ea9844cd870" to "1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474"



---

archive/issue_comments_504127.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[1b4e065](https://github.com/sagemath/sagetrac-mirror/commit/1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474)|`trac 26556 one more doctest`|",
    "created_at": "2018-10-26T15:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[1b4e065](https://github.com/sagemath/sagetrac-mirror/commit/1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474)|`trac 26556 one more doctest`|



---

archive/issue_comments_504128.json:
```json
{
    "body": "<a id='comment:10'></a>\nI have added another doctest, a matrix of size 8 and order 24, conjugated at random.",
    "created_at": "2018-10-26T15:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504128",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
I have added another doctest, a matrix of size 8 and order 24, conjugated at random.



---

archive/issue_comments_504129.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-10-27T02:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504129",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_504130.json:
```json
{
    "body": "<a id='comment:11'></a>\nVincent, any other comments? Otherwise I will set a positive review.",
    "created_at": "2018-10-27T02:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504130",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Vincent, any other comments? Otherwise I will set a positive review.



---

archive/issue_comments_504131.json:
```json
{
    "body": "<a id='comment:12'></a>\nGood for me.",
    "created_at": "2018-10-27T08:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504131",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Good for me.



---

archive/issue_comments_504132.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you.",
    "created_at": "2018-10-27T13:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504132",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Thank you.



---

archive/issue_comments_504133.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-27T13:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504133",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_082768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-28T20:26:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26556#event-82768"
}
```



---

archive/issue_comments_504134.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-28T20:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504134",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_504135.json:
```json
{
    "body": "Changing branch from \"u/chapoton/26556\" to \"1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474\"",
    "created_at": "2018-10-28T20:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26556#issuecomment-504135",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/26556" to "1b4e0654f77dbeded4ea36c956ea4ef2b5dcf474"
