# Issue 26887: Implement the class CombinatorialPolyhedron

archive/issues_026650.json:
```json
{
    "assignees": [
        "https://github.com/kliem"
    ],
    "body": "We construct a class CombinatorialPolyhedron, which collects several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatomic Eulerian lattices.\n\nComputations can be much faster when avoiding creating explicitly the face lattice.\n\nExample:\n\n```\nP = polytopes.permutahedron(6)\nP.f_vector()\n```\n\nOn my machine this takes over 8s, but it should be a matter of ms. For `permutahedron(7)` it takes forever and should also be a matter of ms.\n\nAdditionally, one can create the face_lattice much faster. The face_lattice of `permutahedron(7)` should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.\n\nThe crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.\n\nThe ticket will prepare, but not use, SIMD-instructions. Enabling them will be a subject of #27103.\n\nFOLLOW-UPS:\n\n- implement calculation of entries in the flag-vector, this might be better, than the calculation in the face_lattice\n- Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)\n- Enable SIMD-instructions.\n\nCC:  @stumpc5 @jplab @tscrim\n\nKeywords: **polytopes, FindPoly, f_vector, face lattice, edge graph, ridge graph**\n\nBranch: **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**\n\nReviewer: **Jeroen Demeyer, Travis Scrimshaw, Vincent Delecroix**\n\nAuthor: **Jonathan Kliem**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26887_\n\n",
    "closed_at": "2019-07-04T11:09:32Z",
    "created_at": "2018-12-13T09:14:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement the class CombinatorialPolyhedron",
    "type": "issue",
    "updated_at": "2019-07-29T19:54:37Z",
    "url": "https://github.com/sagemath/sage/issues/26887",
    "user": "https://github.com/kliem"
}
```
We construct a class CombinatorialPolyhedron, which collects several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatomic Eulerian lattices.

Computations can be much faster when avoiding creating explicitly the face lattice.

Example:

```
P = polytopes.permutahedron(6)
P.f_vector()
```

On my machine this takes over 8s, but it should be a matter of ms. For `permutahedron(7)` it takes forever and should also be a matter of ms.

Additionally, one can create the face_lattice much faster. The face_lattice of `permutahedron(7)` should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.

The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.

The ticket will prepare, but not use, SIMD-instructions. Enabling them will be a subject of #27103.

FOLLOW-UPS:

- implement calculation of entries in the flag-vector, this might be better, than the calculation in the face_lattice
- Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)
- Enable SIMD-instructions.

CC:  @stumpc5 @jplab @tscrim

Keywords: **polytopes, FindPoly, f_vector, face lattice, edge graph, ridge graph**

Branch: **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**

Reviewer: **Jeroen Demeyer, Travis Scrimshaw, Vincent Delecroix**

Author: **Jonathan Kliem**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/26887_





---

archive/issue_events_366418.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-13T09:14:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366418"
}
```



---

archive/issue_events_366419.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-13T09:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366419"
}
```



---

archive/issue_events_366420.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-13T09:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366420"
}
```



---

archive/issue_events_366421.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-13T09:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366421"
}
```



---

archive/issue_comments_413869.json:
```json
{
    "body": "Branch: **[u/gh-kliem/improve_f_vector_etc__for_polytopes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improve_f_vector_etc__for_polytopes)**",
    "created_at": "2018-12-13T09:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413869",
    "user": "https://github.com/kliem"
}
```

Branch: **[u/gh-kliem/improve_f_vector_etc__for_polytopes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improve_f_vector_etc__for_polytopes)**



---

archive/issue_comments_413870.json:
```json
{
    "body": "Commit: **[`d0dba61`](https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11)**",
    "created_at": "2018-12-13T15:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413870",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`d0dba61`](https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11)**



---

archive/issue_comments_413871.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nthe branch is almost empty (no meaningful changes)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11\"><code>d0dba61</code></a></td><td><code>first push test</code></td></tr></table>\n",
    "created_at": "2018-12-13T15:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413871",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

the branch is almost empty (no meaningful changes)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11"><code>d0dba61</code></a></td><td><code>first push test</code></td></tr></table>




---

archive/issue_comments_413872.json:
```json
{
    "body": "Changed commit from **[`d0dba61`](https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11)** to **[`3f1600e`](https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677)**",
    "created_at": "2018-12-19T16:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0dba61`](https://github.com/sagemath/sagetrac-mirror/commit/d0dba618e853d21724639c3e59964fa0f6610a11)** to **[`3f1600e`](https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677)**



---

archive/issue_comments_413873.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a596e0c231f71644aae1e501f4e9762148510e38\"><code>a596e0c</code></a></td><td><code>Created a class CombinatorialType which is a wrapper for a cpp class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677\"><code>3f1600e</code></a></td><td><code>added the files</code></td></tr></table>\n",
    "created_at": "2018-12-19T16:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413873",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a596e0c231f71644aae1e501f4e9762148510e38"><code>a596e0c</code></a></td><td><code>Created a class CombinatorialType which is a wrapper for a cpp class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677"><code>3f1600e</code></a></td><td><code>added the files</code></td></tr></table>




---

archive/issue_comments_413874.json:
```json
{
    "body": "Author: **Jonathan Kliem**",
    "created_at": "2018-12-19T20:56:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413874",
    "user": "https://github.com/kliem"
}
```

Author: **Jonathan Kliem**



---

archive/issue_events_366422.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-19T20:56:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "subject": "https://github.com/kliem",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366422"
}
```



---

archive/issue_events_366423.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-20T09:50:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "title_is": "Improve f_vector, edges, ridges, dimension for polyhedra",
    "title_was": "Improve f_vector etc. for polytopes",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366423"
}
```



---

archive/issue_comments_413875.json:
```json
{
    "body": "Changed keywords from **polytopes, FindPoly** to **polytopes, FindPoly, f_vector, face_lattic**",
    "created_at": "2018-12-20T09:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413875",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polytopes, FindPoly** to **polytopes, FindPoly, f_vector, face_lattic**



---

archive/issue_events_366424.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-20T09:52:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366424"
}
```



---

archive/issue_events_366425.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2018-12-20T09:52:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366425"
}
```



---

archive/issue_comments_413876.json:
```json
{
    "body": "Changed commit from **[`3f1600e`](https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677)** to **[`03fe21f`](https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5)**",
    "created_at": "2018-12-20T10:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413876",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f1600e`](https://github.com/sagemath/sagetrac-mirror/commit/3f1600e34b4415e95bb4db84cedb04089f8af677)** to **[`03fe21f`](https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5)**



---

archive/issue_comments_413877.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b10c24d85a8ac006c3725ff47260a324ab03578\"><code>3b10c24</code></a></td><td><code>moved the files to the polyhedron folder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5\"><code>03fe21f</code></a></td><td><code>added the new files</code></td></tr></table>\n",
    "created_at": "2018-12-20T10:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413877",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b10c24d85a8ac006c3725ff47260a324ab03578"><code>3b10c24</code></a></td><td><code>moved the files to the polyhedron folder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5"><code>03fe21f</code></a></td><td><code>added the new files</code></td></tr></table>




---

archive/issue_comments_413878.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99eda994c81faed0065a633a43d777091f803f0b\"><code>99eda99</code></a></td><td><code>Before Renaming CombinatorialType to CombinatorialPolytope</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7efe6a2f82ec4b2c19b9b8f25bb9dfa58147a285\"><code>7efe6a2</code></a></td><td><code>After Renaming CombinatorialType to CombinatorialPolytope</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec\"><code>24949d9</code></a></td><td><code>This should be mostly done now. Some minor changes are missing, also documentation needs to be done'</code></td></tr></table>\n",
    "created_at": "2018-12-20T16:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99eda994c81faed0065a633a43d777091f803f0b"><code>99eda99</code></a></td><td><code>Before Renaming CombinatorialType to CombinatorialPolytope</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7efe6a2f82ec4b2c19b9b8f25bb9dfa58147a285"><code>7efe6a2</code></a></td><td><code>After Renaming CombinatorialType to CombinatorialPolytope</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec"><code>24949d9</code></a></td><td><code>This should be mostly done now. Some minor changes are missing, also documentation needs to be done'</code></td></tr></table>




---

archive/issue_comments_413879.json:
```json
{
    "body": "Changed commit from **[`03fe21f`](https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5)** to **[`24949d9`](https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec)**",
    "created_at": "2018-12-20T16:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03fe21f`](https://github.com/sagemath/sagetrac-mirror/commit/03fe21ff70eee06eb6dc2db477a003b58997d3d5)** to **[`24949d9`](https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec)**



---

archive/issue_comments_413880.json:
```json
{
    "body": "Changed commit from **[`24949d9`](https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec)** to **[`8c5d21a`](https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920)**",
    "created_at": "2018-12-28T20:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413880",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`24949d9`](https://github.com/sagemath/sagetrac-mirror/commit/24949d9b8cacba08e72b0c1c028e6a6b25f5c9ec)** to **[`8c5d21a`](https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920)**



---

archive/issue_comments_413881.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920\"><code>8c5d21a</code></a></td><td><code>some minor changes</code></td></tr></table>\n",
    "created_at": "2018-12-28T20:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413881",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920"><code>8c5d21a</code></a></td><td><code>some minor changes</code></td></tr></table>




---

archive/issue_comments_413882.json:
```json
{
    "body": "Changed commit from **[`8c5d21a`](https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920)** to **[`a63c68f`](https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2)**",
    "created_at": "2019-01-09T15:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413882",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c5d21a`](https://github.com/sagemath/sagetrac-mirror/commit/8c5d21aba0921aae210bd28cd2e9c212ec3c0920)** to **[`a63c68f`](https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2)**



---

archive/issue_comments_413883.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2\"><code>a63c68f</code></a></td><td><code>Preparing a function to get all k-faces</code></td></tr></table>\n",
    "created_at": "2019-01-09T15:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413883",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2"><code>a63c68f</code></a></td><td><code>Preparing a function to get all k-faces</code></td></tr></table>




---

archive/issue_comments_413884.json:
```json
{
    "body": "Changed commit from **[`a63c68f`](https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2)** to **[`580980b`](https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd)**",
    "created_at": "2019-01-10T17:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a63c68f`](https://github.com/sagemath/sagetrac-mirror/commit/a63c68f1eb5212448fd7e949306fdd7c26f53ac2)** to **[`580980b`](https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd)**



---

archive/issue_comments_413885.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd\"><code>580980b</code></a></td><td><code>some work on generating all k-faces of the polyhedron</code></td></tr></table>\n",
    "created_at": "2019-01-10T17:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd"><code>580980b</code></a></td><td><code>some work on generating all k-faces of the polyhedron</code></td></tr></table>




---

archive/issue_comments_413886.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252\"><code>591ed26</code></a></td><td><code>hasse_diagram is mostly working now, it is much faster than the old hasse_diagram of polyhedron</code></td></tr></table>\n",
    "created_at": "2019-01-11T16:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252"><code>591ed26</code></a></td><td><code>hasse_diagram is mostly working now, it is much faster than the old hasse_diagram of polyhedron</code></td></tr></table>




---

archive/issue_comments_413887.json:
```json
{
    "body": "Changed commit from **[`580980b`](https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd)** to **[`591ed26`](https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252)**",
    "created_at": "2019-01-11T16:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413887",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`580980b`](https://github.com/sagemath/sagetrac-mirror/commit/580980bbe979925797b02063bd28321dbd17efbd)** to **[`591ed26`](https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252)**



---

archive/issue_comments_413888.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Several improvements for calculating properties of polytopes that depend on the face-lattice.\n+\n+We will construct a class CombinatorialPolytope, which will collect several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatimic Eulerian lattices.\n \n Computations can be much faster when avoiding creating explicitly the face lattice.\n \n@@ -7,3 +9,9 @@\n P.f_vector()\n \n At my machine this takes over 8s, but it should be a matter of ms. For permutahedron(7) it takes forever and should also be a matter of ms.\n+\n+Additionally, one can create the face_lattice much faster. The face_lattice of permutahedron(7) should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.\n+\n+The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the hasse_diagram, except that it avoids double counting (and hence can calculate the f_vector) without an explicit list of all faces.\n+\n+It might also make sense to improve calculation of entries in the flag-vector, while we are at it. This takes for every entry in the flag-vector less time then to construct the face-lattice.\n``````\n",
    "created_at": "2019-01-11T16:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413888",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Several improvements for calculating properties of polytopes that depend on the face-lattice.
+
+We will construct a class CombinatorialPolytope, which will collect several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatimic Eulerian lattices.
 
 Computations can be much faster when avoiding creating explicitly the face lattice.
 
@@ -7,3 +9,9 @@
 P.f_vector()
 
 At my machine this takes over 8s, but it should be a matter of ms. For permutahedron(7) it takes forever and should also be a matter of ms.
+
+Additionally, one can create the face_lattice much faster. The face_lattice of permutahedron(7) should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.
+
+The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the hasse_diagram, except that it avoids double counting (and hence can calculate the f_vector) without an explicit list of all faces.
+
+It might also make sense to improve calculation of entries in the flag-vector, while we are at it. This takes for every entry in the flag-vector less time then to construct the face-lattice.
``````




---

archive/issue_comments_413889.json:
```json
{
    "body": "Changed keywords from **polytopes, FindPoly, f_vector, face_lattic** to **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge grapg**",
    "created_at": "2019-01-11T16:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413889",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polytopes, FindPoly, f_vector, face_lattic** to **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge grapg**



---

archive/issue_comments_413890.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f\"><code>576905d</code></a></td><td><code>flag vectors seem to work now</code></td></tr></table>\n",
    "created_at": "2019-01-12T01:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413890",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f"><code>576905d</code></a></td><td><code>flag vectors seem to work now</code></td></tr></table>




---

archive/issue_comments_413891.json:
```json
{
    "body": "Changed commit from **[`591ed26`](https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252)** to **[`576905d`](https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f)**",
    "created_at": "2019-01-12T01:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`591ed26`](https://github.com/sagemath/sagetrac-mirror/commit/591ed2645b71f532d253e9ff55c5c484d362f252)** to **[`576905d`](https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f)**



---

archive/issue_comments_413892.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176\"><code>4a41711</code></a></td><td><code>changed the name from CombinatorialPolytope to CombinatorialPolyhedron</code></td></tr></table>\n",
    "created_at": "2019-01-12T13:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413892",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176"><code>4a41711</code></a></td><td><code>changed the name from CombinatorialPolytope to CombinatorialPolyhedron</code></td></tr></table>




---

archive/issue_comments_413893.json:
```json
{
    "body": "Changed commit from **[`576905d`](https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f)** to **[`4a41711`](https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176)**",
    "created_at": "2019-01-12T13:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`576905d`](https://github.com/sagemath/sagetrac-mirror/commit/576905d8901190c042bba4251bf80e2f2eb8ec0f)** to **[`4a41711`](https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176)**



---

archive/issue_comments_413894.json:
```json
{
    "body": "Changed commit from **[`4a41711`](https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176)** to **[`e345470`](https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3)**",
    "created_at": "2019-01-12T16:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413894",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a41711`](https://github.com/sagemath/sagetrac-mirror/commit/4a4171152dbdec4340328a52cb2b50f121f11176)** to **[`e345470`](https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3)**



---

archive/issue_comments_413895.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3\"><code>e345470</code></a></td><td><code>This should be ready for review</code></td></tr></table>\n",
    "created_at": "2019-01-12T16:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413895",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3"><code>e345470</code></a></td><td><code>This should be ready for review</code></td></tr></table>




---

archive/issue_events_366426.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-12T16:46:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366426"
}
```



---

archive/issue_comments_413896.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI'm not experienced at what point a ticket should change its status to \"needs review\". Of course there is still stuff that I can do by myself like documentation and comments.\n\nI would definitely be grateful for comments and help at this point. At this point everything should work at least I'm not aware of any bugs.",
    "created_at": "2019-01-12T16:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413896",
    "user": "https://github.com/kliem"
}
```

<div id="comment:19" align="right">comment:19</div>

I'm not experienced at what point a ticket should change its status to "needs review". Of course there is still stuff that I can do by myself like documentation and comments.

I would definitely be grateful for comments and help at this point. At this point everything should work at least I'm not aware of any bugs.



---

archive/issue_comments_413897.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAs a start you can write examples (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)).\n\nNext, it is not a very often not a good idea to write Python in C. It is hard to read and often difficult to do right (e.g. check memory allocation, ensure compatibility Python2/Python3). You should use Cython for that purpose, unless there is a very good reason for that.\n\nAs you use advanced CPU instructions you should check very carefully that your code does work on all architectures (ie Intel since Pentium II as well as AMD).",
    "created_at": "2019-01-12T17:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413897",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

As a start you can write examples (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)).

Next, it is not a very often not a good idea to write Python in C. It is hard to read and often difficult to do right (e.g. check memory allocation, ensure compatibility Python2/Python3). You should use Cython for that purpose, unless there is a very good reason for that.

As you use advanced CPU instructions you should check very carefully that your code does work on all architectures (ie Intel since Pentium II as well as AMD).



---

archive/issue_comments_413898.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2\"><code>d897cd1</code></a></td><td><code>Added Examples, also fixed the empty Polyhedron</code></td></tr></table>\n",
    "created_at": "2019-01-12T21:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413898",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2"><code>d897cd1</code></a></td><td><code>Added Examples, also fixed the empty Polyhedron</code></td></tr></table>




---

archive/issue_comments_413899.json:
```json
{
    "body": "Changed commit from **[`e345470`](https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3)** to **[`d897cd1`](https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2)**",
    "created_at": "2019-01-12T21:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413899",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e345470`](https://github.com/sagemath/sagetrac-mirror/commit/e3454704fe64cfadfb5c54897e60dde9d0ad4ed3)** to **[`d897cd1`](https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2)**



---

archive/issue_comments_413900.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI added examples.\n\nI tried Cython, but didn't get the desired speedup. It was much faster than what is implemented in Polyhedron though. I started doing it in cython, but I couldn't get array access (via pointers) in a speed even close to C. Now with using intrinsics I'm close to 4 times as fast then without intrinsics. The crucial step in the algorithm is subset check as A & ~B == 0 for long bit vectors A and B.\n\nWe want to build a Database for Polytopes (similar to FindStat) and thus we want to be able to fastly compute f_vectors even for large polytopes. \nThis is the f_vector of a 20-dimensional counter example to the Hirsch conjecture. It only takes about 3 minutes to calculate now:\n\n (1,\n 36425,\n 364250,\n 1846226,\n 6234909,\n 15556845,\n 30191256,\n 46918071,\n 59410131,\n 61931131,\n 53428829,\n 38194318,\n 22569116,\n 10954980,\n 4322157,\n 1364130,\n 336525,\n 62752,\n 8419,\n 754,\n 40,\n 1)\n\nIn Cython I was able to calculate this vector (or more important the edge graph) in something like 3 hours, in C it took me 20 minutes. Then I started doing bitwise operations and intrinsics and it is now down to 3 minutes with AVX2.\n\nAs for the CPU instructions:\nI'm prechecking the compiler flags. So if nothing works it just falls back to computing with uint64_t which should work on any machine.\n\nAs for memory leaks: It seems to work fine now. Python calls the __dealloc__() function at closup and when deleting the class and clears all the alloced memeory in C.\n\nReplying to [@videlec](#comment:20):\n> As a start you can write examples (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)).\n> \n> Next, it is not a very often not a good idea to write Python in C. It is hard to read and often difficult to do right (e.g. check memory allocation, ensure compatibility Python2/Python3). You should use Cython for that purpose, unless there is a very good reason for that.\n> \n> As you use advanced CPU instructions you should check very carefully that your code does work on all architectures (ie Intel since Pentium II as well as AMD).",
    "created_at": "2019-01-12T21:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413900",
    "user": "https://github.com/kliem"
}
```

<div id="comment:22" align="right">comment:22</div>

I added examples.

I tried Cython, but didn't get the desired speedup. It was much faster than what is implemented in Polyhedron though. I started doing it in cython, but I couldn't get array access (via pointers) in a speed even close to C. Now with using intrinsics I'm close to 4 times as fast then without intrinsics. The crucial step in the algorithm is subset check as A & ~B == 0 for long bit vectors A and B.

We want to build a Database for Polytopes (similar to FindStat) and thus we want to be able to fastly compute f_vectors even for large polytopes. 
This is the f_vector of a 20-dimensional counter example to the Hirsch conjecture. It only takes about 3 minutes to calculate now:

 (1,
 36425,
 364250,
 1846226,
 6234909,
 15556845,
 30191256,
 46918071,
 59410131,
 61931131,
 53428829,
 38194318,
 22569116,
 10954980,
 4322157,
 1364130,
 336525,
 62752,
 8419,
 754,
 40,
 1)

In Cython I was able to calculate this vector (or more important the edge graph) in something like 3 hours, in C it took me 20 minutes. Then I started doing bitwise operations and intrinsics and it is now down to 3 minutes with AVX2.

As for the CPU instructions:
I'm prechecking the compiler flags. So if nothing works it just falls back to computing with uint64_t which should work on any machine.

As for memory leaks: It seems to work fine now. Python calls the __dealloc__() function at closup and when deleting the class and clears all the alloced memeory in C.

Replying to [@videlec](#comment:20):
> As a start you can write examples (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)).
> 
> Next, it is not a very often not a good idea to write Python in C. It is hard to read and often difficult to do right (e.g. check memory allocation, ensure compatibility Python2/Python3). You should use Cython for that purpose, unless there is a very good reason for that.
> 
> As you use advanced CPU instructions you should check very carefully that your code does work on all architectures (ie Intel since Pentium II as well as AMD).



---

archive/issue_comments_413901.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@kliem](#comment:22):\n> I added examples.\n> \n> I tried Cython, but didn't get the desired speedup.\n\nThat means that you don't know how to use Cython. Any C code can be written in plain Cython. \nThough I never said that you should rewrite everything using Cython. I am sorry if it was unclear. I adviced you to to rewrite the Python <-> C gluing part. More precisely, the C code would better not involve any Python at all. And you may write an independent Cython file that will call the C code appropriately.",
    "created_at": "2019-01-14T08:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413901",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@kliem](#comment:22):
> I added examples.
> 
> I tried Cython, but didn't get the desired speedup.

That means that you don't know how to use Cython. Any C code can be written in plain Cython. 
Though I never said that you should rewrite everything using Cython. I am sorry if it was unclear. I adviced you to to rewrite the Python <-> C gluing part. More precisely, the C code would better not involve any Python at all. And you may write an independent Cython file that will call the C code appropriately.



---

archive/issue_comments_413902.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@videlec](#comment:23):\n> Replying to [@kliem](#comment:22):\n> > I added examples.\n> > \n> > I tried Cython, but didn't get the desired speedup.\n\n> \n> That means that you don't know how to use Cython. Any C code can be written in plain Cython.\n\nThat is correct. I'm mostly happy if anything works at all. Once this is the case, I try to make it somewhat nice. It looked to me as if one was supposed to use memoryviews in Cython. They where the fastest working with plain C arrays. But then I couldn't initialize an array in a size determined at runtime. Anyway, as I understand having the code in C is not the problem here.\n\n> Though I never said that you should rewrite everything using Cython. I am sorry if it was unclear. I adviced you to to rewrite the Python <-> C gluing part. More precisely, the C code would better not involve any Python at all. And you may write an independent Cython file that will call the C code appropriately.\n\nThis sounds very reasonable. I will do so.\nWhen I first started with this, I didn't use Cython in between, so my C code had to return a Python object. But it makes sense to build a Python object in an environment that was meant for this. Building tuples etc. was a pain in C and it did always feel like a workaround. I never gave it any second thought though.",
    "created_at": "2019-01-14T09:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413902",
    "user": "https://github.com/kliem"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@videlec](#comment:23):
> Replying to [@kliem](#comment:22):
> > I added examples.
> > 
> > I tried Cython, but didn't get the desired speedup.

> 
> That means that you don't know how to use Cython. Any C code can be written in plain Cython.

That is correct. I'm mostly happy if anything works at all. Once this is the case, I try to make it somewhat nice. It looked to me as if one was supposed to use memoryviews in Cython. They where the fastest working with plain C arrays. But then I couldn't initialize an array in a size determined at runtime. Anyway, as I understand having the code in C is not the problem here.

> Though I never said that you should rewrite everything using Cython. I am sorry if it was unclear. I adviced you to to rewrite the Python <-> C gluing part. More precisely, the C code would better not involve any Python at all. And you may write an independent Cython file that will call the C code appropriately.

This sounds very reasonable. I will do so.
When I first started with this, I didn't use Cython in between, so my C code had to return a Python object. But it makes sense to build a Python object in an environment that was meant for this. Building tuples etc. was a pain in C and it did always feel like a workaround. I never gave it any second thought though.



---

archive/issue_comments_413903.json:
```json
{
    "body": "Changed commit from **[`d897cd1`](https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2)** to **[`bc21ffa`](https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a)**",
    "created_at": "2019-01-14T15:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d897cd1`](https://github.com/sagemath/sagetrac-mirror/commit/d897cd16dfab25e20936b4d67b0b5f7c393a48a2)** to **[`bc21ffa`](https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a)**



---

archive/issue_comments_413904.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a\"><code>bc21ffa</code></a></td><td><code>Work toward cleaing up the Python <-> C gluing part</code></td></tr></table>\n",
    "created_at": "2019-01-14T15:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413904",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a"><code>bc21ffa</code></a></td><td><code>Work toward cleaing up the Python <-> C gluing part</code></td></tr></table>




---

archive/issue_events_366427.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-15T22:34:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366427"
}
```



---

archive/issue_events_366428.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-15T22:34:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366428"
}
```



---

archive/issue_comments_413905.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThese doctests are not reproducible.\n\n```\n    sage: P = polytopes.permutahedron(6)\n    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=False,facets=False)\n    CPU times: user 400 ms, sys: 20 ms, total: 420 ms\n    Wall time: 380 ms\n    Finite lattice containing 4684 elements\n    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=True,facets=True)\n    CPU times: user 2.48 s, sys: 60 ms, total: 2.54 s\n    Wall time: 2.4 s\n    Finite lattice containing 4684 elements\n    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=True,facets=False) #default\n    CPU times: user 1.87 s, sys: 48 ms, total: 1.92 s\n    Wall time: 1.76 s\n    Finite lattice containing 4684 elements\n```\nYou should check that tests pass using `sage -t --long FILENAME`.",
    "created_at": "2019-01-16T07:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413905",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

These doctests are not reproducible.

```
    sage: P = polytopes.permutahedron(6)
    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=False,facets=False)
    CPU times: user 400 ms, sys: 20 ms, total: 420 ms
    Wall time: 380 ms
    Finite lattice containing 4684 elements
    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=True,facets=True)
    CPU times: user 2.48 s, sys: 60 ms, total: 2.54 s
    Wall time: 2.4 s
    Finite lattice containing 4684 elements
    sage: %time CombinatorialPolyhedron(P).face_lattice(vertices=True,facets=False) #default
    CPU times: user 1.87 s, sys: 48 ms, total: 1.92 s
    Wall time: 1.76 s
    Finite lattice containing 4684 elements
```
You should check that tests pass using `sage -t --long FILENAME`.



---

archive/issue_comments_413906.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe function `CombinatorialPolyhedron::get_flag_number(PyObject* py_tuple)` and many others are very likely to crash Sage (e.g. you do not take care of any error handling). I strongly advice you to avoid any Python in C/C++. The conversion tuple -> C++ vector is very easily done in Cython which automatically handles conversions and errors.",
    "created_at": "2019-01-16T07:38:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413906",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

The function `CombinatorialPolyhedron::get_flag_number(PyObject* py_tuple)` and many others are very likely to crash Sage (e.g. you do not take care of any error handling). I strongly advice you to avoid any Python in C/C++. The conversion tuple -> C++ vector is very easily done in Cython which automatically handles conversions and errors.



---

archive/issue_events_366429.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-01-16T07:38:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366429"
}
```



---

archive/issue_events_366430.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-01-16T07:38:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366430"
}
```



---

archive/issue_comments_413907.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d20baa40a7a6c15d903b853d1ce6d46ff0dd4eac\"><code>d20baa4</code></a></td><td><code>Flag-vector: Fixed C <-> Python gluing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/febaa72b2bca2aa347dd5eedd5ad61ae2908cea1\"><code>febaa72</code></a></td><td><code>face and incidences: fixed Python <-> C gluing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1\"><code>152db94</code></a></td><td><code>fixed Polyhedra with no facets</code></td></tr></table>\n",
    "created_at": "2019-01-16T17:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d20baa40a7a6c15d903b853d1ce6d46ff0dd4eac"><code>d20baa4</code></a></td><td><code>Flag-vector: Fixed C <-> Python gluing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/febaa72b2bca2aa347dd5eedd5ad61ae2908cea1"><code>febaa72</code></a></td><td><code>face and incidences: fixed Python <-> C gluing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1"><code>152db94</code></a></td><td><code>fixed Polyhedra with no facets</code></td></tr></table>




---

archive/issue_comments_413908.json:
```json
{
    "body": "Changed commit from **[`bc21ffa`](https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a)** to **[`152db94`](https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1)**",
    "created_at": "2019-01-16T17:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc21ffa`](https://github.com/sagemath/sagetrac-mirror/commit/bc21ffa2b7e4058f01da08ecc86911c7dfab538a)** to **[`152db94`](https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1)**



---

archive/issue_comments_413909.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09\"><code>b78d533</code></a></td><td><code>Initialization: Fixed Python <-> C gluing</code></td></tr></table>\n",
    "created_at": "2019-01-16T21:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413909",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09"><code>b78d533</code></a></td><td><code>Initialization: Fixed Python <-> C gluing</code></td></tr></table>




---

archive/issue_comments_413910.json:
```json
{
    "body": "Changed commit from **[`152db94`](https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1)** to **[`b78d533`](https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09)**",
    "created_at": "2019-01-16T21:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413910",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`152db94`](https://github.com/sagemath/sagetrac-mirror/commit/152db94b0d7f496a7efab3f5afe33395e1e3baf1)** to **[`b78d533`](https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09)**



---

archive/issue_comments_413911.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThis doesn't build for me on OS X:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/geometry/polyhedron/combinatorial_polyhedron -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/jpalmier/Desktop/Sage/git/sage/src -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc -o build/temp.macosx-10.9-x86_64-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/m4ri -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -g -fPIC -Wall -O2 -mmmx -msse -msse2 -msse3 -O3 -march=native -std=c++11\nIn file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:3:\nIn file included from /Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/Python.h:88:\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* Object */\n    ^~~~~~~~~\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj      /* Object */\n    ^~~~~~~~~\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register const wchar_t *w,  /* wchar_t buffer */\n    ^~~~~~~~~\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register wchar_t *w,        /* wchar_t buffer */\n    ^~~~~~~~~\nIn file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:3:\nIn file included from /Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/Python.h:97:\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* string or Unicode object */\n    ^~~~~~~~~\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register char **s,          /* pointer to buffer variable */\n    ^~~~~~~~~\n/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register Py_ssize_t *len    /* pointer to length variable or NULL\n    ^~~~~~~~~\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:129:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(edges);\n    ^\n          []\n./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:95:32: note: allocated with 'new[]' here\n        unsigned int **edges = new unsigned int *[maxnumberedges];\n                               ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:130:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(ridges);\n    ^\n          []\n./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:96:33: note: allocated with 'new[]' here\n        unsigned int **ridges = new unsigned int *[maxnumberedges];\n                                ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:131:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(incidences);\n    ^\n          []\n./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:97:38: note: allocated with 'new[]' here\n        unsigned long **incidences = new unsigned long *[maxnumberincidences]();\n                                     ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:123:20: warning: unused variable 'j' [-Wunused-variable]\n    unsigned int i,j;\n                   ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:123:18: warning: unused variable 'i' [-Wunused-variable]\n    unsigned int i,j;\n                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:194:18: warning: unused variable 'dim' [-Wunused-variable]\n    unsigned int dim = get_dimension();\n                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:272:18: warning: unused variable 'dim' [-Wunused-variable]\n    unsigned int dim = get_dimension();\n                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:428:19: warning: unused variable 'n' [-Wunused-variable]\n    unsigned long n;\n                  ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:443:19: warning: unused variable 'n' [-Wunused-variable]\n    unsigned long n;\n                  ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:532:22: error: variable-sized object may not be initialized\n    int addfacearray[lenfaces] = { };\n                     ^~~~~~~~\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:585:32: error: use of undeclared identifier 'aligned_alloc'\n        nextfaces_creator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);\n                               ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:607:32: error: use of undeclared identifier 'aligned_alloc'\n        nextfaces_creator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);\n                               ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:655:20: warning: unused variable 'j' [-Wunused-variable]\n    unsigned int i,j;\n                   ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:689:20: warning: unused variable 'j' [-Wunused-variable]\n    unsigned int i,j;\n                   ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:733:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(array);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:722:23: note: allocated with 'new[]' here\n    uint64_t *array = new uint64_t [size_array]();\n                      ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:719:20: warning: unused variable 'j' [-Wunused-variable]\n    unsigned int i,j;\n                   ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:720:18: warning: unused variable 'entry' [-Wunused-variable]\n    unsigned int entry, position, value;\n                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:791:9: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n        delete(saverarray);\n        ^\n              []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here\n    unsigned long **saverarray = new unsigned long *[const_len];\n                                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:800:13: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n            delete(saverarray);\n            ^\n                  []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here\n    unsigned long **saverarray = new unsigned long *[const_len];\n                                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:834:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete (saverarray);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here\n    unsigned long **saverarray = new unsigned long *[const_len];\n                                 ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:883:9: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n        delete(old_facets_walker);\n        ^\n              []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:867:43: note: allocated with 'new[]' here\n        unsigned int *old_facets_walker = new unsigned int [size_three]();\n                                          ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:967:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(array);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:954:23: note: allocated with 'new[]' here\n    uint64_t *array = new uint64_t [size_array]();\n                      ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:993:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(array);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:979:23: note: allocated with 'new[]' here\n    uint64_t *array = new uint64_t [size_array]();\n                      ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1026:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(array);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1014:23: note: allocated with 'new[]' here\n    uint64_t *array = new uint64_t [size_array]();\n                      ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1049:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]\n    delete(array);\n    ^\n          []\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1039:23: note: allocated with 'new[]' here\n    uint64_t *array = new uint64_t [size_array]();\n                      ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1163:31: error: use of undeclared identifier 'aligned_alloc'\n        facets_allocator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);\n                              ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1188:33: error: use of undeclared identifier 'aligned_alloc'\n        vertices_allocator[i] = aligned_alloc(chunksize/8,length_of_face_in_facet_repr*chunksize/8);\n                                ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1220:40: error: use of undeclared identifier 'aligned_alloc'\n            newfaces_allocator[i][j] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);\n                                       ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1270:64: error: use of undeclared identifier 'aligned_alloc'\n                allfaces_allocator[dimension_to_allocate][i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);\n                                                               ^\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1272:75: error: use of undeclared identifier 'aligned_alloc'\n                allfaces_facet_repr_allocator[dimension_to_allocate][i] = aligned_alloc(chunksize/8,length_of_face_in_facet_repr*chunksize/8);\n                                                                          ^\n29 warnings and 8 errors generated.\n```",
    "created_at": "2019-01-16T21:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413911",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

This doesn't build for me on OS X:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/geometry/polyhedron/combinatorial_polyhedron -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/jpalmier/Desktop/Sage/git/sage/src -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc -o build/temp.macosx-10.9-x86_64-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/m4ri -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -g -fPIC -Wall -O2 -mmmx -msse -msse2 -msse3 -O3 -march=native -std=c++11
In file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:3:
In file included from /Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/Python.h:88:
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* Object */
    ^~~~~~~~~
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj      /* Object */
    ^~~~~~~~~
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register const wchar_t *w,  /* wchar_t buffer */
    ^~~~~~~~~
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register wchar_t *w,        /* wchar_t buffer */
    ^~~~~~~~~
In file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:3:
In file included from /Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/Python.h:97:
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* string or Unicode object */
    ^~~~~~~~~
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register char **s,          /* pointer to buffer variable */
    ^~~~~~~~~
/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register Py_ssize_t *len    /* pointer to length variable or NULL
    ^~~~~~~~~
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:129:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(edges);
    ^
          []
./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:95:32: note: allocated with 'new[]' here
        unsigned int **edges = new unsigned int *[maxnumberedges];
                               ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:130:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(ridges);
    ^
          []
./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:96:33: note: allocated with 'new[]' here
        unsigned int **ridges = new unsigned int *[maxnumberedges];
                                ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:131:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(incidences);
    ^
          []
./sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.h:97:38: note: allocated with 'new[]' here
        unsigned long **incidences = new unsigned long *[maxnumberincidences]();
                                     ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:123:20: warning: unused variable 'j' [-Wunused-variable]
    unsigned int i,j;
                   ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:123:18: warning: unused variable 'i' [-Wunused-variable]
    unsigned int i,j;
                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:194:18: warning: unused variable 'dim' [-Wunused-variable]
    unsigned int dim = get_dimension();
                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:272:18: warning: unused variable 'dim' [-Wunused-variable]
    unsigned int dim = get_dimension();
                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:428:19: warning: unused variable 'n' [-Wunused-variable]
    unsigned long n;
                  ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:443:19: warning: unused variable 'n' [-Wunused-variable]
    unsigned long n;
                  ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:532:22: error: variable-sized object may not be initialized
    int addfacearray[lenfaces] = { };
                     ^~~~~~~~
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:585:32: error: use of undeclared identifier 'aligned_alloc'
        nextfaces_creator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);
                               ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:607:32: error: use of undeclared identifier 'aligned_alloc'
        nextfaces_creator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);
                               ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:655:20: warning: unused variable 'j' [-Wunused-variable]
    unsigned int i,j;
                   ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:689:20: warning: unused variable 'j' [-Wunused-variable]
    unsigned int i,j;
                   ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:733:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(array);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:722:23: note: allocated with 'new[]' here
    uint64_t *array = new uint64_t [size_array]();
                      ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:719:20: warning: unused variable 'j' [-Wunused-variable]
    unsigned int i,j;
                   ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:720:18: warning: unused variable 'entry' [-Wunused-variable]
    unsigned int entry, position, value;
                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:791:9: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
        delete(saverarray);
        ^
              []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here
    unsigned long **saverarray = new unsigned long *[const_len];
                                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:800:13: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
            delete(saverarray);
            ^
                  []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here
    unsigned long **saverarray = new unsigned long *[const_len];
                                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:834:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete (saverarray);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:773:34: note: allocated with 'new[]' here
    unsigned long **saverarray = new unsigned long *[const_len];
                                 ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:883:9: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
        delete(old_facets_walker);
        ^
              []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:867:43: note: allocated with 'new[]' here
        unsigned int *old_facets_walker = new unsigned int [size_three]();
                                          ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:967:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(array);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:954:23: note: allocated with 'new[]' here
    uint64_t *array = new uint64_t [size_array]();
                      ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:993:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(array);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:979:23: note: allocated with 'new[]' here
    uint64_t *array = new uint64_t [size_array]();
                      ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1026:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(array);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1014:23: note: allocated with 'new[]' here
    uint64_t *array = new uint64_t [size_array]();
                      ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1049:5: warning: 'delete' applied to a pointer that was allocated with 'new[]'; did you mean 'delete[]'? [-Wmismatched-new-delete]
    delete(array);
    ^
          []
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1039:23: note: allocated with 'new[]' here
    uint64_t *array = new uint64_t [size_array]();
                      ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1163:31: error: use of undeclared identifier 'aligned_alloc'
        facets_allocator[i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);
                              ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1188:33: error: use of undeclared identifier 'aligned_alloc'
        vertices_allocator[i] = aligned_alloc(chunksize/8,length_of_face_in_facet_repr*chunksize/8);
                                ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1220:40: error: use of undeclared identifier 'aligned_alloc'
            newfaces_allocator[i][j] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);
                                       ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1270:64: error: use of undeclared identifier 'aligned_alloc'
                allfaces_allocator[dimension_to_allocate][i] = aligned_alloc(chunksize/8,length_of_face*chunksize/8);
                                                               ^
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:1272:75: error: use of undeclared identifier 'aligned_alloc'
                allfaces_facet_repr_allocator[dimension_to_allocate][i] = aligned_alloc(chunksize/8,length_of_face_in_facet_repr*chunksize/8);
                                                                          ^
29 warnings and 8 errors generated.
```



---

archive/issue_comments_413912.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThanks for going through the effort of building that on your machine.\n\nIt seems to me that there are the following issues:\n- aligned_alloc as used by me only works for C++11 and needs a different header in C++17\n- #include <Python.h> doesn't work at all, which it should, so this seems to be a seperate problem, this will go out, as all the functions requiring python objects where replaced\n- new/delete works differently on C++17 or my version is just not clean, I will take a look at whats going on\n\nReplying to [@jhpalmieri](#comment:32):\n> This doesn't build for me on OS X:",
    "created_at": "2019-01-17T06:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413912",
    "user": "https://github.com/kliem"
}
```

<div id="comment:33" align="right">comment:33</div>

Thanks for going through the effort of building that on your machine.

It seems to me that there are the following issues:
- aligned_alloc as used by me only works for C++11 and needs a different header in C++17
- #include <Python.h> doesn't work at all, which it should, so this seems to be a seperate problem, this will go out, as all the functions requiring python objects where replaced
- new/delete works differently on C++17 or my version is just not clean, I will take a look at whats going on

Replying to [@jhpalmieri](#comment:32):
> This doesn't build for me on OS X:



---

archive/issue_comments_413913.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73fac0e9462e1037a0a69f1cc8149d53084db7c5\"><code>73fac0e</code></a></td><td><code>removed Python in C, aligned_alloc should now work in C++17</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ffc402ebbe3c5bcce23d0c9e09b0fc47ff93aef\"><code>2ffc402</code></a></td><td><code>corrected deletion of arrays</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3\"><code>dc0455d</code></a></td><td><code>removed unused variables, all errors and warnings reported by jhpalmieri should be gone now</code></td></tr></table>\n",
    "created_at": "2019-01-17T08:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413913",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73fac0e9462e1037a0a69f1cc8149d53084db7c5"><code>73fac0e</code></a></td><td><code>removed Python in C, aligned_alloc should now work in C++17</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ffc402ebbe3c5bcce23d0c9e09b0fc47ff93aef"><code>2ffc402</code></a></td><td><code>corrected deletion of arrays</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3"><code>dc0455d</code></a></td><td><code>removed unused variables, all errors and warnings reported by jhpalmieri should be gone now</code></td></tr></table>




---

archive/issue_comments_413914.json:
```json
{
    "body": "Changed commit from **[`b78d533`](https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09)** to **[`dc0455d`](https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3)**",
    "created_at": "2019-01-17T08:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b78d533`](https://github.com/sagemath/sagetrac-mirror/commit/b78d53372e111e7a34f77aea3735effd66cd2b09)** to **[`dc0455d`](https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3)**



---

archive/issue_comments_413915.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI should have checked first..., this doesn't work",
    "created_at": "2019-01-17T08:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413915",
    "user": "https://github.com/kliem"
}
```

<div id="comment:35" align="right">comment:35</div>

I should have checked first..., this doesn't work



---

archive/issue_comments_413916.json:
```json
{
    "body": "Changed commit from **[`dc0455d`](https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3)** to **[`80f4e33`](https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d)**",
    "created_at": "2019-01-17T09:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413916",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dc0455d`](https://github.com/sagemath/sagetrac-mirror/commit/dc0455d6a48a040fffe6f70f2d1082e96855c4c3)** to **[`80f4e33`](https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d)**



---

archive/issue_comments_413917.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7557ecdd603e5e00469144f48680d4a76903c672\"><code>7557ecd</code></a></td><td><code>fixing the calculation of the dimension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e32d0f644a79bb540b20773abbbcbfa3d47e39c1\"><code>e32d0f6</code></a></td><td><code>changed names of variables to not overload dimension of CombinatorialPolyhedron</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d\"><code>80f4e33</code></a></td><td><code>Fixed issue: edges, ridges and incidences should be initialized in order for delete to work properly</code></td></tr></table>\n",
    "created_at": "2019-01-17T09:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413917",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7557ecdd603e5e00469144f48680d4a76903c672"><code>7557ecd</code></a></td><td><code>fixing the calculation of the dimension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e32d0f644a79bb540b20773abbbcbfa3d47e39c1"><code>e32d0f6</code></a></td><td><code>changed names of variables to not overload dimension of CombinatorialPolyhedron</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d"><code>80f4e33</code></a></td><td><code>Fixed issue: edges, ridges and incidences should be initialized in order for delete to work properly</code></td></tr></table>




---

archive/issue_comments_413918.json:
```json
{
    "body": "Changed commit from **[`80f4e33`](https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d)** to **[`a89c37b`](https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250)**",
    "created_at": "2019-01-17T10:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`80f4e33`](https://github.com/sagemath/sagetrac-mirror/commit/80f4e33dcecef1034f7edce36c112513b245d59d)** to **[`a89c37b`](https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250)**



---

archive/issue_comments_413919.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250\"><code>a89c37b</code></a></td><td><code>More work with trivial Polyehedra, they should work now</code></td></tr></table>\n",
    "created_at": "2019-01-17T10:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250"><code>a89c37b</code></a></td><td><code>More work with trivial Polyehedra, they should work now</code></td></tr></table>




---

archive/issue_comments_413920.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\n++    EXAMPLE::\n\nshould be\n\n++    EXAMPLES::",
    "created_at": "2019-01-17T12:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413920",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

++    EXAMPLE::

should be

++    EXAMPLES::



---

archive/issue_comments_413921.json:
```json
{
    "body": "Changed commit from **[`a89c37b`](https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250)** to **[`0eedbb9`](https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb)**",
    "created_at": "2019-01-17T21:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413921",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a89c37b`](https://github.com/sagemath/sagetrac-mirror/commit/a89c37b4519548bb512dd5f9b6934cce0772b250)** to **[`0eedbb9`](https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb)**



---

archive/issue_comments_413922.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb\"><code>0eedbb9</code></a></td><td><code>fixed an issue with unbounded Polyhedra and CombinatorialPolyhedron.faces(0), also fixed Halfspaces</code></td></tr></table>\n",
    "created_at": "2019-01-17T21:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413922",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb"><code>0eedbb9</code></a></td><td><code>fixed an issue with unbounded Polyhedra and CombinatorialPolyhedron.faces(0), also fixed Halfspaces</code></td></tr></table>




---

archive/issue_comments_413923.json:
```json
{
    "body": "Changed commit from **[`0eedbb9`](https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb)** to **[`b37feb7`](https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371)**",
    "created_at": "2019-01-17T22:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0eedbb9`](https://github.com/sagemath/sagetrac-mirror/commit/0eedbb966da75f6f11bb0b03ff19dfe6a93cb4fb)** to **[`b37feb7`](https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371)**



---

archive/issue_comments_413924.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371\"><code>b37feb7</code></a></td><td><code>all tests passed, however there are still examples missing starting at the function faces</code></td></tr></table>\n",
    "created_at": "2019-01-17T22:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371"><code>b37feb7</code></a></td><td><code>all tests passed, however there are still examples missing starting at the function faces</code></td></tr></table>




---

archive/issue_comments_413925.json:
```json
{
    "body": "Changed commit from **[`b37feb7`](https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371)** to **[`829ec2a`](https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef)**",
    "created_at": "2019-01-18T14:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b37feb7`](https://github.com/sagemath/sagetrac-mirror/commit/b37feb7c30468705d151fb58c501968ce07b2371)** to **[`829ec2a`](https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef)**



---

archive/issue_comments_413926.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8223e75775fcd7022fde5c3a69f2b843e556321\"><code>d8223e7</code></a></td><td><code>Added a roughly equivalent Algorithm to f_vector, more examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef\"><code>829ec2a</code></a></td><td><code>Documentation in base.pyx done</code></td></tr></table>\n",
    "created_at": "2019-01-18T14:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413926",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8223e75775fcd7022fde5c3a69f2b843e556321"><code>d8223e7</code></a></td><td><code>Added a roughly equivalent Algorithm to f_vector, more examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef"><code>829ec2a</code></a></td><td><code>Documentation in base.pyx done</code></td></tr></table>




---

archive/issue_comments_413927.json:
```json
{
    "body": "Changed commit from **[`829ec2a`](https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef)** to **[`b513eb2`](https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b)**",
    "created_at": "2019-01-19T12:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413927",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`829ec2a`](https://github.com/sagemath/sagetrac-mirror/commit/829ec2acbfbf3360c8b94184935a097541a744ef)** to **[`b513eb2`](https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b)**



---

archive/issue_comments_413928.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70b5a7a234bcc341970cdf0446e38dc56b23b49e\"><code>70b5a7a</code></a></td><td><code>removed all examples at beginning of file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c33985181c61072c00fd2bf5b6b56f1254afdbbd\"><code>c339851</code></a></td><td><code>added a face_iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b\"><code>b513eb2</code></a></td><td><code>CombinatorialPolyhedron inherits from SageObject now</code></td></tr></table>\n",
    "created_at": "2019-01-19T12:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70b5a7a234bcc341970cdf0446e38dc56b23b49e"><code>70b5a7a</code></a></td><td><code>removed all examples at beginning of file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c33985181c61072c00fd2bf5b6b56f1254afdbbd"><code>c339851</code></a></td><td><code>added a face_iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b"><code>b513eb2</code></a></td><td><code>CombinatorialPolyhedron inherits from SageObject now</code></td></tr></table>




---

archive/issue_comments_413929.json:
```json
{
    "body": "Changed commit from **[`b513eb2`](https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b)** to **[`a176af1`](https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25)**",
    "created_at": "2019-01-20T00:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413929",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b513eb2`](https://github.com/sagemath/sagetrac-mirror/commit/b513eb2a0e9b547297ef5c6ac4b9f95c1f1a184b)** to **[`a176af1`](https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25)**



---

archive/issue_comments_413930.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b7948fdc82338cce0856779385efed8bea0cdc9\"><code>4b7948f</code></a></td><td><code>added a `__reduce__` function to pickle/unpickle correctly,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25\"><code>a176af1</code></a></td><td><code>added copyright license in hasse_diagram.cc</code></td></tr></table>\n",
    "created_at": "2019-01-20T00:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413930",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b7948fdc82338cce0856779385efed8bea0cdc9"><code>4b7948f</code></a></td><td><code>added a `__reduce__` function to pickle/unpickle correctly,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25"><code>a176af1</code></a></td><td><code>added copyright license in hasse_diagram.cc</code></td></tr></table>




---

archive/issue_comments_413931.json:
```json
{
    "body": "Changed commit from **[`a176af1`](https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25)** to **[`a2f90ad`](https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41)**",
    "created_at": "2019-01-21T09:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a176af1`](https://github.com/sagemath/sagetrac-mirror/commit/a176af156c820c31791e1dcef05b3e62e70e5b25)** to **[`a2f90ad`](https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41)**



---

archive/issue_comments_413932.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41\"><code>a2f90ad</code></a></td><td><code>corrected edges and ridges a polyhedron with two vertices</code></td></tr></table>\n",
    "created_at": "2019-01-21T09:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413932",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41"><code>a2f90ad</code></a></td><td><code>corrected edges and ridges a polyhedron with two vertices</code></td></tr></table>




---

archive/issue_comments_413933.json:
```json
{
    "body": "Changed commit from **[`a2f90ad`](https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41)** to **[`46f9555`](https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1)**",
    "created_at": "2019-01-21T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413933",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a2f90ad`](https://github.com/sagemath/sagetrac-mirror/commit/a2f90adfbeba067766b7538cadd50830015eda41)** to **[`46f9555`](https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1)**



---

archive/issue_comments_413934.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1\"><code>46f9555</code></a></td><td><code>added a macro to ensure aligned_alloc exists,</code></td></tr></table>\n",
    "created_at": "2019-01-21T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413934",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1"><code>46f9555</code></a></td><td><code>added a macro to ensure aligned_alloc exists,</code></td></tr></table>




---

archive/issue_events_366431.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-21T13:39:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366431"
}
```



---

archive/issue_events_366432.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-21T13:39:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366432"
}
```



---

archive/issue_comments_413935.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nStill doesn't build on OS X:\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/geometry/polyhedron/combinatorial_polyhedron -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/git/sage/src -I/Users/palmieri/Desktop/Sage_stuff/git/sage/src/sage/ext -Ibuild/cythonized -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc -o build/temp.macosx-10.9-x86_64-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -O3 -march=native -std=c++11\nIn file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:13:\nIn file included from /Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/Python.h:88:\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* Object */\n    ^~~~~~~~~\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj      /* Object */\n    ^~~~~~~~~\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register const wchar_t *w,  /* wchar_t buffer */\n    ^~~~~~~~~\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register wchar_t *w,        /* wchar_t buffer */\n    ^~~~~~~~~\nIn file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:13:\nIn file included from /Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/Python.h:97:\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* string or Unicode object */\n    ^~~~~~~~~\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register char **s,          /* pointer to buffer variable */\n    ^~~~~~~~~\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register Py_ssize_t *len    /* pointer to length variable or NULL\n    ^~~~~~~~~\nsage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:717:22: error: variable-sized object may not be initialized\n    int addfacearray[constlenfaces] = { };\n                     ^~~~~~~~~~~~~\n7 warnings and 1 error generated.\n```\nCython would be so much easier.",
    "created_at": "2019-01-21T17:29:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413935",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:47" align="right">comment:47</div>

Still doesn't build on OS X:

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/geometry/polyhedron/combinatorial_polyhedron -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/git/sage/src -I/Users/palmieri/Desktop/Sage_stuff/git/sage/src/sage/ext -Ibuild/cythonized -I/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc -o build/temp.macosx-10.9-x86_64-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -O3 -march=native -std=c++11
In file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:13:
In file included from /Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/Python.h:88:
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* Object */
    ^~~~~~~~~
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj      /* Object */
    ^~~~~~~~~
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register const wchar_t *w,  /* wchar_t buffer */
    ^~~~~~~~~
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register wchar_t *w,        /* wchar_t buffer */
    ^~~~~~~~~
In file included from sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:13:
In file included from /Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/Python.h:97:
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* string or Unicode object */
    ^~~~~~~~~
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register char **s,          /* pointer to buffer variable */
    ^~~~~~~~~
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register Py_ssize_t *len    /* pointer to length variable or NULL
    ^~~~~~~~~
sage/geometry/polyhedron/combinatorial_polyhedron/hasse_diagram.cc:717:22: error: variable-sized object may not be initialized
    int addfacearray[constlenfaces] = { };
                     ^~~~~~~~~~~~~
7 warnings and 1 error generated.
```
Cython would be so much easier.



---

archive/issue_comments_413936.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ae3dd4bfd4be0947633e7d36edec39257f041d2\"><code>6ae3dd4</code></a></td><td><code>Fixed issue with PopCount, PopCount requires header immintin, which was only included when AVX2 was availabe</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05635c991d88b232ced81062ca0b66ca91908013\"><code>05635c9</code></a></td><td><code>replace iterator.next() by next(iterator) in test for Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272\"><code>1971dd7</code></a></td><td><code>removed geometry/all.py from ticket, removed geometry/polyhedron/base.py from ticket</code></td></tr></table>\n",
    "created_at": "2019-01-21T17:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ae3dd4bfd4be0947633e7d36edec39257f041d2"><code>6ae3dd4</code></a></td><td><code>Fixed issue with PopCount, PopCount requires header immintin, which was only included when AVX2 was availabe</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05635c991d88b232ced81062ca0b66ca91908013"><code>05635c9</code></a></td><td><code>replace iterator.next() by next(iterator) in test for Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272"><code>1971dd7</code></a></td><td><code>removed geometry/all.py from ticket, removed geometry/polyhedron/base.py from ticket</code></td></tr></table>




---

archive/issue_comments_413937.json:
```json
{
    "body": "Changed commit from **[`46f9555`](https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1)** to **[`1971dd7`](https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272)**",
    "created_at": "2019-01-21T17:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413937",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46f9555`](https://github.com/sagemath/sagetrac-mirror/commit/46f95556da205a8b2cfe28c4aeeff807321714c1)** to **[`1971dd7`](https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272)**



---

archive/issue_comments_413938.json:
```json
{
    "body": "Changed commit from **[`1971dd7`](https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272)** to **[`de57d7f`](https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134)**",
    "created_at": "2019-01-21T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1971dd7`](https://github.com/sagemath/sagetrac-mirror/commit/1971dd77286848ccb7f069c3b0f71feb7c197272)** to **[`de57d7f`](https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134)**



---

archive/issue_comments_413939.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae0d13197d1bc2f62d51e3d4daa92d14dad4ed23\"><code>ae0d131</code></a></td><td><code>removed commend in module-list.py, march=native is needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f27a2ef7bed344ffcd1e121c2686b5c92f34ed18\"><code>f27a2ef</code></a></td><td><code>removed Python.h</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134\"><code>de57d7f</code></a></td><td><code>fixed headers, removed Python.h, moved declaration of constlenfaces to the beginning of function</code></td></tr></table>\n",
    "created_at": "2019-01-21T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413939",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae0d13197d1bc2f62d51e3d4daa92d14dad4ed23"><code>ae0d131</code></a></td><td><code>removed commend in module-list.py, march=native is needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f27a2ef7bed344ffcd1e121c2686b5c92f34ed18"><code>f27a2ef</code></a></td><td><code>removed Python.h</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134"><code>de57d7f</code></a></td><td><code>fixed headers, removed Python.h, moved declaration of constlenfaces to the beginning of function</code></td></tr></table>




---

archive/issue_comments_413940.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nShould be fixed.\n\nI don't know why I didn't remove Python.h, it sure wasn't needed anymore. (Except that it included stdint). However, the pure inclusion of the Python module in C should not give an error.\n\nReplying to [@jhpalmieri](#comment:47):\n> Still doesn't build on OS X:\n\n>\n> Cython would be so much easier.\n\nFor me, Cython was not easier. I couldn't get the things done the way I wanted. Once you know what should be done in C exactly, then it is probably easier. Now that I have written the code in C++, I could probably do it in Cython as well. When I searched for specific questions in Cython, I just couldn't get any result, but in C or C++ there are tons of helps on the web that helped me.\nI am a complete newbie in programming. It feels to me that I aquired at least half of my knowledge through this project. From Cython to C/C++ I had a speedup of about 20 on large Polytopes, probably just because translating it to pure C/C++ helped me better understand what the machine is doing and can be doing.",
    "created_at": "2019-01-21T19:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413940",
    "user": "https://github.com/kliem"
}
```

<div id="comment:50" align="right">comment:50</div>

Should be fixed.

I don't know why I didn't remove Python.h, it sure wasn't needed anymore. (Except that it included stdint). However, the pure inclusion of the Python module in C should not give an error.

Replying to [@jhpalmieri](#comment:47):
> Still doesn't build on OS X:

>
> Cython would be so much easier.

For me, Cython was not easier. I couldn't get the things done the way I wanted. Once you know what should be done in C exactly, then it is probably easier. Now that I have written the code in C++, I could probably do it in Cython as well. When I searched for specific questions in Cython, I just couldn't get any result, but in C or C++ there are tons of helps on the web that helped me.
I am a complete newbie in programming. It feels to me that I aquired at least half of my knowledge through this project. From Cython to C/C++ I had a speedup of about 20 on large Polytopes, probably just because translating it to pure C/C++ helped me better understand what the machine is doing and can be doing.



---

archive/issue_comments_413941.json:
```json
{
    "body": "Changed commit from **[`de57d7f`](https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134)** to **[`882ce71`](https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71)**",
    "created_at": "2019-01-21T21:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`de57d7f`](https://github.com/sagemath/sagetrac-mirror/commit/de57d7f3af7eb52f8ed2cee17184a6cbec3fb134)** to **[`882ce71`](https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71)**



---

archive/issue_comments_413942.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71\"><code>882ce71</code></a></td><td><code>Interchanged long tests</code></td></tr></table>\n",
    "created_at": "2019-01-21T21:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71"><code>882ce71</code></a></td><td><code>Interchanged long tests</code></td></tr></table>




---

archive/issue_comments_413943.json:
```json
{
    "body": "Changed commit from **[`882ce71`](https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71)** to **[`f5c87d8`](https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270)**",
    "created_at": "2019-01-22T08:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`882ce71`](https://github.com/sagemath/sagetrac-mirror/commit/882ce7189a0a1b4c6d29baaa6c01e13bb16f5c71)** to **[`f5c87d8`](https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270)**



---

archive/issue_comments_413944.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270\"><code>f5c87d8</code></a></td><td><code>I missed a polytopes.Polyhedron(7), this was taken out now</code></td></tr></table>\n",
    "created_at": "2019-01-22T08:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413944",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270"><code>f5c87d8</code></a></td><td><code>I missed a polytopes.Polyhedron(7), this was taken out now</code></td></tr></table>




---

archive/issue_comments_413945.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee86475f0edab1874e1dd2417dc7e6ef138ef30a\"><code>ee86475</code></a></td><td><code>this should work on 32bit now, I replaced uint64_t by a macro, which first determines wether we are 64 or 32bi,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947\"><code>de03b8b</code></a></td><td><code>added doctest to `_repr_` and _record_all_faces</code></td></tr></table>\n",
    "created_at": "2019-01-22T11:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413945",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee86475f0edab1874e1dd2417dc7e6ef138ef30a"><code>ee86475</code></a></td><td><code>this should work on 32bit now, I replaced uint64_t by a macro, which first determines wether we are 64 or 32bi,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947"><code>de03b8b</code></a></td><td><code>added doctest to `_repr_` and _record_all_faces</code></td></tr></table>




---

archive/issue_comments_413946.json:
```json
{
    "body": "Changed commit from **[`f5c87d8`](https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270)** to **[`de03b8b`](https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947)**",
    "created_at": "2019-01-22T11:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413946",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f5c87d8`](https://github.com/sagemath/sagetrac-mirror/commit/f5c87d83fc288f0cde3767e39713a957dfbfa270)** to **[`de03b8b`](https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947)**



---

archive/issue_events_366433.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-01-24T09:52:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "title_is": "Implement the class CombinatorialPolyhedron",
    "title_was": "Improve f_vector, edges, ridges, dimension for polyhedra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366433"
}
```



---

archive/issue_comments_413947.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,17 +1,23 @@\n-Several improvements for calculating properties of polytopes that depend on the face-lattice.\n-\n-We will construct a class CombinatorialPolytope, which will collect several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatimic Eulerian lattices.\n+We construct a class CombinatorialPolyhedron, which collects several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatomic Eulerian lattices.\n \n Computations can be much faster when avoiding creating explicitly the face lattice.\n \n Example:\n+\n+```\n P = polytopes.permutahedron(6)\n P.f_vector()\n+```\n \n-At my machine this takes over 8s, but it should be a matter of ms. For permutahedron(7) it takes forever and should also be a matter of ms.\n+On my machine this takes over 8s, but it should be a matter of ms. For `permutahedron(7)` it takes forever and should also be a matter of ms.\n \n-Additionally, one can create the face_lattice much faster. The face_lattice of permutahedron(7) should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.\n+Additionally, one can create the face_lattice much faster. The face_lattice of `permutahedron(7)` should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.\n \n-The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the hasse_diagram, except that it avoids double counting (and hence can calculate the f_vector) without an explicit list of all faces.\n+The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.\n \n-It might also make sense to improve calculation of entries in the flag-vector, while we are at it. This takes for every entry in the flag-vector less time then to construct the face-lattice.\n+\n+FOLLOW-UPS:\n+\n+- improve calculation of entries in the flag-vector, while we are at it.\n+  This takes for every entry in the flag-vector less time then to construct the face-lattice.\n+- Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)\n``````\n",
    "created_at": "2019-01-24T09:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413947",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,17 +1,23 @@
-Several improvements for calculating properties of polytopes that depend on the face-lattice.
-
-We will construct a class CombinatorialPolytope, which will collect several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatimic Eulerian lattices.
+We construct a class CombinatorialPolyhedron, which collects several methods for polyhedra depending only on the combinatorial type. Actually, most of the methods will work for atomic, coatomic Eulerian lattices.
 
 Computations can be much faster when avoiding creating explicitly the face lattice.
 
 Example:
+
+```
 P = polytopes.permutahedron(6)
 P.f_vector()
+```
 
-At my machine this takes over 8s, but it should be a matter of ms. For permutahedron(7) it takes forever and should also be a matter of ms.
+On my machine this takes over 8s, but it should be a matter of ms. For `permutahedron(7)` it takes forever and should also be a matter of ms.
 
-Additionally, one can create the face_lattice much faster. The face_lattice of permutahedron(7) should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.
+Additionally, one can create the face_lattice much faster. The face_lattice of `permutahedron(7)` should only take few seconds. This is done by creating of lists of all faces and then quickly checking inclusions.
 
-The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the hasse_diagram, except that it avoids double counting (and hence can calculate the f_vector) without an explicit list of all faces.
+The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.
 
-It might also make sense to improve calculation of entries in the flag-vector, while we are at it. This takes for every entry in the flag-vector less time then to construct the face-lattice.
+
+FOLLOW-UPS:
+
+- improve calculation of entries in the flag-vector, while we are at it.
+  This takes for every entry in the flag-vector less time then to construct the face-lattice.
+- Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)
``````




---

archive/issue_events_366434.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-24T10:35:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366434"
}
```



---

archive/issue_events_366435.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-24T10:35:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366435"
}
```



---

archive/issue_comments_413948.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nSome purely technical points about the programming:\n\n1. We generally discourage putting `Extension` parameters in `module_list.py`. Better use `# distutils` declarations in Cython files. See https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#source-files-and-compilation for examples.\n\n2. `-march=native` is not acceptable since we want to distribute binaries. Moreover, it makes no sense to compile just this specific file with `-march=native`. If you want to add `-march=native`, it should probably be added as compilation flag for all packages (or at least for Python, such that it applies to all Python packages). If you want to go through with this, you should open a new ticket for that. Also note that the option `-march=native` itself is not portable: there be a check that the compiler actually understands it.\n\n3. The `-O3` option is the default, so that's redundant.\n\n4. You have very long lines in your sources. You should try to wrap them to less than 80 characters per line.\n\n5. You're adding a lot of C/Cython code without a single `sig_on`/`sig_check`. That's suspicious as such code cannot be interrupted. See https://cysignals.readthedocs.io/en/latest/interrupt.html#interrupt-handling\n\n6. While you're at it, you could also use the cysignals memory allocation functions instead of `PyMem_...`.\n\n7. `hasse_diagram.cc` contains various trivial functions which could easily be replaced by Cython. For example, the various accessor functions could be replaced by just accessing the attributes in Cython (this requires that the class `CombinatorialPolyhedron` is actually declared in Cython). Also `delete_CombinatorialPolyhedron(C)` could be replaced by just `del C`.\n\n8. This is just advice: it's also possible to just include the `.cc` file in the `.pyx` file using `cdef extern from \"hasse_diagram.cc\"`. That way, you can avoid the `.h` file and you give more optimization opportunities to the compiler, since everything is compiled in one C++ file.\n\n9. I'm very worried about portability: you seem to be using a lot of compiler-specific and CPU-specific code. I don't know whether anything will actually break, but there is a substantial risk.\n\n10. Typo: `memomory` -> `memory`",
    "created_at": "2019-01-24T10:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413948",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

Some purely technical points about the programming:

1. We generally discourage putting `Extension` parameters in `module_list.py`. Better use `# distutils` declarations in Cython files. See https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#source-files-and-compilation for examples.

2. `-march=native` is not acceptable since we want to distribute binaries. Moreover, it makes no sense to compile just this specific file with `-march=native`. If you want to add `-march=native`, it should probably be added as compilation flag for all packages (or at least for Python, such that it applies to all Python packages). If you want to go through with this, you should open a new ticket for that. Also note that the option `-march=native` itself is not portable: there be a check that the compiler actually understands it.

3. The `-O3` option is the default, so that's redundant.

4. You have very long lines in your sources. You should try to wrap them to less than 80 characters per line.

5. You're adding a lot of C/Cython code without a single `sig_on`/`sig_check`. That's suspicious as such code cannot be interrupted. See https://cysignals.readthedocs.io/en/latest/interrupt.html#interrupt-handling

6. While you're at it, you could also use the cysignals memory allocation functions instead of `PyMem_...`.

7. `hasse_diagram.cc` contains various trivial functions which could easily be replaced by Cython. For example, the various accessor functions could be replaced by just accessing the attributes in Cython (this requires that the class `CombinatorialPolyhedron` is actually declared in Cython). Also `delete_CombinatorialPolyhedron(C)` could be replaced by just `del C`.

8. This is just advice: it's also possible to just include the `.cc` file in the `.pyx` file using `cdef extern from "hasse_diagram.cc"`. That way, you can avoid the `.h` file and you give more optimization opportunities to the compiler, since everything is compiled in one C++ file.

9. I'm very worried about portability: you seem to be using a lot of compiler-specific and CPU-specific code. I don't know whether anything will actually break, but there is a substantial risk.

10. Typo: `memomory` -> `memory`



---

archive/issue_comments_413949.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@kliem](#comment:22):\n> In Cython I was able to calculate this vector (or more important the edge graph) in something like 3 hours, in C it took me 20 minutes.\n\nJust to add to what Vincent said: if your Cython code is substantially slower than your C/C++ code, you're doing it wrong. When using Cython properly, it should have the same speed as pure C/C++.\n\nThat being said, I'm not saying that you *should* use Cython instead of C++, just that you *could*.",
    "created_at": "2019-01-24T10:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413949",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@kliem](#comment:22):
> In Cython I was able to calculate this vector (or more important the edge graph) in something like 3 hours, in C it took me 20 minutes.

Just to add to what Vincent said: if your Cython code is substantially slower than your C/C++ code, you're doing it wrong. When using Cython properly, it should have the same speed as pure C/C++.

That being said, I'm not saying that you *should* use Cython instead of C++, just that you *could*.



---

archive/issue_comments_413950.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nAnother minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?",
    "created_at": "2019-01-24T11:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413950",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?



---

archive/issue_comments_413951.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7904eabd1e897d4d6fc50b8ca947f87b7ef7f846\"><code>7904eab</code></a></td><td><code>Lots of comments for hasse_diagram.pxd as on how to use the functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4\"><code>2df5d2e</code></a></td><td><code>some remark for later, edges of an unbounded polyhedron needs to figured out yet</code></td></tr></table>\n",
    "created_at": "2019-01-24T14:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7904eabd1e897d4d6fc50b8ca947f87b7ef7f846"><code>7904eab</code></a></td><td><code>Lots of comments for hasse_diagram.pxd as on how to use the functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4"><code>2df5d2e</code></a></td><td><code>some remark for later, edges of an unbounded polyhedron needs to figured out yet</code></td></tr></table>




---

archive/issue_comments_413952.json:
```json
{
    "body": "Changed commit from **[`de03b8b`](https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947)** to **[`2df5d2e`](https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4)**",
    "created_at": "2019-01-24T14:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413952",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`de03b8b`](https://github.com/sagemath/sagetrac-mirror/commit/de03b8be97be9e77bfdbc27b142509cec353b947)** to **[`2df5d2e`](https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4)**



---

archive/issue_comments_413953.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6\"><code>0a95629</code></a></td><td><code>corrected multiline comment</code></td></tr></table>\n",
    "created_at": "2019-01-24T14:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6"><code>0a95629</code></a></td><td><code>corrected multiline comment</code></td></tr></table>




---

archive/issue_comments_413954.json:
```json
{
    "body": "Changed commit from **[`2df5d2e`](https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4)** to **[`0a95629`](https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6)**",
    "created_at": "2019-01-24T14:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413954",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2df5d2e`](https://github.com/sagemath/sagetrac-mirror/commit/2df5d2ef760981ae2cddc4e23b87021aeb6f20e4)** to **[`0a95629`](https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6)**



---

archive/issue_comments_413955.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5\"><code>96c0a35</code></a></td><td><code>Removed Compile arguments from module_list,</code></td></tr></table>\n",
    "created_at": "2019-01-24T16:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5"><code>96c0a35</code></a></td><td><code>Removed Compile arguments from module_list,</code></td></tr></table>




---

archive/issue_comments_413956.json:
```json
{
    "body": "Changed commit from **[`0a95629`](https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6)** to **[`96c0a35`](https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5)**",
    "created_at": "2019-01-24T16:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0a95629`](https://github.com/sagemath/sagetrac-mirror/commit/0a95629eb7adeede726a1fdd1d8993ba72ff5eb6)** to **[`96c0a35`](https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5)**



---

archive/issue_comments_413957.json:
```json
{
    "body": "Changed commit from **[`96c0a35`](https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5)** to **[`ae08e25`](https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9)**",
    "created_at": "2019-01-24T16:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413957",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96c0a35`](https://github.com/sagemath/sagetrac-mirror/commit/96c0a3551f09a96a6edd79a8eaccad846991e3f5)** to **[`ae08e25`](https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9)**



---

archive/issue_comments_413958.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9\"><code>ae08e25</code></a></td><td><code>corrected memory</code></td></tr></table>\n",
    "created_at": "2019-01-24T16:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9"><code>ae08e25</code></a></td><td><code>corrected memory</code></td></tr></table>




---

archive/issue_comments_413959.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@jdemeyer](#comment:57):\n> Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?\n\nAny suggestions? Maybe 'uint64/32_t'? I don't like the name either...\n\nAlso, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?",
    "created_at": "2019-01-24T16:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413959",
    "user": "https://github.com/kliem"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@jdemeyer](#comment:57):
> Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?

Any suggestions? Maybe 'uint64/32_t'? I don't like the name either...

Also, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?



---

archive/issue_comments_413960.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@kliem](#comment:62):\n> Replying to [@jdemeyer](#comment:57):\n> > Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?\n\n> \n> Any suggestions? Maybe 'uint64/32_t'? I don't like the name either...\n> \n> Also, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?\n\nThere is no guaranty at all (e.g. look at the header of gmp where they define `mp_limb_t`). I don't understand what is the problem with `uint64_t` and `uint32_t`... These are supposed to be standard and portable. Contrarily to `unsigned long` or `size_t`. Though I wonder why gmp avoid using them...",
    "created_at": "2019-01-24T16:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413960",
    "user": "https://github.com/videlec"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@kliem](#comment:62):
> Replying to [@jdemeyer](#comment:57):
> > Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?

> 
> Any suggestions? Maybe 'uint64/32_t'? I don't like the name either...
> 
> Also, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?

There is no guaranty at all (e.g. look at the header of gmp where they define `mp_limb_t`). I don't understand what is the problem with `uint64_t` and `uint32_t`... These are supposed to be standard and portable. Contrarily to `unsigned long` or `size_t`. Though I wonder why gmp avoid using them...



---

archive/issue_comments_413961.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThanks for the comments and help.\n\nReplying to [@jdemeyer](#comment:55):\n> Some purely technical points about the programming:\n> \n> 1. We generally discourage putting `Extension` parameters in `module_list.py`. Better use `# distutils` declarations in Cython files. See https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#source-files-and-compilation for examples.\n\nDone. Once I knew what to look for, I found a good example (combinat/partitions.pyx).\n> \n> 2. `-march=native` is not acceptable since we want to distribute binaries. Moreover, it makes no sense to compile just this specific file with `-march=native`. If you want to add `-march=native`, it should probably be added as compilation flag for all packages (or at least for Python, such that it applies to all Python packages). If you want to go through with this, you should open a new ticket for that. Also note that the option `-march=native` itself is not portable: there be a check that the compiler actually understands it.\n> \n\nIt took be a bit to figure this one out. A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/). \n\nIf compiled by GCC >= 6 there would be multiple versions of the code available. At runtime the decision is made according to availability of the intrinsics. This way a build be used by different machines (e.g. Network Versions of it or binaries).\n\nAt compile time we can then decide for 64 or 32 bits and check wether it is compiled with GCC >= 6.\n\n> 3. The `-O3` option is the default, so that's redundant.\n\nDone.\n\n> 4. You have very long lines in your sources. You should try to wrap them to less than 80 characters per line.\n> \n\nI will take care of that.\n\n> 5. You're adding a lot of C/Cython code without a single `sig_on`/`sig_check`. That's suspicious as such code cannot be interrupted. See https://cysignals.readthedocs.io/en/latest/interrupt.html#interrupt-handling\n> \n\ncombinat/partitions.pyx seems to be a good example. There this is done as well. I noticed this problem. When doing long calculations I had to kill sage the hard way, when I wanted to do so.\n\n> 6. While you're at it, you could also use the cysignals memory allocation functions instead of `PyMem_...`.\n> \n> 7. `hasse_diagram.cc` contains various trivial functions which could easily be replaced by Cython. For example, the various accessor functions could be replaced by just accessing the attributes in Cython (this requires that the class `CombinatorialPolyhedron` is actually declared in Cython). Also `delete_CombinatorialPolyhedron(C)` could be replaced by just `del C`.\n\nI honestly don't know how to do this. At the moment I am thinking about actually importing the class CombinatorialPolyhedron in C++ a number of times with different macros. This way I avoid the multi-version function being decided on a low level, which would slow things done a lot and would break in-lines etc. I could define the functions in the class a number of times, but this would make it even less readable.\n\nAnyway, I'm still thinking about it and trying to figure out what to do.\n> \n> 8. This is just advice: it's also possible to just include the `.cc` file in the `.pyx` file using `cdef extern from \"hasse_diagram.cc\"`. That way, you can avoid the `.h` file and you give more optimization opportunities to the compiler, since everything is compiled in one C++ file.\n\nGreat, I like this much better. For the extension thing, one was supposed to use a header. But now I'm able to work without it. I always found it a pain to work with header and cc.\n\n> 9. I'm very worried about portability: you seem to be using a lot of compiler-specific and CPU-specific code. I don't know whether anything will actually break, but there is a substantial risk.\n\n>\n\nSee above. GCC sets up multiple functions and at runtime the correct function is being called. If one does not compile with GCC >= 6 then I suggest not using intrinsics at all.\n\nThere are not too many scenarios:\n- AVX2 (maybe delete this, if there are no substantial losses doing it with AVX-only, however the instructions are easier with AVX2.)\n- AVX, but not AVX2\n- popcnt, but not AVX\n- SSE4.1\n- default\n\nThis is 64-bit. I have to check out the scenarios for 32-bit yet.\n\n \n> 10. Typo: `memomory` -> `memory`\n\nDone.",
    "created_at": "2019-01-24T17:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413961",
    "user": "https://github.com/kliem"
}
```

<div id="comment:64" align="right">comment:64</div>

Thanks for the comments and help.

Replying to [@jdemeyer](#comment:55):
> Some purely technical points about the programming:
> 
> 1. We generally discourage putting `Extension` parameters in `module_list.py`. Better use `# distutils` declarations in Cython files. See https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html#source-files-and-compilation for examples.

Done. Once I knew what to look for, I found a good example (combinat/partitions.pyx).
> 
> 2. `-march=native` is not acceptable since we want to distribute binaries. Moreover, it makes no sense to compile just this specific file with `-march=native`. If you want to add `-march=native`, it should probably be added as compilation flag for all packages (or at least for Python, such that it applies to all Python packages). If you want to go through with this, you should open a new ticket for that. Also note that the option `-march=native` itself is not portable: there be a check that the compiler actually understands it.
> 

It took be a bit to figure this one out. A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/). 

If compiled by GCC >= 6 there would be multiple versions of the code available. At runtime the decision is made according to availability of the intrinsics. This way a build be used by different machines (e.g. Network Versions of it or binaries).

At compile time we can then decide for 64 or 32 bits and check wether it is compiled with GCC >= 6.

> 3. The `-O3` option is the default, so that's redundant.

Done.

> 4. You have very long lines in your sources. You should try to wrap them to less than 80 characters per line.
> 

I will take care of that.

> 5. You're adding a lot of C/Cython code without a single `sig_on`/`sig_check`. That's suspicious as such code cannot be interrupted. See https://cysignals.readthedocs.io/en/latest/interrupt.html#interrupt-handling
> 

combinat/partitions.pyx seems to be a good example. There this is done as well. I noticed this problem. When doing long calculations I had to kill sage the hard way, when I wanted to do so.

> 6. While you're at it, you could also use the cysignals memory allocation functions instead of `PyMem_...`.
> 
> 7. `hasse_diagram.cc` contains various trivial functions which could easily be replaced by Cython. For example, the various accessor functions could be replaced by just accessing the attributes in Cython (this requires that the class `CombinatorialPolyhedron` is actually declared in Cython). Also `delete_CombinatorialPolyhedron(C)` could be replaced by just `del C`.

I honestly don't know how to do this. At the moment I am thinking about actually importing the class CombinatorialPolyhedron in C++ a number of times with different macros. This way I avoid the multi-version function being decided on a low level, which would slow things done a lot and would break in-lines etc. I could define the functions in the class a number of times, but this would make it even less readable.

Anyway, I'm still thinking about it and trying to figure out what to do.
> 
> 8. This is just advice: it's also possible to just include the `.cc` file in the `.pyx` file using `cdef extern from "hasse_diagram.cc"`. That way, you can avoid the `.h` file and you give more optimization opportunities to the compiler, since everything is compiled in one C++ file.

Great, I like this much better. For the extension thing, one was supposed to use a header. But now I'm able to work without it. I always found it a pain to work with header and cc.

> 9. I'm very worried about portability: you seem to be using a lot of compiler-specific and CPU-specific code. I don't know whether anything will actually break, but there is a substantial risk.

>

See above. GCC sets up multiple functions and at runtime the correct function is being called. If one does not compile with GCC >= 6 then I suggest not using intrinsics at all.

There are not too many scenarios:
- AVX2 (maybe delete this, if there are no substantial losses doing it with AVX-only, however the instructions are easier with AVX2.)
- AVX, but not AVX2
- popcnt, but not AVX
- SSE4.1
- default

This is 64-bit. I have to check out the scenarios for 32-bit yet.

 
> 10. Typo: `memomory` -> `memory`

Done.



---

archive/issue_comments_413962.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@videlec](#comment:63):\n> Replying to [@kliem](#comment:62):\n> > Replying to [@jdemeyer](#comment:57):\n> > > Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?\n\n> > \n> > Any suggestions? Maybe 'uint64/32_t'? I don't like the name either...\n> > \n> > Also, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?\n\n> \n> There is no guaranty at all (e.g. look at the header of gmp where they define `mp_limb_t`). I don't understand what is the problem with `uint64_t` and `uint32_t`... These are supposed to be standard and portable. Contrarily to `unsigned long` or `size_t`. Though I wonder why gmp avoid using them...\n\nI wasn't sure whether uint64_t is always available on 32-bit machines. If this is the case, I can of course use it. In order to do popcount I need to do a pointer typecast, but that should be fine and the only problem then. Some patchbot gave me an error message about _mm_popcnt_u64 not being defined, which seems to be the case, if the machine is 32-bit.",
    "created_at": "2019-01-24T17:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413962",
    "user": "https://github.com/kliem"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@videlec](#comment:63):
> Replying to [@kliem](#comment:62):
> > Replying to [@jdemeyer](#comment:57):
> > > Another minor comment: `uint64_t_or_uint32_t` is a very clunky type name. Couldn't you use a more descriptive name? Or use a standard type like `unsigned long` or `size_t`?

> > 
> > Any suggestions? Maybe 'uint64/32_t'? I don't like the name either...
> > 
> > Also, on 64bit machines, I really need to know that this is uint64_t. On 32-bit machines that it is uint32_t. As far as I understand size_t can be anything. Also unsigned long should usually be uint64_t, but there is no guarantee on it. Is there?

> 
> There is no guaranty at all (e.g. look at the header of gmp where they define `mp_limb_t`). I don't understand what is the problem with `uint64_t` and `uint32_t`... These are supposed to be standard and portable. Contrarily to `unsigned long` or `size_t`. Though I wonder why gmp avoid using them...

I wasn't sure whether uint64_t is always available on 32-bit machines. If this is the case, I can of course use it. In order to do popcount I need to do a pointer typecast, but that should be fine and the only problem then. Some patchbot gave me an error message about _mm_popcnt_u64 not being defined, which seems to be the case, if the machine is 32-bit.



---

archive/issue_comments_413963.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nYou probably know this, but just in case: on OS X, `clang` is used, not `gcc`.",
    "created_at": "2019-01-24T18:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413963",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">comment:66</div>

You probably know this, but just in case: on OS X, `clang` is used, not `gcc`.



---

archive/issue_comments_413964.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@kliem](#comment:62):\n> Also, on 64bit machines, I really need to know that this is uint64_t.\n\nWhat's your definition of a 64-bit machine (or 32-bit machine)?",
    "created_at": "2019-01-24T19:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413964",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@kliem](#comment:62):
> Also, on 64bit machines, I really need to know that this is uint64_t.

What's your definition of a 64-bit machine (or 32-bit machine)?



---

archive/issue_comments_413965.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nA more or less equivalent question: why do you *really* need to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?",
    "created_at": "2019-01-24T19:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413965",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

A more or less equivalent question: why do you *really* need to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?



---

archive/issue_comments_413966.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@kliem](#comment:64):\n> A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).\n\nThat's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.\n\nBut you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.",
    "created_at": "2019-01-24T20:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413966",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@kliem](#comment:64):
> A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).

That's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.

But you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.



---

archive/issue_comments_413967.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@jdemeyer](#comment:68):\n> A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?\n\n`#if INTPTR_MAX == INT64_MAX `\n\nThis is what I read somewhere. If this is for some reason is not set at all, it uses uint32_t and more important it will not call `_mm_popcnt_u64`, which does not seem to be defined for 32bit machines, even if the processor has POPCNT. I figured this is why the following patchbot run failed:\n\nhttps://patchbot.sagemath.org/log/26887/Ubuntu/14.04/i686/3.13.0-164-generic/arando/2019-01-22%2009:12:47?short",
    "created_at": "2019-01-24T20:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413967",
    "user": "https://github.com/kliem"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@jdemeyer](#comment:68):
> A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?

`#if INTPTR_MAX == INT64_MAX `

This is what I read somewhere. If this is for some reason is not set at all, it uses uint32_t and more important it will not call `_mm_popcnt_u64`, which does not seem to be defined for 32bit machines, even if the processor has POPCNT. I figured this is why the following patchbot run failed:

https://patchbot.sagemath.org/log/26887/Ubuntu/14.04/i686/3.13.0-164-generic/arando/2019-01-22%2009:12:47?short



---

archive/issue_comments_413968.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@jdemeyer](#comment:69):\n> Replying to [@kliem](#comment:64):\n> > A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).\n\n> \n> That's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.\n> \n\nProbably. The more important question is whether something can be calculated or not. If one then wants to generate e.g. the `face_lattice` from the `CombinatorialPolyhedron`, initalizing this is much slower than anything in this module.\n\n> But you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.\n\nSo what you are suggesting is the following(?): Leave it as it is and delete `-march=native`. This should then somehow be added to Sage's build process (as an option?), so that one can build a more effective version, if one wants to. The pre-build binaries might then take 4-times as long, but are stable.\n\nThis would then also be a portable way of using intrinsics, such that when in any other module it seems helpful, one can just copy-paste from this code.",
    "created_at": "2019-01-24T21:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413968",
    "user": "https://github.com/kliem"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@jdemeyer](#comment:69):
> Replying to [@kliem](#comment:64):
> > A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).

> 
> That's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.
> 

Probably. The more important question is whether something can be calculated or not. If one then wants to generate e.g. the `face_lattice` from the `CombinatorialPolyhedron`, initalizing this is much slower than anything in this module.

> But you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.

So what you are suggesting is the following(?): Leave it as it is and delete `-march=native`. This should then somehow be added to Sage's build process (as an option?), so that one can build a more effective version, if one wants to. The pre-build binaries might then take 4-times as long, but are stable.

This would then also be a portable way of using intrinsics, such that when in any other module it seems helpful, one can just copy-paste from this code.



---

archive/issue_comments_413969.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@kliem](#comment:70):\n> Replying to [@jdemeyer](#comment:68):\n> > A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?\n\n> \n> `#if INTPTR_MAX == INT64_MAX `\n\nThat solves your problem: in that case, the type `uint64_t_or_uint32_t` that you're looking for is `uintptr_t`.",
    "created_at": "2019-01-25T06:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413969",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@kliem](#comment:70):
> Replying to [@jdemeyer](#comment:68):
> > A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?

> 
> `#if INTPTR_MAX == INT64_MAX `

That solves your problem: in that case, the type `uint64_t_or_uint32_t` that you're looking for is `uintptr_t`.



---

archive/issue_comments_413970.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@jdemeyer](#comment:72):\n> Replying to [@kliem](#comment:70):\n> > Replying to [@jdemeyer](#comment:68):\n> > > A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?\n\n> > \n> > `#if INTPTR_MAX == INT64_MAX `\n\n> \n> That solves your problem: in that case, the type `uint64_t_or_uint32_t` that you're looking for is `uintptr_t`.\n\nWhen googling something as `uintptr_t`, it seems like nothing is guaranteed. Also it seems like `uint64_t` is always available. The only problem was with the `_mm_popcnt_u64`. Maybe I just do a typecast there and replace `uint64_t_or_uint32_t` by `uint64_t` again.",
    "created_at": "2019-01-25T09:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413970",
    "user": "https://github.com/kliem"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@jdemeyer](#comment:72):
> Replying to [@kliem](#comment:70):
> > Replying to [@jdemeyer](#comment:68):
> > > A more or less equivalent question: why do you *really* to know that the type is `uint64_t` on a 64-bit machine and `uint32_t` on a 32-bit machine?

> > 
> > `#if INTPTR_MAX == INT64_MAX `

> 
> That solves your problem: in that case, the type `uint64_t_or_uint32_t` that you're looking for is `uintptr_t`.

When googling something as `uintptr_t`, it seems like nothing is guaranteed. Also it seems like `uint64_t` is always available. The only problem was with the `_mm_popcnt_u64`. Maybe I just do a typecast there and replace `uint64_t_or_uint32_t` by `uint64_t` again.



---

archive/issue_comments_413971.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@jdemeyer](#comment:69):\n> Replying to [@kliem](#comment:64):\n> > A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).\n\n> \n> That's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.\n> \n> But you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.\n\nThe question wether `-march=native` can be included is now subject of the ticket #27122.",
    "created_at": "2019-01-25T11:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413971",
    "user": "https://github.com/kliem"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@jdemeyer](#comment:69):
> Replying to [@kliem](#comment:64):
> > A solution would be to use function multiversioning as available in GCC >= 6 (https://hannes.hauswedell.net/post/2017/12/09/fmv/).

> 
> That's overthinking it for a generic math package like Sage. Almost all casual Sage users are not going to care how fast this code really runs.
> 
> But you probably misunderstood me: I didn't mean that `-march=native` was a bad idea, just that it should be enabled more carefully. And also not for this one specific file only, that would be just strange.

The question wether `-march=native` can be included is now subject of the ticket #27122.



---

archive/issue_comments_413972.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3\"><code>61dae2c</code></a></td><td><code>Converted base.pyx to PEP 8</code></td></tr></table>\n",
    "created_at": "2019-01-25T22:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413972",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3"><code>61dae2c</code></a></td><td><code>Converted base.pyx to PEP 8</code></td></tr></table>




---

archive/issue_comments_413973.json:
```json
{
    "body": "Changed commit from **[`ae08e25`](https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9)** to **[`61dae2c`](https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3)**",
    "created_at": "2019-01-25T22:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413973",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ae08e25`](https://github.com/sagemath/sagetrac-mirror/commit/ae08e2588ba48d1b36d2b34ff87f0689f9418ef9)** to **[`61dae2c`](https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3)**



---

archive/issue_comments_413974.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,9 +15,11 @@\n \n The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.\n \n+The ticket will prepare, but not use, SIMD-instructions. Enabling them will be a subject of #27103.\n \n FOLLOW-UPS:\n \n - improve calculation of entries in the flag-vector, while we are at it.\n   This takes for every entry in the flag-vector less time then to construct the face-lattice.\n - Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)\n+- Enable SIMD-instructions.\n``````\n",
    "created_at": "2019-01-25T22:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413974",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,9 +15,11 @@
 
 The crucial speed up is obtained by creating bit-vectors for the faces, each bit corresponding to a vertex. Intersection of faces is then only bitwise-and and subset check is (A & ~B == 0). Both steps only take one CPU step per 64/128/256 bits/vertices (depending on the processor). Otherwise the algorithm is pretty similar to current algorithm to create the `hasse_diagram`, except that it avoids double counting (and hence can calculate the `f_vector`) without an explicit list of all faces.
 
+The ticket will prepare, but not use, SIMD-instructions. Enabling them will be a subject of #27103.
 
 FOLLOW-UPS:
 
 - improve calculation of entries in the flag-vector, while we are at it.
   This takes for every entry in the flag-vector less time then to construct the face-lattice.
 - Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)
+- Enable SIMD-instructions.
``````




---

archive/issue_comments_413975.json:
```json
{
    "body": "Changed keywords from **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge grapg** to **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge graph**",
    "created_at": "2019-01-25T22:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413975",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge grapg** to **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge graph**



---

archive/issue_comments_413976.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nI suppose it makes sense to disable all the intrinsics for this ticket (not done yet) and enable them later (#27103). This way this ticket does not depend on #27122.\n\nAlso, if there is anything not working with `CombinatorialPolyhedron` once `-march=native` gets enabled, this would produce an error message for ticket #27122, which I would like to prevent from happening.",
    "created_at": "2019-01-25T23:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413976",
    "user": "https://github.com/kliem"
}
```

<div id="comment:77" align="right">comment:77</div>

I suppose it makes sense to disable all the intrinsics for this ticket (not done yet) and enable them later (#27103). This way this ticket does not depend on #27122.

Also, if there is anything not working with `CombinatorialPolyhedron` once `-march=native` gets enabled, this would produce an error message for ticket #27122, which I would like to prevent from happening.



---

archive/issue_comments_413977.json:
```json
{
    "body": "Changed commit from **[`61dae2c`](https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3)** to **[`95ac8ad`](https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141)**",
    "created_at": "2019-01-28T09:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413977",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`61dae2c`](https://github.com/sagemath/sagetrac-mirror/commit/61dae2c3ff721a0d8a3619f7d43f8dd2fb8bacc3)** to **[`95ac8ad`](https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141)**



---

archive/issue_comments_413978.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141\"><code>95ac8ad</code></a></td><td><code>removed Header file hasse_diagram.cc</code></td></tr></table>\n",
    "created_at": "2019-01-28T09:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413978",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141"><code>95ac8ad</code></a></td><td><code>removed Header file hasse_diagram.cc</code></td></tr></table>




---

archive/issue_comments_413979.json:
```json
{
    "body": "Changed commit from **[`95ac8ad`](https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141)** to **[`759e024`](https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1)**",
    "created_at": "2019-01-28T09:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413979",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`95ac8ad`](https://github.com/sagemath/sagetrac-mirror/commit/95ac8adf2689c6dd1cebffc015038db35cddc141)** to **[`759e024`](https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1)**



---

archive/issue_comments_413980.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1\"><code>759e024</code></a></td><td><code>actual remove in git</code></td></tr></table>\n",
    "created_at": "2019-01-28T09:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1"><code>759e024</code></a></td><td><code>actual remove in git</code></td></tr></table>




---

archive/issue_comments_413981.json:
```json
{
    "body": "Changed commit from **[`759e024`](https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1)** to **[`6fd5f55`](https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f)**",
    "created_at": "2019-01-28T14:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413981",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`759e024`](https://github.com/sagemath/sagetrac-mirror/commit/759e024e429805d9e07431c207879d555449e1e1)** to **[`6fd5f55`](https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f)**



---

archive/issue_comments_413982.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0878d97a102a5e0a0383a739988309d9114d9450\"><code>0878d97</code></a></td><td><code>simplified get_next_level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f291e972b2476aa7bb7e7dcb3f0413fc15cfe13\"><code>8f291e9</code></a></td><td><code>There is now an independent face_iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f\"><code>6fd5f55</code></a></td><td><code>reduced other functions to face iterator</code></td></tr></table>\n",
    "created_at": "2019-01-28T14:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413982",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0878d97a102a5e0a0383a739988309d9114d9450"><code>0878d97</code></a></td><td><code>simplified get_next_level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f291e972b2476aa7bb7e7dcb3f0413fc15cfe13"><code>8f291e9</code></a></td><td><code>There is now an independent face_iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f"><code>6fd5f55</code></a></td><td><code>reduced other functions to face iterator</code></td></tr></table>




---

archive/issue_comments_413983.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nIt seems like everything boils down to a face iterator.\n\nAt least in C++ there doesn't seems to be a difference between the previous `f_vector` calculation and the calculation now being done by iterating over all faces and then adding at the correct dimension.\n\nI guess the correct 'subclass' of `CombinatorialPolyhedron` should then be an iterator and not a copy of itself in C++.\n\nI guess I could do it all in Cython using `PyMem_Malloc` etc. However, as this does not support any overalignment, the iterator would need more memory then needed. But this seems to be ok. About 30kB extra memory for the iterator over a 20-dimensional Polyhedron with 40 facets. However, when recording all faces of this, the overhead might be almost as big as the actual data size. Then again, why would you want a list of 400 million faces, if you have an iterator.",
    "created_at": "2019-01-28T15:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413983",
    "user": "https://github.com/kliem"
}
```

<div id="comment:81" align="right">comment:81</div>

It seems like everything boils down to a face iterator.

At least in C++ there doesn't seems to be a difference between the previous `f_vector` calculation and the calculation now being done by iterating over all faces and then adding at the correct dimension.

I guess the correct 'subclass' of `CombinatorialPolyhedron` should then be an iterator and not a copy of itself in C++.

I guess I could do it all in Cython using `PyMem_Malloc` etc. However, as this does not support any overalignment, the iterator would need more memory then needed. But this seems to be ok. About 30kB extra memory for the iterator over a 20-dimensional Polyhedron with 40 facets. However, when recording all faces of this, the overhead might be almost as big as the actual data size. Then again, why would you want a list of 400 million faces, if you have an iterator.



---

archive/issue_comments_413984.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d\"><code>34bec35</code></a></td><td><code>the index of the faces changed, so the doctest needs an update</code></td></tr></table>\n",
    "created_at": "2019-01-28T17:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d"><code>34bec35</code></a></td><td><code>the index of the faces changed, so the doctest needs an update</code></td></tr></table>




---

archive/issue_comments_413985.json:
```json
{
    "body": "Changed commit from **[`6fd5f55`](https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f)** to **[`34bec35`](https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d)**",
    "created_at": "2019-01-28T17:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6fd5f55`](https://github.com/sagemath/sagetrac-mirror/commit/6fd5f55050fc2383848a0cc1d1591ddcda0bcd3f)** to **[`34bec35`](https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d)**



---

archive/issue_comments_413986.json:
```json
{
    "body": "Changed commit from **[`34bec35`](https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d)** to **[`cf249ff`](https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5)**",
    "created_at": "2019-02-01T14:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413986",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`34bec35`](https://github.com/sagemath/sagetrac-mirror/commit/34bec35a724be4a00c044d44a89ccf66dadb071d)** to **[`cf249ff`](https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5)**



---

archive/issue_comments_413987.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c04f83c3b6baeecae5d41d540a51fba37c1d5ca2\"><code>c04f83c</code></a></td><td><code>prepared a face iterator that works mostly in cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40e4b5f6bd3e035d1616deaa82c2b9711f4b4034\"><code>40e4b5f</code></a></td><td><code>added the cc-file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5\"><code>cf249ff</code></a></td><td><code>dimension and f_vector work with the new iterator now</code></td></tr></table>\n",
    "created_at": "2019-02-01T14:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413987",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c04f83c3b6baeecae5d41d540a51fba37c1d5ca2"><code>c04f83c</code></a></td><td><code>prepared a face iterator that works mostly in cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40e4b5f6bd3e035d1616deaa82c2b9711f4b4034"><code>40e4b5f</code></a></td><td><code>added the cc-file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5"><code>cf249ff</code></a></td><td><code>dimension and f_vector work with the new iterator now</code></td></tr></table>




---

archive/issue_comments_413988.json:
```json
{
    "body": "<div id=\"comment:84\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a\"><code>6751885</code></a></td><td><code>the user can now correctly interupt</code></td></tr></table>\n",
    "created_at": "2019-02-01T14:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:84"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a"><code>6751885</code></a></td><td><code>the user can now correctly interupt</code></td></tr></table>




---

archive/issue_comments_413989.json:
```json
{
    "body": "Changed commit from **[`cf249ff`](https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5)** to **[`6751885`](https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a)**",
    "created_at": "2019-02-01T14:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cf249ff`](https://github.com/sagemath/sagetrac-mirror/commit/cf249ff788fb9972e59f51f8ff2753fa47b5edf5)** to **[`6751885`](https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a)**



---

archive/issue_comments_413990.json:
```json
{
    "body": "<div id=\"comment:85\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c\"><code>abe18eb</code></a></td><td><code>some work towards replacing ridges</code></td></tr></table>\n",
    "created_at": "2019-02-04T16:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413990",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:85"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c"><code>abe18eb</code></a></td><td><code>some work towards replacing ridges</code></td></tr></table>




---

archive/issue_comments_413991.json:
```json
{
    "body": "Changed commit from **[`6751885`](https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a)** to **[`abe18eb`](https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c)**",
    "created_at": "2019-02-04T16:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413991",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6751885`](https://github.com/sagemath/sagetrac-mirror/commit/6751885eba7ae1713085bc8e562345a54c1c616a)** to **[`abe18eb`](https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c)**



---

archive/issue_comments_413992.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91\"><code>b149099</code></a></td><td><code>calculation of the f_vector is now done mostly in main class `CombinatorialPolyhedron`</code></td></tr></table>\n",
    "created_at": "2019-02-04T20:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413992",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91"><code>b149099</code></a></td><td><code>calculation of the f_vector is now done mostly in main class `CombinatorialPolyhedron`</code></td></tr></table>




---

archive/issue_comments_413993.json:
```json
{
    "body": "Changed commit from **[`abe18eb`](https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c)** to **[`b149099`](https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91)**",
    "created_at": "2019-02-04T20:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413993",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`abe18eb`](https://github.com/sagemath/sagetrac-mirror/commit/abe18eb43a601863cbff7ac8587b2915c780069c)** to **[`b149099`](https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91)**



---

archive/issue_comments_413994.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b76897cf14dd3355f6d3247240e1c0f059852b4\"><code>0b76897</code></a></td><td><code>edges updated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef8492732791629ccaab8b4cadac5a8cb5450c42\"><code>ef84927</code></a></td><td><code>updated calculating the ridges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1cac5c507d568daf7be2ac13ac1f60993a1350d\"><code>c1cac5c</code></a></td><td><code>Tests added, that edges() and ridges() can indeed be interrupted</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b80d3f09b3ad205c17811c263d70ce9d92117fd\"><code>0b80d3f</code></a></td><td><code>added calculation of f_vector while doing the edges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b46b81ef420ac0b04be4ef3d7b32853477bd9f90\"><code>b46b81e</code></a></td><td><code>improved speed of getting vertex repr by only considering non-zero entries</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717\"><code>6ce801c</code></a></td><td><code>upgraded the face iterator</code></td></tr></table>\n",
    "created_at": "2019-02-05T16:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413994",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b76897cf14dd3355f6d3247240e1c0f059852b4"><code>0b76897</code></a></td><td><code>edges updated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef8492732791629ccaab8b4cadac5a8cb5450c42"><code>ef84927</code></a></td><td><code>updated calculating the ridges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1cac5c507d568daf7be2ac13ac1f60993a1350d"><code>c1cac5c</code></a></td><td><code>Tests added, that edges() and ridges() can indeed be interrupted</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b80d3f09b3ad205c17811c263d70ce9d92117fd"><code>0b80d3f</code></a></td><td><code>added calculation of f_vector while doing the edges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b46b81ef420ac0b04be4ef3d7b32853477bd9f90"><code>b46b81e</code></a></td><td><code>improved speed of getting vertex repr by only considering non-zero entries</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717"><code>6ce801c</code></a></td><td><code>upgraded the face iterator</code></td></tr></table>




---

archive/issue_comments_413995.json:
```json
{
    "body": "Changed commit from **[`b149099`](https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91)** to **[`6ce801c`](https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717)**",
    "created_at": "2019-02-05T16:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413995",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b149099`](https://github.com/sagemath/sagetrac-mirror/commit/b14909932d9529794a223b198febca9f0fbebf91)** to **[`6ce801c`](https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717)**



---

archive/issue_comments_413996.json:
```json
{
    "body": "Changed commit from **[`6ce801c`](https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717)** to **[`f3b9578`](https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33)**",
    "created_at": "2019-02-06T16:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413996",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ce801c`](https://github.com/sagemath/sagetrac-mirror/commit/6ce801cb4bfb7f0738c32507158612eeed6f3717)** to **[`f3b9578`](https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33)**



---

archive/issue_comments_413997.json:
```json
{
    "body": "<div id=\"comment:88\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc96f9fa86d9dccfc92261ad797bcf2d26ad0a90\"><code>cc96f9f</code></a></td><td><code>Dimension can be interrupted correctly, this ensure that getnextlevel() can be computed in reasonable time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33\"><code>f3b9578</code></a></td><td><code>Created a `ListOfAllFaces` in Cython, preparing final steps to get rid of hasse_diagramm.cc</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413997",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:88"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc96f9fa86d9dccfc92261ad797bcf2d26ad0a90"><code>cc96f9f</code></a></td><td><code>Dimension can be interrupted correctly, this ensure that getnextlevel() can be computed in reasonable time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33"><code>f3b9578</code></a></td><td><code>Created a `ListOfAllFaces` in Cython, preparing final steps to get rid of hasse_diagramm.cc</code></td></tr></table>




---

archive/issue_comments_413998.json:
```json
{
    "body": "Changed commit from **[`f3b9578`](https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33)** to **[`6ac0773`](https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a)**",
    "created_at": "2019-02-07T16:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413998",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f3b9578`](https://github.com/sagemath/sagetrac-mirror/commit/f3b95783ef8610eaf27d6425eb7e4fe4139ddb33)** to **[`6ac0773`](https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a)**



---

archive/issue_comments_413999.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/880929482aaf711ee639d88b25e73c9b98c3e983\"><code>8809294</code></a></td><td><code>A list of allfaces works correctly now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e98ab6a826bbf69898910fe837c1649df75dd1b\"><code>0e98ab6</code></a></td><td><code>renaming classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a\"><code>6ac0773</code></a></td><td><code>can now get incidences of faces</code></td></tr></table>\n",
    "created_at": "2019-02-07T16:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-413999",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/880929482aaf711ee639d88b25e73c9b98c3e983"><code>8809294</code></a></td><td><code>A list of allfaces works correctly now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e98ab6a826bbf69898910fe837c1649df75dd1b"><code>0e98ab6</code></a></td><td><code>renaming classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a"><code>6ac0773</code></a></td><td><code>can now get incidences of faces</code></td></tr></table>




---

archive/issue_comments_414000.json:
```json
{
    "body": "Changed commit from **[`6ac0773`](https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a)** to **[`c3f4ef1`](https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9)**",
    "created_at": "2019-02-08T14:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414000",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ac0773`](https://github.com/sagemath/sagetrac-mirror/commit/6ac0773f5486a5d1cb68635edb0c893ca7fb980a)** to **[`c3f4ef1`](https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9)**



---

archive/issue_comments_414001.json:
```json
{
    "body": "<div id=\"comment:90\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9\"><code>c3f4ef1</code></a></td><td><code>the FaceLattice works now, also removed CombinatorialPolyhedron.flag() for later ticket</code></td></tr></table>\n",
    "created_at": "2019-02-08T14:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414001",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:90"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9"><code>c3f4ef1</code></a></td><td><code>the FaceLattice works now, also removed CombinatorialPolyhedron.flag() for later ticket</code></td></tr></table>




---

archive/issue_comments_414002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,6 @@\n \n FOLLOW-UPS:\n \n-- improve calculation of entries in the flag-vector, while we are at it.\n-  This takes for every entry in the flag-vector less time then to construct the face-lattice.\n+- implement calculation of entries in the flag-vector, this might be better, than the calculation in the face_lattice\n - Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)\n - Enable SIMD-instructions.\n``````\n",
    "created_at": "2019-02-08T14:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414002",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,6 @@
 
 FOLLOW-UPS:
 
-- improve calculation of entries in the flag-vector, while we are at it.
-  This takes for every entry in the flag-vector less time then to construct the face-lattice.
+- implement calculation of entries in the flag-vector, this might be better, than the calculation in the face_lattice
 - Improve the calculation of properties of polytopes that depend on the face-lattice (f-vector,edges, ridges, k-faces in general, edge-graph, etc.)
 - Enable SIMD-instructions.
``````




---

archive/issue_comments_414003.json:
```json
{
    "body": "Changed keywords from **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge graph** to **polytopes, FindPoly, f_vector, face lattice, edge graph, ridge graph**",
    "created_at": "2019-02-08T14:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414003",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polytopes, FindPoly, f_vector, face lattice, flag vector, edge graph, ridge graph** to **polytopes, FindPoly, f_vector, face lattice, edge graph, ridge graph**



---

archive/issue_comments_414004.json:
```json
{
    "body": "<div id=\"comment:91\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9\"><code>c3f4ef1</code></a></td><td><code>the FaceLattice works now, also removed CombinatorialPolyhedron.flag() for later ticket</code></td></tr></table>\n",
    "created_at": "2019-02-08T14:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414004",
    "user": "https://github.com/kliem"
}
```

<div id="comment:91"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9"><code>c3f4ef1</code></a></td><td><code>the FaceLattice works now, also removed CombinatorialPolyhedron.flag() for later ticket</code></td></tr></table>




---

archive/issue_comments_414005.json:
```json
{
    "body": "Changed commit from **[`c3f4ef1`](https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9)** to **[`2ce8561`](https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea)**",
    "created_at": "2019-02-08T23:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414005",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3f4ef1`](https://github.com/sagemath/sagetrac-mirror/commit/c3f4ef19796738befea316a0bf9162a74bb422d9)** to **[`2ce8561`](https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea)**



---

archive/issue_comments_414006.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dea4f5b1441682f8e801cecd3f3daaa38b7a9f7a\"><code>dea4f5b</code></a></td><td><code>I never used the Bitrepresentation of the vertices, so I got rid of it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38324806985c4cb3f5479a534f999d3326313f13\"><code>3832480</code></a></td><td><code>replaced versions of faces(-1) and faces(dimension), also the Bitrepresentation of vertices stays in for returning the vertices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/422e2eac5083c81f1578843ed5fb77d9c4c3d25c\"><code>422e2ea</code></a></td><td><code>removed the cpp-CombinatorialPolyhedron from CombinatorialPolyhedron</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e61dbfda34570254fd3236c491b37f887b809eec\"><code>e61dbfd</code></a></td><td><code>removed hasse_diagram.cc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea\"><code>2ce8561</code></a></td><td><code>simplified helper.cc</code></td></tr></table>\n",
    "created_at": "2019-02-08T23:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dea4f5b1441682f8e801cecd3f3daaa38b7a9f7a"><code>dea4f5b</code></a></td><td><code>I never used the Bitrepresentation of the vertices, so I got rid of it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38324806985c4cb3f5479a534f999d3326313f13"><code>3832480</code></a></td><td><code>replaced versions of faces(-1) and faces(dimension), also the Bitrepresentation of vertices stays in for returning the vertices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/422e2eac5083c81f1578843ed5fb77d9c4c3d25c"><code>422e2ea</code></a></td><td><code>removed the cpp-CombinatorialPolyhedron from CombinatorialPolyhedron</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e61dbfda34570254fd3236c491b37f887b809eec"><code>e61dbfd</code></a></td><td><code>removed hasse_diagram.cc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea"><code>2ce8561</code></a></td><td><code>simplified helper.cc</code></td></tr></table>




---

archive/issue_comments_414007.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nThis ticket is now pretty much where I want it to be. I still need to go through everything and make comments and clean up.\n\nEven though everything got longer now, I think the structure is a lot easier. There is two main tools now:\n\nA `FaceIterator`. This is not a proper iterator, as I want it to be flexible with the output. But basically it iterates over all faces and for each face one can get output like its dimension or facet-representation. The `FaceIterator` is used to calculate the `f_vector`, `edges`, `ridges` etc. Also it calculates `ListOfAllFaces`.\n\n`ListOfAllFaces` is a list of all faces ordered by dimension. Once all faces are initialized, one can sort the level-sets, as to calculated quickly the actual `face-lattice`.\n\nThere are some more classes like `ListOfFaces`. This can be used to e.g. store all facets in Bit-Representation. The nice thing about it is, that it automatically takes care of the memory allocated. So when creating a `ListOfFaces`, one can use `void **` without having to worry about the memory allocation.\n\nThe methods actually defined in C++ now, should be easy to understand. There are mostly there, because C I can do something as `#define chunktype uint64_t` and C will not complain about an unknown data-type `chunktype`.",
    "created_at": "2019-02-08T23:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414007",
    "user": "https://github.com/kliem"
}
```

<div id="comment:93" align="right">comment:93</div>

This ticket is now pretty much where I want it to be. I still need to go through everything and make comments and clean up.

Even though everything got longer now, I think the structure is a lot easier. There is two main tools now:

A `FaceIterator`. This is not a proper iterator, as I want it to be flexible with the output. But basically it iterates over all faces and for each face one can get output like its dimension or facet-representation. The `FaceIterator` is used to calculate the `f_vector`, `edges`, `ridges` etc. Also it calculates `ListOfAllFaces`.

`ListOfAllFaces` is a list of all faces ordered by dimension. Once all faces are initialized, one can sort the level-sets, as to calculated quickly the actual `face-lattice`.

There are some more classes like `ListOfFaces`. This can be used to e.g. store all facets in Bit-Representation. The nice thing about it is, that it automatically takes care of the memory allocated. So when creating a `ListOfFaces`, one can use `void **` without having to worry about the memory allocation.

The methods actually defined in C++ now, should be easy to understand. There are mostly there, because C I can do something as `#define chunktype uint64_t` and C will not complain about an unknown data-type `chunktype`.



---

archive/issue_comments_414008.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nIt might be worth adding some timings against the current state-of-the-art implementation in `polymake` to show **how fast** this implementation really is. One striking example is\n\n```\n    sage: P = polytopes.permutahedron(7)\n    sage: P1 = CombinatorialPolyhedron(P)\n    sage: facets_lst = map(list,P1.facets(names=False))\n    sage: P2 = polymake(\"my $P = new Polytope(VERTICES_IN_FACETS=>%s);\"%facets_lst)\n    sage: %time P1.f_vector()\n    CPU times: user 125 ms, sys: 0 ns, total: 125 ms\n    Wall time: 125 ms\n    (1, 5040, 15120, 16800, 8400, 1806, 126, 1)\n    sage: %time P2.F_VECTOR\n    CPU times: user 39 ms, sys: 4.71 ms, total: 43.7 ms\n    Wall time: 13.4 s\n    5040 15120 16800 8400 1806 126\n```\nThis is, of course, just a workaround to access polymake directly from within sage (it requires the experimental package `polymake` to be installed). The same computation in a freshly installed `polymake-3.2`  took roughly the same time.\n\nI am not sure how to include this into the doctests because the difference only becomes strikingly visible when `polymake` takes at least seconds.\n\n@tscrim: I would appreciate if you could have a look at this ticket and the implementation in C / Cython :-)",
    "created_at": "2019-02-10T13:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414008",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:94" align="right">comment:94</div>

It might be worth adding some timings against the current state-of-the-art implementation in `polymake` to show **how fast** this implementation really is. One striking example is

```
    sage: P = polytopes.permutahedron(7)
    sage: P1 = CombinatorialPolyhedron(P)
    sage: facets_lst = map(list,P1.facets(names=False))
    sage: P2 = polymake("my $P = new Polytope(VERTICES_IN_FACETS=>%s);"%facets_lst)
    sage: %time P1.f_vector()
    CPU times: user 125 ms, sys: 0 ns, total: 125 ms
    Wall time: 125 ms
    (1, 5040, 15120, 16800, 8400, 1806, 126, 1)
    sage: %time P2.F_VECTOR
    CPU times: user 39 ms, sys: 4.71 ms, total: 43.7 ms
    Wall time: 13.4 s
    5040 15120 16800 8400 1806 126
```
This is, of course, just a workaround to access polymake directly from within sage (it requires the experimental package `polymake` to be installed). The same computation in a freshly installed `polymake-3.2`  took roughly the same time.

I am not sure how to include this into the doctests because the difference only becomes strikingly visible when `polymake` takes at least seconds.

@tscrim: I would appreciate if you could have a look at this ticket and the implementation in C / Cython :-)



---

archive/issue_comments_414009.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nA very general question: How much of this are you actually using stuff that is within Sage (and Cython)? In particular, I am wondering if there is a benefit to separating this out into a little standalone package that gets included in Sage with some linking. To me, you could leave the features that use parts of Sage, e.g., `ridge_graph`, in the Sage implementation part, but have a good part of it independent.\n\ntypo? `partitions_c.cc` -> `hasse_diagram.cc`?\n\n```\n# The actual algorithm is implemented in the C++ file partitions_c.cc\n```\n\ntypo: `(Knwon` (also that parenthetical should not be its own sentence but combined with the previous one).\n\nName conflict:\n\n```\nfrom cpython cimport array\nimport array\n```\n\nFor `_data` and `_memory`, could you be more specific than a `void` pointer?\n\nIn `ListOfFaces`, `self.data()` -> `self._data`, especially since it is internal (and `data()` is not inlined, but it should be, as with any `cdef` simple accessors).\n\nDo you really need the class `ListOfListOfFaces`? That seems like a bit of overkill as it only is used in 1 place and not for anything useful.\n\nPython convention for error messages should be start with a lowercase letter and no full-stop/period at the end.\n\nYou should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.\n\nInstead of blank catching of exceptions to return `-2`, you should use the builtin Cython syntax to raise errors: e.g., in `integer.pyx`:\n\n```\ncpdef int _cmp_(left, right) except -2:\n```\n\nI do not think how you are handling the memory is the best way. For example, let us consider `_calculate_f_vector`. Instead of catching an exception raised by that function (which you would make it return an `int` and have `except -1:`) in `f_vector` and letting that code free the memory before propagating the error up, you have a big try/except inside the `_calculate_f_vector`, which then returns okay, and have `f_vector` create a new error.\n\nAny `cdef` that is a `void` cannot raise an error; see the parenthetical above.\n\nYou should make a `.pxd` file with the relevant `cdef` class and methods set there. It works like a header file and allows people to `cimport` objects. So that way people can make subclasses in different files.\n\nI might have more comments, but these are what I got from a quick lookover.",
    "created_at": "2019-02-10T18:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414009",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:95" align="right">comment:95</div>

A very general question: How much of this are you actually using stuff that is within Sage (and Cython)? In particular, I am wondering if there is a benefit to separating this out into a little standalone package that gets included in Sage with some linking. To me, you could leave the features that use parts of Sage, e.g., `ridge_graph`, in the Sage implementation part, but have a good part of it independent.

typo? `partitions_c.cc` -> `hasse_diagram.cc`?

```
# The actual algorithm is implemented in the C++ file partitions_c.cc
```

typo: `(Knwon` (also that parenthetical should not be its own sentence but combined with the previous one).

Name conflict:

```
from cpython cimport array
import array
```

For `_data` and `_memory`, could you be more specific than a `void` pointer?

In `ListOfFaces`, `self.data()` -> `self._data`, especially since it is internal (and `data()` is not inlined, but it should be, as with any `cdef` simple accessors).

Do you really need the class `ListOfListOfFaces`? That seems like a bit of overkill as it only is used in 1 place and not for anything useful.

Python convention for error messages should be start with a lowercase letter and no full-stop/period at the end.

You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.

Instead of blank catching of exceptions to return `-2`, you should use the builtin Cython syntax to raise errors: e.g., in `integer.pyx`:

```
cpdef int _cmp_(left, right) except -2:
```

I do not think how you are handling the memory is the best way. For example, let us consider `_calculate_f_vector`. Instead of catching an exception raised by that function (which you would make it return an `int` and have `except -1:`) in `f_vector` and letting that code free the memory before propagating the error up, you have a big try/except inside the `_calculate_f_vector`, which then returns okay, and have `f_vector` create a new error.

Any `cdef` that is a `void` cannot raise an error; see the parenthetical above.

You should make a `.pxd` file with the relevant `cdef` class and methods set there. It works like a header file and allows people to `cimport` objects. So that way people can make subclasses in different files.

I might have more comments, but these are what I got from a quick lookover.



---

archive/issue_comments_414010.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3919115a402a0ab0c15de5722c764dffaafb39e\"><code>b391911</code></a></td><td><code>removed some outdated remarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc\"><code>7e7147d</code></a></td><td><code>removed hasse_diagram.cc, which is no longer needed</code></td></tr></table>\n",
    "created_at": "2019-02-10T19:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414010",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3919115a402a0ab0c15de5722c764dffaafb39e"><code>b391911</code></a></td><td><code>removed some outdated remarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc"><code>7e7147d</code></a></td><td><code>removed hasse_diagram.cc, which is no longer needed</code></td></tr></table>




---

archive/issue_comments_414011.json:
```json
{
    "body": "Changed commit from **[`2ce8561`](https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea)** to **[`7e7147d`](https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc)**",
    "created_at": "2019-02-10T19:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414011",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2ce8561`](https://github.com/sagemath/sagetrac-mirror/commit/2ce8561b52996dcffc3e8b5aa77303acafb889ea)** to **[`7e7147d`](https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc)**



---

archive/issue_comments_414012.json:
```json
{
    "body": "<div id=\"comment:97\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e\"><code>1e0f36f</code></a></td><td><code>fixed the order of facets in __reduce__(), fixed a bug in face_iter for some polyhedra</code></td></tr></table>\n",
    "created_at": "2019-02-10T19:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414012",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:97"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e"><code>1e0f36f</code></a></td><td><code>fixed the order of facets in __reduce__(), fixed a bug in face_iter for some polyhedra</code></td></tr></table>




---

archive/issue_comments_414013.json:
```json
{
    "body": "Changed commit from **[`7e7147d`](https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc)** to **[`1e0f36f`](https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e)**",
    "created_at": "2019-02-10T19:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e7147d`](https://github.com/sagemath/sagetrac-mirror/commit/7e7147d6d1543459011517017820083e902e08cc)** to **[`1e0f36f`](https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e)**



---

archive/issue_comments_414014.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nI agree with Travis that error checking could be much improved: use [error return values](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html#error-return-values).\n\nAlso, instead of using `sig_malloc` and then checking for `NULL`, use `check_malloc` which automatically does that check. Even better, replace `sig_malloc(a * sizeof(T))` by `check_allocarray(a, sizeof(T))`.",
    "created_at": "2019-02-10T20:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414014",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:98" align="right">comment:98</div>

I agree with Travis that error checking could be much improved: use [error return values](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html#error-return-values).

Also, instead of using `sig_malloc` and then checking for `NULL`, use `check_malloc` which automatically does that check. Even better, replace `sig_malloc(a * sizeof(T))` by `check_allocarray(a, sizeof(T))`.



---

archive/issue_comments_414015.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@tscrim](#comment:95):\n> Name conflict:\n> \n> ```\n> from cpython cimport array\n> import array\n> ```\n\nAs far as I can tell, this isn't even used anywhere.",
    "created_at": "2019-02-10T20:30:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414015",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@tscrim](#comment:95):
> Name conflict:
> 
> ```
> from cpython cimport array
> import array
> ```

As far as I can tell, this isn't even used anywhere.



---

archive/issue_comments_414016.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@jdemeyer](#comment:99):\n> Replying to [@tscrim](#comment:95):\n> > Name conflict:\n> > \n> > ```\n> > from cpython cimport array\n> > import array\n> > ```\n\n> \n> As far as I can tell, this isn't even used anywhere.\n\nYes, this can go out now.\nI copied this from the documentation: [https://cython.readthedocs.io/en/latest/src/tutorial/array.html](https://cython.readthedocs.io/en/latest/src/tutorial/array.html).",
    "created_at": "2019-02-10T20:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414016",
    "user": "https://github.com/kliem"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@jdemeyer](#comment:99):
> Replying to [@tscrim](#comment:95):
> > Name conflict:
> > 
> > ```
> > from cpython cimport array
> > import array
> > ```

> 
> As far as I can tell, this isn't even used anywhere.

Yes, this can go out now.
I copied this from the documentation: [https://cython.readthedocs.io/en/latest/src/tutorial/array.html](https://cython.readthedocs.io/en/latest/src/tutorial/array.html).



---

archive/issue_comments_414017.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tscrim](#comment:95):\n> For `_data` and `_memory`, could you be more specific than a `void` pointer?\n\nI can do so. This was due to a wrong assumption. It turns out (not suprisingly I guess) that\n\n```\n_mm256_testc_si256((two),(one));\n```\ntakes just as long as\n\n```\none = _mm256_load_si256((const __m256i*)&(A));\ntwo = _mm256_load_si256((const __m256i*)&(B));\n_mm256_testc_si256((two),(one));\n```\nSo I can use `uint64_t` until I actually need registers and than load them directly. This also explains, why people out there don't save stuff in formats like `__m256i *`.",
    "created_at": "2019-02-10T20:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414017",
    "user": "https://github.com/kliem"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tscrim](#comment:95):
> For `_data` and `_memory`, could you be more specific than a `void` pointer?

I can do so. This was due to a wrong assumption. It turns out (not suprisingly I guess) that

```
_mm256_testc_si256((two),(one));
```
takes just as long as

```
one = _mm256_load_si256((const __m256i*)&(A));
two = _mm256_load_si256((const __m256i*)&(B));
_mm256_testc_si256((two),(one));
```
So I can use `uint64_t` until I actually need registers and than load them directly. This also explains, why people out there don't save stuff in formats like `__m256i *`.



---

archive/issue_comments_414018.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nAlso, this `ListOfListOfPointers` and `ListOfFaces` stuff seems to be reinventing the wheel. For example, since you're using C++ anyway, you could use `std::vector<>` or whatever. There is also `sage.ext.memory_allocator.MemoryAllocator` which seems to have some overlap with what you need.",
    "created_at": "2019-02-10T20:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414018",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:102" align="right">comment:102</div>

Also, this `ListOfListOfPointers` and `ListOfFaces` stuff seems to be reinventing the wheel. For example, since you're using C++ anyway, you could use `std::vector<>` or whatever. There is also `sage.ext.memory_allocator.MemoryAllocator` which seems to have some overlap with what you need.



---

archive/issue_comments_414019.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nI consider these small accessor methods unpythonic:\n\n```\n    cdef size_t nr_lists(self):\n        return self._nr_lists\n```\nWhat's wrong with just calling the attribute `nr_lists` and accessing that directly?",
    "created_at": "2019-02-10T20:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414019",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:103" align="right">comment:103</div>

I consider these small accessor methods unpythonic:

```
    cdef size_t nr_lists(self):
        return self._nr_lists
```
What's wrong with just calling the attribute `nr_lists` and accessing that directly?



---

archive/issue_comments_414020.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@jdemeyer](#comment:103):\n> I consider these small accessor methods unpythonic:\n> \n> ```\n>     cdef size_t nr_lists(self):\n>         return self._nr_lists\n> ```\n> What's wrong with just calling the attribute `nr_lists` and accessing that directly?\n> \n\nThis is what I wanted to do from the start. But it didnt' work. No idea why. I probably had some mistake, which I corrected when setting up those small accessors. Now I removed all small accessors and everything works great.",
    "created_at": "2019-02-10T21:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414020",
    "user": "https://github.com/kliem"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@jdemeyer](#comment:103):
> I consider these small accessor methods unpythonic:
> 
> ```
>     cdef size_t nr_lists(self):
>         return self._nr_lists
> ```
> What's wrong with just calling the attribute `nr_lists` and accessing that directly?
> 

This is what I wanted to do from the start. But it didnt' work. No idea why. I probably had some mistake, which I corrected when setting up those small accessors. Now I removed all small accessors and everything works great.



---

archive/issue_comments_414021.json:
```json
{
    "body": "<div id=\"comment:105\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9\"><code>0edfd3f</code></a></td><td><code>removed small accessors</code></td></tr></table>\n",
    "created_at": "2019-02-10T21:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:105"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9"><code>0edfd3f</code></a></td><td><code>removed small accessors</code></td></tr></table>




---

archive/issue_comments_414022.json:
```json
{
    "body": "Changed commit from **[`1e0f36f`](https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e)** to **[`0edfd3f`](https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9)**",
    "created_at": "2019-02-10T21:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e0f36f`](https://github.com/sagemath/sagetrac-mirror/commit/1e0f36f94fced98928c556b872a58888584e737e)** to **[`0edfd3f`](https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9)**



---

archive/issue_comments_414023.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplace\n\n```\nfrom libc cimport stdint\nctypedef stdint.uint64_t uint64_t\n```\nby\n\n```\nfrom libc.stdint cimport uint64_t\n```",
    "created_at": "2019-02-10T21:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414023",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:106" align="right">comment:106</div>

Replace

```
from libc cimport stdint
ctypedef stdint.uint64_t uint64_t
```
by

```
from libc.stdint cimport uint64_t
```



---

archive/issue_comments_414024.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@jdemeyer](#comment:102):\n> Also, this `ListOfListOfPointers` and `ListOfFaces` stuff seems to be reinventing the wheel. For example, since you're using C++ anyway, you could use `std::vector<>` or whatever. There is also `sage.ext.memory_allocator.MemoryAllocator` which seems to have some overlap with what you need.\n\nI need 32-byte aligned memory for `ListOfFaces`. I actually don't need it exactly for this ticket, as I want to disable intrinsics for now, but eventually I want it.\n\n`sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution. This doesn't mean anything of course.\n\nI had the impression that its somehow nice to allocate the memory in cython instead of some extern C file.",
    "created_at": "2019-02-10T21:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414024",
    "user": "https://github.com/kliem"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@jdemeyer](#comment:102):
> Also, this `ListOfListOfPointers` and `ListOfFaces` stuff seems to be reinventing the wheel. For example, since you're using C++ anyway, you could use `std::vector<>` or whatever. There is also `sage.ext.memory_allocator.MemoryAllocator` which seems to have some overlap with what you need.

I need 32-byte aligned memory for `ListOfFaces`. I actually don't need it exactly for this ticket, as I want to disable intrinsics for now, but eventually I want it.

`sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution. This doesn't mean anything of course.

I had the impression that its somehow nice to allocate the memory in cython instead of some extern C file.



---

archive/issue_comments_414025.json:
```json
{
    "body": "<div id=\"comment:108\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71d94679c8b7b790cf32ff259a1705a87efbd2a2\"><code>71d9467</code></a></td><td><code>replaced all PyMem calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3\"><code>f15883d</code></a></td><td><code>updated import of uint64_t</code></td></tr></table>\n",
    "created_at": "2019-02-10T21:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:108"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71d94679c8b7b790cf32ff259a1705a87efbd2a2"><code>71d9467</code></a></td><td><code>replaced all PyMem calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3"><code>f15883d</code></a></td><td><code>updated import of uint64_t</code></td></tr></table>




---

archive/issue_comments_414026.json:
```json
{
    "body": "Changed commit from **[`0edfd3f`](https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9)** to **[`f15883d`](https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3)**",
    "created_at": "2019-02-10T21:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0edfd3f`](https://github.com/sagemath/sagetrac-mirror/commit/0edfd3f2a3b8c3b76f997ed20f46dd9048a5ade9)** to **[`f15883d`](https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3)**



---

archive/issue_comments_414027.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@kliem](#comment:107):\n> I had the impression that its somehow nice to allocate the memory in cython instead of some extern C file.\n\nYes indeed. But you can use the standard C++ library in Cython: https://cython.readthedocs.io/en/latest/src/userguide/wrapping_CPlusPlus.html#standard-library\n\nI'm not saying that this is a good or bad solution. Just that it's possible.",
    "created_at": "2019-02-10T21:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414027",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@kliem](#comment:107):
> I had the impression that its somehow nice to allocate the memory in cython instead of some extern C file.

Yes indeed. But you can use the standard C++ library in Cython: https://cython.readthedocs.io/en/latest/src/userguide/wrapping_CPlusPlus.html#standard-library

I'm not saying that this is a good or bad solution. Just that it's possible.



---

archive/issue_comments_414028.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nReplying to [@kliem](#comment:107):\n> `sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution.\n\nIf `MemoryAllocator` works great except for the alignment, you could add alignment support to `MemoryAllocator`.",
    "created_at": "2019-02-10T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414028",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:110" align="right">comment:110</div>

Replying to [@kliem](#comment:107):
> `sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution.

If `MemoryAllocator` works great except for the alignment, you could add alignment support to `MemoryAllocator`.



---

archive/issue_comments_414029.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nSpeaking of alignment: why are you not using https://en.cppreference.com/w/c/memory/aligned_alloc or http://man7.org/linux/man-pages/man3/posix_memalign.3.html",
    "created_at": "2019-02-10T22:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414029",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:111" align="right">comment:111</div>

Speaking of alignment: why are you not using https://en.cppreference.com/w/c/memory/aligned_alloc or http://man7.org/linux/man-pages/man3/posix_memalign.3.html



---

archive/issue_comments_414030.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nSince you're using divisions, I strongly recommend to add\n\n```\nfrom __future__ import division\n```\nto make sure that your code works fine when using Python 3 divisions.",
    "created_at": "2019-02-10T22:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414030",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:112" align="right">comment:112</div>

Since you're using divisions, I strongly recommend to add

```
from __future__ import division
```
to make sure that your code works fine when using Python 3 divisions.



---

archive/issue_comments_414031.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@jdemeyer](#comment:110):\n> Replying to [@kliem](#comment:107):\n> > `sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution.\n\n> \n> If `MemoryAllocator` works great except for the alignment, you could add alignment support to `MemoryAllocator`.\n\nI should do this. I already love `MemoryAllocator`. It's so easy. Then again, I might only appreciate it, because I though about what needs to be done.",
    "created_at": "2019-02-10T22:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414031",
    "user": "https://github.com/kliem"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@jdemeyer](#comment:110):
> Replying to [@kliem](#comment:107):
> > `sage.ext.memory_allocator.MemoryAllocator` seems to be great for `ListOfPointers`. I couldn't get 32-byte aligned to work with any prebuild solution.

> 
> If `MemoryAllocator` works great except for the alignment, you could add alignment support to `MemoryAllocator`.

I should do this. I already love `MemoryAllocator`. It's so easy. Then again, I might only appreciate it, because I though about what needs to be done.



---

archive/issue_comments_414032.json:
```json
{
    "body": "Changed commit from **[`f15883d`](https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3)** to **[`f534fae`](https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5)**",
    "created_at": "2019-02-10T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414032",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f15883d`](https://github.com/sagemath/sagetrac-mirror/commit/f15883df872cb694d6f6aa33c59f256b671681e3)** to **[`f534fae`](https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5)**



---

archive/issue_comments_414033.json:
```json
{
    "body": "<div id=\"comment:114\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6f782e52758e986227665711c825e35139f4f49\"><code>e6f782e</code></a></td><td><code>removed ListOfPointers, added `__future__` division</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a0337f3fbac7a81f1a49104e3caa21b3e1bfcac\"><code>3a0337f</code></a></td><td><code>altered aligned_malloc to work with MemoryAllocator instead)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5\"><code>f534fae</code></a></td><td><code>replaced sig_malloc by MemoryAllocator.malloc in many instances</code></td></tr></table>\n",
    "created_at": "2019-02-10T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414033",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:114"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6f782e52758e986227665711c825e35139f4f49"><code>e6f782e</code></a></td><td><code>removed ListOfPointers, added `__future__` division</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a0337f3fbac7a81f1a49104e3caa21b3e1bfcac"><code>3a0337f</code></a></td><td><code>altered aligned_malloc to work with MemoryAllocator instead)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5"><code>f534fae</code></a></td><td><code>replaced sig_malloc by MemoryAllocator.malloc in many instances</code></td></tr></table>




---

archive/issue_comments_414034.json:
```json
{
    "body": "Changed commit from **[`f534fae`](https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5)** to **[`f3fe698`](https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185)**",
    "created_at": "2019-02-10T22:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414034",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f534fae`](https://github.com/sagemath/sagetrac-mirror/commit/f534fae3c98b7e0ac5f6912924e9ddc0060b44f5)** to **[`f3fe698`](https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185)**



---

archive/issue_comments_414035.json:
```json
{
    "body": "<div id=\"comment:115\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185\"><code>f3fe698</code></a></td><td><code>removed ListOfListOfFaces</code></td></tr></table>\n",
    "created_at": "2019-02-10T22:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414035",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:115"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185"><code>f3fe698</code></a></td><td><code>removed ListOfListOfFaces</code></td></tr></table>




---

archive/issue_comments_414036.json:
```json
{
    "body": "<div id=\"comment:116\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed\"><code>887db29</code></a></td><td><code>actually removed the class ListOfListOfFaces, not just all instances,</code></td></tr></table>\n",
    "created_at": "2019-02-10T22:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:116"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed"><code>887db29</code></a></td><td><code>actually removed the class ListOfListOfFaces, not just all instances,</code></td></tr></table>




---

archive/issue_comments_414037.json:
```json
{
    "body": "Changed commit from **[`f3fe698`](https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185)** to **[`887db29`](https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed)**",
    "created_at": "2019-02-10T22:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414037",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f3fe698`](https://github.com/sagemath/sagetrac-mirror/commit/f3fe6988308c7b0ea333b837e482d46feedac185)** to **[`887db29`](https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed)**



---

archive/issue_comments_414038.json:
```json
{
    "body": "<div id=\"comment:117\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/087957d7e0237c68605b349f463d5efb9abfd183\"><code>087957d</code></a></td><td><code>replaced void * by uint64_t *</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70559ee3f8760a236ee0f90cf8bddd89e9cd6a5f\"><code>70559ee</code></a></td><td><code>moved is_equal from helper.cc to base.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6691d1ef792280120ac7822006167afb0a2085a7\"><code>6691d1e</code></a></td><td><code>added tests for face_lattice</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf2a8af42746eb096e1730dabe5ac3245de2c87e\"><code>bf2a8af</code></a></td><td><code>moved find_face to cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98048e6aa9c82d9f686818342e718e7bd6152d14\"><code>98048e6</code></a></td><td><code>moved sort from helper.cc to base.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c\"><code>f10c90a</code></a></td><td><code>Preparing: Filling Bit-Representations of Vertices and Facets in Cython, this makes it a lot easier</code></td></tr></table>\n",
    "created_at": "2019-02-11T14:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414038",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:117"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/087957d7e0237c68605b349f463d5efb9abfd183"><code>087957d</code></a></td><td><code>replaced void * by uint64_t *</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70559ee3f8760a236ee0f90cf8bddd89e9cd6a5f"><code>70559ee</code></a></td><td><code>moved is_equal from helper.cc to base.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6691d1ef792280120ac7822006167afb0a2085a7"><code>6691d1e</code></a></td><td><code>added tests for face_lattice</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf2a8af42746eb096e1730dabe5ac3245de2c87e"><code>bf2a8af</code></a></td><td><code>moved find_face to cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98048e6aa9c82d9f686818342e718e7bd6152d14"><code>98048e6</code></a></td><td><code>moved sort from helper.cc to base.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c"><code>f10c90a</code></a></td><td><code>Preparing: Filling Bit-Representations of Vertices and Facets in Cython, this makes it a lot easier</code></td></tr></table>




---

archive/issue_comments_414039.json:
```json
{
    "body": "Changed commit from **[`887db29`](https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed)** to **[`f10c90a`](https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c)**",
    "created_at": "2019-02-11T14:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414039",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`887db29`](https://github.com/sagemath/sagetrac-mirror/commit/887db29d8c5f120fc210ec0db1fd73097c8871ed)** to **[`f10c90a`](https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c)**



---

archive/issue_comments_414040.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nReplying to [@jdemeyer](#comment:98):\n> I agree with Travis that error checking could be much improved: use [error return values](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html#error-return-values).\n> \n> Also, instead of using `sig_malloc` and then checking for `NULL`, use `check_malloc` which automatically does that check. Even better, replace `sig_malloc(a * sizeof(T))` by `check_allocarray(a, sizeof(T))`.\n\nIn `char_from_incidence` and `get_vertices_from_incidence_matrix2` I have tried doing it correctly. `char_from_incidence` returns 1 on success and 0 means that something went wrong. `get_vertices_from_incidence_matrix2` returns a Cython-Object and so it es okay not to do the `except`?",
    "created_at": "2019-02-11T14:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414040",
    "user": "https://github.com/kliem"
}
```

<div id="comment:118" align="right">comment:118</div>

Replying to [@jdemeyer](#comment:98):
> I agree with Travis that error checking could be much improved: use [error return values](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html#error-return-values).
> 
> Also, instead of using `sig_malloc` and then checking for `NULL`, use `check_malloc` which automatically does that check. Even better, replace `sig_malloc(a * sizeof(T))` by `check_allocarray(a, sizeof(T))`.

In `char_from_incidence` and `get_vertices_from_incidence_matrix2` I have tried doing it correctly. `char_from_incidence` returns 1 on success and 0 means that something went wrong. `get_vertices_from_incidence_matrix2` returns a Cython-Object and so it es okay not to do the `except`?



---

archive/issue_comments_414041.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nFor anything returning a Python object, you cannot add an `except` value. That's only for C return types.",
    "created_at": "2019-02-11T14:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414041",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:119" align="right">comment:119</div>

For anything returning a Python object, you cannot add an `except` value. That's only for C return types.



---

archive/issue_comments_414042.json:
```json
{
    "body": "<div id=\"comment:120\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b37efbc76bc60fc4160892514d7e74bea9c7cba\"><code>4b37efb</code></a></td><td><code>moved construction of bit-representation to base.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb\"><code>22026c6</code></a></td><td><code>moved everything from vertex_to_bit_dictionary from helper.cc to base.pyx, now helper.cc only contains functions using intrinsics</code></td></tr></table>\n",
    "created_at": "2019-02-11T19:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414042",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:120"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b37efbc76bc60fc4160892514d7e74bea9c7cba"><code>4b37efb</code></a></td><td><code>moved construction of bit-representation to base.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb"><code>22026c6</code></a></td><td><code>moved everything from vertex_to_bit_dictionary from helper.cc to base.pyx, now helper.cc only contains functions using intrinsics</code></td></tr></table>




---

archive/issue_comments_414043.json:
```json
{
    "body": "Changed commit from **[`f10c90a`](https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c)** to **[`22026c6`](https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb)**",
    "created_at": "2019-02-11T19:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414043",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f10c90a`](https://github.com/sagemath/sagetrac-mirror/commit/f10c90ab6e2bf65bd71dc55ec0d9a5520c0d2d1c)** to **[`22026c6`](https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb)**



---

archive/issue_comments_414044.json:
```json
{
    "body": "Changed commit from **[`22026c6`](https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb)** to **[`c012d0c`](https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676)**",
    "created_at": "2019-02-12T16:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`22026c6`](https://github.com/sagemath/sagetrac-mirror/commit/22026c6c2c1865381732e50171a8265bdf4f3abb)** to **[`c012d0c`](https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676)**



---

archive/issue_comments_414045.json:
```json
{
    "body": "<div id=\"comment:121\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9cc21ace22c2c963de1909b7f06fe575e9c2991\"><code>d9cc21a</code></a></td><td><code>Updated the face_length/length_of_face, it is now in terms of uint64_t, which should be more natural, also base.pyx knows almost nothing about chunksize now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828689ba6a4981ac0a8bb022164ddbc446f677ea\"><code>828689b</code></a></td><td><code>face_length and length_of_face are now face_length</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676\"><code>c012d0c</code></a></td><td><code>Improved errors, Keyboard interrupt should work fine now</code></td></tr></table>\n",
    "created_at": "2019-02-12T16:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414045",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:121"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9cc21ace22c2c963de1909b7f06fe575e9c2991"><code>d9cc21a</code></a></td><td><code>Updated the face_length/length_of_face, it is now in terms of uint64_t, which should be more natural, also base.pyx knows almost nothing about chunksize now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828689ba6a4981ac0a8bb022164ddbc446f677ea"><code>828689b</code></a></td><td><code>face_length and length_of_face are now face_length</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676"><code>c012d0c</code></a></td><td><code>Improved errors, Keyboard interrupt should work fine now</code></td></tr></table>




---

archive/issue_comments_414046.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nReplying to [@tscrim](#comment:95):\n> You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.\n\nHow am I going to do this? I changed it to do its own signal handling, but that made everything slow down. To be more precise: Calculating the `f_vector` of the 20-dimensional counterexample now takes 3m 39s instead of 2m 57s. Just adding\n\n```\n#include <csignal>\n```\nand \n\n```\nvoid inline signalHandler( int signum ) {\n    // setting a variable, so I can catch the signal later\n    interrupt = 1;\n}\n```\nand\n\n```\nsignal(SIGINT, signalHandler);\n```\n(I commented out the check for `interrupt`, to be certain its just this.) What am I doing wrong? What is the advantage of this approach over `sig_on`/`sig_off` thats worth this increase in time?",
    "created_at": "2019-02-12T20:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414046",
    "user": "https://github.com/kliem"
}
```

<div id="comment:122" align="right">comment:122</div>

Replying to [@tscrim](#comment:95):
> You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.

How am I going to do this? I changed it to do its own signal handling, but that made everything slow down. To be more precise: Calculating the `f_vector` of the 20-dimensional counterexample now takes 3m 39s instead of 2m 57s. Just adding

```
#include <csignal>
```
and 

```
void inline signalHandler( int signum ) {
    // setting a variable, so I can catch the signal later
    interrupt = 1;
}
```
and

```
signal(SIGINT, signalHandler);
```
(I commented out the check for `interrupt`, to be certain its just this.) What am I doing wrong? What is the advantage of this approach over `sig_on`/`sig_off` thats worth this increase in time?



---

archive/issue_comments_414047.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@jdemeyer](#comment:112):\n> Since you're using divisions, I strongly recommend to add\n> \n> ```\n> from __future__ import division\n> ```\n> to make sure that your code works fine when using Python 3 divisions.\n\nGood thing I checked, what this actually means. I do want floor division. So this is not what I want, is it? Instead I should us `//` for \"floor division\"? I don't think there is a single instance, where I use \"true division\".",
    "created_at": "2019-02-12T20:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414047",
    "user": "https://github.com/kliem"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@jdemeyer](#comment:112):
> Since you're using divisions, I strongly recommend to add
> 
> ```
> from __future__ import division
> ```
> to make sure that your code works fine when using Python 3 divisions.

Good thing I checked, what this actually means. I do want floor division. So this is not what I want, is it? Instead I should us `//` for "floor division"? I don't think there is a single instance, where I use "true division".



---

archive/issue_comments_414048.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nReplying to [@kliem](#comment:122):\n> Replying to [@tscrim](#comment:95):\n> > You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.\n\nI'm also confused with the comment by Travis. `get_next_level` is implemented in C, so I do think that using `sig_on` and `sig_off` (like it used to be) makes sense.",
    "created_at": "2019-02-12T21:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414048",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:124" align="right">comment:124</div>

Replying to [@kliem](#comment:122):
> Replying to [@tscrim](#comment:95):
> > You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.

I'm also confused with the comment by Travis. `get_next_level` is implemented in C, so I do think that using `sig_on` and `sig_off` (like it used to be) makes sense.



---

archive/issue_comments_414049.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@kliem](#comment:123):\n> Instead I should us `//` for \"floor division\"?\n\nIf you need floor division, then you should use `//` indeed. You should still keep the `from `__future__` import division` to catch mistakes (if you mistakenly use `/` instead of `//` it will behave the same on Python 2 and Python 3).",
    "created_at": "2019-02-12T21:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414049",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@kliem](#comment:123):
> Instead I should us `//` for "floor division"?

If you need floor division, then you should use `//` indeed. You should still keep the `from `__future__` import division` to catch mistakes (if you mistakenly use `/` instead of `//` it will behave the same on Python 2 and Python 3).



---

archive/issue_comments_414050.json:
```json
{
    "body": "<div id=\"comment:126\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90\"><code>a1aa1c8</code></a></td><td><code>Documentation + updated division to be floor division</code></td></tr></table>\n",
    "created_at": "2019-02-13T15:33:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:126"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90"><code>a1aa1c8</code></a></td><td><code>Documentation + updated division to be floor division</code></td></tr></table>




---

archive/issue_comments_414051.json:
```json
{
    "body": "Changed commit from **[`c012d0c`](https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676)** to **[`a1aa1c8`](https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90)**",
    "created_at": "2019-02-13T15:33:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414051",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c012d0c`](https://github.com/sagemath/sagetrac-mirror/commit/c012d0c1e9618adc06f4f99c26f6599ead639676)** to **[`a1aa1c8`](https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90)**



---

archive/issue_comments_414052.json:
```json
{
    "body": "<div id=\"comment:127\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d\"><code>d31bd2b</code></a></td><td><code>added base.pyx</code></td></tr></table>\n",
    "created_at": "2019-02-13T15:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:127"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d"><code>d31bd2b</code></a></td><td><code>added base.pyx</code></td></tr></table>




---

archive/issue_comments_414053.json:
```json
{
    "body": "Changed commit from **[`a1aa1c8`](https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90)** to **[`d31bd2b`](https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d)**",
    "created_at": "2019-02-13T15:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414053",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a1aa1c8`](https://github.com/sagemath/sagetrac-mirror/commit/a1aa1c8f941e966d82a9efd522753d1334b71e90)** to **[`d31bd2b`](https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d)**



---

archive/issue_comments_414054.json:
```json
{
    "body": "<div id=\"comment:128\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d\"><code>e5346e5</code></a></td><td><code>saved base.pyx</code></td></tr></table>\n",
    "created_at": "2019-02-13T15:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414054",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:128"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d"><code>e5346e5</code></a></td><td><code>saved base.pyx</code></td></tr></table>




---

archive/issue_comments_414055.json:
```json
{
    "body": "Changed commit from **[`d31bd2b`](https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d)** to **[`e5346e5`](https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d)**",
    "created_at": "2019-02-13T15:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414055",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d31bd2b`](https://github.com/sagemath/sagetrac-mirror/commit/d31bd2bc702919d65fb1e6fa879e312f033a976d)** to **[`e5346e5`](https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d)**



---

archive/issue_comments_414056.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@jdemeyer](#comment:124):\n> Replying to [@kliem](#comment:122):\n> > Replying to [@tscrim](#comment:95):\n> > > You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.\n\n> \n> I'm also confused with the comment by Travis. `get_next_level` is implemented in C, so I do think that using `sig_on` and `sig_off` (like it used to be) makes sense.\n\nWhat Jeroen initially said was correct, I meant for it to have `sig_on`/`sig_off` inside the function, but I misread that it was implemented in C. So you can disregard that comment.\n\n(Sorry for my delayed response, I have been traveling and busy.)",
    "created_at": "2019-02-13T15:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414056",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@jdemeyer](#comment:124):
> Replying to [@kliem](#comment:122):
> > Replying to [@tscrim](#comment:95):
> > > You should not have `get_next_level` wrapped in a `sig_on`/`sig_off`. That should do its own signal handling.

> 
> I'm also confused with the comment by Travis. `get_next_level` is implemented in C, so I do think that using `sig_on` and `sig_off` (like it used to be) makes sense.

What Jeroen initially said was correct, I meant for it to have `sig_on`/`sig_off` inside the function, but I misread that it was implemented in C. So you can disregard that comment.

(Sorry for my delayed response, I have been traveling and busy.)



---

archive/issue_comments_414057.json:
```json
{
    "body": "<div id=\"comment:130\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399\"><code>1d74cf8</code></a></td><td><code>Updated error messages</code></td></tr></table>\n",
    "created_at": "2019-02-13T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414057",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:130"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399"><code>1d74cf8</code></a></td><td><code>Updated error messages</code></td></tr></table>




---

archive/issue_comments_414058.json:
```json
{
    "body": "Changed commit from **[`e5346e5`](https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d)** to **[`1d74cf8`](https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399)**",
    "created_at": "2019-02-13T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414058",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e5346e5`](https://github.com/sagemath/sagetrac-mirror/commit/e5346e5233406369d86fd4f61e5b04460e341f5d)** to **[`1d74cf8`](https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399)**



---

archive/issue_comments_414059.json:
```json
{
    "body": "<div id=\"comment:131\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a75a6b1075373c7788d7ab0a9009f06c646c3e2\"><code>7a75a6b</code></a></td><td><code>Updated a test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bb83f02db3689080060a7c50d6ca00dfe58fb0d\"><code>4bb83f0</code></a></td><td><code>updated print functions to python3-compatible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0d988f787fa4b551b81d87c38b31c16cc2cad8a\"><code>b0d988f</code></a></td><td><code>removed macros from helper.cc and replaced them by methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95\"><code>143cb5a</code></a></td><td><code>adding `memcpy` and `memcmp`, no need to reinvent the wheel...</code></td></tr></table>\n",
    "created_at": "2019-02-14T10:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:131"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a75a6b1075373c7788d7ab0a9009f06c646c3e2"><code>7a75a6b</code></a></td><td><code>Updated a test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bb83f02db3689080060a7c50d6ca00dfe58fb0d"><code>4bb83f0</code></a></td><td><code>updated print functions to python3-compatible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0d988f787fa4b551b81d87c38b31c16cc2cad8a"><code>b0d988f</code></a></td><td><code>removed macros from helper.cc and replaced them by methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95"><code>143cb5a</code></a></td><td><code>adding `memcpy` and `memcmp`, no need to reinvent the wheel...</code></td></tr></table>




---

archive/issue_comments_414060.json:
```json
{
    "body": "Changed commit from **[`1d74cf8`](https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399)** to **[`143cb5a`](https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95)**",
    "created_at": "2019-02-14T10:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414060",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d74cf8`](https://github.com/sagemath/sagetrac-mirror/commit/1d74cf81ad85fcbe0ac008c0c07d54173f3f3399)** to **[`143cb5a`](https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95)**



---

archive/issue_comments_414061.json:
```json
{
    "body": "Changed commit from **[`143cb5a`](https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95)** to **[`621f2c3`](https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364)**",
    "created_at": "2019-02-14T16:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`143cb5a`](https://github.com/sagemath/sagetrac-mirror/commit/143cb5af73761dfc13a9a8fdc8c56dd9d5914b95)** to **[`621f2c3`](https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364)**



---

archive/issue_comments_414062.json:
```json
{
    "body": "<div id=\"comment:132\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ff32ebe78df1c72a52d9d8477bd3525d4a15d91\"><code>1ff32eb</code></a></td><td><code>cleaned up the intrinsics a bit more</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364\"><code>621f2c3</code></a></td><td><code>more documentation</code></td></tr></table>\n",
    "created_at": "2019-02-14T16:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414062",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:132"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ff32ebe78df1c72a52d9d8477bd3525d4a15d91"><code>1ff32eb</code></a></td><td><code>cleaned up the intrinsics a bit more</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364"><code>621f2c3</code></a></td><td><code>more documentation</code></td></tr></table>




---

archive/issue_comments_414063.json:
```json
{
    "body": "Changed commit from **[`621f2c3`](https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364)** to **[`b9ffa15`](https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429)**",
    "created_at": "2019-02-15T09:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414063",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`621f2c3`](https://github.com/sagemath/sagetrac-mirror/commit/621f2c3a082b8417c26bf4e34821c28bc7f0b364)** to **[`b9ffa15`](https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429)**



---

archive/issue_comments_414064.json:
```json
{
    "body": "<div id=\"comment:133\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429\"><code>b9ffa15</code></a></td><td><code>checking for NULL, when adding a face</code></td></tr></table>\n",
    "created_at": "2019-02-15T09:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414064",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:133"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429"><code>b9ffa15</code></a></td><td><code>checking for NULL, when adding a face</code></td></tr></table>




---

archive/issue_comments_414065.json:
```json
{
    "body": "Changed commit from **[`b9ffa15`](https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429)** to **[`ce1789e`](https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d)**",
    "created_at": "2019-02-15T10:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414065",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b9ffa15`](https://github.com/sagemath/sagetrac-mirror/commit/b9ffa15788e3429cb2e4290c46ec5e247fe47429)** to **[`ce1789e`](https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d)**



---

archive/issue_comments_414066.json:
```json
{
    "body": "<div id=\"comment:134\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d\"><code>ce1789e</code></a></td><td><code>coding conventions</code></td></tr></table>\n",
    "created_at": "2019-02-15T10:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414066",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:134"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d"><code>ce1789e</code></a></td><td><code>coding conventions</code></td></tr></table>




---

archive/issue_comments_414067.json:
```json
{
    "body": "<div id=\"comment:135\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2\"><code>c16fccc</code></a></td><td><code>one / too much</code></td></tr></table>\n",
    "created_at": "2019-02-15T15:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414067",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:135"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2"><code>c16fccc</code></a></td><td><code>one / too much</code></td></tr></table>




---

archive/issue_comments_414068.json:
```json
{
    "body": "Changed commit from **[`ce1789e`](https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d)** to **[`c16fccc`](https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2)**",
    "created_at": "2019-02-15T15:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414068",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce1789e`](https://github.com/sagemath/sagetrac-mirror/commit/ce1789e8eae99847f3665d73cd9ede600e46998d)** to **[`c16fccc`](https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2)**



---

archive/issue_comments_414069.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nTwo general comments:\n\n1. You have a huge number of commits. At some point, it would be good to squash everything into one commit.\n\n2. Don't forget to set the ticket back to needs_review if you want it reviewed.",
    "created_at": "2019-02-15T18:31:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414069",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:136" align="right">comment:136</div>

Two general comments:

1. You have a huge number of commits. At some point, it would be good to squash everything into one commit.

2. Don't forget to set the ticket back to needs_review if you want it reviewed.



---

archive/issue_comments_414070.json:
```json
{
    "body": "Changed commit from **[`c16fccc`](https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2)** to **[`deb5977`](https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387)**",
    "created_at": "2019-02-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c16fccc`](https://github.com/sagemath/sagetrac-mirror/commit/c16fccc35175e67b05261a02b913b3ae29baade2)** to **[`deb5977`](https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387)**



---

archive/issue_comments_414071.json:
```json
{
    "body": "<div id=\"comment:137\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387\"><code>deb5977</code></a></td><td><code>it should be mostly clean now</code></td></tr></table>\n",
    "created_at": "2019-02-18T15:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414071",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:137"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387"><code>deb5977</code></a></td><td><code>it should be mostly clean now</code></td></tr></table>




---

archive/issue_comments_414072.json:
```json
{
    "body": "<div id=\"comment:138\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478\"><code>b73c335</code></a></td><td><code>added a class class CombinatorialPolyhedron</code></td></tr></table>\n",
    "created_at": "2019-02-18T17:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414072",
    "user": "https://github.com/kliem"
}
```

<div id="comment:138"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478"><code>b73c335</code></a></td><td><code>added a class class CombinatorialPolyhedron</code></td></tr></table>




---

archive/issue_comments_414073.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/improve_f_vector_etc__for_polytopes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improve_f_vector_etc__for_polytopes)** to **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)**",
    "created_at": "2019-02-18T17:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414073",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/gh-kliem/improve_f_vector_etc__for_polytopes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improve_f_vector_etc__for_polytopes)** to **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)**



---

archive/issue_comments_414074.json:
```json
{
    "body": "Changed commit from **[`deb5977`](https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387)** to **[`b73c335`](https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478)**",
    "created_at": "2019-02-18T17:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414074",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`deb5977`](https://github.com/sagemath/sagetrac-mirror/commit/deb5977d117ec4c4be1cc5bfac9e6fda85633387)** to **[`b73c335`](https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478)**



---

archive/issue_comments_414075.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nReplying to [@jdemeyer](#comment:136):\n> Two general comments:\n> \n> 1. You have a huge number of commits. At some point, it would be good to squash everything into one commit.\n> \n> 2. Don't forget to set the ticket back to needs_review if you want it reviewed.\n\nWasn't sure how to exactly squash pushed commits, but I guess restarting a clean branch does the job.",
    "created_at": "2019-02-18T17:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414075",
    "user": "https://github.com/kliem"
}
```

<div id="comment:139" align="right">comment:139</div>

Replying to [@jdemeyer](#comment:136):
> Two general comments:
> 
> 1. You have a huge number of commits. At some point, it would be good to squash everything into one commit.
> 
> 2. Don't forget to set the ticket back to needs_review if you want it reviewed.

Wasn't sure how to exactly squash pushed commits, but I guess restarting a clean branch does the job.



---

archive/issue_events_366436.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-02-18T17:11:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366436"
}
```



---

archive/issue_events_366437.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-02-18T17:11:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366437"
}
```



---

archive/issue_comments_414076.json:
```json
{
    "body": "<div id=\"comment:141\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e\"><code>f1ad61b</code></a></td><td><code>corrected blocks</code></td></tr></table>\n",
    "created_at": "2019-02-18T19:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414076",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:141"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e"><code>f1ad61b</code></a></td><td><code>corrected blocks</code></td></tr></table>




---

archive/issue_comments_414077.json:
```json
{
    "body": "Changed commit from **[`b73c335`](https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478)** to **[`f1ad61b`](https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e)**",
    "created_at": "2019-02-18T19:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414077",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b73c335`](https://github.com/sagemath/sagetrac-mirror/commit/b73c335e50ab93c8ec5ba2a96c4198b9d589f478)** to **[`f1ad61b`](https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e)**



---

archive/issue_comments_414078.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\nHow come that patchbots use completely different versions of the files then claimed?\n\nI keep getting messages containing errors with `chunktype` in helper.cc. I removed this a while ago and the current branch shouldn't even know that `chunktype` ever existed.\n\nBuildFailed 8.7.beta4 Ubuntu/18.04/x86_64/3.13.0-123-generic/44e979ad077a 2019-02-18 20:09:03 log shortlog",
    "created_at": "2019-02-19T16:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414078",
    "user": "https://github.com/kliem"
}
```

<div id="comment:142" align="right">comment:142</div>

How come that patchbots use completely different versions of the files then claimed?

I keep getting messages containing errors with `chunktype` in helper.cc. I removed this a while ago and the current branch shouldn't even know that `chunktype` ever existed.

BuildFailed 8.7.beta4 Ubuntu/18.04/x86_64/3.13.0-123-generic/44e979ad077a 2019-02-18 20:09:03 log shortlog



---

archive/issue_comments_414079.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nThe patchbot page contains all builds for a particular ticket, even old ones. I agree that it's not obvious to see whether a patchbot run is from the current commit or an earlier one.",
    "created_at": "2019-02-19T16:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414079",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:143" align="right">comment:143</div>

The patchbot page contains all builds for a particular ticket, even old ones. I agree that it's not obvious to see whether a patchbot run is from the current commit or an earlier one.



---

archive/issue_comments_414080.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nThis should eventually use the functions added by #27292.",
    "created_at": "2019-02-20T10:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414080",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:144" align="right">comment:144</div>

This should eventually use the functions added by #27292.



---

archive/issue_comments_414081.json:
```json
{
    "body": "Dependencies: **#27292**",
    "created_at": "2019-02-20T10:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414081",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27292**



---

archive/issue_events_366438.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-20T11:08:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366438"
}
```



---

archive/issue_events_366439.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-20T11:08:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366439"
}
```



---

archive/issue_comments_414082.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nI have lots of small comments while reading this code:\n\n1. It would makes things easier to understand if you really removed the vectorization stuff instead of just commenting it out. That way, we can completely focus the review on the generic code (without needing the worry about the commented-out parts). More generally, remove commented-out code like `# cdef tuple lists_facet_repr #might need this for flag-vector`\n\n2. It's really hard to understand what all the code does: I'm missing some kind of \"big picture\" documentation to explain what this is all about. For example, when I see\n\n```\ncdef class FaceIterator:\n    cdef uint64_t *face\n    cdef int current_dimension, dimension, record_dimension, lowest_dimension\n    cdef MemoryAllocator _mem\n    cdef uint64_t ***newfaces2\n    cdef tuple newfaces_lists\n    cdef uint64_t ***newfaces\n    cdef uint64_t **forbidden\n    cdef size_t *nr_faces\n    cdef size_t *nr_forbidden\n    cdef int *first_time\n    cdef size_t yet_to_yield, face_length, nr_facets, nr_vertices\n    cdef size_t *output1\n    cdef size_t *output2\n    cdef int nr_lines\n```\nI don't want to review this anymore. You really need to add a lot more comments.\n\n3. The Cython doctests are hard to read: all the output just comes at the end and it's difficult to see which code produced it. You could instead define a bunch of test functions (either in the doctest or in the Cython sources) and then call those from Python.\n\n4. I sometimes wonder if it wouldn't be easier to abstract some things in C++ or Python classes, for example using something like `std::vector<uint64_t>` or `array.array` instead of `uint64_t*`.\n\n5. Do you really need `vertex_to_bit_dictionary`? It's probably more efficient to replace `vertex_to_bit_dictionary[i]` by an inline function\n\n```\ncdef inline uint64_t vertex_to_bit_dictionary(int i):\n    return (<uint64_t>1) << (64 - i - 1)\n```\n\n6. In `char_from_tuple` (and other similar functions), please use `except -1` for exceptions and `return 0` in the non-exceptional case. Then you don't even need to write `return 0` since that's the default.\n\n7. Typos `lenght` -> `length`\n\n8. In various places, you use `int` as indices while most other places use `size_t`. Is there a reason for that? Note that Python typically uses `Py_ssize_t` for loops like that.\n\n9. `return int(bitcount)` is converting a C `size_t` to a Python `int` to a C `int`. Just `return bitcount` should be sufficient.\n\n10. There is no point at all to put `sig_check()` right after `sig_off()` or right before `sig_on()`.\n\n21. Is there a good reason to implement `face_iter` and `faces` separately? Isn't it sufficient to have the iterator only?",
    "created_at": "2019-02-20T11:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414082",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:145" align="right">comment:145</div>

I have lots of small comments while reading this code:

1. It would makes things easier to understand if you really removed the vectorization stuff instead of just commenting it out. That way, we can completely focus the review on the generic code (without needing the worry about the commented-out parts). More generally, remove commented-out code like `# cdef tuple lists_facet_repr #might need this for flag-vector`

2. It's really hard to understand what all the code does: I'm missing some kind of "big picture" documentation to explain what this is all about. For example, when I see

```
cdef class FaceIterator:
    cdef uint64_t *face
    cdef int current_dimension, dimension, record_dimension, lowest_dimension
    cdef MemoryAllocator _mem
    cdef uint64_t ***newfaces2
    cdef tuple newfaces_lists
    cdef uint64_t ***newfaces
    cdef uint64_t **forbidden
    cdef size_t *nr_faces
    cdef size_t *nr_forbidden
    cdef int *first_time
    cdef size_t yet_to_yield, face_length, nr_facets, nr_vertices
    cdef size_t *output1
    cdef size_t *output2
    cdef int nr_lines
```
I don't want to review this anymore. You really need to add a lot more comments.

3. The Cython doctests are hard to read: all the output just comes at the end and it's difficult to see which code produced it. You could instead define a bunch of test functions (either in the doctest or in the Cython sources) and then call those from Python.

4. I sometimes wonder if it wouldn't be easier to abstract some things in C++ or Python classes, for example using something like `std::vector<uint64_t>` or `array.array` instead of `uint64_t*`.

5. Do you really need `vertex_to_bit_dictionary`? It's probably more efficient to replace `vertex_to_bit_dictionary[i]` by an inline function

```
cdef inline uint64_t vertex_to_bit_dictionary(int i):
    return (<uint64_t>1) << (64 - i - 1)
```

6. In `char_from_tuple` (and other similar functions), please use `except -1` for exceptions and `return 0` in the non-exceptional case. Then you don't even need to write `return 0` since that's the default.

7. Typos `lenght` -> `length`

8. In various places, you use `int` as indices while most other places use `size_t`. Is there a reason for that? Note that Python typically uses `Py_ssize_t` for loops like that.

9. `return int(bitcount)` is converting a C `size_t` to a Python `int` to a C `int`. Just `return bitcount` should be sufficient.

10. There is no point at all to put `sig_check()` right after `sig_off()` or right before `sig_on()`.

21. Is there a good reason to implement `face_iter` and `faces` separately? Isn't it sufficient to have the iterator only?



---

archive/issue_comments_414083.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nThanks for the comments.\n\nReplying to [@jdemeyer](#comment:145):\n> I have lots of small comments while reading this code:\n> \n> 1. It would makes things easier to understand if you really removed the vectorization stuff instead of just commenting it out. That way, we can completely focus the review on the generic code (without needing the worry about the commented-out parts). More generally, remove commented-out code like `# cdef tuple lists_facet_repr #might need this for flag-vector`\n\nOk, I will do that. In #27103 I already added that code as a comment. I just did some timings comparing the current sage, polymake and the new code with intrinsics and without:\nYes the intrinsics are nice, as they give a speedup of a factor of 2-3 for the iterator. But its nothing in comparison to the gain of that ticket without intrinsics in comparison to standing algorithms.\n> \n> 2. It's really hard to understand what all the code does: I'm missing some kind of \"big picture\" documentation to explain what this is all about. For example, when I see\n> \n> ```\n> cdef class FaceIterator:\n>     cdef uint64_t *face\n>     cdef int current_dimension, dimension, record_dimension, lowest_dimension\n>     cdef MemoryAllocator _mem\n>     cdef uint64_t ***newfaces2\n>     cdef tuple newfaces_lists\n>     cdef uint64_t ***newfaces\n>     cdef uint64_t **forbidden\n>     cdef size_t *nr_faces\n>     cdef size_t *nr_forbidden\n>     cdef int *first_time\n>     cdef size_t yet_to_yield, face_length, nr_facets, nr_vertices\n>     cdef size_t *output1\n>     cdef size_t *output2\n>     cdef int nr_lines\n> ```\n> I don't want to review this anymore. You really need to add a lot more comments.\n\nIn `CombinatorialPolyhedron.f_vector` there is a small description of the basic algorithm. Maybe it is of help.\nI will add comments to all those variable declarations.\n> \n> 3. The Cython doctests are hard to read: all the output just comes at the end and it's difficult to see which code produced it. You could instead define a bunch of test functions (either in the doctest or in the Cython sources) and then call those from Python.\n\nI just saw, how you did that in #27292. Makes sense.\n> \n> 4. I sometimes wonder if it wouldn't be easier to abstract some things in C++ or Python classes, for example using something like `std::vector<uint64_t>` or `array.array` instead of `uint64_t*`.\n\nWithout intrinsics this seems to be a good approach. However, I have now idea how to force array.array or vector to keep alignment. Also I never change the size of the `uint64_t*`.\n> \n> 5. Do you really need `vertex_to_bit_dictionary`? It's probably more efficient to replace `vertex_to_bit_dictionary[i]` by an inline function\n> \n> ```\n> cdef inline uint64_t vertex_to_bit_dictionary(int i):\n>     return (<uint64_t>1) << (64 - i - 1)\n> ```\n> \n> 6. In `char_from_tuple` (and other similar functions), please use `except -1` for exceptions and `return 0` in the non-exceptional case. Then you don't even need to write `return 0` since that's the default.\n> \n> 7. Typos `lenght` -> `length`\n> \n> 8. In various places, you use `int` as indices while most other places use `size_t`. Is there a reason for that? Note that Python typically uses `Py_ssize_t` for loops like that.\n\nI got a warning about comparison of unsigned and signed integer. This is how I \"solved\" it. Cython seems to translate `len()` to a signed integer, then I get warnings.\nSo `Py_ssize_t` is a good type for an index in there? Or just leave it up to the compiler?\n> \n> 9. `return int(bitcount)` is converting a C `size_t` to a Python `int` to a C `int`. Just `return bitcount` should be sufficient.\n> \n> 10. There is no point at all to put `sig_check()` right after `sig_off()` or right before `sig_on()`.\n\nDidn't know if `sig_on()` whould catch an already existing Interrupt.\n> \n> 11. Is there a good reason to implement `face_iter` and `faces` separately? Isn't it sufficient to have the iterator only?\n\nI don't care. I just figured, that people want a `faces()` anyway. To me, there is no need to that function. Partly, its there because of historic reasons.",
    "created_at": "2019-02-20T16:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414083",
    "user": "https://github.com/kliem"
}
```

<div id="comment:146" align="right">comment:146</div>

Thanks for the comments.

Replying to [@jdemeyer](#comment:145):
> I have lots of small comments while reading this code:
> 
> 1. It would makes things easier to understand if you really removed the vectorization stuff instead of just commenting it out. That way, we can completely focus the review on the generic code (without needing the worry about the commented-out parts). More generally, remove commented-out code like `# cdef tuple lists_facet_repr #might need this for flag-vector`

Ok, I will do that. In #27103 I already added that code as a comment. I just did some timings comparing the current sage, polymake and the new code with intrinsics and without:
Yes the intrinsics are nice, as they give a speedup of a factor of 2-3 for the iterator. But its nothing in comparison to the gain of that ticket without intrinsics in comparison to standing algorithms.
> 
> 2. It's really hard to understand what all the code does: I'm missing some kind of "big picture" documentation to explain what this is all about. For example, when I see
> 
> ```
> cdef class FaceIterator:
>     cdef uint64_t *face
>     cdef int current_dimension, dimension, record_dimension, lowest_dimension
>     cdef MemoryAllocator _mem
>     cdef uint64_t ***newfaces2
>     cdef tuple newfaces_lists
>     cdef uint64_t ***newfaces
>     cdef uint64_t **forbidden
>     cdef size_t *nr_faces
>     cdef size_t *nr_forbidden
>     cdef int *first_time
>     cdef size_t yet_to_yield, face_length, nr_facets, nr_vertices
>     cdef size_t *output1
>     cdef size_t *output2
>     cdef int nr_lines
> ```
> I don't want to review this anymore. You really need to add a lot more comments.

In `CombinatorialPolyhedron.f_vector` there is a small description of the basic algorithm. Maybe it is of help.
I will add comments to all those variable declarations.
> 
> 3. The Cython doctests are hard to read: all the output just comes at the end and it's difficult to see which code produced it. You could instead define a bunch of test functions (either in the doctest or in the Cython sources) and then call those from Python.

I just saw, how you did that in #27292. Makes sense.
> 
> 4. I sometimes wonder if it wouldn't be easier to abstract some things in C++ or Python classes, for example using something like `std::vector<uint64_t>` or `array.array` instead of `uint64_t*`.

Without intrinsics this seems to be a good approach. However, I have now idea how to force array.array or vector to keep alignment. Also I never change the size of the `uint64_t*`.
> 
> 5. Do you really need `vertex_to_bit_dictionary`? It's probably more efficient to replace `vertex_to_bit_dictionary[i]` by an inline function
> 
> ```
> cdef inline uint64_t vertex_to_bit_dictionary(int i):
>     return (<uint64_t>1) << (64 - i - 1)
> ```
> 
> 6. In `char_from_tuple` (and other similar functions), please use `except -1` for exceptions and `return 0` in the non-exceptional case. Then you don't even need to write `return 0` since that's the default.
> 
> 7. Typos `lenght` -> `length`
> 
> 8. In various places, you use `int` as indices while most other places use `size_t`. Is there a reason for that? Note that Python typically uses `Py_ssize_t` for loops like that.

I got a warning about comparison of unsigned and signed integer. This is how I "solved" it. Cython seems to translate `len()` to a signed integer, then I get warnings.
So `Py_ssize_t` is a good type for an index in there? Or just leave it up to the compiler?
> 
> 9. `return int(bitcount)` is converting a C `size_t` to a Python `int` to a C `int`. Just `return bitcount` should be sufficient.
> 
> 10. There is no point at all to put `sig_check()` right after `sig_off()` or right before `sig_on()`.

Didn't know if `sig_on()` whould catch an already existing Interrupt.
> 
> 11. Is there a good reason to implement `face_iter` and `faces` separately? Isn't it sufficient to have the iterator only?

I don't care. I just figured, that people want a `faces()` anyway. To me, there is no need to that function. Partly, its there because of historic reasons.



---

archive/issue_comments_414084.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nReplying to [@kliem](#comment:146):\n> So `Py_ssize_t` is a good type for an index in there?\n\n`Py_ssize_t` is the type of `len(something)` in Python. So, if you're doing something like `for i in range(len(something))`, then indeed use `cdef Py_ssize_t i`.\n\n> I don't care. I just figured, that people want a `faces()` anyway.\n\nWhat if you're looking for one face with a specific property, or counting each face with a given property? Then you don't need to generate a list of all faces.\n\nIn general, Python seems to move away from returning lists of things to returning views/iterators. For example, `range()` is an iterator in Python 3 but a list in Python 2.",
    "created_at": "2019-02-20T16:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414084",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:147" align="right">comment:147</div>

Replying to [@kliem](#comment:146):
> So `Py_ssize_t` is a good type for an index in there?

`Py_ssize_t` is the type of `len(something)` in Python. So, if you're doing something like `for i in range(len(something))`, then indeed use `cdef Py_ssize_t i`.

> I don't care. I just figured, that people want a `faces()` anyway.

What if you're looking for one face with a specific property, or counting each face with a given property? Then you don't need to generate a list of all faces.

In general, Python seems to move away from returning lists of things to returning views/iterators. For example, `range()` is an iterator in Python 3 but a list in Python 2.



---

archive/issue_comments_414085.json:
```json
{
    "body": "<div id=\"comment:148\" align=\"right\">comment:148</div>\n\nReplying to [@jdemeyer](#comment:147):\n> Replying to [@kliem](#comment:146):\n> > So `Py_ssize_t` is a good type for an index in there?\n\n> \n> `Py_ssize_t` is the type of `len(something)` in Python. So, if you're doing something like `for i in range(len(something))`, then indeed use `cdef Py_ssize_t i`.\n> \n> > I don't care. I just figured, that people want a `faces()` anyway.\n\n> \n> What if you're looking for one face with a specific property, or counting each face with a given property? Then you don't need to generate a list of all faces.\n\nI am aware of advantages of an iterator.\n\nThis raises again the question of wether my construction makes sense and I am almost certain, there is a better way of doing so:\n\nSo I have a `FaceIterator` that can swiftly go to next face (and return its dimension on default). Before jumping to the next face, we can also grab the vertex-representation, facet-representation. In the future it might be nice to add more functions, but so much for now.\n\nAt the moment I have a complicated method `CombinatorialPolyhedron.face_iter()` that yields information of each face depending on a bunch of arguments. But I am almost certain, that this is not a good way of doing it. Probably I should return `FaceIterator`, which is an iterator. What's a good way of implementing an iterator, that can return various outputs? I'm thinking of something like\n\n```\nsage: cython('''                            \n....: from sage.rings.integer import Integer\n....: cdef class FaceIterator:\n....:     cdef size_t nr_faces\n....:     cdef size_t i\n....:     def __init__(self, number):\n....:         self.nr_faces = number\n....:         self.i = 0\n....:     \n....:     def __iter__(self):\n....:         return self\n....:     \n....:     def __next__(self):\n....:         current = Integer(self.i)\n....:         self.i += 1\n....:         if self.i > self.nr_faces:\n....:             raise StopIteration\n....:         else:\n....:             return Integer(current)\n....:             \n....:     next = __next__\n....:     \n....:     def give_facet_repr(self):\n....:         # some actual calculation happening here\n....:         return 'this is the facet repr of the current face'\n....:         \n....:     def give_vertex_repr(self):\n....:         # some calculation here\n....:         return 'this is the vertex_repr'\n....:         \n....:     def skip_a_face(self):\n....:         # what I'm thinking about is the option\n....:         # of not visiting any faces of the current face \n....:         self.i += 1\n....: ''')\nsage: a = FaceIterator(20)\nsage: next(a)\n0\nsage: next(a)\n1\nsage: a.skip_a_faces()\nsage: a.skip_a_faces()\nsage: next(a)\n4\nsage: a.give_facet_repr()\n'this is the facet repr of the current face'\nsage: a.give_vertex_repr()\n'this is the vertex_repr'\n\n```\nI guess I know how to do this, but I don't know, if this any good.\n\nThis way the user would actually be able to use the face iterator + I don't have to think of all possible outputs when creating `CombinatorialPolyhedron.face_iter()`. One can easily add more outputs like constructing the `facets` of the current face, or return a `CombinatorialPolyhedron` which is the current face etc.\n\nAt the moment, such extensions would be hard to do.\n\nOne could also yield a something like `CombinatorialFace`, but I'm a bit worried about the overhead. Also things like \"do not revisit subfaces\" (i.e. when the face is simplicial and there is really no point in doing so) or setting a maximal dimension etc. are not possible.\n> \n> In general, Python seems to move away from returning lists of things to returning views/iterators. For example, `range()` is an iterator in Python 3 but a list in Python 2.",
    "created_at": "2019-02-20T17:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414085",
    "user": "https://github.com/kliem"
}
```

<div id="comment:148" align="right">comment:148</div>

Replying to [@jdemeyer](#comment:147):
> Replying to [@kliem](#comment:146):
> > So `Py_ssize_t` is a good type for an index in there?

> 
> `Py_ssize_t` is the type of `len(something)` in Python. So, if you're doing something like `for i in range(len(something))`, then indeed use `cdef Py_ssize_t i`.
> 
> > I don't care. I just figured, that people want a `faces()` anyway.

> 
> What if you're looking for one face with a specific property, or counting each face with a given property? Then you don't need to generate a list of all faces.

I am aware of advantages of an iterator.

This raises again the question of wether my construction makes sense and I am almost certain, there is a better way of doing so:

So I have a `FaceIterator` that can swiftly go to next face (and return its dimension on default). Before jumping to the next face, we can also grab the vertex-representation, facet-representation. In the future it might be nice to add more functions, but so much for now.

At the moment I have a complicated method `CombinatorialPolyhedron.face_iter()` that yields information of each face depending on a bunch of arguments. But I am almost certain, that this is not a good way of doing it. Probably I should return `FaceIterator`, which is an iterator. What's a good way of implementing an iterator, that can return various outputs? I'm thinking of something like

```
sage: cython('''                            
....: from sage.rings.integer import Integer
....: cdef class FaceIterator:
....:     cdef size_t nr_faces
....:     cdef size_t i
....:     def __init__(self, number):
....:         self.nr_faces = number
....:         self.i = 0
....:     
....:     def __iter__(self):
....:         return self
....:     
....:     def __next__(self):
....:         current = Integer(self.i)
....:         self.i += 1
....:         if self.i > self.nr_faces:
....:             raise StopIteration
....:         else:
....:             return Integer(current)
....:             
....:     next = __next__
....:     
....:     def give_facet_repr(self):
....:         # some actual calculation happening here
....:         return 'this is the facet repr of the current face'
....:         
....:     def give_vertex_repr(self):
....:         # some calculation here
....:         return 'this is the vertex_repr'
....:         
....:     def skip_a_face(self):
....:         # what I'm thinking about is the option
....:         # of not visiting any faces of the current face 
....:         self.i += 1
....: ''')
sage: a = FaceIterator(20)
sage: next(a)
0
sage: next(a)
1
sage: a.skip_a_faces()
sage: a.skip_a_faces()
sage: next(a)
4
sage: a.give_facet_repr()
'this is the facet repr of the current face'
sage: a.give_vertex_repr()
'this is the vertex_repr'

```
I guess I know how to do this, but I don't know, if this any good.

This way the user would actually be able to use the face iterator + I don't have to think of all possible outputs when creating `CombinatorialPolyhedron.face_iter()`. One can easily add more outputs like constructing the `facets` of the current face, or return a `CombinatorialPolyhedron` which is the current face etc.

At the moment, such extensions would be hard to do.

One could also yield a something like `CombinatorialFace`, but I'm a bit worried about the overhead. Also things like "do not revisit subfaces" (i.e. when the face is simplicial and there is really no point in doing so) or setting a maximal dimension etc. are not possible.
> 
> In general, Python seems to move away from returning lists of things to returning views/iterators. For example, `range()` is an iterator in Python 3 but a list in Python 2.



---

archive/issue_comments_414086.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nAnother thing I could do to make life easier: Split this ticket in a number of tickets as good as possible.\n\nSo for this ticket there could be \"only\" the class `CombinatorialPolyhedron` with a `FaceIterator` that calculates the `f_vector`.\n\nFollow up tickets would be\n- `edges` and `ridges`\n- `hasse_diagram`/`face_lattice`\n- maybe even all those accesors in `FaceIterator`\n\nHow about it? This would remove at least 1000 lines in the current code for later.",
    "created_at": "2019-02-20T20:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414086",
    "user": "https://github.com/kliem"
}
```

<div id="comment:149" align="right">comment:149</div>

Another thing I could do to make life easier: Split this ticket in a number of tickets as good as possible.

So for this ticket there could be "only" the class `CombinatorialPolyhedron` with a `FaceIterator` that calculates the `f_vector`.

Follow up tickets would be
- `edges` and `ridges`
- `hasse_diagram`/`face_lattice`
- maybe even all those accesors in `FaceIterator`

How about it? This would remove at least 1000 lines in the current code for later.



---

archive/issue_comments_414087.json:
```json
{
    "body": "Changed commit from **[`f1ad61b`](https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e)** to **[`71c6d7a`](https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d)**",
    "created_at": "2019-02-21T19:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414087",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f1ad61b`](https://github.com/sagemath/sagetrac-mirror/commit/f1ad61b753d526049013ec2d61a762e7576ae15e)** to **[`71c6d7a`](https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d)**



---

archive/issue_comments_414088.json:
```json
{
    "body": "<div id=\"comment:150\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/596c34508baa143e8cc50a1007a6cdac0d97776d\"><code>596c345</code></a></td><td><code>added realloc, reallocarray, aligned_malloc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61ad091c14598d8ef439863c8c22585797707d25\"><code>61ad091</code></a></td><td><code>Clean up and optimize</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f1bea2576a463c735ece3985c07e1b3b7c933f\"><code>34f1bea</code></a></td><td><code>added a class class CombinatorialPolyhedron</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d\"><code>71c6d7a</code></a></td><td><code>corrected blocks</code></td></tr></table>\n",
    "created_at": "2019-02-21T19:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:150"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/596c34508baa143e8cc50a1007a6cdac0d97776d"><code>596c345</code></a></td><td><code>added realloc, reallocarray, aligned_malloc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61ad091c14598d8ef439863c8c22585797707d25"><code>61ad091</code></a></td><td><code>Clean up and optimize</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f1bea2576a463c735ece3985c07e1b3b7c933f"><code>34f1bea</code></a></td><td><code>added a class class CombinatorialPolyhedron</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d"><code>71c6d7a</code></a></td><td><code>corrected blocks</code></td></tr></table>




---

archive/issue_comments_414089.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nCan you still have meaningful tests here with it being split? Although I think we have mostly gone through the code currently here already. So I am not sure there will be too much merit in splitting it, but maybe someone else has a different idea.",
    "created_at": "2019-02-22T04:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414089",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:151" align="right">comment:151</div>

Can you still have meaningful tests here with it being split? Although I think we have mostly gone through the code currently here already. So I am not sure there will be too much merit in splitting it, but maybe someone else has a different idea.



---

archive/issue_comments_414090.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nOk, I leave the stuff in there.\n\nI will however return `FaceIterator` with the method `face_iter()`. This should make it much easier.\n\nAlso the dual/polar decision will be on call of face_iter.",
    "created_at": "2019-02-22T12:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414090",
    "user": "https://github.com/kliem"
}
```

<div id="comment:152" align="right">comment:152</div>

Ok, I leave the stuff in there.

I will however return `FaceIterator` with the method `face_iter()`. This should make it much easier.

Also the dual/polar decision will be on call of face_iter.



---

archive/issue_comments_414091.json:
```json
{
    "body": "Changed commit from **[`71c6d7a`](https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d)** to **[`6052b61`](https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee)**",
    "created_at": "2019-02-26T13:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414091",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`71c6d7a`](https://github.com/sagemath/sagetrac-mirror/commit/71c6d7a400c3c7db3f1c27be559a5d50619fe56d)** to **[`6052b61`](https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee)**



---

archive/issue_comments_414092.json:
```json
{
    "body": "<div id=\"comment:153\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee\"><code>6052b61</code></a></td><td><code>FaceIterator is an actual iterator now</code></td></tr></table>\n",
    "created_at": "2019-02-26T13:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414092",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:153"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee"><code>6052b61</code></a></td><td><code>FaceIterator is an actual iterator now</code></td></tr></table>




---

archive/issue_events_366440.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-02-26T13:55:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366440"
}
```



---

archive/issue_events_366441.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-02-26T13:55:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366441"
}
```



---

archive/issue_comments_414093.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nMainly I just changed `FaceIterator` to be an iterator. This also helped my remove most cython examples.\n\n`FaceIterator` and `ListOfAllFaces` should take care of the special cases themselves now.\n\n`CombinatorialPolyhedron` almost doesn't know anything about dual anymore. This is a way to initialize `FaceIterator`.",
    "created_at": "2019-02-26T13:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414093",
    "user": "https://github.com/kliem"
}
```

<div id="comment:154" align="right">comment:154</div>

Mainly I just changed `FaceIterator` to be an iterator. This also helped my remove most cython examples.

`FaceIterator` and `ListOfAllFaces` should take care of the special cases themselves now.

`CombinatorialPolyhedron` almost doesn't know anything about dual anymore. This is a way to initialize `FaceIterator`.



---

archive/issue_comments_414094.json:
```json
{
    "body": "Changed commit from **[`6052b61`](https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee)** to **[`c30e60d`](https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d)**",
    "created_at": "2019-02-26T15:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414094",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6052b61`](https://github.com/sagemath/sagetrac-mirror/commit/6052b6138d488608c5ba11ea05525648aea1b4ee)** to **[`c30e60d`](https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d)**



---

archive/issue_comments_414095.json:
```json
{
    "body": "<div id=\"comment:155\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d\"><code>c30e60d</code></a></td><td><code>fixed allocation of array</code></td></tr></table>\n",
    "created_at": "2019-02-26T15:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414095",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:155"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d"><code>c30e60d</code></a></td><td><code>fixed allocation of array</code></td></tr></table>




---

archive/issue_comments_414096.json:
```json
{
    "body": "<div id=\"comment:156\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13\"><code>e8309e4</code></a></td><td><code>fixed allocation of array</code></td></tr></table>\n",
    "created_at": "2019-02-26T15:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414096",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:156"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13"><code>e8309e4</code></a></td><td><code>fixed allocation of array</code></td></tr></table>




---

archive/issue_comments_414097.json:
```json
{
    "body": "Changed commit from **[`c30e60d`](https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d)** to **[`e8309e4`](https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13)**",
    "created_at": "2019-02-26T15:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414097",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c30e60d`](https://github.com/sagemath/sagetrac-mirror/commit/c30e60d74f700fc389e2e2b36a2ce005ca44f02d)** to **[`e8309e4`](https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13)**



---

archive/issue_comments_414098.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nPlease do not use \n\n```\n++        sage: it.next()\n```\nbut\n`next(it)`\nfor compatibility with python3.",
    "created_at": "2019-02-26T19:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414098",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:157" align="right">comment:157</div>

Please do not use 

```
++        sage: it.next()
```
but
`next(it)`
for compatibility with python3.



---

archive/issue_comments_414099.json:
```json
{
    "body": "<div id=\"comment:158\" align=\"right\">comment:158</div>\n\nDo you recommend to also remove `next = __next__` then?",
    "created_at": "2019-02-26T21:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414099",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:158" align="right">comment:158</div>

Do you recommend to also remove `next = __next__` then?



---

archive/issue_comments_414100.json:
```json
{
    "body": "<div id=\"comment:159\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37\"><code>6a55fa5</code></a></td><td><code>it.next() -> next(it), also fixed face_lattice_facet_repr for trivial cases</code></td></tr></table>\n",
    "created_at": "2019-02-26T22:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414100",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:159"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37"><code>6a55fa5</code></a></td><td><code>it.next() -> next(it), also fixed face_lattice_facet_repr for trivial cases</code></td></tr></table>




---

archive/issue_comments_414101.json:
```json
{
    "body": "Changed commit from **[`e8309e4`](https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13)** to **[`6a55fa5`](https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37)**",
    "created_at": "2019-02-26T22:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414101",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8309e4`](https://github.com/sagemath/sagetrac-mirror/commit/e8309e4c706335d981a70ed67bdaa7ea96a3ca13)** to **[`6a55fa5`](https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37)**



---

archive/issue_comments_414102.json:
```json
{
    "body": "<div id=\"comment:160\" align=\"right\">comment:160</div>\n\nReplying to [@jdemeyer](#comment:158):\n> Do you recommend to also remove `next = __next__` then?\n\nI guess Cython takes care of that automatically. I read somewhere, that one should do that and indeed this seems to be true for defining a Python iterator class.",
    "created_at": "2019-02-26T22:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414102",
    "user": "https://github.com/kliem"
}
```

<div id="comment:160" align="right">comment:160</div>

Replying to [@jdemeyer](#comment:158):
> Do you recommend to also remove `next = __next__` then?

I guess Cython takes care of that automatically. I read somewhere, that one should do that and indeed this seems to be true for defining a Python iterator class.



---

archive/issue_comments_414103.json:
```json
{
    "body": "<div id=\"comment:161\" align=\"right\">comment:161</div>\n\nI am going through the doc right now.\n\nA general issue I noticed:\n\n```diff\n INPUT:\n \n-- `foo` -- lorem ipsum\n+- ``foo`` -- lorem ipsum\n```\nso it is formatted as code and not latex. There might be other cases in the docstrings themselves that should be code formatted. These bullet points for `INPUT:` do not, by general Sage convention, end in a period/full-stop.\n\nAnother general issue, three `.`'s are needed here:\n\n```diff\n         Traceback (most recent call last):\n-        ..\n+        ...\n         ValueError: entries of `tup` are not distinct\n```\n\nTypo: <code>\\`ouput\\`</code>\n\nInstead of doing the `next(it)` a bunch of times, how about doing\n\n```sage\nsage: [next(it) for _ in range(14)]\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1]\n```\n\n```diff\n     The algorithm to visit all proper faces exactly once is roughly\n-    equivalent to:\n+    equivalent to::\n \n-    faces = [set(facet) for facet in self.facets()]\n-    ComputeNextStep(facets, [])\n+        faces = [set(facet) for facet in self.facets()]\n+        ComputeNextStep(facets, [])\n```\n(This will not be executed as code as there is no leading `sage:`.)\nSimilar comment for the `ALGORITHM:` block in `FaceIterator`'s class-level docstring.\n\nYou can use `bint` for `dual` in `FaceIterator.__init__`.\n\nI would drop the `An` from the repr of `FaceIterator` (this is another general convention we mostly stick to).\n\n```diff\n-raise StopIteration()\n+raise StopIteration\n```\n\n```diff\n-Returns the length of the vertex_repr.\n+Return the length of the :meth:`vertex_repr`.\n```\nand similar for `facet_repr`.\n\nYou should use `Return` instead of `Returns` (I think the former is called the definitive form of the verb). (I think this is a PEP8 thing; at the very least it is a Sage convention.)\n\nThe tests for `vertex_repr_length` and `facet_repr_length` I would say are not so meaningful. I think better tests would be to check it against `it.length_vertex_repr() == len(it.vertex_repr())`.\n\nYou might find the `.. WARNING::` environment useful for the `next_face()` docstring.\n\nIt is good to add a `TestSuite(foo).run()` call in the `__init__` method doctests.\n\nThis is malformatted:\n\n```diff\n       * ``nr_lines`` -- for bounded Polyhedra, this should be the\n-      default: ``None``. For unbounded Polyhedra, this needs to be set\n-      to the correct nr of lines, i.e. the the maximum nr of lines with\n-      linearly independent directions in the Polyehdron.\n+        default: ``None``. For unbounded Polyhedra, this needs to be set\n+        to the correct nr of lines, i.e. the the maximum nr of lines with\n+        linearly independent directions in the Polyehdron.\n```\n\n```diff\n       * ``unbounded`` -- for bounded Polyhedra, this should be the\n-      default ``None``. For unbounded Polyhedra, this needs to be set\n-      to the correct nr of lines, i.e. the the maximum nr of lines with\n-     linearly independent directions in the Polyehdron.\n+        default ``None``. For unbounded Polyhedra, this needs to be set\n+        to the correct nr of lines, i.e. the the maximum nr of lines with\n+        linearly independent directions in the Polyehdron.\n```\n\nIt is good to spell things out in the doc IMO:\n\n```diff\n-Specifying the nr of lines is important::\n+Specifying the number of lines is important::\n```\n\nThere's a few places you use `f_vector` that is plain formatted. I think you either should use <code>\\`f\\`-vector</code>/`f-vector` or <code>\\`\\`f_vector\\`\\`</code>.\n\n```diff\n-If `names` is set to True, then names of the vertices are used.\n+If ``names`` is ``True``, then names of the vertices are used.\n```\n\nIn general, do not feel the need to stick to 80 chars/line in code for things like\n\n```\n                self._f_vector = \\\n                    tuple(Integer(f_vector[dim+1-i]) for i in range(dim+2))\n```\nas I think it makes the code harder to read.\n\nI might have more comments later, but that is what I got for now.",
    "created_at": "2019-02-27T02:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414103",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:161" align="right">comment:161</div>

I am going through the doc right now.

A general issue I noticed:

```diff
 INPUT:
 
-- `foo` -- lorem ipsum
+- ``foo`` -- lorem ipsum
```
so it is formatted as code and not latex. There might be other cases in the docstrings themselves that should be code formatted. These bullet points for `INPUT:` do not, by general Sage convention, end in a period/full-stop.

Another general issue, three `.`'s are needed here:

```diff
         Traceback (most recent call last):
-        ..
+        ...
         ValueError: entries of `tup` are not distinct
```

Typo: <code>\`ouput\`</code>

Instead of doing the `next(it)` a bunch of times, how about doing

```sage
sage: [next(it) for _ in range(14)]
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1]
```

```diff
     The algorithm to visit all proper faces exactly once is roughly
-    equivalent to:
+    equivalent to::
 
-    faces = [set(facet) for facet in self.facets()]
-    ComputeNextStep(facets, [])
+        faces = [set(facet) for facet in self.facets()]
+        ComputeNextStep(facets, [])
```
(This will not be executed as code as there is no leading `sage:`.)
Similar comment for the `ALGORITHM:` block in `FaceIterator`'s class-level docstring.

You can use `bint` for `dual` in `FaceIterator.__init__`.

I would drop the `An` from the repr of `FaceIterator` (this is another general convention we mostly stick to).

```diff
-raise StopIteration()
+raise StopIteration
```

```diff
-Returns the length of the vertex_repr.
+Return the length of the :meth:`vertex_repr`.
```
and similar for `facet_repr`.

You should use `Return` instead of `Returns` (I think the former is called the definitive form of the verb). (I think this is a PEP8 thing; at the very least it is a Sage convention.)

The tests for `vertex_repr_length` and `facet_repr_length` I would say are not so meaningful. I think better tests would be to check it against `it.length_vertex_repr() == len(it.vertex_repr())`.

You might find the `.. WARNING::` environment useful for the `next_face()` docstring.

It is good to add a `TestSuite(foo).run()` call in the `__init__` method doctests.

This is malformatted:

```diff
       * ``nr_lines`` -- for bounded Polyhedra, this should be the
-      default: ``None``. For unbounded Polyhedra, this needs to be set
-      to the correct nr of lines, i.e. the the maximum nr of lines with
-      linearly independent directions in the Polyehdron.
+        default: ``None``. For unbounded Polyhedra, this needs to be set
+        to the correct nr of lines, i.e. the the maximum nr of lines with
+        linearly independent directions in the Polyehdron.
```

```diff
       * ``unbounded`` -- for bounded Polyhedra, this should be the
-      default ``None``. For unbounded Polyhedra, this needs to be set
-      to the correct nr of lines, i.e. the the maximum nr of lines with
-     linearly independent directions in the Polyehdron.
+        default ``None``. For unbounded Polyhedra, this needs to be set
+        to the correct nr of lines, i.e. the the maximum nr of lines with
+        linearly independent directions in the Polyehdron.
```

It is good to spell things out in the doc IMO:

```diff
-Specifying the nr of lines is important::
+Specifying the number of lines is important::
```

There's a few places you use `f_vector` that is plain formatted. I think you either should use <code>\`f\`-vector</code>/`f-vector` or <code>\`\`f_vector\`\`</code>.

```diff
-If `names` is set to True, then names of the vertices are used.
+If ``names`` is ``True``, then names of the vertices are used.
```

In general, do not feel the need to stick to 80 chars/line in code for things like

```
                self._f_vector = \
                    tuple(Integer(f_vector[dim+1-i]) for i in range(dim+2))
```
as I think it makes the code harder to read.

I might have more comments later, but that is what I got for now.



---

archive/issue_comments_414104.json:
```json
{
    "body": "<div id=\"comment:162\" align=\"right\">comment:162</div>\n\nAccording to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.",
    "created_at": "2019-02-27T03:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414104",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:162" align="right">comment:162</div>

According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.



---

archive/issue_comments_414105.json:
```json
{
    "body": "<div id=\"comment:163\" align=\"right\">comment:163</div>\n\nReplying to [@jhpalmieri](#comment:162):\n> According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.\n\nThe fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include \"Python.h.\"` gives trouble on OS X with C++17. Now its only a warning and not an error though.\n\nBoth Ubuntu patchbots (44e979ad077a and quasar) use an old version of the files. I don't know why. `chunktype` has long been removed from `helper.cc`.",
    "created_at": "2019-02-27T08:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414105",
    "user": "https://github.com/kliem"
}
```

<div id="comment:163" align="right">comment:163</div>

Replying to [@jhpalmieri](#comment:162):
> According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.

The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include "Python.h."` gives trouble on OS X with C++17. Now its only a warning and not an error though.

Both Ubuntu patchbots (44e979ad077a and quasar) use an old version of the files. I don't know why. `chunktype` has long been removed from `helper.cc`.



---

archive/issue_comments_414106.json:
```json
{
    "body": "<div id=\"comment:164\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc\"><code>9f42182</code></a></td><td><code>improved documentation mostly</code></td></tr></table>\n",
    "created_at": "2019-02-27T13:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414106",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:164"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc"><code>9f42182</code></a></td><td><code>improved documentation mostly</code></td></tr></table>




---

archive/issue_comments_414107.json:
```json
{
    "body": "Changed commit from **[`6a55fa5`](https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37)** to **[`9f42182`](https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc)**",
    "created_at": "2019-02-27T13:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a55fa5`](https://github.com/sagemath/sagetrac-mirror/commit/6a55fa5dadad4d97182d55334a985bdab6e34f37)** to **[`9f42182`](https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc)**



---

archive/issue_comments_414108.json:
```json
{
    "body": "<div id=\"comment:165\" align=\"right\">comment:165</div>\n\nThanks, went through the entire document and tried to fix all of those issues.\n\nReplaced `int` by `bint` wherever I use only `True` and `False` anyway.\n\nAdded `__reduce__` with and `NotImplementedError` to the `ListOfFaces`, `FaceIterator` and `ListOfAllFaces`. One could try to implement that, but I don't see an advantage of that.\n\nReplying to [@tscrim](#comment:161):\n> I am going through the doc right now.",
    "created_at": "2019-02-27T13:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414108",
    "user": "https://github.com/kliem"
}
```

<div id="comment:165" align="right">comment:165</div>

Thanks, went through the entire document and tried to fix all of those issues.

Replaced `int` by `bint` wherever I use only `True` and `False` anyway.

Added `__reduce__` with and `NotImplementedError` to the `ListOfFaces`, `FaceIterator` and `ListOfAllFaces`. One could try to implement that, but I don't see an advantage of that.

Replying to [@tscrim](#comment:161):
> I am going through the doc right now.



---

archive/issue_comments_414109.json:
```json
{
    "body": "<div id=\"comment:166\" align=\"right\">comment:166</div>\n\nReplying to [@kliem](#comment:163):\n> Replying to [@jhpalmieri](#comment:162):\n> > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.\n\n> \n> The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include \"Python.h.\"` gives trouble on OS X with C++17. Now its only a warning and not an error though.\n\nI'm confused: if it's fixed, why does the build fail?\n\n```\nExecuting 21 commands (using 1 thread)\n[ 1/21] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -Isage/geometry/polyhedron/combinatorial_polyhedron -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cysignals -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c++11\nIn file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:47:\nIn file included from ../local/include/python2.7/Python.h:88:\n../local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* Object */\n    ^~~~~~~~~\n../local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj      /* Object */\n    ^~~~~~~~~\n../local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register const wchar_t *w,  /* wchar_t buffer */\n    ^~~~~~~~~\n../local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register wchar_t *w,        /* wchar_t buffer */\n    ^~~~~~~~~\nIn file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:47:\nIn file included from ../local/include/python2.7/Python.h:97:\n../local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register PyObject *obj,     /* string or Unicode object */\n    ^~~~~~~~~\n../local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register char **s,          /* pointer to buffer variable */\n    ^~~~~~~~~\n../local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]\n    register Py_ssize_t *len    /* pointer to length variable or NULL\n    ^~~~~~~~~\nIn file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:\nbuild/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized\n    int addfacearray[constlenfaces - 1] = { };\n                     ^~~~~~~~~~~~~~~~~\n7 warnings and 1 error generated.\n[ 2/21] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/cpython -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cypari2 -I./sage/libs/ntl -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cysignals -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c build/cythonized/sage/rings/complex_arb.c -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/rings/complex_arb.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99\nerror: command 'gcc' failed with exit status 1\nmake[4]: *** [sage] Error 1\n```",
    "created_at": "2019-02-27T18:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414109",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:166" align="right">comment:166</div>

Replying to [@kliem](#comment:163):
> Replying to [@jhpalmieri](#comment:162):
> > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.

> 
> The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include "Python.h."` gives trouble on OS X with C++17. Now its only a warning and not an error though.

I'm confused: if it's fixed, why does the build fail?

```
Executing 21 commands (using 1 thread)
[ 1/21] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -Isage/geometry/polyhedron/combinatorial_polyhedron -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cysignals -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c++11
In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:47:
In file included from ../local/include/python2.7/Python.h:88:
../local/include/python2.7/unicodeobject.h:534:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* Object */
    ^~~~~~~~~
../local/include/python2.7/unicodeobject.h:553:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj      /* Object */
    ^~~~~~~~~
../local/include/python2.7/unicodeobject.h:575:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register const wchar_t *w,  /* wchar_t buffer */
    ^~~~~~~~~
../local/include/python2.7/unicodeobject.h:593:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register wchar_t *w,        /* wchar_t buffer */
    ^~~~~~~~~
In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:47:
In file included from ../local/include/python2.7/Python.h:97:
../local/include/python2.7/stringobject.h:173:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register PyObject *obj,     /* string or Unicode object */
    ^~~~~~~~~
../local/include/python2.7/stringobject.h:174:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register char **s,          /* pointer to buffer variable */
    ^~~~~~~~~
../local/include/python2.7/stringobject.h:175:5: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    register Py_ssize_t *len    /* pointer to length variable or NULL
    ^~~~~~~~~
In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:
build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized
    int addfacearray[constlenfaces - 1] = { };
                     ^~~~~~~~~~~~~~~~~
7 warnings and 1 error generated.
[ 2/21] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I./sage/cpython -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cypari2 -I./sage/libs/ntl -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/cysignals -I/Users/jpalmier/Desktop/Sage/git/sage/local/include -I/Users/jpalmier/Desktop/Sage/git/sage/src/sage/ext -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -I/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/jpalmier/Desktop/Sage/git/sage/local/include/python2.7 -c build/cythonized/sage/rings/complex_arb.c -o build/temp.macosx-10.9-x86_64-2.7/build/cythonized/sage/rings/complex_arb.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99
error: command 'gcc' failed with exit status 1
make[4]: *** [sage] Error 1
```



---

archive/issue_comments_414110.json:
```json
{
    "body": "<div id=\"comment:167\" align=\"right\">comment:167</div>\n\nReplying to [@jhpalmieri](#comment:166):\n> Replying to [@kliem](#comment:163):\n> > Replying to [@jhpalmieri](#comment:162):\n> > > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.\n\n> > \n> > The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include \"Python.h.\"` gives trouble on OS X with C++17. Now its only a warning and not an error though.\n\n> \n> I'm confused: if it's fixed, why does the build fail?\n> \n> ```\n> In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:\n> build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized\n>     int addfacearray[constlenfaces - 1] = { };\n> ```\n\nThis line is not part of helper.cc anymore. I have no idea, why the patchbot uses an old version.",
    "created_at": "2019-02-27T18:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414110",
    "user": "https://github.com/kliem"
}
```

<div id="comment:167" align="right">comment:167</div>

Replying to [@jhpalmieri](#comment:166):
> Replying to [@kliem](#comment:163):
> > Replying to [@jhpalmieri](#comment:162):
> > > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.

> > 
> > The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include "Python.h."` gives trouble on OS X with C++17. Now its only a warning and not an error though.

> 
> I'm confused: if it's fixed, why does the build fail?
> 
> ```
> In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:
> build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized
>     int addfacearray[constlenfaces - 1] = { };
> ```

This line is not part of helper.cc anymore. I have no idea, why the patchbot uses an old version.



---

archive/issue_comments_414111.json:
```json
{
    "body": "<div id=\"comment:168\" align=\"right\">comment:168</div>\n\n\n```\nRunning doctests with ID 2019-02-27-15-17-15-308038d2.\nGit branch: patchbot/ticket_merged\nUsing --optional=ccache,dochtml,memlimit,mpir,python2,sage\nDoctesting entire Sage library.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 3799 files using 2 threads.\nsage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pxd\n    [0 tests, 0.00 s]\nsage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 736, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension\nFailed example:\n    calculate_dimension(facets)\nException raised:\n    Traceback (most recent call last):\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[4]>\", line 1, in <module>\n        calculate_dimension(facets)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)\n        cpdef int calculate_dimension(ListOfFaces faces) except -2:\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)\n        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)\n        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)\n        sig_on()\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 738, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension\nFailed example:\n    calculate_dimension(vertices)\nException raised:\n    Traceback (most recent call last):\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[5]>\", line 1, in <module>\n        calculate_dimension(vertices)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)\n        cpdef int calculate_dimension(ListOfFaces faces) except -2:\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)\n        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)\n        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)\n        sig_on()\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 766, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension\nFailed example:\n    for _ in range(10):\n        points = tuple(tuple(randint(-1000,1000) for _ in range(10))\n                       for _ in range(randint(3,15)))\n        P = Polyhedron(vertices=points)\n        facets = get_facets_from_incidence_matrix(P.incidence_matrix())\n        vertices = get_vertices_from_incidence_matrix(P.incidence_matrix())\n        d1 = P.dimension()\n        d2 = calculate_dimension(facets)\n        d3 = calculate_dimension(vertices)\n        if not d1 == d2 == d3:\n            print('calculation_dimension() seems to be incorrect')\nException raised:\n    Traceback (most recent call last):\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[8]>\", line 8, in <module>\n        d2 = calculate_dimension(facets)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)\n        cpdef int calculate_dimension(ListOfFaces faces) except -2:\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)\n        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)\n        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)\n        sig_on()\n    SignalError: Segmentation fault\n    Killed due to segmentation fault\n**********************************************************************\n```\n\nThis has me wondering, what went wrong.\n\nProbably, I should have included\n\n```\n#include <cstdlib>\nusing namespace std;\n```\n\nin `helper.cc` in order for `calloc` to work the way I use it. Also I should probably `return -1` if `calloc` returns `NULL` and add `except -1` to `get_next_level`. Woudn't give a nice error message yet, but at least prevent thing from crashing if `calloc` returns `NULL`.\n\nAlternatively I could still try to allocate the memory with `int ommitfacearray[lenfaces-1]` and pass `lenfaces` to `get_next_level` as `const size_t`.\n\nA third way would be to allocate the memory with `int *ommitfacearray = new int[lenfaces-1]` and still have `lenfaces` be of type `const size_t`.\n\nA fourth way, would be to allocate the memory in Cython and pass it to the function. Then one could also allocate the array only once for an entire `FaceIterator`.\n\nIs my guess for the `Segmentation fault` even likely?",
    "created_at": "2019-02-27T18:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414111",
    "user": "https://github.com/kliem"
}
```

<div id="comment:168" align="right">comment:168</div>


```
Running doctests with ID 2019-02-27-15-17-15-308038d2.
Git branch: patchbot/ticket_merged
Using --optional=ccache,dochtml,memlimit,mpir,python2,sage
Doctesting entire Sage library.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 3799 files using 2 threads.
sage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pxd
    [0 tests, 0.00 s]
sage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 736, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension
Failed example:
    calculate_dimension(facets)
Exception raised:
    Traceback (most recent call last):
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[4]>", line 1, in <module>
        calculate_dimension(facets)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)
        cpdef int calculate_dimension(ListOfFaces faces) except -2:
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)
        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)
        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)
        sig_on()
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 738, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension
Failed example:
    calculate_dimension(vertices)
Exception raised:
    Traceback (most recent call last):
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[5]>", line 1, in <module>
        calculate_dimension(vertices)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)
        cpdef int calculate_dimension(ListOfFaces faces) except -2:
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)
        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)
        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)
        sig_on()
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 766, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension
Failed example:
    for _ in range(10):
        points = tuple(tuple(randint(-1000,1000) for _ in range(10))
                       for _ in range(randint(3,15)))
        P = Polyhedron(vertices=points)
        facets = get_facets_from_incidence_matrix(P.incidence_matrix())
        vertices = get_vertices_from_incidence_matrix(P.incidence_matrix())
        d1 = P.dimension()
        d2 = calculate_dimension(facets)
        d3 = calculate_dimension(vertices)
        if not d1 == d2 == d3:
            print('calculation_dimension() seems to be incorrect')
Exception raised:
    Traceback (most recent call last):
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/local/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension[8]>", line 8, in <module>
        d2 = calculate_dimension(facets)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 723, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6467)
        cpdef int calculate_dimension(ListOfFaces faces) except -2:
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 783, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6419)
        return calculate_dimension_loop(faces.data, nr_faces, faces.face_length)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 838, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6675)
        return calculate_dimension_loop(newfaces2data, new_nr_faces, face_length) + 1
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 830, in sage.geometry.polyhedron.combinatorial_polyhedron.base.calculate_dimension_loop (build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:6648)
        sig_on()
    SignalError: Segmentation fault
    Killed due to segmentation fault
**********************************************************************
```

This has me wondering, what went wrong.

Probably, I should have included

```
#include <cstdlib>
using namespace std;
```

in `helper.cc` in order for `calloc` to work the way I use it. Also I should probably `return -1` if `calloc` returns `NULL` and add `except -1` to `get_next_level`. Woudn't give a nice error message yet, but at least prevent thing from crashing if `calloc` returns `NULL`.

Alternatively I could still try to allocate the memory with `int ommitfacearray[lenfaces-1]` and pass `lenfaces` to `get_next_level` as `const size_t`.

A third way would be to allocate the memory with `int *ommitfacearray = new int[lenfaces-1]` and still have `lenfaces` be of type `const size_t`.

A fourth way, would be to allocate the memory in Cython and pass it to the function. Then one could also allocate the array only once for an entire `FaceIterator`.

Is my guess for the `Segmentation fault` even likely?



---

archive/issue_comments_414112.json:
```json
{
    "body": "Changed commit from **[`9f42182`](https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc)** to **[`687d003`](https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419)**",
    "created_at": "2019-02-27T19:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414112",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f42182`](https://github.com/sagemath/sagetrac-mirror/commit/9f421825ae6eaa4bc800b978ba7e9d529434a0fc)** to **[`687d003`](https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419)**



---

archive/issue_comments_414113.json:
```json
{
    "body": "<div id=\"comment:169\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419\"><code>687d003</code></a></td><td><code>replaced calloc by new[]</code></td></tr></table>\n",
    "created_at": "2019-02-27T19:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414113",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:169"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419"><code>687d003</code></a></td><td><code>replaced calloc by new[]</code></td></tr></table>




---

archive/issue_comments_414114.json:
```json
{
    "body": "<div id=\"comment:170\" align=\"right\">comment:170</div>\n\n`new[]` worked fine before, so I tried that. I hope this solves the issue.\n\nI did some googling and got the impression, that `calloc` etc. is not really the C++ way of doing it.\n\nBtw, helper.cc doesn't use anything C++-specific anymore, so if necessary I could switch to C again. At the moment I don't think it matters.\n\nReplying to [@kliem](#comment:168):",
    "created_at": "2019-02-27T19:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414114",
    "user": "https://github.com/kliem"
}
```

<div id="comment:170" align="right">comment:170</div>

`new[]` worked fine before, so I tried that. I hope this solves the issue.

I did some googling and got the impression, that `calloc` etc. is not really the C++ way of doing it.

Btw, helper.cc doesn't use anything C++-specific anymore, so if necessary I could switch to C again. At the moment I don't think it matters.

Replying to [@kliem](#comment:168):



---

archive/issue_comments_414115.json:
```json
{
    "body": "<div id=\"comment:171\" align=\"right\">comment:171</div>\n\nReplying to [@kliem](#comment:170):\n> `new[]` worked fine before, so I tried that. I hope this solves the issue.\n> \n> I did some googling and got the impression, that `calloc` etc. is not really the C++ way of doing it.\n\nYes, that is my understanding: you should use `new[]` and `delete[]` in C++.\n\n> Btw, helper.cc doesn't use anything C++-specific anymore, so if necessary I could switch to C again. At the moment I don't think it matters.\n\nMy understanding is that it does make some minor differences (with compile time, optimization, standards, etc.), but usually not anything noticeable at this scale. Although if it is all pure C except for the `malloc` vs. `new[]`, I might consider going back to pure C. Yet I have not been in the C/C++ game for a little while and would never classify myself as an expert, so someone who is more knowledgeable in that realm, please correct me if I am wrong.",
    "created_at": "2019-02-27T23:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414115",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:171" align="right">comment:171</div>

Replying to [@kliem](#comment:170):
> `new[]` worked fine before, so I tried that. I hope this solves the issue.
> 
> I did some googling and got the impression, that `calloc` etc. is not really the C++ way of doing it.

Yes, that is my understanding: you should use `new[]` and `delete[]` in C++.

> Btw, helper.cc doesn't use anything C++-specific anymore, so if necessary I could switch to C again. At the moment I don't think it matters.

My understanding is that it does make some minor differences (with compile time, optimization, standards, etc.), but usually not anything noticeable at this scale. Although if it is all pure C except for the `malloc` vs. `new[]`, I might consider going back to pure C. Yet I have not been in the C/C++ game for a little while and would never classify myself as an expert, so someone who is more knowledgeable in that realm, please correct me if I am wrong.



---

archive/issue_comments_414116.json:
```json
{
    "body": "<div id=\"comment:172\" align=\"right\">comment:172</div>\n\nOne of my colleges just gave me some input on readability.\n\nI will go through the code again and improve readability.",
    "created_at": "2019-03-01T11:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414116",
    "user": "https://github.com/kliem"
}
```

<div id="comment:172" align="right">comment:172</div>

One of my colleges just gave me some input on readability.

I will go through the code again and improve readability.



---

archive/issue_events_366442.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-03-01T17:04:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366442"
}
```



---

archive/issue_events_366443.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-03-01T17:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366443"
}
```



---

archive/issue_comments_414117.json:
```json
{
    "body": "<div id=\"comment:173\" align=\"right\">comment:173</div>\n\nAs mentioned above, I will try to make the comments more readable. (Writing complete English sentences. More intuitive positions of comments. Etc.)\n\nI will probably also change a few names as `facet_repr()` -> `set_facet_repr()` and then call the corresponding attribute maybe just `facet_repr`. Maybe add `_current_face` to both.\n\nI have no intentions of changing any actual code, other than renaming (if I think a new name is more descriptive). Maybe I should create a mapping table of renamings?",
    "created_at": "2019-03-01T17:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414117",
    "user": "https://github.com/kliem"
}
```

<div id="comment:173" align="right">comment:173</div>

As mentioned above, I will try to make the comments more readable. (Writing complete English sentences. More intuitive positions of comments. Etc.)

I will probably also change a few names as `facet_repr()` -> `set_facet_repr()` and then call the corresponding attribute maybe just `facet_repr`. Maybe add `_current_face` to both.

I have no intentions of changing any actual code, other than renaming (if I think a new name is more descriptive). Maybe I should create a mapping table of renamings?



---

archive/issue_comments_414118.json:
```json
{
    "body": "<div id=\"comment:174\" align=\"right\">comment:174</div>\n\nReplying to [@kliem](#comment:167):\n> Replying to [@jhpalmieri](#comment:166):\n> > Replying to [@kliem](#comment:163):\n> > > Replying to [@jhpalmieri](#comment:162):\n> > > > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.\n\n> > > \n> > > The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include \"Python.h.\"` gives trouble on OS X with C++17. Now its only a warning and not an error though.\n\n> > \n> > I'm confused: if it's fixed, why does the build fail?\n> > \n> > ```\n> > In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:\n> > build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized\n> >     int addfacearray[constlenfaces - 1] = { };\n> > ```\n\n> \n> This line is not part of helper.cc anymore. I have no idea, why the patchbot uses an old version.\n\nIt looks like I stumbled over the same problem at my machine. I changed function names in `helper.cc` and sage build would completely ignore those changes. Meaning I couldn't use the functions by their new names, but I could use them by their old names.\n\nSomewhere `helper.cc` was cached and it was constantly taken from there.\n\nDeleting the cashed files in\n\n`src/build/cythonized/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron`\nand\n`sage/src/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron`\n\nseems to be the solution. The patchbots don't do that I assume.\n\nWhat's going on?",
    "created_at": "2019-03-01T23:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414118",
    "user": "https://github.com/kliem"
}
```

<div id="comment:174" align="right">comment:174</div>

Replying to [@kliem](#comment:167):
> Replying to [@jhpalmieri](#comment:166):
> > Replying to [@kliem](#comment:163):
> > > Replying to [@jhpalmieri](#comment:162):
> > > > According to [the patchbots](https://patchbot.sagemath.org/ticket/26887), the build is failing on a few different platforms.

> > > 
> > > The fail on Darwin is due to an issue, I fixed already (comment 156). Declaring `lenfaces` as constant at function call, might have solved it as well. Also this build issues number of warnings due to python2.7/Python.h being incompatible with C++17. We had those problems before, where a mere `#include "Python.h."` gives trouble on OS X with C++17. Now its only a warning and not an error though.

> > 
> > I'm confused: if it's fixed, why does the build fail?
> > 
> > ```
> > In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.cpp:3621:
> > build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/helper.cc:207:22: error: variable-sized object may not be initialized
> >     int addfacearray[constlenfaces - 1] = { };
> > ```

> 
> This line is not part of helper.cc anymore. I have no idea, why the patchbot uses an old version.

It looks like I stumbled over the same problem at my machine. I changed function names in `helper.cc` and sage build would completely ignore those changes. Meaning I couldn't use the functions by their new names, but I could use them by their old names.

Somewhere `helper.cc` was cached and it was constantly taken from there.

Deleting the cashed files in

`src/build/cythonized/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron`
and
`sage/src/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron`

seems to be the solution. The patchbots don't do that I assume.

What's going on?



---

archive/issue_comments_414119.json:
```json
{
    "body": "<div id=\"comment:175\" align=\"right\">comment:175</div>\n\nI saw this, too, and after deleting those files, this built on my OS X box. I don't know if they are supposed to be cleaned up automatically somehow or not.",
    "created_at": "2019-03-02T01:04:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414119",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:175" align="right">comment:175</div>

I saw this, too, and after deleting those files, this built on my OS X box. I don't know if they are supposed to be cleaned up automatically somehow or not.



---

archive/issue_comments_414120.json:
```json
{
    "body": "<div id=\"comment:176\" align=\"right\">comment:176</div>\n\nThere seem to be scenarios where `KeyboardInterrupt` cause sage to crash. It will not use CPU anymore, so somehow it seems to work. But it will look exactly like a failed interrupt, so nothing works anymore in that session.\n\nIt seems to happen between 0--10 percent of the time, when trying to interrupt:\n\n```\nsage: from itertools import combinations\nsage: N = combinations(range(200),199)\nsage: C = CombinatorialPolyhedron(N)\nsage: C.dimension()\n199\nsage: C.f_vector()\n```\n\nhttps://patchbot.sagemath.org/log/26887/debian/9.8/x86_64/4.9.0-8-amd64/zancara/2019-03-03%2002:41:50?short\n\nI have tried to figure it out, but I have no idea, what could have happened.",
    "created_at": "2019-03-04T14:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414120",
    "user": "https://github.com/kliem"
}
```

<div id="comment:176" align="right">comment:176</div>

There seem to be scenarios where `KeyboardInterrupt` cause sage to crash. It will not use CPU anymore, so somehow it seems to work. But it will look exactly like a failed interrupt, so nothing works anymore in that session.

It seems to happen between 0--10 percent of the time, when trying to interrupt:

```
sage: from itertools import combinations
sage: N = combinations(range(200),199)
sage: C = CombinatorialPolyhedron(N)
sage: C.dimension()
199
sage: C.f_vector()
```

https://patchbot.sagemath.org/log/26887/debian/9.8/x86_64/4.9.0-8-amd64/zancara/2019-03-03%2002:41:50?short

I have tried to figure it out, but I have no idea, what could have happened.



---

archive/issue_comments_414121.json:
```json
{
    "body": "<div id=\"comment:177\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17\"><code>f8a201e</code></a></td><td><code>Improved comments all through base.pyx</code></td></tr></table>\n",
    "created_at": "2019-03-05T15:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:177"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17"><code>f8a201e</code></a></td><td><code>Improved comments all through base.pyx</code></td></tr></table>




---

archive/issue_comments_414122.json:
```json
{
    "body": "Changed commit from **[`687d003`](https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419)** to **[`f8a201e`](https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17)**",
    "created_at": "2019-03-05T15:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`687d003`](https://github.com/sagemath/sagetrac-mirror/commit/687d0032794306c563430f03391fac3ba7bf9419)** to **[`f8a201e`](https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17)**



---

archive/issue_comments_414123.json:
```json
{
    "body": "<div id=\"comment:178\" align=\"right\">comment:178</div>\n\nI hope this is easier to read now. I actually went through all the files.\n\nAt the moment the tests with `alarm` are unstable.\n\nI don't know why. Can anyone figure it out. Or should I just remove them? Especially `CombinatorialPolyhedron.f_vector()` seems to be pretty easy to trace.\n\nIf anyone cares, here is a list of some of the more important renamings I did:\n\n```\nCountFaceBits                           ->  count_atoms\nfacet_repr_from_bitrep                  ->  bit_repr_to_coatom_repr\nchar_from_tuple                         ->  vertex_list_to_bit_repr\nchar_from_incidence                     ->  incidences_to_bit_repr\nforbidden                               ->  visited_all\nnr_forbidden                            ->  nr_visited_all\nget_facets_from_incidence_matrix        ->  incidence_matrix_to_bit_repr_of_facets\nget_vertices_from_incidence_matrix      ->  incidence_matrix_to_bit_repr_of_vertices\nget_facets_bitrep_from_facets_tuple     ->  facets_tuple_to_bit_repr_of_facets\nget_vertices_bitrep_from_facets_tuple   ->  facets_tuple_to_bit_repr_of_vertices\nvertex_repr_from_bitrep                 ->  bit_repr_to_vertex_list\nFaceIterator.record_dimension           ->  FaceIterator.request_dimension\nFaceIterator.yet_to_yield               ->  FaceIterator.yet_to_visit\nFaceIterator.atom_repr_face             ->  FaceIterator.atom_repr\nFaceIterator.coatom_repr_face           ->  FaceIterator.coatom_repr\nFaceIterator.atom_repr                  ->  FaceIterator.set_atom_repr\nFaceIterator.coatom_repr                ->  FaceIterator.set_coatom_repr\nListOfAllFaces.atom_repr_face           ->  ListOfAllFaces.atom_repr\nListOfAllFaces.coatom_repr_face         ->  ListOfAllFaces.coatom_repr\nListOfAllFaces.atom_repr                ->  ListOfAllFaces.set_atom_repr\nListOfAllFaces.coatom_repr              ->  ListOfAllFaces.set_coatom_repr\nListOfAllFaces.incidence_is_initialized ->  ListOfAllFaces.is_incidence_initialized\n```",
    "created_at": "2019-03-05T15:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414123",
    "user": "https://github.com/kliem"
}
```

<div id="comment:178" align="right">comment:178</div>

I hope this is easier to read now. I actually went through all the files.

At the moment the tests with `alarm` are unstable.

I don't know why. Can anyone figure it out. Or should I just remove them? Especially `CombinatorialPolyhedron.f_vector()` seems to be pretty easy to trace.

If anyone cares, here is a list of some of the more important renamings I did:

```
CountFaceBits                           ->  count_atoms
facet_repr_from_bitrep                  ->  bit_repr_to_coatom_repr
char_from_tuple                         ->  vertex_list_to_bit_repr
char_from_incidence                     ->  incidences_to_bit_repr
forbidden                               ->  visited_all
nr_forbidden                            ->  nr_visited_all
get_facets_from_incidence_matrix        ->  incidence_matrix_to_bit_repr_of_facets
get_vertices_from_incidence_matrix      ->  incidence_matrix_to_bit_repr_of_vertices
get_facets_bitrep_from_facets_tuple     ->  facets_tuple_to_bit_repr_of_facets
get_vertices_bitrep_from_facets_tuple   ->  facets_tuple_to_bit_repr_of_vertices
vertex_repr_from_bitrep                 ->  bit_repr_to_vertex_list
FaceIterator.record_dimension           ->  FaceIterator.request_dimension
FaceIterator.yet_to_yield               ->  FaceIterator.yet_to_visit
FaceIterator.atom_repr_face             ->  FaceIterator.atom_repr
FaceIterator.coatom_repr_face           ->  FaceIterator.coatom_repr
FaceIterator.atom_repr                  ->  FaceIterator.set_atom_repr
FaceIterator.coatom_repr                ->  FaceIterator.set_coatom_repr
ListOfAllFaces.atom_repr_face           ->  ListOfAllFaces.atom_repr
ListOfAllFaces.coatom_repr_face         ->  ListOfAllFaces.coatom_repr
ListOfAllFaces.atom_repr                ->  ListOfAllFaces.set_atom_repr
ListOfAllFaces.coatom_repr              ->  ListOfAllFaces.set_coatom_repr
ListOfAllFaces.incidence_is_initialized ->  ListOfAllFaces.is_incidence_initialized
```



---

archive/issue_events_366444.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-03-05T15:28:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366444"
}
```



---

archive/issue_events_366445.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-03-05T15:28:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366445"
}
```



---

archive/issue_comments_414124.json:
```json
{
    "body": "<div id=\"comment:179\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689\"><code>df43a2d</code></a></td><td><code>improved pseudo-code Algorithm in ``FaceIterator``</code></td></tr></table>\n",
    "created_at": "2019-03-06T14:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414124",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:179"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689"><code>df43a2d</code></a></td><td><code>improved pseudo-code Algorithm in ``FaceIterator``</code></td></tr></table>




---

archive/issue_comments_414125.json:
```json
{
    "body": "Changed commit from **[`f8a201e`](https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17)** to **[`df43a2d`](https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689)**",
    "created_at": "2019-03-06T14:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8a201e`](https://github.com/sagemath/sagetrac-mirror/commit/f8a201e41ffc28d9903499988aed2f86db2dee17)** to **[`df43a2d`](https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689)**



---

archive/issue_comments_414126.json:
```json
{
    "body": "<div id=\"comment:180\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e\"><code>b73e53c</code></a></td><td><code>Corrected a mathematical error in explonation.</code></td></tr></table>\n",
    "created_at": "2019-03-06T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414126",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:180"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e"><code>b73e53c</code></a></td><td><code>Corrected a mathematical error in explonation.</code></td></tr></table>




---

archive/issue_comments_414127.json:
```json
{
    "body": "Changed commit from **[`df43a2d`](https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689)** to **[`b73e53c`](https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e)**",
    "created_at": "2019-03-06T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414127",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df43a2d`](https://github.com/sagemath/sagetrac-mirror/commit/df43a2d5391a8c78db78e66a6ab3556a1e1b8689)** to **[`b73e53c`](https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e)**



---

archive/issue_comments_414128.json:
```json
{
    "body": "<div id=\"comment:181\" align=\"right\">comment:181</div>\n\nIs there anything else I should do at this point?\n\nFor some reason, I accidentally added my notes and old files. I removed them in `git` again. But I don't think its worth a push for now.\n\nI see two open problems at the moment:\n\n1. Unstable interrupts in the tests. Remove the tests or fix it. Maybe this issue of an interrupt not completing might not even be caused by me.\n2. The C++ files are not recompiled when they change (at least not always). I can add a syntax error and the compiler will not notice.\n\nI was thinking about changing the way, I get all the incidences again. This wouldn't be a mayor change, but still a change. Right now, I'm intersecting every face with every facet to get all incidences. It would suffice to intersect every face with all \"siblings\" of some fixed parent. Then again, the examples I could compute with 30GB of RAM all took less than 10 minutes. And then it seems to me, it is almost impossible to obtain any useful information from a Hasse diagram of that size. So I'm not sure, if there is even use to optimization at this end. Unless, somebody thinks this should be optimized if possible, I'll leave it as it is. It's at least almost as fast in creating the face lattice as polymake the way it is.",
    "created_at": "2019-03-06T19:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414128",
    "user": "https://github.com/kliem"
}
```

<div id="comment:181" align="right">comment:181</div>

Is there anything else I should do at this point?

For some reason, I accidentally added my notes and old files. I removed them in `git` again. But I don't think its worth a push for now.

I see two open problems at the moment:

1. Unstable interrupts in the tests. Remove the tests or fix it. Maybe this issue of an interrupt not completing might not even be caused by me.
2. The C++ files are not recompiled when they change (at least not always). I can add a syntax error and the compiler will not notice.

I was thinking about changing the way, I get all the incidences again. This wouldn't be a mayor change, but still a change. Right now, I'm intersecting every face with every facet to get all incidences. It would suffice to intersect every face with all "siblings" of some fixed parent. Then again, the examples I could compute with 30GB of RAM all took less than 10 minutes. And then it seems to me, it is almost impossible to obtain any useful information from a Hasse diagram of that size. So I'm not sure, if there is even use to optimization at this end. Unless, somebody thinks this should be optimized if possible, I'll leave it as it is. It's at least almost as fast in creating the face lattice as polymake the way it is.



---

archive/issue_comments_414129.json:
```json
{
    "body": "<div id=\"comment:182\" align=\"right\">comment:182</div>\n\nReplying to [@kliem](#comment:181):\n> The C++ files are not recompiled when they change (at least not always). I can add a syntax error and the compiler will not notice.\n\nThis is a known bug: #27389",
    "created_at": "2019-03-06T19:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414129",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:182" align="right">comment:182</div>

Replying to [@kliem](#comment:181):
> The C++ files are not recompiled when they change (at least not always). I can add a syntax error and the compiler will not notice.

This is a known bug: #27389



---

archive/issue_comments_414130.json:
```json
{
    "body": "Changed commit from **[`b73e53c`](https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e)** to **[`12038d3`](https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9)**",
    "created_at": "2019-03-13T16:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414130",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b73e53c`](https://github.com/sagemath/sagetrac-mirror/commit/b73e53c9b172eb0b53b0895f49f79b5c6eaac65e)** to **[`12038d3`](https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9)**



---

archive/issue_comments_414131.json:
```json
{
    "body": "<div id=\"comment:183\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9\"><code>12038d3</code></a></td><td><code>removed notes and old files again</code></td></tr></table>\n",
    "created_at": "2019-03-13T16:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:183"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9"><code>12038d3</code></a></td><td><code>removed notes and old files again</code></td></tr></table>




---

archive/issue_comments_414132.json:
```json
{
    "body": "Brief description with pictures, how the algorithm works",
    "created_at": "2019-03-20T20:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414132",
    "user": "https://github.com/kliem"
}
```

Brief description with pictures, how the algorithm works



---

archive/issue_comments_414133.json:
```json
{
    "body": "Attachment: **[Explanation.pdf.gz](https://github.com/sagemath/sage/files/ticket26887/Explanation.pdf.gz)**\n\nAttachment: **[runtime.pdf.gz](https://github.com/sagemath/sage/files/ticket26887/runtime.pdf.gz)**\n\nComparison of runtime in comparison to polymake, given only the vertex-facet incidence matrix",
    "created_at": "2019-03-20T20:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414133",
    "user": "https://github.com/kliem"
}
```

Attachment: **[Explanation.pdf.gz](https://github.com/sagemath/sage/files/ticket26887/Explanation.pdf.gz)**

Attachment: **[runtime.pdf.gz](https://github.com/sagemath/sage/files/ticket26887/runtime.pdf.gz)**

Comparison of runtime in comparison to polymake, given only the vertex-facet incidence matrix



---

archive/issue_comments_414134.json:
```json
{
    "body": "<div id=\"comment:184\" align=\"right\">comment:184</div>\n\nI gave a talk today in the seminar of Michael Joswig's work group.\n\nI added the explanation of the algorithm in pictures. Maybe this is of help. I think it is much better to comprehend than my pseudo code.\n\nI also added the runtime comparison to polymake from the vertex-facet incidences matrix.\n\nI would be thankful for a review and/or comments on what to improve.\n\nBtw, the tests involving `alarm` are still unstable and sometimes fail. Maybe the interrupt is just not stable. But, maybe I also did some mistake. I don't know. There is no desperate need for the tests from my perspective.",
    "created_at": "2019-03-20T21:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414134",
    "user": "https://github.com/kliem"
}
```

<div id="comment:184" align="right">comment:184</div>

I gave a talk today in the seminar of Michael Joswig's work group.

I added the explanation of the algorithm in pictures. Maybe this is of help. I think it is much better to comprehend than my pseudo code.

I also added the runtime comparison to polymake from the vertex-facet incidences matrix.

I would be thankful for a review and/or comments on what to improve.

Btw, the tests involving `alarm` are still unstable and sometimes fail. Maybe the interrupt is just not stable. But, maybe I also did some mistake. I don't know. There is no desperate need for the tests from my perspective.



---

archive/issue_events_366446.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366446"
}
```



---

archive/issue_events_366447.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366447"
}
```



---

archive/issue_comments_414135.json:
```json
{
    "body": "<div id=\"comment:185\" align=\"right\">comment:185</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414135",
    "user": "https://github.com/embray"
}
```

<div id="comment:185" align="right">comment:185</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_414136.json:
```json
{
    "body": "<div id=\"comment:186\" align=\"right\">comment:186</div>\n\n@jdemeyer, @tscrim: I would appreciate this ticket to be merged soon so that we can move forward with the project. Do you have any additional critiques to be taken into account or is this ready to go?\n\nAnyway, thanks a lot for your previous work on this ticket!",
    "created_at": "2019-03-28T08:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414136",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:186" align="right">comment:186</div>

@jdemeyer, @tscrim: I would appreciate this ticket to be merged soon so that we can move forward with the project. Do you have any additional critiques to be taken into account or is this ready to go?

Anyway, thanks a lot for your previous work on this ticket!



---

archive/issue_comments_414137.json:
```json
{
    "body": "<div id=\"comment:187\" align=\"right\">comment:187</div>\n\nMain comment:\n\n- the file `base.pyx` is huge. It would be nice to split it.\n\nTechnical comments\n\n- no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)\n- why `calculate_dimension` is not a method of `ListOfFaces`?\n- `nr_vertices` sometimes return a SageInteger and sometimes a Python int (because `len(X)` returns a Python integer)\n- `set_request_dimension` is a weird name\n- Are we supposed to change `set_request_dimension` during iteration as follows\n\n```\nsage: P = polytopes.cuboctahedron()\nsage: C = CombinatorialPolyhedron(P)\nsage: it = C.face_iter()\nsage: next(it)\n0\nsage: it.set_request_dimension(2)\nsage: next(it)\n2\nsage: it.set_request_dimension(1)\nsage: next(it)\n1\n```\n  if not this `request_dimension` would better be set in the constructor (`__init__`), if yes then it should be documented what does this do.\n- `get_dimension` is a weird name. It would better be more explicit `current_face_dimension` or something similar (no need for the word `get`)\n\ndoc of `combinatorial_polyhedron/base.pyx`\n\n- the first line would better be the title of the module (eg look like `rings/integer.pyx`)\n- `[...] works on every lattice that is obtained by from [...]`\n- Could you precise what the sentence `Representations in this module:` mean. Do you mean that it is the terminology you use in this module?\n- `The first bit represent` -> `represents`\n- `we started with` -> `we started from`\n- I would rather use `compute` rather than `calculate`\n- polyhedron used as a noun as no need to be upper cased `Polyhedron` -> `polyhedron`",
    "created_at": "2019-04-16T13:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414137",
    "user": "https://github.com/videlec"
}
```

<div id="comment:187" align="right">comment:187</div>

Main comment:

- the file `base.pyx` is huge. It would be nice to split it.

Technical comments

- no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)
- why `calculate_dimension` is not a method of `ListOfFaces`?
- `nr_vertices` sometimes return a SageInteger and sometimes a Python int (because `len(X)` returns a Python integer)
- `set_request_dimension` is a weird name
- Are we supposed to change `set_request_dimension` during iteration as follows

```
sage: P = polytopes.cuboctahedron()
sage: C = CombinatorialPolyhedron(P)
sage: it = C.face_iter()
sage: next(it)
0
sage: it.set_request_dimension(2)
sage: next(it)
2
sage: it.set_request_dimension(1)
sage: next(it)
1
```
  if not this `request_dimension` would better be set in the constructor (`__init__`), if yes then it should be documented what does this do.
- `get_dimension` is a weird name. It would better be more explicit `current_face_dimension` or something similar (no need for the word `get`)

doc of `combinatorial_polyhedron/base.pyx`

- the first line would better be the title of the module (eg look like `rings/integer.pyx`)
- `[...] works on every lattice that is obtained by from [...]`
- Could you precise what the sentence `Representations in this module:` mean. Do you mean that it is the terminology you use in this module?
- `The first bit represent` -> `represents`
- `we started with` -> `we started from`
- I would rather use `compute` rather than `calculate`
- polyhedron used as a noun as no need to be upper cased `Polyhedron` -> `polyhedron`



---

archive/issue_comments_414138.json:
```json
{
    "body": "<div id=\"comment:188\" align=\"right\">comment:188</div>\n\nsmall optimization: use `smallInteger` instead of `Integer` (this does not create new integer objects but rather uses preallocated small integer objects)",
    "created_at": "2019-04-16T13:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414138",
    "user": "https://github.com/videlec"
}
```

<div id="comment:188" align="right">comment:188</div>

small optimization: use `smallInteger` instead of `Integer` (this does not create new integer objects but rather uses preallocated small integer objects)



---

archive/issue_comments_414139.json:
```json
{
    "body": "<div id=\"comment:189\" align=\"right\">comment:189</div>\n\n- `Might be faster then` -> `Might be faster than`",
    "created_at": "2019-04-16T13:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414139",
    "user": "https://github.com/videlec"
}
```

<div id="comment:189" align="right">comment:189</div>

- `Might be faster then` -> `Might be faster than`



---

archive/issue_events_366448.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-04-16T14:30:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366448"
}
```



---

archive/issue_events_366449.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-04-16T14:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366449"
}
```



---

archive/issue_comments_414140.json:
```json
{
    "body": "Changed commit from **[`12038d3`](https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9)** to **[`db48cb0`](https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4)**",
    "created_at": "2019-04-16T14:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414140",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`12038d3`](https://github.com/sagemath/sagetrac-mirror/commit/12038d392fc1dba2a34fe27ce0732eb2481104d9)** to **[`db48cb0`](https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4)**



---

archive/issue_comments_414141.json:
```json
{
    "body": "<div id=\"comment:191\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a97096ef3c4b99d7775e14cae1be6b87e202dfe\"><code>9a97096</code></a></td><td><code>corrected blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3672a17da7b8c8c13500737dbb30b3f23644643\"><code>a3672a1</code></a></td><td><code>FaceIterator is an actual iterator now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fae3428fc5ccb466798b3a25039412517cb6d2e\"><code>3fae342</code></a></td><td><code>fixed allocation of array</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32eb8d479d7d5bcce9d86b32eda6700ad70c8d8d\"><code>32eb8d4</code></a></td><td><code>it.next() -> next(it), also fixed face_lattice_facet_repr for trivial cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08d49c03ef4ff22249a9c0fe95583e520e878cc0\"><code>08d49c0</code></a></td><td><code>improved documentation mostly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2223ce5e179629b31338159de4e44b970a3ba154\"><code>2223ce5</code></a></td><td><code>replaced calloc by new[]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9a052ed9cf6e48c29fc82c64c8b1b326d88ea52\"><code>a9a052e</code></a></td><td><code>Improved comments all through base.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef7af549f6765b60072a85f61834459b6d9d8a23\"><code>ef7af54</code></a></td><td><code>improved pseudo-code Algorithm in ``FaceIterator``</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a09a2130af2c96796436be9ca560276f2f8317f\"><code>4a09a21</code></a></td><td><code>Corrected a mathematical error in explonation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4\"><code>db48cb0</code></a></td><td><code>removed notes and old files again</code></td></tr></table>\n",
    "created_at": "2019-04-16T14:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414141",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:191"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a97096ef3c4b99d7775e14cae1be6b87e202dfe"><code>9a97096</code></a></td><td><code>corrected blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3672a17da7b8c8c13500737dbb30b3f23644643"><code>a3672a1</code></a></td><td><code>FaceIterator is an actual iterator now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fae3428fc5ccb466798b3a25039412517cb6d2e"><code>3fae342</code></a></td><td><code>fixed allocation of array</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32eb8d479d7d5bcce9d86b32eda6700ad70c8d8d"><code>32eb8d4</code></a></td><td><code>it.next() -> next(it), also fixed face_lattice_facet_repr for trivial cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08d49c03ef4ff22249a9c0fe95583e520e878cc0"><code>08d49c0</code></a></td><td><code>improved documentation mostly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2223ce5e179629b31338159de4e44b970a3ba154"><code>2223ce5</code></a></td><td><code>replaced calloc by new[]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9a052ed9cf6e48c29fc82c64c8b1b326d88ea52"><code>a9a052e</code></a></td><td><code>Improved comments all through base.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef7af549f6765b60072a85f61834459b6d9d8a23"><code>ef7af54</code></a></td><td><code>improved pseudo-code Algorithm in ``FaceIterator``</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a09a2130af2c96796436be9ca560276f2f8317f"><code>4a09a21</code></a></td><td><code>Corrected a mathematical error in explonation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4"><code>db48cb0</code></a></td><td><code>removed notes and old files again</code></td></tr></table>




---

archive/issue_comments_414142.json:
```json
{
    "body": "<div id=\"comment:192\" align=\"right\">comment:192</div>\n\nThis is doing a typecast, as it assumes `(signed) long` as input.\n\nI'm using `size_t` in most cases. But I guess for my use case this is just fine.\n\nReplying to [@videlec](#comment:188):\n> small optimization: use `smallInteger` instead of `Integer` (this does not create new integer objects but rather uses preallocated small integer objects)",
    "created_at": "2019-04-16T19:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414142",
    "user": "https://github.com/kliem"
}
```

<div id="comment:192" align="right">comment:192</div>

This is doing a typecast, as it assumes `(signed) long` as input.

I'm using `size_t` in most cases. But I guess for my use case this is just fine.

Replying to [@videlec](#comment:188):
> small optimization: use `smallInteger` instead of `Integer` (this does not create new integer objects but rather uses preallocated small integer objects)



---

archive/issue_comments_414143.json:
```json
{
    "body": "<div id=\"comment:193\" align=\"right\">comment:193</div>\n\nReplying to [@videlec](#comment:187):\n\n> Technical comments\n> \n> - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)\n\n\"All objects in Sage should derive from the Cython extension class `SageObject`\"\nhttp://doc.sagemath.org/html/en/developer/coding_in_python.html?highlight=sageobject\n\nNow I'm a bit confused. The way I understand this now, is that any class a user is intended to see needs to be a `SageObject`. Some Cython class way in the background does not need that.\n\nIn my case `CombinatorialPolyhedron` and `FaceIterator` should be `SageObjects`, but other classes do not have to be?",
    "created_at": "2019-04-16T20:10:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414143",
    "user": "https://github.com/kliem"
}
```

<div id="comment:193" align="right">comment:193</div>

Replying to [@videlec](#comment:187):

> Technical comments
> 
> - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)

"All objects in Sage should derive from the Cython extension class `SageObject`"
http://doc.sagemath.org/html/en/developer/coding_in_python.html?highlight=sageobject

Now I'm a bit confused. The way I understand this now, is that any class a user is intended to see needs to be a `SageObject`. Some Cython class way in the background does not need that.

In my case `CombinatorialPolyhedron` and `FaceIterator` should be `SageObjects`, but other classes do not have to be?



---

archive/issue_comments_414144.json:
```json
{
    "body": "<div id=\"comment:194\" align=\"right\">comment:194</div>\n\nReplying to [@kliem](#comment:193):\n> Replying to [@videlec](#comment:187):\n> \n> > Technical comments\n> > \n> > - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)\n\n> \n> \"All objects in Sage should derive from the Cython extension class `SageObject`\"\n> http://doc.sagemath.org/html/en/developer/coding_in_python.html?highlight=sageobject\n\nThis is a very naive generality, I opened #27683\n\n> Now I'm a bit confused. The way I understand this now, is that any class a user is intended to see needs to be a `SageObject`. Some Cython class way in the background does not need that.\n> \n> In my case `CombinatorialPolyhedron` and `FaceIterator` should be `SageObjects`, but other classes do not have to be?\n\nThe `SageObject` is indeed good for user-visible classes.",
    "created_at": "2019-04-16T20:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414144",
    "user": "https://github.com/videlec"
}
```

<div id="comment:194" align="right">comment:194</div>

Replying to [@kliem](#comment:193):
> Replying to [@videlec](#comment:187):
> 
> > Technical comments
> > 
> > - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)

> 
> "All objects in Sage should derive from the Cython extension class `SageObject`"
> http://doc.sagemath.org/html/en/developer/coding_in_python.html?highlight=sageobject

This is a very naive generality, I opened #27683

> Now I'm a bit confused. The way I understand this now, is that any class a user is intended to see needs to be a `SageObject`. Some Cython class way in the background does not need that.
> 
> In my case `CombinatorialPolyhedron` and `FaceIterator` should be `SageObjects`, but other classes do not have to be?

The `SageObject` is indeed good for user-visible classes.



---

archive/issue_comments_414145.json:
```json
{
    "body": "<div id=\"comment:195\" align=\"right\">comment:195</div>\n\nReplying to [@kliem](#comment:192):\n> This is doing a typecast, as it assumes `(signed) long` as input.\n> \n> I'm using `size_t` in most cases. But I guess for my use case this is just fine.\n\nIndeed, for the range of integers you look at you are very far from the overflow.",
    "created_at": "2019-04-16T20:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414145",
    "user": "https://github.com/videlec"
}
```

<div id="comment:195" align="right">comment:195</div>

Replying to [@kliem](#comment:192):
> This is doing a typecast, as it assumes `(signed) long` as input.
> 
> I'm using `size_t` in most cases. But I guess for my use case this is just fine.

Indeed, for the range of integers you look at you are very far from the overflow.



---

archive/issue_comments_414146.json:
```json
{
    "body": "Changed commit from **[`db48cb0`](https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4)** to **[`1a128f2`](https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb)**",
    "created_at": "2019-04-16T22:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414146",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db48cb0`](https://github.com/sagemath/sagetrac-mirror/commit/db48cb0226defdd76dbdc2d7e316a284b9b4fde4)** to **[`1a128f2`](https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb)**



---

archive/issue_comments_414147.json:
```json
{
    "body": "<div id=\"comment:196\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb\"><code>1a128f2</code></a></td><td><code>split the file</code></td></tr></table>\n",
    "created_at": "2019-04-16T22:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414147",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:196"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb"><code>1a128f2</code></a></td><td><code>split the file</code></td></tr></table>




---

archive/issue_comments_414148.json:
```json
{
    "body": "<div id=\"comment:197\" align=\"right\">comment:197</div>\n\nReplying to [@videlec](#comment:187):\n> Main comment:\n> \n> - the file `base.pyx` is huge. It would be nice to split it.\n\nDone.\n> \n> Technical comments\n> \n> - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)\n> - why `calculate_dimension` is not a method of `ListOfFaces`?\n> - `nr_vertices` sometimes return a SageInteger and sometimes a Python int (because `len(X)` returns a Python integer)\n> - `set_request_dimension` is a weird name\n> - Are we supposed to change `set_request_dimension` during iteration as follows\n> \n> ```\n> sage: P = polytopes.cuboctahedron()\n> sage: C = CombinatorialPolyhedron(P)\n> sage: it = C.face_iter()\n> sage: next(it)\n> 0\n> sage: it.set_request_dimension(2)\n> sage: next(it)\n> 2\n> sage: it.set_request_dimension(1)\n> sage: next(it)\n> 1\n> ```\n>   if not this `request_dimension` would better be set in the constructor (`__init__`), if yes then it should be documented what does this do.\n\nI guess this has to go there.\n> - `get_dimension` is a weird name. It would better be more explicit `current_face_dimension` or something similar (no need for the word `get`)\n> \n> doc of `combinatorial_polyhedron/base.pyx`\n> \n> - the first line would better be the title of the module (eg look like `rings/integer.pyx`)\n\nshould I name the module `geometry/polyhedron/combinatorial_polyhedorn/combinatorial_polyhedron.pyx` then?",
    "created_at": "2019-04-16T22:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414148",
    "user": "https://github.com/kliem"
}
```

<div id="comment:197" align="right">comment:197</div>

Replying to [@videlec](#comment:187):
> Main comment:
> 
> - the file `base.pyx` is huge. It would be nice to split it.

Done.
> 
> Technical comments
> 
> - no need to inherit from `SageObject` (this is useful if you want your objects to interact with other Sage objects which is is not the case)
> - why `calculate_dimension` is not a method of `ListOfFaces`?
> - `nr_vertices` sometimes return a SageInteger and sometimes a Python int (because `len(X)` returns a Python integer)
> - `set_request_dimension` is a weird name
> - Are we supposed to change `set_request_dimension` during iteration as follows
> 
> ```
> sage: P = polytopes.cuboctahedron()
> sage: C = CombinatorialPolyhedron(P)
> sage: it = C.face_iter()
> sage: next(it)
> 0
> sage: it.set_request_dimension(2)
> sage: next(it)
> 2
> sage: it.set_request_dimension(1)
> sage: next(it)
> 1
> ```
>   if not this `request_dimension` would better be set in the constructor (`__init__`), if yes then it should be documented what does this do.

I guess this has to go there.
> - `get_dimension` is a weird name. It would better be more explicit `current_face_dimension` or something similar (no need for the word `get`)
> 
> doc of `combinatorial_polyhedron/base.pyx`
> 
> - the first line would better be the title of the module (eg look like `rings/integer.pyx`)

should I name the module `geometry/polyhedron/combinatorial_polyhedorn/combinatorial_polyhedron.pyx` then?



---

archive/issue_comments_414149.json:
```json
{
    "body": "<div id=\"comment:198\" align=\"right\">comment:198</div>\n\nReplying to [@kliem](#comment:197):\n> > doc of `combinatorial_polyhedron/base.pyx`\n> > \n> > - the first line would better be the title of the module (eg look like `rings/integer.pyx`)\n\n> should I name the module `geometry/polyhedron/combinatorial_polyhedorn/combinatorial_polyhedron.pyx` then?\n\nThe name of the file is fine. I was referring to the first line in the file\n\n```\n+CombinatorialPolyhedron gathers several algorithms of Polyhedra depending only\n+on the vertex-facet incidences.\n```\nthat should be\n\n```\nCombinatorial polyhedron\n\nThis module gathers algorithms for polyhedra that only depends on the\nvertex-facet incidences.\n```",
    "created_at": "2019-04-17T04:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414149",
    "user": "https://github.com/videlec"
}
```

<div id="comment:198" align="right">comment:198</div>

Replying to [@kliem](#comment:197):
> > doc of `combinatorial_polyhedron/base.pyx`
> > 
> > - the first line would better be the title of the module (eg look like `rings/integer.pyx`)

> should I name the module `geometry/polyhedron/combinatorial_polyhedorn/combinatorial_polyhedron.pyx` then?

The name of the file is fine. I was referring to the first line in the file

```
+CombinatorialPolyhedron gathers several algorithms of Polyhedra depending only
+on the vertex-facet incidences.
```
that should be

```
Combinatorial polyhedron

This module gathers algorithms for polyhedra that only depends on the
vertex-facet incidences.
```



---

archive/issue_comments_414150.json:
```json
{
    "body": "<div id=\"comment:199\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd1adf9243932ab998c38591e78037a78ca29090\"><code>fd1adf9</code></a></td><td><code>split list_of_faces, fixed imports etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13\"><code>9b69f50</code></a></td><td><code>added documentation and examples to each module</code></td></tr></table>\n",
    "created_at": "2019-04-17T15:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414150",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:199"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd1adf9243932ab998c38591e78037a78ca29090"><code>fd1adf9</code></a></td><td><code>split list_of_faces, fixed imports etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13"><code>9b69f50</code></a></td><td><code>added documentation and examples to each module</code></td></tr></table>




---

archive/issue_comments_414151.json:
```json
{
    "body": "Changed commit from **[`1a128f2`](https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb)** to **[`9b69f50`](https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13)**",
    "created_at": "2019-04-17T15:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414151",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1a128f2`](https://github.com/sagemath/sagetrac-mirror/commit/1a128f25dbabf6aab69fc37e4e20f7141ce8f3cb)** to **[`9b69f50`](https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13)**



---

archive/issue_events_366450.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-04-17T15:19:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366450"
}
```



---

archive/issue_events_366451.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-04-17T15:19:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366451"
}
```



---

archive/issue_comments_414152.json:
```json
{
    "body": "Changed commit from **[`9b69f50`](https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13)** to **[`4e8fd8c`](https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57)**",
    "created_at": "2019-04-18T11:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414152",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b69f50`](https://github.com/sagemath/sagetrac-mirror/commit/9b69f506441ea60af9a6c3c078359c533def1a13)** to **[`4e8fd8c`](https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57)**



---

archive/issue_comments_414153.json:
```json
{
    "body": "<div id=\"comment:201\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57\"><code>4e8fd8c</code></a></td><td><code>correct hyperlinks</code></td></tr></table>\n",
    "created_at": "2019-04-18T11:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414153",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:201"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57"><code>4e8fd8c</code></a></td><td><code>correct hyperlinks</code></td></tr></table>




---

archive/issue_comments_414154.json:
```json
{
    "body": "<div id=\"comment:202\" align=\"right\">comment:202</div>\n\nHow do I check if all links in the docstrings work?",
    "created_at": "2019-04-18T11:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414154",
    "user": "https://github.com/kliem"
}
```

<div id="comment:202" align="right">comment:202</div>

How do I check if all links in the docstrings work?



---

archive/issue_events_366452.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-18T19:24:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366452"
}
```



---

archive/issue_events_366453.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-18T19:24:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366453"
}
```



---

archive/issue_comments_414155.json:
```json
{
    "body": "<div id=\"comment:203\" align=\"right\">comment:203</div>\n\nThis comment concerns only `CombinatorialPolyhedron` in `base.pxd` and `base.pyx`\n\nI added a small commit on top of your branch which just consists of documentation modifications. You might want to review my changes. When they are important, I discuss them below. In a second commit I upgraded the method `facets` to avoid iterating twice through the faces. You are free to use the commit as you wish and I put them an a distinct branch.\n\nThe sentence\n\n```\n    # Edges, ridges and incidences are stored in a pointer of pointers.\n    # This number determines how many edges are stored in ``edges[0]``,\n    # how many ridges are stored in ``ridges[0]`` etc.\n    cdef size_t _length_edges_list\n```\nis a bit unclear. Do you mean that the arrays pointed at `_edges[0]`, `_ridges[0]` and `_face_lattice_incidences[0]` have the same length? \n\nThe attribute `_mem_tuple` is not used. What is it inteded for?\n\n\nWhy this very ambiguous terminology\n\n```\n- Vertices              -- ``[vertices, rays, lines]`` of the polyhedron.\n```\nIn `PPL` the use the word *generators* for this (as opposed to *constraints* for equalities and inequalities).\n\nThis is very cryptic\n\n```\n:class:`~sage.geometry.polyhedron.combinatorial_polyhedron.face_iterator.FaceIterator`::\n\n    sage: C.face_iter()\n    Iterator over the proper faces of a polyhedron of dimension 4\n\n    sage: C.face_iter(2)\n    Iterator over the 2-faces of a polyhedron of dimension 4\n```\nThe above doctest is mostly intended for a user reading the documentation. As a user, I tried the naive\n\n```\nsage: P = polytopes.hypercube(4)\nsage: C = CombinatorialPolyhedron(P)\nsage: for f in C.face_iter():\n....:     print(f)\n```\nand was quite disappointed to see a list of integers. I think that at this point in the documentation, it is much better to provide a concrete example of computations. If the access to `face_iter` is already for an advanced user then you can just remove the example.\n\nIn the documentation of the `ComintorialPolyhedron` class you had three examples dealing with the fact that `nr_lines` is mandatory. I removed the two last and made them inside `TESTS`. You can freely remove them if you feel they are useless.\n\n`is_Polyhedron` (line 275) and `is_LatticePolytope` (line 288) are old style coding from when Sage was created. Just use straight `isinstance`.\n\nAt lines 299\n\n```\n        else:\n            # Input is different from ``Polyhedron`` and ``LatticePolytope``.\n            if nr_lines is None:\n                # bounded polyhedron\n```\nit is possible that the user specified `nr_lines=0` in which case you might also want to set `self._unbounded = False`. Also, when `nr_lines < 0` you would better raise a `ValueError`.\n\nAt line 324, the sentence is incomplete\n\n```\n# At the moment this test only works for input being\n```\n\nAt line 346, the following test is not exhaustive enough\n\n```\nelif isinstance(data, Integer):\n```\nas it will not catch Python integers\n\n```\nsage: CombinatorialPolyhedron(3r)\nTraceback (most recent call last):\n...\nTypeError: argument 2 to map() must support iteration\n```\nYou should be using\n\n```\nsage: import numbers\nsage: isinstance(3r, numbers.Integral)\nTrue\nsage: isinstance(3, numbers.Integral)\nTrue\n```\n\n\nOn the class `Polyhedron` the how-many-are-there methods are called \n`n_vertices`, ` n_rays`, `n_lines`, `n_inequalities` (with alias `n_facets`), `n_equations` while you choose `nr_vertices`, `nr_facets`. Why this difference?\n\nline 625-627\n\n```\n            return Integer(self._length_Vrep)\n        else:\n            return Integer(len(self.vertices()))\n```\nline 737\n\n```\n        return Integer(self._nr_facets)\n```\nyou can use `smallInteger`\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ac3b02a0210409f35b622b459fa05306fc97ba\"><code>72ac3b0</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116\"><code>611099f</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr></table>\n",
    "created_at": "2019-04-18T19:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414155",
    "user": "https://github.com/videlec"
}
```

<div id="comment:203" align="right">comment:203</div>

This comment concerns only `CombinatorialPolyhedron` in `base.pxd` and `base.pyx`

I added a small commit on top of your branch which just consists of documentation modifications. You might want to review my changes. When they are important, I discuss them below. In a second commit I upgraded the method `facets` to avoid iterating twice through the faces. You are free to use the commit as you wish and I put them an a distinct branch.

The sentence

```
    # Edges, ridges and incidences are stored in a pointer of pointers.
    # This number determines how many edges are stored in ``edges[0]``,
    # how many ridges are stored in ``ridges[0]`` etc.
    cdef size_t _length_edges_list
```
is a bit unclear. Do you mean that the arrays pointed at `_edges[0]`, `_ridges[0]` and `_face_lattice_incidences[0]` have the same length? 

The attribute `_mem_tuple` is not used. What is it inteded for?


Why this very ambiguous terminology

```
- Vertices              -- ``[vertices, rays, lines]`` of the polyhedron.
```
In `PPL` the use the word *generators* for this (as opposed to *constraints* for equalities and inequalities).

This is very cryptic

```
:class:`~sage.geometry.polyhedron.combinatorial_polyhedron.face_iterator.FaceIterator`::

    sage: C.face_iter()
    Iterator over the proper faces of a polyhedron of dimension 4

    sage: C.face_iter(2)
    Iterator over the 2-faces of a polyhedron of dimension 4
```
The above doctest is mostly intended for a user reading the documentation. As a user, I tried the naive

```
sage: P = polytopes.hypercube(4)
sage: C = CombinatorialPolyhedron(P)
sage: for f in C.face_iter():
....:     print(f)
```
and was quite disappointed to see a list of integers. I think that at this point in the documentation, it is much better to provide a concrete example of computations. If the access to `face_iter` is already for an advanced user then you can just remove the example.

In the documentation of the `ComintorialPolyhedron` class you had three examples dealing with the fact that `nr_lines` is mandatory. I removed the two last and made them inside `TESTS`. You can freely remove them if you feel they are useless.

`is_Polyhedron` (line 275) and `is_LatticePolytope` (line 288) are old style coding from when Sage was created. Just use straight `isinstance`.

At lines 299

```
        else:
            # Input is different from ``Polyhedron`` and ``LatticePolytope``.
            if nr_lines is None:
                # bounded polyhedron
```
it is possible that the user specified `nr_lines=0` in which case you might also want to set `self._unbounded = False`. Also, when `nr_lines < 0` you would better raise a `ValueError`.

At line 324, the sentence is incomplete

```
# At the moment this test only works for input being
```

At line 346, the following test is not exhaustive enough

```
elif isinstance(data, Integer):
```
as it will not catch Python integers

```
sage: CombinatorialPolyhedron(3r)
Traceback (most recent call last):
...
TypeError: argument 2 to map() must support iteration
```
You should be using

```
sage: import numbers
sage: isinstance(3r, numbers.Integral)
True
sage: isinstance(3, numbers.Integral)
True
```


On the class `Polyhedron` the how-many-are-there methods are called 
`n_vertices`, ` n_rays`, `n_lines`, `n_inequalities` (with alias `n_facets`), `n_equations` while you choose `nr_vertices`, `nr_facets`. Why this difference?

line 625-627

```
            return Integer(self._length_Vrep)
        else:
            return Integer(len(self.vertices()))
```
line 737

```
        return Integer(self._nr_facets)
```
you can use `smallInteger`

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ac3b02a0210409f35b622b459fa05306fc97ba"><code>72ac3b0</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116"><code>611099f</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr></table>




---

archive/issue_comments_414156.json:
```json
{
    "body": "Changed branch from **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)** to **[public/26887-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/26887-bis)**",
    "created_at": "2019-04-18T19:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414156",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)** to **[public/26887-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/26887-bis)**



---

archive/issue_comments_414157.json:
```json
{
    "body": "Changed commit from **[`4e8fd8c`](https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57)** to **[`611099f`](https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116)**",
    "created_at": "2019-04-18T19:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414157",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`4e8fd8c`](https://github.com/sagemath/sagetrac-mirror/commit/4e8fd8c582f29960f6fcf5808a0cab0d0daf5b57)** to **[`611099f`](https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116)**



---

archive/issue_comments_414158.json:
```json
{
    "body": "<div id=\"comment:204\" align=\"right\">comment:204</div>\n\nLooks good to me.",
    "created_at": "2019-05-03T18:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414158",
    "user": "https://github.com/kliem"
}
```

<div id="comment:204" align="right">comment:204</div>

Looks good to me.



---

archive/issue_comments_414159.json:
```json
{
    "body": "Changed branch from **[public/26887-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/26887-bis)** to **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)**",
    "created_at": "2019-05-03T18:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414159",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/26887-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/26887-bis)** to **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)**



---

archive/issue_comments_414160.json:
```json
{
    "body": "<div id=\"comment:205\" align=\"right\">comment:205</div>\n\nThanks.\n\nAbout names: There are a number of names that should probably changed to be consistent with the (up to date) naming conventions.\n\nHow do I call the methods that get the vertices/rays/lines of a face?\nHow do I call the method that gets the facets it is contained in?\n\nI will change nr_... to n_... all through the files eventually.\n\nReplying to [@videlec](#comment:203):\n> This comment concerns only `CombinatorialPolyhedron` in `base.pxd` and `base.pyx`\n> \n> I added a small commit on top of your branch which just consists of documentation modifications. You might want to review my changes. When they are important, I discuss them below. In a second commit I upgraded the method `facets` to avoid iterating twice through the faces. You are free to use the commit as you wish and I put them an a distinct branch.\n> \n> The sentence\n> \n> ```\n>     # Edges, ridges and incidences are stored in a pointer of pointers.\n>     # This number determines how many edges are stored in ``edges[0]``,\n>     # how many ridges are stored in ``ridges[0]`` etc.\n>     cdef size_t _length_edges_list\n> ```\n> is a bit unclear. Do you mean that the arrays pointed at `_edges[0]`, `_ridges[0]` and `_face_lattice_incidences[0]` have the same length? \n\nI will make this more precise. _edges[0][0] represents the first index of the first edge _edges[0][1] the second of the first _edges[1][0] the first of the second and so on.\n_edges[0] stores a total of up _length_edges_list length.\n\nI want to avoid jumping through memory like crazy, but I also want to avoid using too large chunks of continuous memory. Hence this intermediate solution.\n\n> \n> The attribute `_mem_tuple` is not used. What is it inteded for?\n\nIt is used. The MemoryAllocators that store edges, ridges and face_lattice_incidences get put there. The module first calculates the edges and on success copies the data. Only then does it also copy the MemoryAllocator. Otherwise, the memory is free again.\n> \n> \n> Why this very ambiguous terminology\n> \n> ```\n> - Vertices              -- ``[vertices, rays, lines]`` of the polyhedron.\n> ```\n> In `PPL` the use the word *generators* for this (as opposed to *constraints* for equalities and inequalities).\n\nIn `FaceIterator` I use atoms (which might be generators or constraints depending on whether we do the dual approach or not).\nI was thinking about this and then figured that Vrepresentation is a pretty bad name for ``[vertices, rays, lines]`` anyway.\nI don't care. I can change this at some point.\n> \n> This is very cryptic\n> \n> ```\n> :class:`~sage.geometry.polyhedron.combinatorial_polyhedron.face_iterator.FaceIterator`::\n> \n>     sage: C.face_iter()\n>     Iterator over the proper faces of a polyhedron of dimension 4\n> \n>     sage: C.face_iter(2)\n>     Iterator over the 2-faces of a polyhedron of dimension 4\n> ```\n> The above doctest is mostly intended for a user reading the documentation. As a user, I tried the naive\n> \n> ```\n> sage: P = polytopes.hypercube(4)\n> sage: C = CombinatorialPolyhedron(P)\n> sage: for f in C.face_iter():\n> ....:     print(f)\n> ```\n> and was quite disappointed to see a list of integers. I think that at this point in the documentation, it is much better to provide a concrete example of computations. If the access to `face_iter` is already for an advanced user then you can just remove the example.\n\nNo it was not intended to be for an advanced user. I will try setting up the result of the iterater as a class `CombinatorialFace` just like with `Polyhedron.faces`. If this does not have a noticable effect on runtime, I think this is the much better solution.\nThis would also make `FaceIterator` smaller.\n> \n> In the documentation of the `ComintorialPolyhedron` class you had three examples dealing with the fact that `nr_lines` is mandatory. I removed the two last and made them inside `TESTS`. You can freely remove them if you feel they are useless.\n> \n> `is_Polyhedron` (line 275) and `is_LatticePolytope` (line 288) are old style coding from when Sage was created. Just use straight `isinstance`.\n\nWhat do I do for matrix?  isinstance(M,sage.matrix.matrix0.Matrix)?\n> \n> At lines 299\n> \n> ```\n>         else:\n>             # Input is different from ``Polyhedron`` and ``LatticePolytope``.\n>             if nr_lines is None:\n>                 # bounded polyhedron\n> ```\n> it is possible that the user specified `nr_lines=0` in which case you might also want to set `self._unbounded = False`. Also, when `nr_lines < 0` you would better raise a `ValueError`.\n\nBy `nr_lines=0`, I mean that the Polyhedron is unbounded. Maybe this is not a good choice and I should put unbounded as an extra argument for the input.\n> \n> At line 324, the sentence is incomplete\n> \n> ```\n> # At the moment this test only works for input being\n> ```\n> \n> At line 346, the following test is not exhaustive enough\n> \n> ```\n> elif isinstance(data, Integer):\n> ```\n> as it will not catch Python integers\n> \n> ```\n> sage: CombinatorialPolyhedron(3r)\n> Traceback (most recent call last):\n> ...\n> TypeError: argument 2 to map() must support iteration\n> ```\n> You should be using\n> \n> ```\n> sage: import numbers\n> sage: isinstance(3r, numbers.Integral)\n> True\n> sage: isinstance(3, numbers.Integral)\n> True\n> ```\n\nThanks. I wasn't aware of this at all. In particual I didn't know of the nice solution. Somewhere else I do a `try: if a == Integer(a)`...\n> \n> \n> On the class `Polyhedron` the how-many-are-there methods are called \n> `n_vertices`, ` n_rays`, `n_lines`, `n_inequalities` (with alias `n_facets`), `n_equations` while you choose `nr_vertices`, `nr_facets`. Why this difference?\n\nHistoric. I changed at at findpoly.org now to be consistent with Polyhedron. I should change this.\n\n> line 625-627\n> \n> ```\n>             return Integer(self._length_Vrep)\n>         else:\n>             return Integer(len(self.vertices()))\n> ```\n> line 737\n> \n> ```\n>         return Integer(self._nr_facets)\n> ```\n> you can use `smallInteger`\n> \n> ---\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ac3b02a0210409f35b622b459fa05306fc97ba\"><code>72ac3b0</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116\"><code>611099f</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr></table>\n",
    "created_at": "2019-05-03T19:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414160",
    "user": "https://github.com/kliem"
}
```

<div id="comment:205" align="right">comment:205</div>

Thanks.

About names: There are a number of names that should probably changed to be consistent with the (up to date) naming conventions.

How do I call the methods that get the vertices/rays/lines of a face?
How do I call the method that gets the facets it is contained in?

I will change nr_... to n_... all through the files eventually.

Replying to [@videlec](#comment:203):
> This comment concerns only `CombinatorialPolyhedron` in `base.pxd` and `base.pyx`
> 
> I added a small commit on top of your branch which just consists of documentation modifications. You might want to review my changes. When they are important, I discuss them below. In a second commit I upgraded the method `facets` to avoid iterating twice through the faces. You are free to use the commit as you wish and I put them an a distinct branch.
> 
> The sentence
> 
> ```
>     # Edges, ridges and incidences are stored in a pointer of pointers.
>     # This number determines how many edges are stored in ``edges[0]``,
>     # how many ridges are stored in ``ridges[0]`` etc.
>     cdef size_t _length_edges_list
> ```
> is a bit unclear. Do you mean that the arrays pointed at `_edges[0]`, `_ridges[0]` and `_face_lattice_incidences[0]` have the same length? 

I will make this more precise. _edges[0][0] represents the first index of the first edge _edges[0][1] the second of the first _edges[1][0] the first of the second and so on.
_edges[0] stores a total of up _length_edges_list length.

I want to avoid jumping through memory like crazy, but I also want to avoid using too large chunks of continuous memory. Hence this intermediate solution.

> 
> The attribute `_mem_tuple` is not used. What is it inteded for?

It is used. The MemoryAllocators that store edges, ridges and face_lattice_incidences get put there. The module first calculates the edges and on success copies the data. Only then does it also copy the MemoryAllocator. Otherwise, the memory is free again.
> 
> 
> Why this very ambiguous terminology
> 
> ```
> - Vertices              -- ``[vertices, rays, lines]`` of the polyhedron.
> ```
> In `PPL` the use the word *generators* for this (as opposed to *constraints* for equalities and inequalities).

In `FaceIterator` I use atoms (which might be generators or constraints depending on whether we do the dual approach or not).
I was thinking about this and then figured that Vrepresentation is a pretty bad name for ``[vertices, rays, lines]`` anyway.
I don't care. I can change this at some point.
> 
> This is very cryptic
> 
> ```
> :class:`~sage.geometry.polyhedron.combinatorial_polyhedron.face_iterator.FaceIterator`::
> 
>     sage: C.face_iter()
>     Iterator over the proper faces of a polyhedron of dimension 4
> 
>     sage: C.face_iter(2)
>     Iterator over the 2-faces of a polyhedron of dimension 4
> ```
> The above doctest is mostly intended for a user reading the documentation. As a user, I tried the naive
> 
> ```
> sage: P = polytopes.hypercube(4)
> sage: C = CombinatorialPolyhedron(P)
> sage: for f in C.face_iter():
> ....:     print(f)
> ```
> and was quite disappointed to see a list of integers. I think that at this point in the documentation, it is much better to provide a concrete example of computations. If the access to `face_iter` is already for an advanced user then you can just remove the example.

No it was not intended to be for an advanced user. I will try setting up the result of the iterater as a class `CombinatorialFace` just like with `Polyhedron.faces`. If this does not have a noticable effect on runtime, I think this is the much better solution.
This would also make `FaceIterator` smaller.
> 
> In the documentation of the `ComintorialPolyhedron` class you had three examples dealing with the fact that `nr_lines` is mandatory. I removed the two last and made them inside `TESTS`. You can freely remove them if you feel they are useless.
> 
> `is_Polyhedron` (line 275) and `is_LatticePolytope` (line 288) are old style coding from when Sage was created. Just use straight `isinstance`.

What do I do for matrix?  isinstance(M,sage.matrix.matrix0.Matrix)?
> 
> At lines 299
> 
> ```
>         else:
>             # Input is different from ``Polyhedron`` and ``LatticePolytope``.
>             if nr_lines is None:
>                 # bounded polyhedron
> ```
> it is possible that the user specified `nr_lines=0` in which case you might also want to set `self._unbounded = False`. Also, when `nr_lines < 0` you would better raise a `ValueError`.

By `nr_lines=0`, I mean that the Polyhedron is unbounded. Maybe this is not a good choice and I should put unbounded as an extra argument for the input.
> 
> At line 324, the sentence is incomplete
> 
> ```
> # At the moment this test only works for input being
> ```
> 
> At line 346, the following test is not exhaustive enough
> 
> ```
> elif isinstance(data, Integer):
> ```
> as it will not catch Python integers
> 
> ```
> sage: CombinatorialPolyhedron(3r)
> Traceback (most recent call last):
> ...
> TypeError: argument 2 to map() must support iteration
> ```
> You should be using
> 
> ```
> sage: import numbers
> sage: isinstance(3r, numbers.Integral)
> True
> sage: isinstance(3, numbers.Integral)
> True
> ```

Thanks. I wasn't aware of this at all. In particual I didn't know of the nice solution. Somewhere else I do a `try: if a == Integer(a)`...
> 
> 
> On the class `Polyhedron` the how-many-are-there methods are called 
> `n_vertices`, ` n_rays`, `n_lines`, `n_inequalities` (with alias `n_facets`), `n_equations` while you choose `nr_vertices`, `nr_facets`. Why this difference?

Historic. I changed at at findpoly.org now to be consistent with Polyhedron. I should change this.

> line 625-627
> 
> ```
>             return Integer(self._length_Vrep)
>         else:
>             return Integer(len(self.vertices()))
> ```
> line 737
> 
> ```
>         return Integer(self._nr_facets)
> ```
> you can use `smallInteger`
> 
> ---
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ac3b02a0210409f35b622b459fa05306fc97ba"><code>72ac3b0</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116"><code>611099f</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr></table>




---

archive/issue_comments_414161.json:
```json
{
    "body": "Changed commit from **[`611099f`](https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116)** to **[`d38e130`](https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173)**",
    "created_at": "2019-05-07T18:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414161",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`611099f`](https://github.com/sagemath/sagetrac-mirror/commit/611099f6ebb69e71dc590af00f150bc2e154a116)** to **[`d38e130`](https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173)**



---

archive/issue_comments_414162.json:
```json
{
    "body": "<div id=\"comment:206\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173\"><code>d38e130</code></a></td><td><code>added combinatorial face</code></td></tr></table>\n",
    "created_at": "2019-05-07T18:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414162",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:206"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173"><code>d38e130</code></a></td><td><code>added combinatorial face</code></td></tr></table>




---

archive/issue_comments_414163.json:
```json
{
    "body": "<div id=\"comment:207\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698\"><code>ca60665</code></a></td><td><code>improved docstring in list_of_all_faces</code></td></tr></table>\n",
    "created_at": "2019-05-07T18:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414163",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:207"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698"><code>ca60665</code></a></td><td><code>improved docstring in list_of_all_faces</code></td></tr></table>




---

archive/issue_comments_414164.json:
```json
{
    "body": "Changed commit from **[`d38e130`](https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173)** to **[`ca60665`](https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698)**",
    "created_at": "2019-05-07T18:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414164",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d38e130`](https://github.com/sagemath/sagetrac-mirror/commit/d38e1300355722815880dbd633863dd4d1b54173)** to **[`ca60665`](https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698)**



---

archive/issue_events_366454.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-07T18:18:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366454"
}
```



---

archive/issue_events_366455.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-07T18:18:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366455"
}
```



---

archive/issue_comments_414165.json:
```json
{
    "body": "<div id=\"comment:208\" align=\"right\">comment:208</div>\n\nI moved some of the methods to `CombinatorialFace` now. This should be much nicer for a regular user to handle. The iterator returns something that one can use.",
    "created_at": "2019-05-07T18:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414165",
    "user": "https://github.com/kliem"
}
```

<div id="comment:208" align="right">comment:208</div>

I moved some of the methods to `CombinatorialFace` now. This should be much nicer for a regular user to handle. The iterator returns something that one can use.



---

archive/issue_comments_414166.json:
```json
{
    "body": "<div id=\"comment:209\" align=\"right\">comment:209</div>\n\ndoes not build, see patchbot reports",
    "created_at": "2019-05-07T18:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414166",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:209" align="right">comment:209</div>

does not build, see patchbot reports



---

archive/issue_comments_414167.json:
```json
{
    "body": "Changed commit from **[`ca60665`](https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698)** to **[`abe00b6`](https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e)**",
    "created_at": "2019-05-07T18:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414167",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca60665`](https://github.com/sagemath/sagetrac-mirror/commit/ca606656ddadfd4da9f98a74d0406b967a825698)** to **[`abe00b6`](https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e)**



---

archive/issue_comments_414168.json:
```json
{
    "body": "<div id=\"comment:210\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e\"><code>abe00b6</code></a></td><td><code>fixed small issues</code></td></tr></table>\n",
    "created_at": "2019-05-07T18:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414168",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:210"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e"><code>abe00b6</code></a></td><td><code>fixed small issues</code></td></tr></table>




---

archive/issue_comments_414169.json:
```json
{
    "body": "<div id=\"comment:211\" align=\"right\">comment:211</div>\n\nJust some small things. I am likely to accept a positive review on next round.\n\n- You use custom bitsets. Why not using the one provided in [SageMath](../wiki/SageMath) `sage.data_structures/bitest.[pxi,pxd]`? Most of it already uses optimized routines from GMP.\n\n- The name `ListOfAllFaces` sounds really strange.\n\n- It would be good to simplfy and uniformize string representations\n  - CombinatorialPolyhedron\n\n  ```\n  Combinatorial type of a polyhedron of dimension 4 with 16 vertices\n  ```\n    would better be\n\n  ```\n  A 4-dimensional combinatorial polyhedron with 16 vertices\n  ```\n  - FaceIterator\n\n  ```\n  Iterator over the 2-faces of a polyhedron of dimension 4\n  ```\n    would better be\n\n  ```\n  Iterator over the 2-faces of a 4-dimensional combinatorial polyhedron\n  ```\n  - CombinatorialFace\n\n  ```\n  Combinatorial type of a 2-dimensional face of a 3-dimensional polyhedron\n  ```\n    would better be\n\n  ```\n  A 2-dimensional face of 3-dimensional combinatorial polyhedron\n  ```\n\n- in `face_iterator.pyx` and `list_of_faces.pyx` there is no need to redefine the terminology already used in `base.pyx`. Just make a reference to the module.\n\n- If the error at line 2012 in of `base.pyx` can happen in a normal run it should be doctested. If not, replace it with a `RuntimeError`.\n\n- The module title should be words (not ListOfAllFaces or ListOfFaces)",
    "created_at": "2019-05-22T20:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414169",
    "user": "https://github.com/videlec"
}
```

<div id="comment:211" align="right">comment:211</div>

Just some small things. I am likely to accept a positive review on next round.

- You use custom bitsets. Why not using the one provided in [SageMath](../wiki/SageMath) `sage.data_structures/bitest.[pxi,pxd]`? Most of it already uses optimized routines from GMP.

- The name `ListOfAllFaces` sounds really strange.

- It would be good to simplfy and uniformize string representations
  - CombinatorialPolyhedron

  ```
  Combinatorial type of a polyhedron of dimension 4 with 16 vertices
  ```
    would better be

  ```
  A 4-dimensional combinatorial polyhedron with 16 vertices
  ```
  - FaceIterator

  ```
  Iterator over the 2-faces of a polyhedron of dimension 4
  ```
    would better be

  ```
  Iterator over the 2-faces of a 4-dimensional combinatorial polyhedron
  ```
  - CombinatorialFace

  ```
  Combinatorial type of a 2-dimensional face of a 3-dimensional polyhedron
  ```
    would better be

  ```
  A 2-dimensional face of 3-dimensional combinatorial polyhedron
  ```

- in `face_iterator.pyx` and `list_of_faces.pyx` there is no need to redefine the terminology already used in `base.pyx`. Just make a reference to the module.

- If the error at line 2012 in of `base.pyx` can happen in a normal run it should be doctested. If not, replace it with a `RuntimeError`.

- The module title should be words (not ListOfAllFaces or ListOfFaces)



---

archive/issue_comments_414170.json:
```json
{
    "body": "<div id=\"comment:212\" align=\"right\">comment:212</div>\n\nReplying to [@videlec](#comment:211):\n> Just some small things. I am likely to accept a positive review on next round.\n> \n> - You use custom bitsets. Why not using the one provided in [SageMath](../wiki/SageMath) `sage.data_structures/bitest.[pxi,pxd]`? Most of it already uses optimized routines from GMP.\n\nI wasn't aware of this at all. At some point I was looking for it but didn't find it.\n\nTo compute the f-vector etc. very fast, it seems to be important to not allocate any memory at all during the iteration (I actually should move the one alloc in `get_next_level` to a global property in `FaceIterator` as it will speed things up by about 4 percent).\n\nIn order to make this all work, I would have to use `bitset_t` directly.\n\nI guess I could. At the moment, it doesn't seem to me that the code will get a lot easier. Instead of allocating my memory with `MemoryAllocator` I would then allocate it with `Bitset`. The advantage of reinventing the wheel is that I could later enable intrinsics, which would give a speedup of at least 2 on many computers. I don't know how important this is.\n\n> \n> - The name `ListOfAllFaces` sounds really strange.\n> \n> - It would be good to simplfy and uniformize string representations\n>   - CombinatorialPolyhedron\n> \n>   ```\n>   Combinatorial type of a polyhedron of dimension 4 with 16 vertices\n>   ```\n>     would better be\n> \n>   ```\n>   A 4-dimensional combinatorial polyhedron with 16 vertices\n>   ```\n>   - FaceIterator\n> \n>   ```\n>   Iterator over the 2-faces of a polyhedron of dimension 4\n>   ```\n>     would better be\n> \n>   ```\n>   Iterator over the 2-faces of a 4-dimensional combinatorial polyhedron\n>   ```\n>   - CombinatorialFace\n> \n>   ```\n>   Combinatorial type of a 2-dimensional face of a 3-dimensional polyhedron\n>   ```\n>     would better be\n> \n>   ```\n>   A 2-dimensional face of 3-dimensional combinatorial polyhedron\n>   ```\n> \n> - in `face_iterator.pyx` and `list_of_faces.pyx` there is no need to redefine the terminology already used in `base.pyx`. Just make a reference to the module.\n> \n> - If the error at line 2012 in of `base.pyx` can happen in a normal run it should be doctested. If not, replace it with a `RuntimeError`.\n\nThis type of error is mostly meant for the case of an interrupt happening (in this case it will not be raised though). I don't expect this to happen ever.\n> \n> - The module title should be words (not ListOfAllFaces or ListOfFaces)",
    "created_at": "2019-05-22T21:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414170",
    "user": "https://github.com/kliem"
}
```

<div id="comment:212" align="right">comment:212</div>

Replying to [@videlec](#comment:211):
> Just some small things. I am likely to accept a positive review on next round.
> 
> - You use custom bitsets. Why not using the one provided in [SageMath](../wiki/SageMath) `sage.data_structures/bitest.[pxi,pxd]`? Most of it already uses optimized routines from GMP.

I wasn't aware of this at all. At some point I was looking for it but didn't find it.

To compute the f-vector etc. very fast, it seems to be important to not allocate any memory at all during the iteration (I actually should move the one alloc in `get_next_level` to a global property in `FaceIterator` as it will speed things up by about 4 percent).

In order to make this all work, I would have to use `bitset_t` directly.

I guess I could. At the moment, it doesn't seem to me that the code will get a lot easier. Instead of allocating my memory with `MemoryAllocator` I would then allocate it with `Bitset`. The advantage of reinventing the wheel is that I could later enable intrinsics, which would give a speedup of at least 2 on many computers. I don't know how important this is.

> 
> - The name `ListOfAllFaces` sounds really strange.
> 
> - It would be good to simplfy and uniformize string representations
>   - CombinatorialPolyhedron
> 
>   ```
>   Combinatorial type of a polyhedron of dimension 4 with 16 vertices
>   ```
>     would better be
> 
>   ```
>   A 4-dimensional combinatorial polyhedron with 16 vertices
>   ```
>   - FaceIterator
> 
>   ```
>   Iterator over the 2-faces of a polyhedron of dimension 4
>   ```
>     would better be
> 
>   ```
>   Iterator over the 2-faces of a 4-dimensional combinatorial polyhedron
>   ```
>   - CombinatorialFace
> 
>   ```
>   Combinatorial type of a 2-dimensional face of a 3-dimensional polyhedron
>   ```
>     would better be
> 
>   ```
>   A 2-dimensional face of 3-dimensional combinatorial polyhedron
>   ```
> 
> - in `face_iterator.pyx` and `list_of_faces.pyx` there is no need to redefine the terminology already used in `base.pyx`. Just make a reference to the module.
> 
> - If the error at line 2012 in of `base.pyx` can happen in a normal run it should be doctested. If not, replace it with a `RuntimeError`.

This type of error is mostly meant for the case of an interrupt happening (in this case it will not be raised though). I don't expect this to happen ever.
> 
> - The module title should be words (not ListOfAllFaces or ListOfFaces)



---

archive/issue_comments_414171.json:
```json
{
    "body": "<div id=\"comment:213\" align=\"right\">comment:213</div>\n\n> It would be good to simplfy and uniformize string representations\n\n\nHere are two more issues with the repr:\n\n```\nsage: P = Polyhedron(ieqs=[[0,1]]); P\nA 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray\nsage: CombinatorialPolyhedron(P)\nCombinatorial type of a polyhedron of dimension 1 with 1 vertices\n```\nWhy do you suppress the information about the ray here?\n\n```\nsage: P = Polyhedron(ieqs=[[0,1,0]]); P\nA 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line\n```\nThis is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,\n\n```\nsage: CombinatorialPolyhedron(P)\nCombinatorial type of a polyhedron of dimension 2 with 0 vertices\n```\nis correct, but suppresses the information about rays and lines.\n\nAlso, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?",
    "created_at": "2019-05-23T07:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414171",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:213" align="right">comment:213</div>

> It would be good to simplfy and uniformize string representations


Here are two more issues with the repr:

```
sage: P = Polyhedron(ieqs=[[0,1]]); P
A 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray
sage: CombinatorialPolyhedron(P)
Combinatorial type of a polyhedron of dimension 1 with 1 vertices
```
Why do you suppress the information about the ray here?

```
sage: P = Polyhedron(ieqs=[[0,1,0]]); P
A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line
```
This is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,

```
sage: CombinatorialPolyhedron(P)
Combinatorial type of a polyhedron of dimension 2 with 0 vertices
```
is correct, but suppresses the information about rays and lines.

Also, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?



---

archive/issue_comments_414172.json:
```json
{
    "body": "<div id=\"comment:214\" align=\"right\">comment:214</div>\n\nReplying to [@stumpc5](#comment:213):\n> > It would be good to simplfy and uniformize string representations\n\n> \n> \n> Here are two more issues with the repr:\n> \n> ```\n> sage: P = Polyhedron(ieqs=[[0,1]]); P\n> A 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray\n> sage: CombinatorialPolyhedron(P)\n> Combinatorial type of a polyhedron of dimension 1 with 1 vertices\n> ```\n> Why do you suppress the information about the ray here?\n> \n> ```\n> sage: P = Polyhedron(ieqs=[[0,1,0]]); P\n> A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line\n> ```\n> This is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,\n> \n> ```\n> sage: CombinatorialPolyhedron(P)\n> Combinatorial type of a polyhedron of dimension 2 with 0 vertices\n> ```\n> is correct, but suppresses the information about rays and lines.\n\nI could just add it, I guess.\n> \n> Also, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?\n\nCan you be more precise? I don't get what you want.\nShould I store the information somewhere, if one does `ignore_subfaces`?\nWhat do you mean by provide the information about atoms and coatoms?",
    "created_at": "2019-05-23T21:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414172",
    "user": "https://github.com/kliem"
}
```

<div id="comment:214" align="right">comment:214</div>

Replying to [@stumpc5](#comment:213):
> > It would be good to simplfy and uniformize string representations

> 
> 
> Here are two more issues with the repr:
> 
> ```
> sage: P = Polyhedron(ieqs=[[0,1]]); P
> A 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray
> sage: CombinatorialPolyhedron(P)
> Combinatorial type of a polyhedron of dimension 1 with 1 vertices
> ```
> Why do you suppress the information about the ray here?
> 
> ```
> sage: P = Polyhedron(ieqs=[[0,1,0]]); P
> A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line
> ```
> This is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,
> 
> ```
> sage: CombinatorialPolyhedron(P)
> Combinatorial type of a polyhedron of dimension 2 with 0 vertices
> ```
> is correct, but suppresses the information about rays and lines.

I could just add it, I guess.
> 
> Also, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?

Can you be more precise? I don't get what you want.
Should I store the information somewhere, if one does `ignore_subfaces`?
What do you mean by provide the information about atoms and coatoms?



---

archive/issue_comments_414173.json:
```json
{
    "body": "<div id=\"comment:215\" align=\"right\">comment:215</div>\n\nReplying to [@kliem](#comment:214):\n> Can you be more precise? I don't get what you want.\n\nSorry -- I meant to ask you to provide methods `atoms`, `coatoms` and ( `ignored_facet` or `facet_at_infinity` ). Also, it is worth pointing in the documentation to the description of the algorithm in the paper so that it becomes clear what atoms and coatoms are.",
    "created_at": "2019-05-24T04:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414173",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:215" align="right">comment:215</div>

Replying to [@kliem](#comment:214):
> Can you be more precise? I don't get what you want.

Sorry -- I meant to ask you to provide methods `atoms`, `coatoms` and ( `ignored_facet` or `facet_at_infinity` ). Also, it is worth pointing in the documentation to the description of the algorithm in the paper so that it becomes clear what atoms and coatoms are.



---

archive/issue_comments_414174.json:
```json
{
    "body": "<div id=\"comment:216\" align=\"right\">comment:216</div>\n\nReplying to [@stumpc5](#comment:215):\n> Replying to [@kliem](#comment:214):\n> > Can you be more precise? I don't get what you want.\n\n> \n> Sorry -- I meant to ask you to provide methods `atoms`, `coatoms` and ( `ignored_facet` or `facet_at_infinity` ). Also, it is worth pointing in the documentation to the description of the algorithm in the paper so that it becomes clear what atoms and coatoms are.\n\nAt the moment the `FaceIterator` is just an Iterator with two extra methods (that manipulate iteration). I don't know, how much sense it makes, to provide more methods.\n\nThe method `ignored_facet` does not make any sense at the moment. For an unbounded polyhedron, there is no facet at infinity as part of the input. Not providing the facet at infinity works as well (and this is the way the Iterator is set up).\n\nOne could add a method, that provides the faces that are currently ignored.\n\nWhile the iterator knows coatoms (and their names) it doesn't know the atoms (only their names). The atoms are calculated along the way (while the names for the indices might have been provided). Adding such a method isn't a big deal, but it's not there at the moment.",
    "created_at": "2019-05-28T08:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414174",
    "user": "https://github.com/kliem"
}
```

<div id="comment:216" align="right">comment:216</div>

Replying to [@stumpc5](#comment:215):
> Replying to [@kliem](#comment:214):
> > Can you be more precise? I don't get what you want.

> 
> Sorry -- I meant to ask you to provide methods `atoms`, `coatoms` and ( `ignored_facet` or `facet_at_infinity` ). Also, it is worth pointing in the documentation to the description of the algorithm in the paper so that it becomes clear what atoms and coatoms are.

At the moment the `FaceIterator` is just an Iterator with two extra methods (that manipulate iteration). I don't know, how much sense it makes, to provide more methods.

The method `ignored_facet` does not make any sense at the moment. For an unbounded polyhedron, there is no facet at infinity as part of the input. Not providing the facet at infinity works as well (and this is the way the Iterator is set up).

One could add a method, that provides the faces that are currently ignored.

While the iterator knows coatoms (and their names) it doesn't know the atoms (only their names). The atoms are calculated along the way (while the names for the indices might have been provided). Adding such a method isn't a big deal, but it's not there at the moment.



---

archive/issue_comments_414175.json:
```json
{
    "body": "<div id=\"comment:217\" align=\"right\">comment:217</div>\n\nReplying to [@videlec](#comment:211):\n> Just some small things. I am likely to accept a positive review on next round.\n> \n> - The name `ListOfAllFaces` sounds really strange.\n> \n\nCan we agree on a name, before I change it?\n\nThis class stores all faces of the polyhedron to generate then all cover relations for the face lattice. Possibly in the future it can also calculate a specified flag vector.\n\nWhat would be a good name for it?\n\n`FaceLattice(Creator)`, `CoverRelations`. I can't think of a better name at the moment.",
    "created_at": "2019-05-28T13:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414175",
    "user": "https://github.com/kliem"
}
```

<div id="comment:217" align="right">comment:217</div>

Replying to [@videlec](#comment:211):
> Just some small things. I am likely to accept a positive review on next round.
> 
> - The name `ListOfAllFaces` sounds really strange.
> 

Can we agree on a name, before I change it?

This class stores all faces of the polyhedron to generate then all cover relations for the face lattice. Possibly in the future it can also calculate a specified flag vector.

What would be a good name for it?

`FaceLattice(Creator)`, `CoverRelations`. I can't think of a better name at the moment.



---

archive/issue_comments_414176.json:
```json
{
    "body": "<div id=\"comment:218\" align=\"right\">comment:218</div>\n\nReplying to [@kliem](#comment:217):\n> Replying to [@videlec](#comment:211):\n> > Just some small things. I am likely to accept a positive review on next round.\n> > \n> > - The name `ListOfAllFaces` sounds really strange.\n> > \n\n> Can we agree on a name, before I change it?\n> \n> This class stores all faces of the polyhedron to generate then all cover relations for the face lattice. Possibly in the future it can also calculate a specified flag vector.\n> \n> What would be a good name for it?\n> \n> `FaceLattice(Creator)`, `CoverRelations`. I can't think of a better name at the moment.\n\nA name closer to the initial one is `PolyhedronFaces`. If this object contains all the information about the lattice, then `PolyhedronFaceLattice` is even better.",
    "created_at": "2019-05-28T13:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414176",
    "user": "https://github.com/videlec"
}
```

<div id="comment:218" align="right">comment:218</div>

Replying to [@kliem](#comment:217):
> Replying to [@videlec](#comment:211):
> > Just some small things. I am likely to accept a positive review on next round.
> > 
> > - The name `ListOfAllFaces` sounds really strange.
> > 

> Can we agree on a name, before I change it?
> 
> This class stores all faces of the polyhedron to generate then all cover relations for the face lattice. Possibly in the future it can also calculate a specified flag vector.
> 
> What would be a good name for it?
> 
> `FaceLattice(Creator)`, `CoverRelations`. I can't think of a better name at the moment.

A name closer to the initial one is `PolyhedronFaces`. If this object contains all the information about the lattice, then `PolyhedronFaceLattice` is even better.



---

archive/issue_events_366456.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-28T14:46:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366456"
}
```



---

archive/issue_events_366457.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-28T14:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366457"
}
```



---

archive/issue_comments_414177.json:
```json
{
    "body": "<div id=\"comment:220\" align=\"right\">comment:220</div>\n\nReplying to [@videlec](#comment:218):\n> then `PolyhedronFaceLattice` is even better.\n\nI like it.\n\nI will be working in the comments now. Might take some time, as I'm only able to work 5 minutes at a time or so (or at night).",
    "created_at": "2019-05-28T14:51:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414177",
    "user": "https://github.com/kliem"
}
```

<div id="comment:220" align="right">comment:220</div>

Replying to [@videlec](#comment:218):
> then `PolyhedronFaceLattice` is even better.

I like it.

I will be working in the comments now. Might take some time, as I'm only able to work 5 minutes at a time or so (or at night).



---

archive/issue_comments_414178.json:
```json
{
    "body": "<div id=\"comment:221\" align=\"right\">comment:221</div>\n\nI now give the number of facets. This seems more natural to me, as this is how `CombinatorialPolyhedron` is constructed from the facets. \nThis seems to be more meaningful for many unbounded polyhedra as well (unless one wants to count lowest dimensional proper faces as \"vertices\").\n\nAlso it seems hard to determine the difference between vertices and rays from an incidence matrix.\n\nAt the moment this module is not optimized for unbounded polyhedra, but I guess this should be left for later (e.g. the vertices are recalculated every time).\n\nReplying to [@kliem](#comment:214):\n> Replying to [@stumpc5](#comment:213):\n> > > It would be good to simplfy and uniformize string representations\n\n> > \n> > \n> > Here are two more issues with the repr:\n> > \n> > ```\n> > sage: P = Polyhedron(ieqs=[[0,1]]); P\n> > A 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray\n> > sage: CombinatorialPolyhedron(P)\n> > Combinatorial type of a polyhedron of dimension 1 with 1 vertices\n> > ```\n> > Why do you suppress the information about the ray here?\n> > \n> > ```\n> > sage: P = Polyhedron(ieqs=[[0,1,0]]); P\n> > A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line\n> > ```\n> > This is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,\n> > \n> > ```\n> > sage: CombinatorialPolyhedron(P)\n> > Combinatorial type of a polyhedron of dimension 2 with 0 vertices\n> > ```\n> > is correct, but suppresses the information about rays and lines.\n\n> I could just add it, I guess.\n> > \n> > Also, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?\n\n> Can you be more precise? I don't get what you want.\n> Should I store the information somewhere, if one does `ignore_subfaces`?\n> What do you mean by provide the information about atoms and coatoms?",
    "created_at": "2019-05-29T08:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414178",
    "user": "https://github.com/kliem"
}
```

<div id="comment:221" align="right">comment:221</div>

I now give the number of facets. This seems more natural to me, as this is how `CombinatorialPolyhedron` is constructed from the facets. 
This seems to be more meaningful for many unbounded polyhedra as well (unless one wants to count lowest dimensional proper faces as "vertices").

Also it seems hard to determine the difference between vertices and rays from an incidence matrix.

At the moment this module is not optimized for unbounded polyhedra, but I guess this should be left for later (e.g. the vertices are recalculated every time).

Replying to [@kliem](#comment:214):
> Replying to [@stumpc5](#comment:213):
> > > It would be good to simplfy and uniformize string representations

> > 
> > 
> > Here are two more issues with the repr:
> > 
> > ```
> > sage: P = Polyhedron(ieqs=[[0,1]]); P
> > A 1-dimensional polyhedron in QQ^1 defined as the convex hull of 1 vertex and 1 ray
> > sage: CombinatorialPolyhedron(P)
> > Combinatorial type of a polyhedron of dimension 1 with 1 vertices
> > ```
> > Why do you suppress the information about the ray here?
> > 
> > ```
> > sage: P = Polyhedron(ieqs=[[0,1,0]]); P
> > A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 1 vertex, 1 ray, 1 line
> > ```
> > This is correct if we consider P to be the product of a single ray starting from the origin and a line. But this polyhedron itself does not have a one-dimensional face (aka vertex) in the usual definition of faces. On the other hand,
> > 
> > ```
> > sage: CombinatorialPolyhedron(P)
> > Combinatorial type of a polyhedron of dimension 2 with 0 vertices
> > ```
> > is correct, but suppresses the information about rays and lines.

> I could just add it, I guess.
> > 
> > Also, might it be worth being able to provide the information about atoms, coatoms and ignored facets (if any) in the lattice that is used to iterate through all faces?

> Can you be more precise? I don't get what you want.
> Should I store the information somewhere, if one does `ignore_subfaces`?
> What do you mean by provide the information about atoms and coatoms?



---

archive/issue_comments_414179.json:
```json
{
    "body": "<div id=\"comment:222\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6\"><code>8765313</code></a></td><td><code>A number of small edits.</code></td></tr></table>\n",
    "created_at": "2019-05-31T20:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414179",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:222"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6"><code>8765313</code></a></td><td><code>A number of small edits.</code></td></tr></table>




---

archive/issue_comments_414180.json:
```json
{
    "body": "Changed commit from **[`abe00b6`](https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e)** to **[`8765313`](https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6)**",
    "created_at": "2019-05-31T20:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414180",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`abe00b6`](https://github.com/sagemath/sagetrac-mirror/commit/abe00b66751c26f756b7b247064f8db01d5b0f0e)** to **[`8765313`](https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6)**



---

archive/issue_events_366458.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-31T20:37:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366458"
}
```



---

archive/issue_events_366459.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-05-31T20:37:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366459"
}
```



---

archive/issue_comments_414181.json:
```json
{
    "body": "<div id=\"comment:223\" align=\"right\">comment:223</div>\n\nI think I took care of above comments.",
    "created_at": "2019-05-31T20:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414181",
    "user": "https://github.com/kliem"
}
```

<div id="comment:223" align="right">comment:223</div>

I think I took care of above comments.



---

archive/issue_comments_414182.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Travis Scrimshaw, Vincent Delecroix**",
    "created_at": "2019-06-04T05:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414182",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Jeroen Demeyer, Travis Scrimshaw, Vincent Delecroix**



---

archive/issue_comments_414183.json:
```json
{
    "body": "<div id=\"comment:224\" align=\"right\">comment:224</div>\n\nI propose to move forward and set to positive review. If nobody objects, I will do so later today.",
    "created_at": "2019-06-04T05:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414183",
    "user": "https://github.com/videlec"
}
```

<div id="comment:224" align="right">comment:224</div>

I propose to move forward and set to positive review. If nobody objects, I will do so later today.



---

archive/issue_comments_414184.json:
```json
{
    "body": "<div id=\"comment:225\" align=\"right\">comment:225</div>\n\nI don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron\n\n```\nsage: def KunzCone(m):\n....:     V = ZZ^(m-1)\n....:     B = V.basis()\n....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]\n....:     return Polyhedron(ieqs=ieqs, backend=\"normaliz\")\n\nsage: P = KunzCone(5)\nsage: Q1 = CombinatorialPolyhedron(P)\nsage: Q1\nCombinatorial type of a polyhedron of dimension 4 with 1 vertices\nsage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))\nsage: Q2\nCombinatorial type of a polyhedron of dimension 4 with 9 vertices\nsage: Q1.f_vector(); Q2.f_vector()\n(1, 1, 8, 14, 8, 1)\n(1, 1, 8, 14, 8, 1)\n```\nand can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?\n\nAs said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.",
    "created_at": "2019-06-04T13:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414184",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:225" align="right">comment:225</div>

I don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron

```
sage: def KunzCone(m):
....:     V = ZZ^(m-1)
....:     B = V.basis()
....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]
....:     return Polyhedron(ieqs=ieqs, backend="normaliz")

sage: P = KunzCone(5)
sage: Q1 = CombinatorialPolyhedron(P)
sage: Q1
Combinatorial type of a polyhedron of dimension 4 with 1 vertices
sage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))
sage: Q2
Combinatorial type of a polyhedron of dimension 4 with 9 vertices
sage: Q1.f_vector(); Q2.f_vector()
(1, 1, 8, 14, 8, 1)
(1, 1, 8, 14, 8, 1)
```
and can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?

As said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.



---

archive/issue_comments_414185.json:
```json
{
    "body": "<div id=\"comment:226\" align=\"right\">comment:226</div>\n\nThe representation has changed to give the number of facets now.\nSo this output won't happen like this anymore.\n\nAnyway, one has to set the correct `nr_lines`, when giving a list of facets for an unbounded polyhedron.\n\n`if the polyhedron is unbounded, then rays and lines and the extra argument ``nr_lines`` are required`\n\nIt his hard to determine from a list, which elements of the `Vrepresentation` are actually vertices and which are rays (and in one instance it is impossible to distinct between `nr_lines = 0` and `nr_lines = 1` just from this input, hence the requirement).\nIf the polyhedron is not unbounded, than the algorithm can just proceed on the polar polyhedron, this is not possible in the unbounded case.\n\nReplying to [@stumpc5](#comment:225):\n> I don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron\n> \n> ```\n> sage: def KunzCone(m):\n> ....:     V = ZZ^(m-1)\n> ....:     B = V.basis()\n> ....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]\n> ....:     return Polyhedron(ieqs=ieqs, backend=\"normaliz\")\n> \n> sage: P = KunzCone(5)\n> sage: Q1 = CombinatorialPolyhedron(P)\n> sage: Q1\n> Combinatorial type of a polyhedron of dimension 4 with 1 vertices\n> sage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))\n> sage: Q2\n> Combinatorial type of a polyhedron of dimension 4 with 9 vertices\n> sage: Q1.f_vector(); Q2.f_vector()\n> (1, 1, 8, 14, 8, 1)\n> (1, 1, 8, 14, 8, 1)\n> ```\n> and can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?\n> \n> As said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.",
    "created_at": "2019-06-04T13:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414185",
    "user": "https://github.com/kliem"
}
```

<div id="comment:226" align="right">comment:226</div>

The representation has changed to give the number of facets now.
So this output won't happen like this anymore.

Anyway, one has to set the correct `nr_lines`, when giving a list of facets for an unbounded polyhedron.

`if the polyhedron is unbounded, then rays and lines and the extra argument ``nr_lines`` are required`

It his hard to determine from a list, which elements of the `Vrepresentation` are actually vertices and which are rays (and in one instance it is impossible to distinct between `nr_lines = 0` and `nr_lines = 1` just from this input, hence the requirement).
If the polyhedron is not unbounded, than the algorithm can just proceed on the polar polyhedron, this is not possible in the unbounded case.

Replying to [@stumpc5](#comment:225):
> I don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron
> 
> ```
> sage: def KunzCone(m):
> ....:     V = ZZ^(m-1)
> ....:     B = V.basis()
> ....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]
> ....:     return Polyhedron(ieqs=ieqs, backend="normaliz")
> 
> sage: P = KunzCone(5)
> sage: Q1 = CombinatorialPolyhedron(P)
> sage: Q1
> Combinatorial type of a polyhedron of dimension 4 with 1 vertices
> sage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))
> sage: Q2
> Combinatorial type of a polyhedron of dimension 4 with 9 vertices
> sage: Q1.f_vector(); Q2.f_vector()
> (1, 1, 8, 14, 8, 1)
> (1, 1, 8, 14, 8, 1)
> ```
> and can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?
> 
> As said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.



---

archive/issue_comments_414186.json:
```json
{
    "body": "<div id=\"comment:227\" align=\"right\">comment:227</div>\n\nI think the input arguments should be more intuitive.\nI also think this should happen in a follow up ticket.\n\nInstead of doing it all over `n_lines`, one should have another argument `is_bounded`.\nI think this is easier to use.\n\nReplying to [@kliem](#comment:226):\n> The representation has changed to give the number of facets now.\n> So this output won't happen like this anymore.\n> \n> Anyway, one has to set the correct `nr_lines`, when giving a list of facets for an unbounded polyhedron.\n> \n> `if the polyhedron is unbounded, then rays and lines and the extra argument ``nr_lines`` are required`\n> \n> It his hard to determine from a list, which elements of the `Vrepresentation` are actually vertices and which are rays (and in one instance it is impossible to distinct between `nr_lines = 0` and `nr_lines = 1` just from this input, hence the requirement).\n> If the polyhedron is not unbounded, than the algorithm can just proceed on the polar polyhedron, this is not possible in the unbounded case.\n> \n> Replying to [@stumpc5](#comment:225):\n> > I don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron\n> > \n> > ```\n> > sage: def KunzCone(m):\n> > ....:     V = ZZ^(m-1)\n> > ....:     B = V.basis()\n> > ....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]\n> > ....:     return Polyhedron(ieqs=ieqs, backend=\"normaliz\")\n> > \n> > sage: P = KunzCone(5)\n> > sage: Q1 = CombinatorialPolyhedron(P)\n> > sage: Q1\n> > Combinatorial type of a polyhedron of dimension 4 with 1 vertices\n> > sage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))\n> > sage: Q2\n> > Combinatorial type of a polyhedron of dimension 4 with 9 vertices\n> > sage: Q1.f_vector(); Q2.f_vector()\n> > (1, 1, 8, 14, 8, 1)\n> > (1, 1, 8, 14, 8, 1)\n> > ```\n> > and can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?\n> > \n> > As said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.",
    "created_at": "2019-06-04T15:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414186",
    "user": "https://github.com/kliem"
}
```

<div id="comment:227" align="right">comment:227</div>

I think the input arguments should be more intuitive.
I also think this should happen in a follow up ticket.

Instead of doing it all over `n_lines`, one should have another argument `is_bounded`.
I think this is easier to use.

Replying to [@kliem](#comment:226):
> The representation has changed to give the number of facets now.
> So this output won't happen like this anymore.
> 
> Anyway, one has to set the correct `nr_lines`, when giving a list of facets for an unbounded polyhedron.
> 
> `if the polyhedron is unbounded, then rays and lines and the extra argument ``nr_lines`` are required`
> 
> It his hard to determine from a list, which elements of the `Vrepresentation` are actually vertices and which are rays (and in one instance it is impossible to distinct between `nr_lines = 0` and `nr_lines = 1` just from this input, hence the requirement).
> If the polyhedron is not unbounded, than the algorithm can just proceed on the polar polyhedron, this is not possible in the unbounded case.
> 
> Replying to [@stumpc5](#comment:225):
> > I don't want to slow this ticket down by any means. Anyways, isn't the following two times the same combinatorial polyhedron
> > 
> > ```
> > sage: def KunzCone(m):
> > ....:     V = ZZ^(m-1)
> > ....:     B = V.basis()
> > ....:     ieqs = [ [0] + list(B[i-1]+B[j-1]-B[(i+j-1) % m]) for j in [1 .. m-1] for i in [1 .. j] if i+j != m]
> > ....:     return Polyhedron(ieqs=ieqs, backend="normaliz")
> > 
> > sage: P = KunzCone(5)
> > sage: Q1 = CombinatorialPolyhedron(P)
> > sage: Q1
> > Combinatorial type of a polyhedron of dimension 4 with 1 vertices
> > sage: Q2 = CombinatorialPolyhedron(Q1.facets(names=False))
> > sage: Q2
> > Combinatorial type of a polyhedron of dimension 4 with 9 vertices
> > sage: Q1.f_vector(); Q2.f_vector()
> > (1, 1, 8, 14, 8, 1)
> > (1, 1, 8, 14, 8, 1)
> > ```
> > and can thus only have either 1 or 9 vertices (whatever the definition of vertices might be)?
> > 
> > As said, I would positive about letting this pass---as it is really strong computational-wise---and postpone any minor issues into new tickets.



---

archive/issue_events_366460.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-06T08:56:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366460"
}
```



---

archive/issue_events_366461.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-06T08:56:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366461"
}
```



---

archive/issue_comments_414187.json:
```json
{
    "body": "<div id=\"comment:229\" align=\"right\">comment:229</div>\n\nPlease move any further discussion to new tickets.",
    "created_at": "2019-06-06T08:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414187",
    "user": "https://github.com/videlec"
}
```

<div id="comment:229" align="right">comment:229</div>

Please move any further discussion to new tickets.



---

archive/issue_comments_414188.json:
```json
{
    "body": "Changed dependencies from **#27292** to none",
    "created_at": "2019-06-09T18:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414188",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#27292** to none



---

archive/issue_events_366462.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T13:50:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366462"
}
```



---

archive/issue_events_366463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T13:50:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366463"
}
```



---

archive/issue_comments_414189.json:
```json
{
    "body": "<div id=\"comment:231\" align=\"right\">comment:231</div>\n\nFails on e.g. Debian 8:\n\n```\n[sagelib-8.8] [ 98/495] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc -o build/temp.linux-i686-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.o\n[sagelib-8.8] In file included from /usr/include/c++/4.9/cstdint:35:0,\n[sagelib-8.8]                  from sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:13:\n[sagelib-8.8] /usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\n[sagelib-8.8]  #error This file requires compiler and library support for the \\\n[sagelib-8.8]   ^\n[sagelib-8.8] sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:27:22: error: \u2018is_subset\u2019 declared as an \u2018inline\u2019 variable\n```",
    "created_at": "2019-06-27T13:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414189",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:231" align="right">comment:231</div>

Fails on e.g. Debian 8:

```
[sagelib-8.8] [ 98/495] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc -o build/temp.linux-i686-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.o
[sagelib-8.8] In file included from /usr/include/c++/4.9/cstdint:35:0,
[sagelib-8.8]                  from sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:13:
[sagelib-8.8] /usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.
[sagelib-8.8]  #error This file requires compiler and library support for the \
[sagelib-8.8]   ^
[sagelib-8.8] sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:27:22: error: ‘is_subset’ declared as an ‘inline’ variable
```



---

archive/issue_comments_414190.json:
```json
{
    "body": "<div id=\"comment:232\" align=\"right\">comment:232</div>\n\nAs far as I know there are two ways of solving this.\n\nEither use the macro `__cplusplus` to determine the c++ version and not use `inline` if it is not available. (This would be a quick fix I guess).\n\nUse `-std=c++11` as compile argument.\n\nAny opinions?\n\nReplying to [@vbraun](#comment:231):\n> Fails on e.g. Debian 8:\n> \n> ```\n> [sagelib-8.8] [ 98/495] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc -o build/temp.linux-i686-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.o\n> [sagelib-8.8] In file included from /usr/include/c++/4.9/cstdint:35:0,\n> [sagelib-8.8]                  from sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:13:\n> [sagelib-8.8] /usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\n> [sagelib-8.8]  #error This file requires compiler and library support for the \\\n> [sagelib-8.8]   ^\n> [sagelib-8.8] sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:27:22: error: \u2018is_subset\u2019 declared as an \u2018inline\u2019 variable\n> ```",
    "created_at": "2019-06-27T14:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414190",
    "user": "https://github.com/kliem"
}
```

<div id="comment:232" align="right">comment:232</div>

As far as I know there are two ways of solving this.

Either use the macro `__cplusplus` to determine the c++ version and not use `inline` if it is not available. (This would be a quick fix I guess).

Use `-std=c++11` as compile argument.

Any opinions?

Replying to [@vbraun](#comment:231):
> Fails on e.g. Debian 8:
> 
> ```
> [sagelib-8.8] [ 98/495] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc -o build/temp.linux-i686-2.7/sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.o
> [sagelib-8.8] In file included from /usr/include/c++/4.9/cstdint:35:0,
> [sagelib-8.8]                  from sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:13:
> [sagelib-8.8] /usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.
> [sagelib-8.8]  #error This file requires compiler and library support for the \
> [sagelib-8.8]   ^
> [sagelib-8.8] sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc:27:22: error: ‘is_subset’ declared as an ‘inline’ variable
> ```



---

archive/issue_comments_414191.json:
```json
{
    "body": "<div id=\"comment:233\" align=\"right\">comment:233</div>\n\nReplying to [@kliem](#comment:232):\n> As far as I know there are two ways of solving this.\n> \n> Either use the macro `__cplusplus` to determine the c++ version and not use `inline` if it is not available. (This would be a quick fix I guess).\n> \n> Use `-std=c++11` as compile argument.\n> \n> Any opinions?\n\nAdd the `-std=c++11` option to the concerned extension\n\n```\n    Extension('sage.geometry.polyhedron.combinatorial_polyhedron.bit_vector_operations.cc',\n              sources = ['sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc'],\n              extra_compile_args=['-std=c++11']),\n```",
    "created_at": "2019-06-27T14:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414191",
    "user": "https://github.com/videlec"
}
```

<div id="comment:233" align="right">comment:233</div>

Replying to [@kliem](#comment:232):
> As far as I know there are two ways of solving this.
> 
> Either use the macro `__cplusplus` to determine the c++ version and not use `inline` if it is not available. (This would be a quick fix I guess).
> 
> Use `-std=c++11` as compile argument.
> 
> Any opinions?

Add the `-std=c++11` option to the concerned extension

```
    Extension('sage.geometry.polyhedron.combinatorial_polyhedron.bit_vector_operations.cc',
              sources = ['sage/geometry/polyhedron/combinatorial_polyhedron/bit_vector_operations.cc'],
              extra_compile_args=['-std=c++11']),
```



---

archive/issue_comments_414192.json:
```json
{
    "body": "Changed commit from **[`8765313`](https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6)** to **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**",
    "created_at": "2019-06-27T19:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414192",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8765313`](https://github.com/sagemath/sagetrac-mirror/commit/87653135948037f4e385a8cb0896379cda1608d6)** to **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**



---

archive/issue_comments_414193.json:
```json
{
    "body": "<div id=\"comment:234\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/092c916c48da5f514802fdf78b8c65233aa0b28b\"><code>092c916</code></a></td><td><code>split list_of_faces, fixed imports etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d54b3eef4f20723389157e0f102ae3e25dd521\"><code>46d54b3</code></a></td><td><code>added documentation and examples to each module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ee84ce6e655de9cf5c9250b1de47bfa5002e66e\"><code>8ee84ce</code></a></td><td><code>correct hyperlinks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3869c1f8599b79966dd1138e5aad5077e41cc9fd\"><code>3869c1f</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/938b04c6d8a7781f1678ff19b568a1adf28bc2be\"><code>938b04c</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6d5b089018e4d8be175438aabc0525f67ae96ff\"><code>e6d5b08</code></a></td><td><code>added combinatorial face</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69e28ba89cb0531d1b1d488ac957919610cb41e9\"><code>69e28ba</code></a></td><td><code>improved docstring in list_of_all_faces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e2a52b65ddb53d6c2beb4441a16f5898f8b6976\"><code>1e2a52b</code></a></td><td><code>fixed small issues</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e298ed0b6bfa9318d967a94b7bdfe864ceedb454\"><code>e298ed0</code></a></td><td><code>A number of small edits.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb\"><code>39a7099</code></a></td><td><code>added compile argument -std=c++11</code></td></tr></table>\n",
    "created_at": "2019-06-27T19:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414193",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:234"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/092c916c48da5f514802fdf78b8c65233aa0b28b"><code>092c916</code></a></td><td><code>split list_of_faces, fixed imports etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d54b3eef4f20723389157e0f102ae3e25dd521"><code>46d54b3</code></a></td><td><code>added documentation and examples to each module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ee84ce6e655de9cf5c9250b1de47bfa5002e66e"><code>8ee84ce</code></a></td><td><code>correct hyperlinks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3869c1f8599b79966dd1138e5aad5077e41cc9fd"><code>3869c1f</code></a></td><td><code>documentation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/938b04c6d8a7781f1678ff19b568a1adf28bc2be"><code>938b04c</code></a></td><td><code>Do not iterate twice for CombinatorialPolyhedron.facets()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6d5b089018e4d8be175438aabc0525f67ae96ff"><code>e6d5b08</code></a></td><td><code>added combinatorial face</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69e28ba89cb0531d1b1d488ac957919610cb41e9"><code>69e28ba</code></a></td><td><code>improved docstring in list_of_all_faces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e2a52b65ddb53d6c2beb4441a16f5898f8b6976"><code>1e2a52b</code></a></td><td><code>fixed small issues</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e298ed0b6bfa9318d967a94b7bdfe864ceedb454"><code>e298ed0</code></a></td><td><code>A number of small edits.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb"><code>39a7099</code></a></td><td><code>added compile argument -std=c++11</code></td></tr></table>




---

archive/issue_events_366464.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-27T19:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366464"
}
```



---

archive/issue_events_366465.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-27T19:04:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366465"
}
```



---

archive/issue_comments_414194.json:
```json
{
    "body": "<div id=\"comment:235\" align=\"right\">comment:235</div>\n\nadded compile argument, this should work now (also #27987 fixes already a bug in the unbounded case)\n\nThanks for all the help, btw.",
    "created_at": "2019-06-27T19:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414194",
    "user": "https://github.com/kliem"
}
```

<div id="comment:235" align="right">comment:235</div>

added compile argument, this should work now (also #27987 fixes already a bug in the unbounded case)

Thanks for all the help, btw.



---

archive/issue_events_366466.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-28T05:25:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366466"
}
```



---

archive/issue_events_366467.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-28T05:25:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366467"
}
```



---

archive/issue_events_366468.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-01T06:40:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366468"
}
```



---

archive/issue_events_366469.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-01T06:40:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366469"
}
```



---

archive/issue_events_366470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-04T11:09:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366470"
}
```



---

archive/issue_events_366471.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7e59cdd5c4f37fddafc9e07d3e29646793b49be3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-07-04T11:09:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26887#event-366471"
}
```



---

archive/issue_comments_414195.json:
```json
{
    "body": "Changed branch from **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)** to **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**",
    "created_at": "2019-07-04T11:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414195",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/26887](https://github.com/sagemath/sagetrac-mirror/tree/public/26887)** to **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)**



---

archive/issue_comments_414196.json:
```json
{
    "body": "Changed commit from **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)** to none",
    "created_at": "2019-07-10T09:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414196",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`39a7099`](https://github.com/sagemath/sagetrac-mirror/commit/39a70997144faad3c3656770fb17de1e6c4805eb)** to none



---

archive/issue_comments_414197.json:
```json
{
    "body": "<div id=\"comment:239\" align=\"right\">comment:239</div>\n\nThis triggers a new failing doctest with python3-sage:\n\n```\nsage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 937, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.edge_graph\nFailed example:\n    G.degree()\nExpected:\n    [4, 3, 4, 3, 4]\nGot:\n    [3, 4, 4, 3, 4]\n```",
    "created_at": "2019-07-10T09:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414197",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:239" align="right">comment:239</div>

This triggers a new failing doctest with python3-sage:

```
sage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 937, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.edge_graph
Failed example:
    G.degree()
Expected:
    [4, 3, 4, 3, 4]
Got:
    [3, 4, 4, 3, 4]
```



---

archive/issue_comments_414198.json:
```json
{
    "body": "<div id=\"comment:240\" align=\"right\">comment:240</div>\n\nI have made #28153 for the py3 problem, please review.",
    "created_at": "2019-07-10T09:56:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414198",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:240" align="right">comment:240</div>

I have made #28153 for the py3 problem, please review.



---

archive/issue_comments_414199.json:
```json
{
    "body": "<div id=\"comment:241\" align=\"right\">comment:241</div>\n\nSome attributes like `bitrep_vertices` might have been an unfortunate choice:\n\nAs they are accessed by other classes, I'm forced to compute e.g. `bitrep_vertices` on initialization. If `CombinatorialPolyhedron` was ever to be a parent of `Polyhedron_base` (see #10777), this would force a polyhedron to compute the incidence matrix right away.\n\nFrom my understanding, the decorator `@lazy_attribute` is not available for extension types directly. I'm thinking of changing those attributes to methods, such that there is a method `bitrep_facets` and an attribute `_bitrep_facets`. This way one can later change this to be lazily evaluated.\n\nAny thoughts?",
    "created_at": "2019-07-29T19:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414199",
    "user": "https://github.com/kliem"
}
```

<div id="comment:241" align="right">comment:241</div>

Some attributes like `bitrep_vertices` might have been an unfortunate choice:

As they are accessed by other classes, I'm forced to compute e.g. `bitrep_vertices` on initialization. If `CombinatorialPolyhedron` was ever to be a parent of `Polyhedron_base` (see #10777), this would force a polyhedron to compute the incidence matrix right away.

From my understanding, the decorator `@lazy_attribute` is not available for extension types directly. I'm thinking of changing those attributes to methods, such that there is a method `bitrep_facets` and an attribute `_bitrep_facets`. This way one can later change this to be lazily evaluated.

Any thoughts?



---

archive/issue_comments_414200.json:
```json
{
    "body": "<div id=\"comment:242\" align=\"right\">comment:242</div>\n\nReplying to [@kliem](#comment:241):\n> [...]\n\nPlease don't post messages waiting for an answer on a closed ticket. Discussion is closed. Open a new ticket and start a discussion there if something is wrong.",
    "created_at": "2019-07-29T19:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26887#issuecomment-414200",
    "user": "https://github.com/videlec"
}
```

<div id="comment:242" align="right">comment:242</div>

Replying to [@kliem](#comment:241):
> [...]

Please don't post messages waiting for an answer on a closed ticket. Discussion is closed. Open a new ticket and start a discussion there if something is wrong.
