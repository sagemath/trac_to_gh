# Issue 26588: groups for handling arguments

archive/issues_026351.json:
```json
{
    "body": "CC:  @behackl\n\nImplement groups that handle complex arguments, points on the unit circle, roots of unit etc.\n\nThese groups are needed for growth groups of asymptotic rings in relation to #26587.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26588\n\n",
    "closed_at": "2019-04-18T19:56:48Z",
    "created_at": "2018-10-29T10:58:04Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "groups for handling arguments",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26588",
    "user": "https://github.com/dkrenn"
}
```
CC:  @behackl

Implement groups that handle complex arguments, points on the unit circle, roots of unit etc.

These groups are needed for growth groups of asymptotic rings in relation to #26587.

Issue created by migration from https://trac.sagemath.org/ticket/26588





---

archive/issue_comments_370648.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-29T11:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-30T13:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370650.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-30T14:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-30T14:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370652.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-31T13:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370653.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-05T12:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370654.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-11-05T12:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370654",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370655.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-07T10:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370656.json:
```json
{
    "body": "Small Python3-related update concerning #26587.",
    "created_at": "2018-11-07T12:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370656",
    "user": "https://github.com/dkrenn"
}
```

Small Python3-related update concerning #26587.



---

archive/issue_comments_370657.json:
```json
{
    "body": "I have started to look at your changes. It seems that the patchbot is unhappy:\n\n```\nsage -t --long src/sage/groups/misc_gps/argument_groups.py\n**********************************************************************\nFile \"src/sage/groups/misc_gps/argument_groups.py\", line 658, in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_\nFailed example:\n    UnitCircleGroup(RR)._repr_short_()\nExpected:\n    'U_RR'\nGot:\n    'U_(Real Field with 53 bits of precision)'\n**********************************************************************\nFile \"src/sage/groups/misc_gps/argument_groups.py\", line 1253, in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_\nFailed example:\n    ArgumentByElementGroup(CC)._repr_short_()\nExpected:\n    'Arg_CC'\nGot:\n    'Arg_Complex Field with 53 bits of precision'\n**********************************************************************\n2 items had failures:\n   1 of   3 in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_\n   1 of   3 in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_\n    [336 tests, 2 failures, 0.13 s]\n```",
    "created_at": "2018-12-10T23:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370657",
    "user": "https://github.com/behackl"
}
```

I have started to look at your changes. It seems that the patchbot is unhappy:

```
sage -t --long src/sage/groups/misc_gps/argument_groups.py
**********************************************************************
File "src/sage/groups/misc_gps/argument_groups.py", line 658, in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_
Failed example:
    UnitCircleGroup(RR)._repr_short_()
Expected:
    'U_RR'
Got:
    'U_(Real Field with 53 bits of precision)'
**********************************************************************
File "src/sage/groups/misc_gps/argument_groups.py", line 1253, in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_
Failed example:
    ArgumentByElementGroup(CC)._repr_short_()
Expected:
    'Arg_CC'
Got:
    'Arg_Complex Field with 53 bits of precision'
**********************************************************************
2 items had failures:
   1 of   3 in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_
   1 of   3 in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_
    [336 tests, 2 failures, 0.13 s]
```



---

archive/issue_comments_370658.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-12-10T23:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370658",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_370659.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-27T19:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370660.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-27T19:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370661.json:
```json
{
    "body": "Replying to [comment:11 behackl]:\n> I have started to look at your changes. It seems that the patchbot is unhappy:\n> \n> \n> ```\n> sage -t --long src/sage/groups/misc_gps/argument_groups.py\n> [...]\n> ```\n\n\nIndeed there was a commit missing; now cherry-picked.",
    "created_at": "2019-03-27T19:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370661",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:11 behackl]:
> I have started to look at your changes. It seems that the patchbot is unhappy:
> 
> 
> ```
> sage -t --long src/sage/groups/misc_gps/argument_groups.py
> [...]
> ```


Indeed there was a commit missing; now cherry-picked.



---

archive/issue_comments_370662.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-27T19:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370662",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_370663.json:
```json
{
    "body": "Added two commits. Some further comments:\n\n- `argument_groups.py`\n  1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?\n  2. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)\n  3. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).\n  4. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.\n\n- `imaginary_groups.py`:\n  1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)\n\nOther than that, I have no further comments and am happy with the code. Having these rather basic groups allows to build a solution regarding the handling of the (incomparable) asymptotic growth elements in an `AsymptoticRing` -- which we desire a lot.\n\n---\nNew commits:",
    "created_at": "2019-04-15T14:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370663",
    "user": "https://github.com/behackl"
}
```

Added two commits. Some further comments:

- `argument_groups.py`
  1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?
  2. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)
  3. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).
  4. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.

- `imaginary_groups.py`:
  1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)

Other than that, I have no further comments and am happy with the code. Having these rather basic groups allows to build a solution regarding the handling of the (incomparable) asymptotic growth elements in an `AsymptoticRing` -- which we desire a lot.

---
New commits:



---

archive/issue_comments_370664.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-15T14:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370664",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_370665.json:
```json
{
    "body": "Replying to [comment:16 behackl]:\n> Added two commits.\n\n\nLGTM, thanks.\n\n> - `argument_groups.py`\n>   1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?\n\n\n`kwds` are now passed on the element during construction.\n\n>   1. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)\n\n\n```\nsage: type(exp(QQ(0)))\n<type 'sage.rings.integer.Integer'>\n```\nso I've changed it to have the same behavior.\n\n>   1. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).\n\n\nLGTM\n\n>   1. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.\n\n\nDone.\n\n> - `imaginary_groups.py`:\n>   1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)\n\n\nLGTM\n\nNeeds small cross review of changes.\n\n---\nNew commits:",
    "created_at": "2019-04-16T08:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370665",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:16 behackl]:
> Added two commits.


LGTM, thanks.

> - `argument_groups.py`
>   1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?


`kwds` are now passed on the element during construction.

>   1. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)


```
sage: type(exp(QQ(0)))
<type 'sage.rings.integer.Integer'>
```
so I've changed it to have the same behavior.

>   1. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).


LGTM

>   1. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.


Done.

> - `imaginary_groups.py`:
>   1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)


LGTM

Needs small cross review of changes.

---
New commits:



---

archive/issue_comments_370666.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-16T08:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370666",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_370667.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-16T09:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370668.json:
```json
{
    "body": "I am happy with all changes.",
    "created_at": "2019-04-16T11:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370668",
    "user": "https://github.com/behackl"
}
```

I am happy with all changes.



---

archive/issue_comments_370669.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-16T11:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370669",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_065998.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2019-04-16T11:01:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26588#event-65998"
}
```



---

archive/issue_events_065999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-18T19:56:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26588#event-65999"
}
```



---

archive/issue_comments_370670.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-18T19:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370670",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_370671.json:
```json
{
    "body": "Can you please explain what this doctest is for?\n\n```\nsage: i = CIF(I)\nsage: J(3*i)\nTraceback (most recent call last):\n...\nValueError: 3 (Real Interval Field with 53 bits of precision)\nis not in Integer Ring\n> *previous* TypeError: unable to coerce\n<type 'sage.rings.real_mpfi.RealIntervalFieldElement'> to an integer\n```\nI don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.\n\nAfter #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?\n\nThanks!",
    "created_at": "2019-09-19T13:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370671",
    "user": "https://github.com/mezzarobba"
}
```

Can you please explain what this doctest is for?

```
sage: i = CIF(I)
sage: J(3*i)
Traceback (most recent call last):
...
ValueError: 3 (Real Interval Field with 53 bits of precision)
is not in Integer Ring
> *previous* TypeError: unable to coerce
<type 'sage.rings.real_mpfi.RealIntervalFieldElement'> to an integer
```
I don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.

After #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?

Thanks!



---

archive/issue_comments_370672.json:
```json
{
    "body": "Replying to [comment:22 mmezzarobba]:\n> Can you please explain what this doctest is for?\n> [...]\n> I don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.\n> \n> After #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?\n\n\nIndeed, this should not fail and is therefore very acceptable. (Not sure why I did not open a ticket for this or wrote at least some kind of remark.)\n\nThanks for catching this and also for asking back to me; very much appreciated. :)",
    "created_at": "2019-09-22T19:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26588",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26588#issuecomment-370672",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:22 mmezzarobba]:
> Can you please explain what this doctest is for?
> [...]
> I don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.
> 
> After #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?


Indeed, this should not fail and is therefore very acceptable. (Not sure why I did not open a ticket for this or wrote at least some kind of remark.)

Thanks for catching this and also for asking back to me; very much appreciated. :)
