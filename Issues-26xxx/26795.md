# Issue 26795: Some memory leaks

archive/issues_026558.json:
```json
{
    "assignees": [],
    "body": "(Add more leaks here. But not the one that is taken care in #26794)\n\nFirst one, handled at #26796\n\n```\ndef bad8(n):\n    from sage.graphs.independent_sets import IndependentSets\n    G = Graph(2)\n    for i in range(n):\n        x = [0] in IndependentSets(G)\n        if i % 10000 == 0:\n            print get_memory_usage()\n\nbad8(100000)\n```\n\nSecond, in #26806: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n\nThird: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.\n\nMore in comments.\n\nCC:  @mkoeppe\n\nBranch/Commit: **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**\n\nReviewer: **Jori M\u00e4ntysalo**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26795_\n\n",
    "closed_at": "2018-12-07T12:10:30Z",
    "created_at": "2018-12-01T16:22:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20memleak",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Some memory leaks",
    "type": "issue",
    "updated_at": "2018-12-07T12:10:30Z",
    "url": "https://github.com/sagemath/sage/issues/26795",
    "user": "https://github.com/jm58660"
}
```
(Add more leaks here. But not the one that is taken care in #26794)

First one, handled at #26796

```
def bad8(n):
    from sage.graphs.independent_sets import IndependentSets
    G = Graph(2)
    for i in range(n):
        x = [0] in IndependentSets(G)
        if i % 10000 == 0:
            print get_memory_usage()

bad8(100000)
```

Second, in #26806: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.

Third: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.

More in comments.

CC:  @mkoeppe

Branch/Commit: **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**

Reviewer: **Jori Mäntysalo**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/26795_





---

archive/issue_events_350160.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-01T16:22:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350160"
}
```



---

archive/issue_events_350161.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-01T16:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20memleak",
    "label_color": "000080",
    "label_name": "component: memleak",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350161"
}
```



---

archive/issue_events_350162.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-01T16:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350162"
}
```



---

archive/issue_events_350163.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-01T16:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350163"
}
```



---

archive/issue_comments_415515.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,3 +12,4 @@\n bad8(100000)\n ```\n \n+Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n``````\n",
    "created_at": "2018-12-01T16:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415515",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,3 +12,4 @@
 bad8(100000)
 ```
 
+Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.
``````




---

archive/issue_comments_415516.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-(Add more leaks here.)\n+(Add more leaks here. But not the one that is taken care in #26794)\n \n ```\n def bad8(n):\n``````\n",
    "created_at": "2018-12-01T16:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415516",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-(Add more leaks here.)
+(Add more leaks here. But not the one that is taken care in #26794)
 
 ```
 def bad8(n):
``````




---

archive/issue_comments_415517.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nfixing the `IndependentSets` leak is more tricky: how can I deallocate the memory of a variable local to the generator?  (It has to be local, because one may want to have two iterators over the independent sets, see the doctest of the method.)",
    "created_at": "2018-12-01T19:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415517",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'>Comment 3:</a>
fixing the `IndependentSets` leak is more tricky: how can I deallocate the memory of a variable local to the generator?  (It has to be local, because one may want to have two iterators over the independent sets, see the doctest of the method.)



---

archive/issue_comments_415518.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@mantepse](#comment%3A3):\n> fixing the `IndependentSets` leak is more tricky: how can I deallocate the memory of a variable local to the generator?  (It has to be local, because one may want to have two iterators over the independent sets, see the doctest of the method.)\n\nTrying to understand... So every call to `iter()` will create kind of \"implicit object\" by calling `__iter__()` that by design of `yield` statement will create a state for an iterator. But because it is \"implicit\", there can no explicit destructor? Then the iterator must add a back-reference to some class variable, I guess. Something like\n\n```\nclass Foo:\n    sometype refs\n    def __init__():\n        refs = []\n    def __iter__():\n        x = reserve_memory()\n        refs.append(x)\n        . . .\n    def __dealloc__():\n        for x in refs:\n            release_memory(x)\n```",
    "created_at": "2018-12-01T19:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415518",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@mantepse](#comment%3A3):
> fixing the `IndependentSets` leak is more tricky: how can I deallocate the memory of a variable local to the generator?  (It has to be local, because one may want to have two iterators over the independent sets, see the doctest of the method.)

Trying to understand... So every call to `iter()` will create kind of "implicit object" by calling `__iter__()` that by design of `yield` statement will create a state for an iterator. But because it is "implicit", there can no explicit destructor? Then the iterator must add a back-reference to some class variable, I guess. Something like

```
class Foo:
    sometype refs
    def __init__():
        refs = []
    def __iter__():
        x = reserve_memory()
        refs.append(x)
        . . .
    def __dealloc__():
        for x in refs:
            release_memory(x)
```



---

archive/issue_comments_415519.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIt was actually quite easy, see #26796",
    "created_at": "2018-12-01T20:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415519",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:5'>Comment 5:</a>
It was actually quite easy, see #26796



---

archive/issue_comments_415520.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@mantepse](#comment%3A5):\n> It was actually quite easy, see #26796\n\nAh, of course. `finally` is always called.",
    "created_at": "2018-12-01T20:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415520",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@mantepse](#comment%3A5):
> It was actually quite easy, see #26796

Ah, of course. `finally` is always called.



---

archive/issue_comments_415521.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n (Add more leaks here. But not the one that is taken care in #26794)\n+\n+First one, handled at #26796\n \n ```\n def bad8(n):\n@@ -12,4 +14,7 @@\n bad8(100000)\n ```\n \n-Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n+Second: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n+\n+Third: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.\n+\n``````\n",
    "created_at": "2018-12-01T20:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415521",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 (Add more leaks here. But not the one that is taken care in #26794)
+
+First one, handled at #26796
 
 ```
 def bad8(n):
@@ -12,4 +14,7 @@
 bad8(100000)
 ```
 
-Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.
+Second: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.
+
+Third: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.
+
``````




---

archive/issue_comments_415522.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\n`add_col()` in `src/sage/numerical/backends/glpk_backend.pyx` contains\n\n```\ncol_i = <int *> sig_malloc((len(indices)+1) * sizeof(int))\ncol_values = <double *> sig_malloc((len(indices)+1) * sizeof(double))\n```\n\nWhere are those freed?",
    "created_at": "2018-12-02T06:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415522",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'>Comment 7:</a>
`add_col()` in `src/sage/numerical/backends/glpk_backend.pyx` contains

```
col_i = <int *> sig_malloc((len(indices)+1) * sizeof(int))
col_values = <double *> sig_malloc((len(indices)+1) * sizeof(double))
```

Where are those freed?



---

archive/issue_comments_415523.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@jm58660](#comment%3A7):\n> `add_col()` in `src/sage/numerical/backends/glpk_backend.pyx` contains\n> \n> ```\n> col_i = <int *> sig_malloc((len(indices)+1) * sizeof(int))\n> col_values = <double *> sig_malloc((len(indices)+1) * sizeof(double))\n> ```\n> \n> Where are those freed?\n\nit appears they can (and must!) be freed at the end of this function, as glpk copies all that data, and not re-uses it later.",
    "created_at": "2018-12-02T10:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415523",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@jm58660](#comment%3A7):
> `add_col()` in `src/sage/numerical/backends/glpk_backend.pyx` contains
> 
> ```
> col_i = <int *> sig_malloc((len(indices)+1) * sizeof(int))
> col_values = <double *> sig_malloc((len(indices)+1) * sizeof(double))
> ```
> 
> Where are those freed?

it appears they can (and must!) be freed at the end of this function, as glpk copies all that data, and not re-uses it later.



---

archive/issue_comments_415524.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI tried running tests with the following patch, and it does not appear to break anything:\n\n```diff\ndiff --git a/src/sage/numerical/backends/glpk_backend.pyx b/src/sage/numerical/backends/glpk_backend.pyx\nindex 738365b608..6de416afdf 100644\n--- a/src/sage/numerical/backends/glpk_backend.pyx\n+++ b/src/sage/numerical/backends/glpk_backend.pyx\n@@ -831,6 +831,8 @@ cdef class GLPKBackend(GenericBackend):\n \n         glp_set_mat_col(self.lp, n, len(indices), col_i, col_values)\n         glp_set_col_bnds(self.lp, n, GLP_LO, 0,0)\n+        sig_free(col_i)\n+        sig_free(col_values)\n \n \n     cpdef int solve(self) except -1:\n```",
    "created_at": "2018-12-02T12:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415524",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'>Comment 9:</a>
I tried running tests with the following patch, and it does not appear to break anything:

```diff
diff --git a/src/sage/numerical/backends/glpk_backend.pyx b/src/sage/numerical/backends/glpk_backend.pyx
index 738365b608..6de416afdf 100644
--- a/src/sage/numerical/backends/glpk_backend.pyx
+++ b/src/sage/numerical/backends/glpk_backend.pyx
@@ -831,6 +831,8 @@ cdef class GLPKBackend(GenericBackend):
 
         glp_set_mat_col(self.lp, n, len(indices), col_i, col_values)
         glp_set_col_bnds(self.lp, n, GLP_LO, 0,0)
+        sig_free(col_i)
+        sig_free(col_values)
 
 
     cpdef int solve(self) except -1:
```



---

archive/issue_comments_415525.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nPerhaps mkoeppe can confirm whether this is a bug in GLPK backend.",
    "created_at": "2018-12-02T12:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415525",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'>Comment 10:</a>
Perhaps mkoeppe can confirm whether this is a bug in GLPK backend.



---

archive/issue_comments_415526.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@dimpase](#comment%3A9):\n\n> I tried running tests with the following patch, and it does not appear to break anything:\n\nIs this the one that is responsible for leak in `dimension()` of poset?",
    "created_at": "2018-12-02T13:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415526",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@dimpase](#comment%3A9):

> I tried running tests with the following patch, and it does not appear to break anything:

Is this the one that is responsible for leak in `dimension()` of poset?



---

archive/issue_comments_415527.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI think the poset thing is fixed by #26796.\n\nBut the patch I just posted is surely needed - you can see it fixes the following leak:\n\n```\nsage: def bad99(n):\n....:     from sage.numerical.backends.generic_backend import get_solver\n....:     for i in range(n):\n....:         p = get_solver(solver = \"GLPK\")\n....:         p.add_linear_constraints(5, 0, None)\n....:         p.add_col(range(5), range(5))\n....:         if i % 10000 == 0:\n....:             print get_memory_usage()\n....: \n....: bad99(100000)\n```",
    "created_at": "2018-12-02T15:52:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415527",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'>Comment 12:</a>
I think the poset thing is fixed by #26796.

But the patch I just posted is surely needed - you can see it fixes the following leak:

```
sage: def bad99(n):
....:     from sage.numerical.backends.generic_backend import get_solver
....:     for i in range(n):
....:         p = get_solver(solver = "GLPK")
....:         p.add_linear_constraints(5, 0, None)
....:         p.add_col(range(5), range(5))
....:         if i % 10000 == 0:
....:             print get_memory_usage()
....: 
....: bad99(100000)
```



---

archive/issue_events_350164.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-12-02T16:06:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350164"
}
```



---

archive/issue_comments_415528.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836\">3c5e849</a></td><td><code>fix a memory leak in glpk backend</code></td></tr></table>\n",
    "created_at": "2018-12-02T16:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415528",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'>Comment 13:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836">3c5e849</a></td><td><code>fix a memory leak in glpk backend</code></td></tr></table>




---

archive/issue_comments_415529.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2018-12-02T16:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415529",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_415530.json:
```json
{
    "body": "Commit: **[3c5e849](https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836)**",
    "created_at": "2018-12-02T16:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415530",
    "user": "https://github.com/dimpase"
}
```

Commit: **[3c5e849](https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836)**



---

archive/issue_comments_415531.json:
```json
{
    "body": "Branch: **[public/packages/glpkbackendmemleak](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/glpkbackendmemleak)**",
    "created_at": "2018-12-02T16:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415531",
    "user": "https://github.com/dimpase"
}
```

Branch: **[public/packages/glpkbackendmemleak](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/glpkbackendmemleak)**



---

archive/issue_comments_415532.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\na similar bug seems to be in `add_col` coin backend...",
    "created_at": "2018-12-02T16:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415532",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
a similar bug seems to be in `add_col` coin backend...



---

archive/issue_comments_415533.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nSomeone should check `src/sage/matroids/basis_matroid.pyx` and make a ticket for that if needed before closing this one, as otherwise we may forgot that.",
    "created_at": "2018-12-02T18:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415533",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'>Comment 15:</a>
Someone should check `src/sage/matroids/basis_matroid.pyx` and make a ticket for that if needed before closing this one, as otherwise we may forgot that.



---

archive/issue_events_350165.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-02T18:07:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350165"
}
```



---

archive/issue_events_350166.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-02T18:07:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350166"
}
```



---

archive/issue_comments_415534.json:
```json
{
    "body": "Changed commit from **[3c5e849](https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836)** to **[c407d99](https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb)**",
    "created_at": "2018-12-02T23:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415534",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3c5e849](https://github.com/sagemath/sagetrac-mirror/commit/3c5e849e04cb4f8e14f78da5af60159dcad67836)** to **[c407d99](https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb)**



---

archive/issue_comments_415535.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4442be1dcb03a1287aa0cbf81ae2a0cb25d85bc\">f4442be</a></td><td><code>fix memory leaks in coin backend</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb\">c407d99</a></td><td><code>remove obsolete C++-specific Cython declarations</code></td></tr></table>\n",
    "created_at": "2018-12-02T23:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415535",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4442be1dcb03a1287aa0cbf81ae2a0cb25d85bc">f4442be</a></td><td><code>fix memory leaks in coin backend</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb">c407d99</a></td><td><code>remove obsolete C++-specific Cython declarations</code></td></tr></table>




---

archive/issue_comments_415536.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@jm58660](#comment%3A15):\n> Someone should check `src/sage/matroids/basis_matroid.pyx` and make a ticket for that if needed before closing this one, as otherwise we may forgot that.\n\nCoin backend hopefully fixed too.\n\nPlease post the code showing the leak in basis_matroid",
    "created_at": "2018-12-02T23:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415536",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@jm58660](#comment%3A15):
> Someone should check `src/sage/matroids/basis_matroid.pyx` and make a ticket for that if needed before closing this one, as otherwise we may forgot that.

Coin backend hopefully fixed too.

Please post the code showing the leak in basis_matroid



---

archive/issue_comments_415537.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@dimpase](#comment%3A17):\n\n> Please post the code showing the leak in basis_matroid\n\n```\nfrom sage.matroids.advanced import *\nimport gc\n\ni = 0\nwhile True:\n    if i%1000==0: print get_memory_usage()\n    i += 1\n    M = BasisMatroid(matroids.named_matroids.NonFano())\n    N = BasisMatroid(matroids.named_matroids.Fano())\n    m = {e:e for e in M.groundset()}\n    M._is_relaxation(N, m)\n    N._is_relaxation(M, m)\n```",
    "created_at": "2018-12-03T07:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415537",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@dimpase](#comment%3A17):

> Please post the code showing the leak in basis_matroid

```
from sage.matroids.advanced import *
import gc

i = 0
while True:
    if i%1000==0: print get_memory_usage()
    i += 1
    M = BasisMatroid(matroids.named_matroids.NonFano())
    N = BasisMatroid(matroids.named_matroids.Fano())
    m = {e:e for e in M.groundset()}
    M._is_relaxation(N, m)
    N._is_relaxation(M, m)
```



---

archive/issue_comments_415538.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nregarding Poset dimension. It seems it's already a problem in the beginning of the function:\n\n```python\nimport gc\nfrom sage.graphs.comparability import greedy_is_comparability as is_comparability\ni = 0                                                                            \nfor P in Posets(8):\n    if i % 1000 == 0:\n        gc.collect()\n        print get_memory_usage()\n    i += 1\n    _ = is_comparability(P._hasse_diagram.transitive_closure().to_undirected().complement())            \n```\n\nIf I remove the call to `is_comparability()` the problem is gone here.",
    "created_at": "2018-12-03T10:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415538",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'>Comment 19:</a>
regarding Poset dimension. It seems it's already a problem in the beginning of the function:

```python
import gc
from sage.graphs.comparability import greedy_is_comparability as is_comparability
i = 0                                                                            
for P in Posets(8):
    if i % 1000 == 0:
        gc.collect()
        print get_memory_usage()
    i += 1
    _ = is_comparability(P._hasse_diagram.transitive_closure().to_undirected().complement())            
```

If I remove the call to `is_comparability()` the problem is gone here.



---

archive/issue_comments_415539.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@dimpase](#comment%3A19):\n\n> If I remove the call to `is_comparability()` the problem is gone here.\n\nBut if I change the line to be only `is_comparability()`, then there is no problem. Uh, a hard one is this.",
    "created_at": "2018-12-03T11:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415539",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@dimpase](#comment%3A19):

> If I remove the call to `is_comparability()` the problem is gone here.

But if I change the line to be only `is_comparability()`, then there is no problem. Uh, a hard one is this.



---

archive/issue_comments_415540.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nWhat's this:\n\n```\nimport gc\n\ni = 0\nGG = graphs()\n_ = next(GG); _ = next(GG); \nfor P in GG:\n    if i > 20000: break\n    if i % 1000 == 0:\n        _ = gc.collect()\n        print get_memory_usage(), P.order()\n    i += 1\n    _ = P.convexity_properties()\n```\n\n??? There is an explicit `__destruct__` in class `ConvexityProperties`.",
    "created_at": "2018-12-03T11:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415540",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'>Comment 21:</a>
What's this:

```
import gc

i = 0
GG = graphs()
_ = next(GG); _ = next(GG); 
for P in GG:
    if i > 20000: break
    if i % 1000 == 0:
        _ = gc.collect()
        print get_memory_usage(), P.order()
    i += 1
    _ = P.convexity_properties()
```

??? There is an explicit `__destruct__` in class `ConvexityProperties`.



---

archive/issue_comments_415541.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@jm58660](#comment%3A20):\n> Replying to [@dimpase](#comment%3A19):\n> \n> > If I remove the call to `is_comparability()` the problem is gone here.\n\n> \n> But if I change the line to be only `is_comparability()`, then there is no problem. Uh, a hard one is this.\n\nBy the way, (with `_ = ...` present) do you notice that it stabilises approximately half-way, stops growing? Feels like an internal cache somewhere fills in, and then it's full, so no extra growth...",
    "created_at": "2018-12-03T11:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415541",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@jm58660](#comment%3A20):
> Replying to [@dimpase](#comment%3A19):
> 
> > If I remove the call to `is_comparability()` the problem is gone here.

> 
> But if I change the line to be only `is_comparability()`, then there is no problem. Uh, a hard one is this.

By the way, (with `_ = ...` present) do you notice that it stabilises approximately half-way, stops growing? Feels like an internal cache somewhere fills in, and then it's full, so no extra growth...



---

archive/issue_comments_415542.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@dimpase](#comment%3A22):\n\n> By the way, (with `_ = ...` present) do you notice that it stabilises approximately half-way, stops growing? Feels like an internal cache somewhere fills in, and then it's full, so no extra growth...\n\nYes, I have noticed that. And sometime the grow stalls for a while and then continues.\n\nI guess that Python runs malloc() at C-level with some kind of heuristics, \"the user will propably ask for more soon anyways\".",
    "created_at": "2018-12-03T11:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415542",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@dimpase](#comment%3A22):

> By the way, (with `_ = ...` present) do you notice that it stabilises approximately half-way, stops growing? Feels like an internal cache somewhere fills in, and then it's full, so no extra growth...

Yes, I have noticed that. And sometime the grow stalls for a while and then continues.

I guess that Python runs malloc() at C-level with some kind of heuristics, "the user will propably ask for more soon anyways".



---

archive/issue_comments_415543.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@jm58660](#comment%3A21):\n> What's this:\n> \n> ```\n> import gc\n> \n> i = 0\n> GG = graphs()\n> _ = next(GG); _ = next(GG); \n> for P in GG:\n>     if i > 20000: break\n>     if i % 1000 == 0:\n>         _ = gc.collect()\n>         print get_memory_usage(), P.order()\n>     i += 1\n>     _ = P.convexity_properties()\n> ```\n> \n> ??? There is an explicit `__destruct__` in class `ConvexityProperties`.\n\nI've noticed this one missing:\n\n```diff\ndiff --git a/src/sage/graphs/convexity_properties.pyx b/src/sage/graphs/convexity_properties.pyx\nindex 474eb0e4cf..6b66e77a39 100644\n--- a/src/sage/graphs/convexity_properties.pyx\n+++ b/src/sage/graphs/convexity_properties.pyx\n@@ -333,6 +333,7 @@ cdef class ConvexityProperties:\n                 if bitset_len(tmp) < self._n:\n                     bitset_add(bs, i)\n \n+        bitset_free(tmp)\n \n     cpdef hull_number(self, value_only=True, verbose=False):\n         r\"\"\"\n```\nbut it does not seem to matter here.",
    "created_at": "2018-12-03T12:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415543",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@jm58660](#comment%3A21):
> What's this:
> 
> ```
> import gc
> 
> i = 0
> GG = graphs()
> _ = next(GG); _ = next(GG); 
> for P in GG:
>     if i > 20000: break
>     if i % 1000 == 0:
>         _ = gc.collect()
>         print get_memory_usage(), P.order()
>     i += 1
>     _ = P.convexity_properties()
> ```
> 
> ??? There is an explicit `__destruct__` in class `ConvexityProperties`.

I've noticed this one missing:

```diff
diff --git a/src/sage/graphs/convexity_properties.pyx b/src/sage/graphs/convexity_properties.pyx
index 474eb0e4cf..6b66e77a39 100644
--- a/src/sage/graphs/convexity_properties.pyx
+++ b/src/sage/graphs/convexity_properties.pyx
@@ -333,6 +333,7 @@ cdef class ConvexityProperties:
                 if bitset_len(tmp) < self._n:
                     bitset_add(bs, i)
 
+        bitset_free(tmp)
 
     cpdef hull_number(self, value_only=True, verbose=False):
         r"""
```
but it does not seem to matter here.



---

archive/issue_comments_415544.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5\">c42c3bc</a></td><td><code>added one missing free()...</code></td></tr></table>\n",
    "created_at": "2018-12-03T12:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415544",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5">c42c3bc</a></td><td><code>added one missing free()...</code></td></tr></table>




---

archive/issue_comments_415545.json:
```json
{
    "body": "Changed commit from **[c407d99](https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb)** to **[c42c3bc](https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5)**",
    "created_at": "2018-12-03T12:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c407d99](https://github.com/sagemath/sagetrac-mirror/commit/c407d99c3d3a8302f1f0519702935a4049406ceb)** to **[c42c3bc](https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5)**



---

archive/issue_comments_415546.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@jm58660](#comment%3A21):\n> What's this:\n> \n> ```\n> import gc\n> \n> i = 0\n> GG = graphs()\n> _ = next(GG); _ = next(GG); \n> for P in GG:\n>     if i > 20000: break\n>     if i % 1000 == 0:\n>         _ = gc.collect()\n>         print get_memory_usage(), P.order()\n>     i += 1\n>     _ = P.convexity_properties()\n> ```\n> \n> ??? There is an explicit `__destruct__` in class `ConvexityProperties`.\n\nhowever, `__destruct__` is not called, as one can see by putting a `print()` there.",
    "created_at": "2018-12-03T15:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415546",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@jm58660](#comment%3A21):
> What's this:
> 
> ```
> import gc
> 
> i = 0
> GG = graphs()
> _ = next(GG); _ = next(GG); 
> for P in GG:
>     if i > 20000: break
>     if i % 1000 == 0:
>         _ = gc.collect()
>         print get_memory_usage(), P.order()
>     i += 1
>     _ = P.convexity_properties()
> ```
> 
> ??? There is an explicit `__destruct__` in class `ConvexityProperties`.

however, `__destruct__` is not called, as one can see by putting a `print()` there.



---

archive/issue_comments_415547.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572\">f786410</a></td><td><code>misnamed method</code></td></tr></table>\n",
    "created_at": "2018-12-03T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415547",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'>Comment 27:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572">f786410</a></td><td><code>misnamed method</code></td></tr></table>




---

archive/issue_comments_415548.json:
```json
{
    "body": "Changed commit from **[c42c3bc](https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5)** to **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**",
    "created_at": "2018-12-03T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415548",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c42c3bc](https://github.com/sagemath/sagetrac-mirror/commit/c42c3bc27da534544dc62a953d5457d6c27532b5)** to **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**



---

archive/issue_comments_415549.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nOK, the latest commit fixes `convexity_properties` leak.",
    "created_at": "2018-12-03T16:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415549",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'>Comment 28:</a>
OK, the latest commit fixes `convexity_properties` leak.



---

archive/issue_comments_415550.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nShould we now make another ticket about `_is_relaxation()` and try to review and close this one?",
    "created_at": "2018-12-03T19:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415550",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:29'>Comment 29:</a>
Should we now make another ticket about `_is_relaxation()` and try to review and close this one?



---

archive/issue_comments_415551.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nAs you like - you know more about leaks than me :-)",
    "created_at": "2018-12-03T19:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415551",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'>Comment 30:</a>
As you like - you know more about leaks than me :-)



---

archive/issue_comments_415552.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,8 @@\n bad8(100000)\n ```\n \n-Second: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n+Second, in #26806: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.\n \n Third: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.\n \n+More in comments.\n``````\n",
    "created_at": "2018-12-03T19:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415552",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,8 @@
 bad8(100000)
 ```
 
-Second: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.
+Second, in #26806: Propably `_is_relaxation()` in `src/sage/matroids/basis_matroid.pyx`, `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`.
 
 Third: Also `dimension()` of posets seems to have a leak. Root cause might be something already corrected.
 
+More in comments.
``````




---

archive/issue_comments_415553.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@dimpase](#comment%3A30):\n> As you like - you know more about leaks than me :-)\n\nOK, I made #26806. To confirm, is this now ready for review?",
    "created_at": "2018-12-03T19:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415553",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@dimpase](#comment%3A30):
> As you like - you know more about leaks than me :-)

OK, I made #26806. To confirm, is this now ready for review?



---

archive/issue_events_350167.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-12-03T19:52:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350167"
}
```



---

archive/issue_events_350168.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-12-03T19:52:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350168"
}
```



---

archive/issue_comments_415554.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nThanks. Yes, please review!",
    "created_at": "2018-12-03T19:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415554",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'>Comment 32:</a>
Thanks. Yes, please review!



---

archive/issue_comments_415555.json:
```json
{
    "body": "Reviewer: **Jori M\u00e4ntysalo**",
    "created_at": "2018-12-04T07:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415555",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Jori Mäntysalo**



---

archive/issue_comments_415556.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nThis is OK. Thanks for fixes.",
    "created_at": "2018-12-04T07:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415556",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:33'>Comment 33:</a>
This is OK. Thanks for fixes.



---

archive/issue_events_350169.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-04T07:00:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350169"
}
```



---

archive/issue_events_350170.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2018-12-04T07:00:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350170"
}
```



---

archive/issue_events_350171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-07T12:10:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350171"
}
```



---

archive/issue_events_350172.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "990a82ec4a2bf2ceba92008d0733d94354d8cb0d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-12-07T12:10:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26795#event-350172"
}
```



---

archive/issue_comments_415557.json:
```json
{
    "body": "Changed branch from **[public/packages/glpkbackendmemleak](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/glpkbackendmemleak)** to **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**",
    "created_at": "2018-12-07T12:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26795",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26795#issuecomment-415557",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/packages/glpkbackendmemleak](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/glpkbackendmemleak)** to **[f786410](https://github.com/sagemath/sagetrac-mirror/commit/f786410df2a639ad1e95fc7c78e09b851c02d572)**
