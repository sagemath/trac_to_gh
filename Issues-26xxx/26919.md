# Issue 26919: Upgrade Jupyter notebook to latest (6.1.1) and its dependencies to latest

archive/issues_026682.json:
```json
{
    "body": "Upgrade:\n- https://pypi.org/project/notebook/ 6.1.1 (current as of 2020-08-07, supports python >= 3.5)\n\nNew dependencies:\n- argon2-cffi (?)\n- pyrsistent, attrs, importlib_metadata, zipp\n\nUpgrade of its dependencies:\n- https://pypi.org/project/nbformat/ 5.0.7 (released 2020-06-09, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/nbconvert/ 5.6.1 (released 2019-10-24, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/jupyter-client/ 6.1.6 (released 2020-07-13, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/jupyter-core/ 4.6.3 (released 2020-02-18, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/Jinja2/ 2.11.2 (released 2020-04-13, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/tornado/ 6.0.4 (released 2020-03-03, current as of 2020-08-07, supports python >= 3.5)\n- https://pypi.org/project/terminado/ 0.8.3 (released 2019-11-12, current as of 2020-08-07, supports python >= 3.4)\n- https://pypi.org/project/prometheus-client/ 0.8.0 (released 2020-05-25, current as of 2020-08-07, supports python >= 3.4)\n- https://pypi.org/project/pyzmq/ 19.0.2 (released 2020-07-31, current as of 2020-08-07, supports python >= 3.3)\n\nRecursive dependencies:\n\n- https://pypi.org/project/jsonschema/ 3.2.0 (released 2019-11-18, current as of 2020-08-07, supports python >= 2.7)\n- bleach 3.1.5\n- testpath 0.4.4\n\nUpgrade of a reverse dependency:\n- https://pypi.org/project/widgetsnbextension/ 3.5.1 (released 2019-07-29, supports python >= 2.7)\n- ipywidgets 7.5.1\n\n(tarball URLs: see `checksums.ini`; use `./configure --enable-download-from-upstream-url` to enable automatic downloads of the new versions)\n\nPrevious upgrades: \n- notebook 5.7.6 in #27463\n- notebook 5.7.1, in #26709, merged in Sage 8.5.beta5.\n\nSee also:\n- #30124 System package information, spkg-configure for Jupyter \"notebook\" package and dependencies\n- #30306 Meta-ticket: Use system Jupyter\n\n\nCC:  @antonio-rojas @kiwifb @bryangingechen @timokau @infinity0 @jdemeyer @slel @tobihan @egourgoulhon\n\nKeywords: upgrade, jupyter, notebook\n\nBranch/Commit: 445c1d7a5f90ddb6af5b33e1d03697cfc3eefc54\n\nReviewer: Joshua Campbell, Matthias Koeppe, Dima Pasechnik\n\nAuthor: Matthias Koeppe, Joshua Campbell\n\nDependencies: #28197, #30299, #25363\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26919\n\n",
    "closed_at": "2020-08-15T09:42:03Z",
    "created_at": "2018-12-20T08:47:46Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Upgrade Jupyter notebook to latest (6.1.1) and its dependencies to latest",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26919",
    "user": "https://github.com/slel"
}
```
Upgrade:
- https://pypi.org/project/notebook/ 6.1.1 (current as of 2020-08-07, supports python >= 3.5)

New dependencies:
- argon2-cffi (?)
- pyrsistent, attrs, importlib_metadata, zipp

Upgrade of its dependencies:
- https://pypi.org/project/nbformat/ 5.0.7 (released 2020-06-09, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/nbconvert/ 5.6.1 (released 2019-10-24, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/jupyter-client/ 6.1.6 (released 2020-07-13, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/jupyter-core/ 4.6.3 (released 2020-02-18, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/Jinja2/ 2.11.2 (released 2020-04-13, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/tornado/ 6.0.4 (released 2020-03-03, current as of 2020-08-07, supports python >= 3.5)
- https://pypi.org/project/terminado/ 0.8.3 (released 2019-11-12, current as of 2020-08-07, supports python >= 3.4)
- https://pypi.org/project/prometheus-client/ 0.8.0 (released 2020-05-25, current as of 2020-08-07, supports python >= 3.4)
- https://pypi.org/project/pyzmq/ 19.0.2 (released 2020-07-31, current as of 2020-08-07, supports python >= 3.3)

Recursive dependencies:

- https://pypi.org/project/jsonschema/ 3.2.0 (released 2019-11-18, current as of 2020-08-07, supports python >= 2.7)
- bleach 3.1.5
- testpath 0.4.4

Upgrade of a reverse dependency:
- https://pypi.org/project/widgetsnbextension/ 3.5.1 (released 2019-07-29, supports python >= 2.7)
- ipywidgets 7.5.1

(tarball URLs: see `checksums.ini`; use `./configure --enable-download-from-upstream-url` to enable automatic downloads of the new versions)

Previous upgrades: 
- notebook 5.7.6 in #27463
- notebook 5.7.1, in #26709, merged in Sage 8.5.beta5.

See also:
- #30124 System package information, spkg-configure for Jupyter "notebook" package and dependencies
- #30306 Meta-ticket: Use system Jupyter


CC:  @antonio-rojas @kiwifb @bryangingechen @timokau @infinity0 @jdemeyer @slel @tobihan @egourgoulhon

Keywords: upgrade, jupyter, notebook

Branch/Commit: 445c1d7a5f90ddb6af5b33e1d03697cfc3eefc54

Reviewer: Joshua Campbell, Matthias Koeppe, Dima Pasechnik

Author: Matthias Koeppe, Joshua Campbell

Dependencies: #28197, #30299, #25363

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26919





---

archive/issue_events_066623.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66623"
}
```



---

archive/issue_comments_374670.json:
```json
{
    "body": "<a id='comment:1'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374670",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_374671.json:
```json
{
    "body": "<a id='comment:2'></a>Moving all blocker/critical issues from 8.7 to 8.8.",
    "created_at": "2019-03-25T10:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374671",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>Moving all blocker/critical issues from 8.7 to 8.8.



---

archive/issue_events_066624.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:41:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66624"
}
```



---

archive/issue_events_066625.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:41:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66625"
}
```



---

archive/issue_comments_374672.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2019-04-14T01:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374672",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_374673.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-14T01:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374673",
    "user": "https://github.com/slel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_374674.json:
```json
{
    "body": "<a id='comment:7'></a>Note, this would conflict slightly with #27715.  As this ticket came first I'd be happy to rebase onto it so long as do intend to move forward on this ticket (I don't see why we shouldn't, though I haven't tested it yet...)",
    "created_at": "2019-04-24T14:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374674",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Note, this would conflict slightly with #27715.  As this ticket came first I'd be happy to rebase onto it so long as do intend to move forward on this ticket (I don't see why we shouldn't, though I haven't tested it yet...)



---

archive/issue_events_066626.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66626"
}
```



---

archive/issue_events_066627.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66627"
}
```



---

archive/issue_comments_374675.json:
```json
{
    "body": "<a id='comment:8'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374675",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_374676.json:
```json
{
    "body": "<a id='comment:9'></a>branch is red",
    "created_at": "2019-08-24T11:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374676",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>branch is red



---

archive/issue_comments_374677.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-08-24T11:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374677",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_066628.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66628"
}
```



---

archive/issue_events_066629.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66629"
}
```



---

archive/issue_comments_374678.json:
```json
{
    "body": "<a id='comment:11'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374678",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>Ticket retargeted after milestone closed



---

archive/issue_events_066630.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66630"
}
```



---

archive/issue_events_066631.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66631"
}
```



---

archive/issue_comments_374679.json:
```json
{
    "body": "<a id='comment:13'></a>Notebook 6.1.0 RC1 is out:\n\n- https://discourse.jupyter.org/t/jupyter-notebook-6-1-0-rc1-is-available/4763\n\nNotebook 5.7.10 would be the last py2-compatible release.\n\n- https://pypi.org/project/notebook/5.7.10/",
    "created_at": "2020-07-19T08:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374679",
    "user": "https://github.com/slel"
}
```

<a id='comment:13'></a>Notebook 6.1.0 RC1 is out:

- https://discourse.jupyter.org/t/jupyter-notebook-6-1-0-rc1-is-available/4763

Notebook 5.7.10 would be the last py2-compatible release.

- https://pypi.org/project/notebook/5.7.10/



---

archive/issue_comments_374680.json:
```json
{
    "body": "<a id='comment:14'></a>py2 compatibility is irrelevant now. Please see #29141 for discussion what we need to be compatible with",
    "created_at": "2020-07-19T14:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374680",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>py2 compatibility is irrelevant now. Please see #29141 for discussion what we need to be compatible with



---

archive/issue_comments_374681.json:
```json
{
    "body": "<a id='comment:15'></a>Notebook 6.1.0 released.\n\n- [Release notes for Jupyter Notebook 6.1.0](https://jupyter-notebook.readthedocs.io/en/latest/changelog.html#release-6-1-0)",
    "created_at": "2020-08-01T00:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374681",
    "user": "https://github.com/slel"
}
```

<a id='comment:15'></a>Notebook 6.1.0 released.

- [Release notes for Jupyter Notebook 6.1.0](https://jupyter-notebook.readthedocs.io/en/latest/changelog.html#release-6-1-0)



---

archive/issue_comments_374682.json:
```json
{
    "body": "<a id='comment:17'></a>See also: #28313 \"notebook-5.7.6 contains local files\"",
    "created_at": "2020-08-06T05:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374682",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>See also: #28313 "notebook-5.7.6 contains local files"



---

archive/issue_comments_374683.json:
```json
{
    "body": "<a id='comment:21'></a>\n```\n  [notebook-6.1.1]   Applying patches from ../patches...\n  [notebook-6.1.1]   Applying ../patches/0001-Workaround-for-wrong-errno-on-socket-bind-permission.patch\n  [notebook-6.1.1]   patching file notebook/notebookapp.py\n  [notebook-6.1.1]   Hunk #1 FAILED at 1406.\n```\nIt should be checked if this patch has been upstreamed\n\n---\nLast 10 new commits:",
    "created_at": "2020-08-07T22:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374683",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
```
  [notebook-6.1.1]   Applying patches from ../patches...
  [notebook-6.1.1]   Applying ../patches/0001-Workaround-for-wrong-errno-on-socket-bind-permission.patch
  [notebook-6.1.1]   patching file notebook/notebookapp.py
  [notebook-6.1.1]   Hunk #1 FAILED at 1406.
```
It should be checked if this patch has been upstreamed

---
Last 10 new commits:



---

archive/issue_comments_374684.json:
```json
{
    "body": "<a id='comment:22'></a>The patch was added for Cygwin in #27715 (Jupyter notebook can crash during startup if default port cannot be used)",
    "created_at": "2020-08-07T22:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>The patch was added for Cygwin in #27715 (Jupyter notebook can crash during startup if default port cannot be used)



---

archive/issue_comments_374685.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-07T22:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_374686.json:
```json
{
    "body": "<a id='comment:24'></a>Builds OK for me on macOS.  I have not tested anything else because I do not use the jupyter notebook and cannot distinguish a working and a broken installation.",
    "created_at": "2020-08-07T22:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374686",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Builds OK for me on macOS.  I have not tested anything else because I do not use the jupyter notebook and cannot distinguish a working and a broken installation.



---

archive/issue_comments_374687.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-07T22:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374687",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_374688.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-08T02:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_374689.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-08T03:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_374690.json:
```json
{
    "body": "<a id='comment:37'></a>Hello! Saw your post on sage-devel and figured I'd take a shot at testing this.\n\nI was able to get this branch to build just fine, but I ran into some missing run-time dependencies for `jsonschema`, namely: `attrs`, `importlib_metadata`, and `pyrsistent` (which then required `zipp`).\n\nI've pushed a [commit](https://git.sagemath.org/sage.git/commit/?h=u/gh-jcamp0x2a/notebook-5.7.8&id=14149164c43758b8f2845630df96b89dbe1f1c79) with these packages added. This is the first time I've done any work with the SPKGs, and I'm not sure if I've followed the conventions correctly, so I didn't want to overwrite your branch in this ticket. For example, I wasn't sure how/whether to include these run-time dependencies in the `build/pkgs/{jsonschema|pyrsistent}/dependencies` files.\n\nWith these packages present, the Jupyter server starts up and notebooks can be opened, edited, and ran just fine. Threejs plots are working including the new animation stuff, but JSmol plots are not. Nor does MathJax function correctly. I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.",
    "created_at": "2020-08-09T18:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374690",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:37'></a>Hello! Saw your post on sage-devel and figured I'd take a shot at testing this.

I was able to get this branch to build just fine, but I ran into some missing run-time dependencies for `jsonschema`, namely: `attrs`, `importlib_metadata`, and `pyrsistent` (which then required `zipp`).

I've pushed a [commit](https://git.sagemath.org/sage.git/commit/?h=u/gh-jcamp0x2a/notebook-5.7.8&id=14149164c43758b8f2845630df96b89dbe1f1c79) with these packages added. This is the first time I've done any work with the SPKGs, and I'm not sure if I've followed the conventions correctly, so I didn't want to overwrite your branch in this ticket. For example, I wasn't sure how/whether to include these run-time dependencies in the `build/pkgs/{jsonschema|pyrsistent}/dependencies` files.

With these packages present, the Jupyter server starts up and notebooks can be opened, edited, and ran just fine. Threejs plots are working including the new animation stuff, but JSmol plots are not. Nor does MathJax function correctly. I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.



---

archive/issue_comments_374691.json:
```json
{
    "body": "<a id='comment:38'></a>Thanks a lot! Please do update the branch, it will make it easier",
    "created_at": "2020-08-09T18:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374691",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Thanks a lot! Please do update the branch, it will make it easier



---

archive/issue_comments_374692.json:
```json
{
    "body": "<a id='comment:39'></a>Yes, runtime dependencies should be added in the `dependencies` file. We do not really distinguish build dependencies and runtime dependencies in the Sage distribution. (There is a notion of order-only dependencies, which are listed after the vertical-bar symbol (|), but it's OK to ignore.)",
    "created_at": "2020-08-09T18:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374692",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Yes, runtime dependencies should be added in the `dependencies` file. We do not really distinguish build dependencies and runtime dependencies in the Sage distribution. (There is a notion of order-only dependencies, which are listed after the vertical-bar symbol (|), but it's OK to ignore.)



---

archive/issue_comments_374693.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:37 gh-jcamp0x2a]:\n> I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.\n\nOK, I forgot to push the merge with #30299 -- sorry about that",
    "created_at": "2020-08-09T18:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374693",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>Replying to [comment:37 gh-jcamp0x2a]:
> I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.

OK, I forgot to push the merge with #30299 -- sorry about that



---

archive/issue_comments_374694.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-09T18:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_374695.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-09T18:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374695",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_374696.json:
```json
{
    "body": "<a id='comment:43'></a>I've merged your commit. Please test again...",
    "created_at": "2020-08-09T18:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374696",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>I've merged your commit. Please test again...



---

archive/issue_comments_374697.json:
```json
{
    "body": "<a id='comment:45'></a>A build test is running at https://github.com/mkoeppe/sage/actions/runs/201573039",
    "created_at": "2020-08-09T18:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374697",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>A build test is running at https://github.com/mkoeppe/sage/actions/runs/201573039



---

archive/issue_comments_374698.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:39 mkoeppe]:\n> Yes, runtime dependencies should be added in the `dependencies` file. We do not really distinguish build dependencies and runtime dependencies in the Sage distribution. (There is a notion of order-only dependencies, which are listed after the vertical-bar symbol (|), but it's OK to ignore.)\n\n\nOk, I've added dependencies on `attrs`, `importlib_metadata`, and `pyrsistent` to `jsonschema` and a dependency on `zipp` to `importlib_metadata`. (I mispoke earlier that it was required by `pyrsistent`.) I will update the ticket with the branch.\n\nAlso, I want to mention that the latest version of `zipp` (3.1.0) did not build correctly in the Sage environment, and I didn't do much troubleshooting on it, falling back instead to the specific major and minor version called out by `importlib_metadata` (0.5, so I used 0.5.2). Just in case that comes up in the future.",
    "created_at": "2020-08-09T19:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374698",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:46'></a>Replying to [comment:39 mkoeppe]:
> Yes, runtime dependencies should be added in the `dependencies` file. We do not really distinguish build dependencies and runtime dependencies in the Sage distribution. (There is a notion of order-only dependencies, which are listed after the vertical-bar symbol (|), but it's OK to ignore.)


Ok, I've added dependencies on `attrs`, `importlib_metadata`, and `pyrsistent` to `jsonschema` and a dependency on `zipp` to `importlib_metadata`. (I mispoke earlier that it was required by `pyrsistent`.) I will update the ticket with the branch.

Also, I want to mention that the latest version of `zipp` (3.1.0) did not build correctly in the Sage environment, and I didn't do much troubleshooting on it, falling back instead to the specific major and minor version called out by `importlib_metadata` (0.5, so I used 0.5.2). Just in case that comes up in the future.



---

archive/issue_comments_374699.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:40 mkoeppe]:\n> Replying to [comment:37 gh-jcamp0x2a]:\n> > I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.\n\n> OK, I forgot to push the merge with #30299 -- sorry about that\n\nI've tested this again following your merge and both JSmol and MathJax are now working correctly.",
    "created_at": "2020-08-09T19:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374699",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:47'></a>Replying to [comment:40 mkoeppe]:
> Replying to [comment:37 gh-jcamp0x2a]:
> > I see 404 status codes for `/nbextensions/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe&delayStartupUntil=configured` and `/nbextensions/jsmol/JSmol.min.js`, which are perhaps related to some of the other outstanding Jupyter tickets.

> OK, I forgot to push the merge with #30299 -- sorry about that

I've tested this again following your merge and both JSmol and MathJax are now working correctly.



---

archive/issue_comments_374700.json:
```json
{
    "body": "<a id='comment:49'></a>Thanks very much! Looking great.\n\nI have restarted the build tests, now at https://github.com/mkoeppe/sage/actions/runs/201611495",
    "created_at": "2020-08-09T19:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374700",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Thanks very much! Looking great.

I have restarted the build tests, now at https://github.com/mkoeppe/sage/actions/runs/201611495



---

archive/issue_comments_374701.json:
```json
{
    "body": "<a id='comment:52'></a>Clean tests for `slackware-14.2-standard` (https://github.com/mkoeppe/sage/runs/964353866), `gentoo-standard` (https://github.com/mkoeppe/sage/runs/964353835), `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/964353804). (Tests on many other platforms did not go through because of current reliability issues of GH Action - unrelated to this ticket.)",
    "created_at": "2020-08-12T01:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374701",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>Clean tests for `slackware-14.2-standard` (https://github.com/mkoeppe/sage/runs/964353866), `gentoo-standard` (https://github.com/mkoeppe/sage/runs/964353835), `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/964353804). (Tests on many other platforms did not go through because of current reliability issues of GH Action - unrelated to this ticket.)



---

archive/issue_comments_374702.json:
```json
{
    "body": "<a id='comment:55'></a>Merged #25363 (and 9.2.beta8) to facilitate testing\n\n---\nNew commits:",
    "created_at": "2020-08-12T17:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374702",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>Merged #25363 (and 9.2.beta8) to facilitate testing

---
New commits:



---

archive/issue_comments_374703.json:
```json
{
    "body": "<a id='comment:56'></a>Great!",
    "created_at": "2020-08-12T21:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374703",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>Great!



---

archive/issue_comments_374704.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-12T21:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374704",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_374705.json:
```json
{
    "body": "<a id='comment:57'></a>Thank you!",
    "created_at": "2020-08-12T21:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374705",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>Thank you!



---

archive/issue_events_066632.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-15T09:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26919#event-66632"
}
```



---

archive/issue_comments_374706.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-15T09:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26919#issuecomment-374706",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
