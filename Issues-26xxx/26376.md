# Issue 26376: py3: fix a bunch of syntax errors

archive/issues_026139.json:
```json
{
    "body": "\n\nBranch/Commit: [a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595](https://github.com/sagemath/sagetrac-mirror/commit/a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26376\n\n",
    "closed_at": "2018-10-03T21:56:22Z",
    "created_at": "2018-10-01T13:49:31Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "py3: fix a bunch of syntax errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26376",
    "user": "https://github.com/fchapoton"
}
```


Branch/Commit: [a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595](https://github.com/sagemath/sagetrac-mirror/commit/a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595)

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26376





---

archive/issue_comments_508945.json:
```json
{
    "body": "Changing commit from \"\" to \"31c8708eac66a61fb0d1445649e796c69dacbc05\"",
    "created_at": "2018-10-01T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508945",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "31c8708eac66a61fb0d1445649e796c69dacbc05"



---

archive/issue_comments_508946.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/26376\"",
    "created_at": "2018-10-01T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508946",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/26376"



---

archive/issue_comments_508947.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-01T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508947",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_508948.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[31c8708](https://github.com/sagemath/sagetrac-mirror/commit/31c8708eac66a61fb0d1445649e796c69dacbc05)|`py3: fix a bunch of syntax errors`|",
    "created_at": "2018-10-01T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508948",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[31c8708](https://github.com/sagemath/sagetrac-mirror/commit/31c8708eac66a61fb0d1445649e796c69dacbc05)|`py3: fix a bunch of syntax errors`|



---

archive/issue_comments_508949.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis change induces a syntax error on Python2:\n\n```diff\ndiff --git a/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst b/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst\nindex 0285291..7ac5a9e 100644\n--- a/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst\n+++ b/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst\n@@ -60,9 +60,9 @@ can use the direction option in subcrystal::\n     sage: La = R.weight_space(extended = True).basis()\n     sage: LS = crystals.LSPaths(La[1]-La[0]); LS\n     The crystal of LS paths of type ['A', 2, 1] and weight -Lambda[0] + Lambda[1]\n-    sage: C = LS.subcrystal(max_depth=2, direction = 'both')\n+    sage: C = LS.subcrystal(max_depth=2, direction='both')\n     sage: G = LS.digraph(subset = C)\n-    sage: G.set_latex_options(edge_options = lambda (u,v,label): ({}))\n+    sage: G.set_latex_options(edge_options=lambda u,v,label: ({}))\n     sage: view(G, tightpage=True)  # optional - dot2tex graphviz, not tested (opens external window)\n \n .. image:: ../media/level_zero_crystal.png\n```\nWhich comes from this:\n\n```\nsage: l = lambda (x,y,z): x + y + z\nsage: l([1,2,3])\n6\nsage: l(1,2,3)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-ad1d3bb1c2ba> in <module>()\n----> 1 l(Integer(1),Integer(2),Integer(3))\n\nTypeError: <lambda>() takes exactly 1 argument (3 given)\n```\nI think the correct thing would be to change it to\n\n```\nsage: G.set_latex_options(edge_options=lambda uvl: ({}))\n```",
    "created_at": "2018-10-01T22:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508949",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
This change induces a syntax error on Python2:

```diff
diff --git a/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst b/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst
index 0285291..7ac5a9e 100644
--- a/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst
+++ b/src/doc/en/thematic_tutorials/lie/affine_hw_crystals.rst
@@ -60,9 +60,9 @@ can use the direction option in subcrystal::
     sage: La = R.weight_space(extended = True).basis()
     sage: LS = crystals.LSPaths(La[1]-La[0]); LS
     The crystal of LS paths of type ['A', 2, 1] and weight -Lambda[0] + Lambda[1]
-    sage: C = LS.subcrystal(max_depth=2, direction = 'both')
+    sage: C = LS.subcrystal(max_depth=2, direction='both')
     sage: G = LS.digraph(subset = C)
-    sage: G.set_latex_options(edge_options = lambda (u,v,label): ({}))
+    sage: G.set_latex_options(edge_options=lambda u,v,label: ({}))
     sage: view(G, tightpage=True)  # optional - dot2tex graphviz, not tested (opens external window)
 
 .. image:: ../media/level_zero_crystal.png
```
Which comes from this:

```
sage: l = lambda (x,y,z): x + y + z
sage: l([1,2,3])
6
sage: l(1,2,3)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-ad1d3bb1c2ba> in <module>()
----> 1 l(Integer(1),Integer(2),Integer(3))

TypeError: <lambda>() takes exactly 1 argument (3 given)
```
I think the correct thing would be to change it to

```
sage: G.set_latex_options(edge_options=lambda uvl: ({}))
```



---

archive/issue_comments_508950.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-10-01T22:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508950",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_508951.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-10-01T22:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508951",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_508952.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[a2f357f](https://github.com/sagemath/sagetrac-mirror/commit/a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595)|`trac 26376 fixing detail`|",
    "created_at": "2018-10-02T07:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[a2f357f](https://github.com/sagemath/sagetrac-mirror/commit/a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595)|`trac 26376 fixing detail`|



---

archive/issue_comments_508953.json:
```json
{
    "body": "Changing commit from \"31c8708eac66a61fb0d1445649e796c69dacbc05\" to \"a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595\"",
    "created_at": "2018-10-02T07:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "31c8708eac66a61fb0d1445649e796c69dacbc05" to "a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595"



---

archive/issue_comments_508954.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-10-02T08:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508954",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_508955.json:
```json
{
    "body": "<a id='comment:4'></a>\ndone, thanks !",
    "created_at": "2018-10-02T08:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508955",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
done, thanks !



---

archive/issue_comments_508956.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-02T12:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508956",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_508957.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks.",
    "created_at": "2018-10-02T12:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508957",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Thanks.



---

archive/issue_comments_508958.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-03T21:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508958",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_508959.json:
```json
{
    "body": "Changing branch from \"u/chapoton/26376\" to \"a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595\"",
    "created_at": "2018-10-03T21:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26376#issuecomment-508959",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/26376" to "a2f357f7f6abfd1f98d39fa3ec64e7e3e02a9595"



---

archive/issue_events_074535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-03T21:56:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26376",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26376#event-74535"
}
```
