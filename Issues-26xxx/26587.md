# Issue 26587: correctly handle exponential growth in asymptotic ring

archive/issues_026350.json:
```json
{
    "body": "CC:  @behackl\n\nThe base of an exponential growth element can be any number, but indeed it should only be a positive number and its argument should be dealt with in a separate way (as this does not contribute to the growth, but still distinguishes different elements, e.g. `(-2)^n` and `2^n`. As a consequence, the sorting of the terms in an asymptotic expansion is not correct and as one wanted.\n\nE.g. one might get something\n\n```\n3/32*(-1)^n*n^(-4) + 3/8*(-1)^n*n^(-5) + O((-1)^n*n^(-6)) + (-1/27*I*sqrt(3) + 1/27)*(-zeta3 - 1)^n*n^(-3) + (-1/9*I*sqrt(3) + 1/3)*(-zeta3 - 1)^n*n^(-4) + O((-zeta3 - 1)^n*n^(-5)) + 133/72*n + 7/12*log(n) + 7/12*euler_gamma - 1/6*a0*(I*sqrt(3) + 1) - 1/6*a1*(-I*sqrt(3) + 1) - 1/4*a2 - 23/6 - 11/36*n^(-1) + O(n^(-2)) + (1/27*I*sqrt(3) + 1/27)*zeta3^n*n^(-3) + (1/9*I*sqrt(3) + 1/3)*zeta3^n*n^(-4) + O(zeta3^n*n^(-5))\n```\n(copied out of some larger computation)\n\nIssue created by migration from https://trac.sagemath.org/ticket/26587\n\n",
    "closed_at": "2019-04-27T17:44:29Z",
    "created_at": "2018-10-29T10:55:59Z",
    "labels": [
        "component: asymptotic expansions",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "correctly handle exponential growth in asymptotic ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26587",
    "user": "https://github.com/dkrenn"
}
```
CC:  @behackl

The base of an exponential growth element can be any number, but indeed it should only be a positive number and its argument should be dealt with in a separate way (as this does not contribute to the growth, but still distinguishes different elements, e.g. `(-2)^n` and `2^n`. As a consequence, the sorting of the terms in an asymptotic expansion is not correct and as one wanted.

E.g. one might get something

```
3/32*(-1)^n*n^(-4) + 3/8*(-1)^n*n^(-5) + O((-1)^n*n^(-6)) + (-1/27*I*sqrt(3) + 1/27)*(-zeta3 - 1)^n*n^(-3) + (-1/9*I*sqrt(3) + 1/3)*(-zeta3 - 1)^n*n^(-4) + O((-zeta3 - 1)^n*n^(-5)) + 133/72*n + 7/12*log(n) + 7/12*euler_gamma - 1/6*a0*(I*sqrt(3) + 1) - 1/6*a1*(-I*sqrt(3) + 1) - 1/4*a2 - 23/6 - 11/36*n^(-1) + O(n^(-2)) + (1/27*I*sqrt(3) + 1/27)*zeta3^n*n^(-3) + (1/9*I*sqrt(3) + 1/3)*zeta3^n*n^(-4) + O(zeta3^n*n^(-5))
```
(copied out of some larger computation)

Issue created by migration from https://trac.sagemath.org/ticket/26587





---

archive/issue_comments_370624.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2018-10-29T10:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370624",
    "user": "https://github.com/dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_370625.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-10-29T11:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_370626.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-10-30T13:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_370627.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-30T14:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370628.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-30T14:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370629.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-10-31T13:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_370630.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-11-05T12:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_370631.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-11-05T12:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370631",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370632.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-07T12:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370633.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-07T12:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370633",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370634.json:
```json
{
    "body": "Some small update to take care of a trivial merge conflict in the current 8.5.beta2 and make everything Python3-compatible.",
    "created_at": "2018-11-07T12:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370634",
    "user": "https://github.com/dkrenn"
}
```

Some small update to take care of a trivial merge conflict in the current 8.5.beta2 and make everything Python3-compatible.



---

archive/issue_comments_370635.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-07T15:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370636.json:
```json
{
    "body": "Ok, patchbot was not happy; changed, so let's give it another try...\n\n---\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[f82c1a2](https://git.sagemath.org/sage.git/commit?id=f82c1a2ac0a6682888f7097e395451d222a23761)|`Trac #26587: fix doctests other than sage.rings.asymptotic`|\n|[4059d0d](https://git.sagemath.org/sage.git/commit?id=4059d0d00a1e384619a6cac48e6d3ecad31ecbcf)|`Merge branch 'u/dkrenn/asy-roots-of-unity-etc-8.4' into u/dkrenn/asy-roots-of-unity-etc`|\n---\nNew commits:",
    "created_at": "2018-11-07T15:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370636",
    "user": "https://github.com/dkrenn"
}
```

Ok, patchbot was not happy; changed, so let's give it another try...

---
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[f82c1a2](https://git.sagemath.org/sage.git/commit?id=f82c1a2ac0a6682888f7097e395451d222a23761)|`Trac #26587: fix doctests other than sage.rings.asymptotic`|
|[4059d0d](https://git.sagemath.org/sage.git/commit?id=4059d0d00a1e384619a6cac48e6d3ecad31ecbcf)|`Merge branch 'u/dkrenn/asy-roots-of-unity-etc-8.4' into u/dkrenn/asy-roots-of-unity-etc`|
---
New commits:



---

archive/issue_comments_370637.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-27T19:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370638.json:
```json
{
    "body": "Merged in 8.7.",
    "created_at": "2019-03-27T19:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370638",
    "user": "https://github.com/dkrenn"
}
```

Merged in 8.7.



---

archive/issue_comments_370639.json:
```json
{
    "body": "Merged changes from #26588 and fixed one failing doctest. I'll have a look at this now.\n\n---\nNew commits:",
    "created_at": "2019-04-15T14:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370639",
    "user": "https://github.com/behackl"
}
```

Merged changes from #26588 and fixed one failing doctest. I'll have a look at this now.

---
New commits:



---

archive/issue_comments_370640.json:
```json
{
    "body": "These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:\n\n- `growth_group.py`\n  1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.\n  2. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.\n \n---\nNew commits:",
    "created_at": "2019-04-16T10:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370640",
    "user": "https://github.com/behackl"
}
```

These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:

- `growth_group.py`
  1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.
  2. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.
 
---
New commits:



---

archive/issue_comments_370641.json:
```json
{
    "body": "Replying to [comment:19 behackl]:\n> These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:\n> \n> - `growth_group.py`\n>   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.\n\n\nDone in \n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)|`Trac #26587: use isidentifier`|\n>   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.\n\n\nDone in ",
    "created_at": "2019-04-16T10:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370641",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:19 behackl]:
> These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:
> 
> - `growth_group.py`
>   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.


Done in 
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)|`Trac #26587: use isidentifier`|
>   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.


Done in 



---

archive/issue_comments_370642.json:
```json
{
    "body": "Replying to [comment:20 dkrenn]:\n> > \n> > - `growth_group.py`\n> >   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.\n \n> \n> Done in \n> |                                                                                                                                          |                               |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n> |[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)|`Trac #26587: use isidentifier`|\n\n\nLGTM\n\n> \n> >   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.\n  \n> \n> Done in \n> |                                                                                                                                          |                                                            |\n> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n> |[22e2957](https://git.sagemath.org/sage.git/commit?id=22e295758f2bcf02d9f8cb42abbd9363a33ee7c2)|`Trac #26587: handle multiple spaces in growth group string`|\n> \n\n\nLGTM.\n\nThank you.",
    "created_at": "2019-04-16T11:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370642",
    "user": "https://github.com/behackl"
}
```

Replying to [comment:20 dkrenn]:
> > 
> > - `growth_group.py`
> >   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.
 
> 
> Done in 
> |                                                                                                                                          |                               |
> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
> |[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)|`Trac #26587: use isidentifier`|


LGTM

> 
> >   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.
  
> 
> Done in 
> |                                                                                                                                          |                                                            |
> |------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
> |[22e2957](https://git.sagemath.org/sage.git/commit?id=22e295758f2bcf02d9f8cb42abbd9363a33ee7c2)|`Trac #26587: handle multiple spaces in growth group string`|
> 


LGTM.

Thank you.



---

archive/issue_comments_370643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-16T11:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370643",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_065996.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2019-04-16T11:05:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26587#event-65996"
}
```



---

archive/issue_comments_370644.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-04-16T11:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370644",
    "user": "https://github.com/behackl"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_370645.json:
```json
{
    "body": "... waiting for the patchbot before setting this to `positive_review`.",
    "created_at": "2019-04-16T11:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370645",
    "user": "https://github.com/behackl"
}
```

... waiting for the patchbot before setting this to `positive_review`.



---

archive/issue_comments_370646.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-16T11:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370646",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_065997.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-27T17:44:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26587#event-65997"
}
```



---

archive/issue_comments_370647.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-27T17:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26587#issuecomment-370647",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
