# Issue 26884: Replace Combinatorial Object to Clonable List in DyckWords

archive/issues_026647.json:
```json
{
    "body": "Part of #26883 meta-ticket.\n\nWe also fix some plainly wrong enumerating code which considered [1,0,0] as a Dyck word. \n\nCC:  @vinklein @hivert\n\nAuthor: Adrien Boussicault, Florent Hivert\n\nBranch: u/hivert/26884\n\nStatus: needs_work\n\nCommit: 15bc8f1e7c29c2b3972cda493fced39df5469b79\n\nIssue created by migration from https://trac.sagemath.org/ticket/26884\n\n",
    "created_at": "2018-12-12T16:27:42Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Replace Combinatorial Object to Clonable List in DyckWords",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26884",
    "user": "https://trac.sagemath.org/admin/accounts/users/boussica"
}
```
Part of #26883 meta-ticket.

We also fix some plainly wrong enumerating code which considered [1,0,0] as a Dyck word. 

CC:  @vinklein @hivert

Author: Adrien Boussicault, Florent Hivert

Branch: u/hivert/26884

Status: needs_work

Commit: 15bc8f1e7c29c2b3972cda493fced39df5469b79

Issue created by migration from https://trac.sagemath.org/ticket/26884





---

archive/issue_comments_516169.json:
```json
{
    "body": "Changing branch from \"\" to \"u/boussica/26884\"",
    "created_at": "2018-12-12T16:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516169",
    "user": "https://trac.sagemath.org/admin/accounts/users/boussica"
}
```

Changing branch from "" to "u/boussica/26884"



---

archive/issue_comments_516170.json:
```json
{
    "body": "Changing commit from \"\" to \"a00075bc238ce6c73c8219a467a9380ce45ae689\"",
    "created_at": "2018-12-12T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516170",
    "user": "https://github.com/vinklein"
}
```

Changing commit from "" to "a00075bc238ce6c73c8219a467a9380ce45ae689"



---

archive/issue_comments_516171.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[a00075b](https://git.sagemath.org/sage.git/commit?id=a00075bc238ce6c73c8219a467a9380ce45ae689)|`trac #26884 To be continued ...`|",
    "created_at": "2018-12-12T16:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516171",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[a00075b](https://git.sagemath.org/sage.git/commit?id=a00075bc238ce6c73c8219a467a9380ce45ae689)|`trac #26884 To be continued ...`|



---

archive/issue_comments_516172.json:
```json
{
    "body": "Changing branch from \"u/boussica/26884\" to \"u/vklein/26884\"",
    "created_at": "2018-12-12T17:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516172",
    "user": "https://github.com/vinklein"
}
```

Changing branch from "u/boussica/26884" to "u/vklein/26884"



---

archive/issue_comments_516173.json:
```json
{
    "body": "<a id='comment:4'></a>\nrebase on 8.5.rc0\n\n---\nNew commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[f812f65](https://git.sagemath.org/sage.git/commit?id=f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806)|`trac #26884 To be continued ...`|",
    "created_at": "2018-12-12T17:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516173",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:4'></a>
rebase on 8.5.rc0

---
New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[f812f65](https://git.sagemath.org/sage.git/commit?id=f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806)|`trac #26884 To be continued ...`|



---

archive/issue_comments_516174.json:
```json
{
    "body": "Changing commit from \"a00075bc238ce6c73c8219a467a9380ce45ae689\" to \"f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806\"",
    "created_at": "2018-12-12T17:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516174",
    "user": "https://github.com/vinklein"
}
```

Changing commit from "a00075bc238ce6c73c8219a467a9380ce45ae689" to "f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806"



---

archive/issue_comments_516175.json:
```json
{
    "body": "Changing branch from \"u/vklein/26884\" to \"u/hivert/26884\"",
    "created_at": "2018-12-13T09:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516175",
    "user": "https://github.com/hivert"
}
```

Changing branch from "u/vklein/26884" to "u/hivert/26884"



---

archive/issue_comments_516176.json:
```json
{
    "body": "Changing commit from \"f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806\" to \"3405fe3d12d622697663a5e10bdb0b4c51b6d7ff\"",
    "created_at": "2018-12-14T15:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f812f654feeeaf3b44a6ace92dd8fbe8a9cd5806" to "3405fe3d12d622697663a5e10bdb0b4c51b6d7ff"



---

archive/issue_comments_516177.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[3405fe3](https://git.sagemath.org/sage.git/commit/?id=3405fe3d12d622697663a5e10bdb0b4c51b6d7ff)|`Fixed element construction`|",
    "created_at": "2018-12-14T15:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[3405fe3](https://git.sagemath.org/sage.git/commit/?id=3405fe3d12d622697663a5e10bdb0b4c51b6d7ff)|`Fixed element construction`|



---

archive/issue_comments_516178.json:
```json
{
    "body": "Changing commit from \"3405fe3d12d622697663a5e10bdb0b4c51b6d7ff\" to \"3140ed5aecba1b8f9b6b955fcd6b700d527d3628\"",
    "created_at": "2018-12-14T17:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3405fe3d12d622697663a5e10bdb0b4c51b6d7ff" to "3140ed5aecba1b8f9b6b955fcd6b700d527d3628"



---

archive/issue_comments_516179.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[3140ed5](https://git.sagemath.org/sage.git/commit/?id=3140ed5aecba1b8f9b6b955fcd6b700d527d3628)|`Removed unneeded comparison stuff`|",
    "created_at": "2018-12-14T17:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[3140ed5](https://git.sagemath.org/sage.git/commit/?id=3140ed5aecba1b8f9b6b955fcd6b700d527d3628)|`Removed unneeded comparison stuff`|



---

archive/issue_comments_516180.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-12-14T17:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516180",
    "user": "https://github.com/hivert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_516181.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Part of #26883 meta-ticket.\n+\n+We also fix some plainly wrong enumerating code which considered [1,0,0] as a Dyck word. \n``````\n",
    "created_at": "2018-12-14T17:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516181",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Part of #26883 meta-ticket.
+
+We also fix some plainly wrong enumerating code which considered [1,0,0] as a Dyck word. 
``````




---

archive/issue_comments_516182.json:
```json
{
    "body": "<a id='comment:9'></a>\none pyflakes warning (see patchbot plugins); coverage not 100%",
    "created_at": "2018-12-15T08:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516182",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
one pyflakes warning (see patchbot plugins); coverage not 100%



---

archive/issue_comments_516183.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-12-15T08:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516183",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_066501.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-15T08:01:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66501"
}
```



---

archive/issue_comments_516184.json:
```json
{
    "body": "Changing commit from \"3140ed5aecba1b8f9b6b955fcd6b700d527d3628\" to \"15bc8f1e7c29c2b3972cda493fced39df5469b79\"",
    "created_at": "2018-12-16T00:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3140ed5aecba1b8f9b6b955fcd6b700d527d3628" to "15bc8f1e7c29c2b3972cda493fced39df5469b79"



---

archive/issue_comments_516185.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[15bc8f1](https://git.sagemath.org/sage.git/commit/?id=15bc8f1e7c29c2b3972cda493fced39df5469b79)|`Coverage + removed unused Hash`|",
    "created_at": "2018-12-16T00:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[15bc8f1](https://git.sagemath.org/sage.git/commit/?id=15bc8f1e7c29c2b3972cda493fced39df5469b79)|`Coverage + removed unused Hash`|



---

archive/issue_comments_516186.json:
```json
{
    "body": "Changing author from \"Adrien Boussicault\" to \"Adrien Boussicault, Florent Hivert\"",
    "created_at": "2018-12-16T00:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516186",
    "user": "https://github.com/hivert"
}
```

Changing author from "Adrien Boussicault" to "Adrien Boussicault, Florent Hivert"



---

archive/issue_comments_516187.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-12-16T00:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516187",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_516188.json:
```json
{
    "body": "<a id='comment:12'></a>\n-1 on going through an essentially trivial `_element_constructor_` in internal code that should give valid output. At the very least, you should not run the checks when constructing objects from internal code.\n\nI am also a little skeptical of this change:\n\n```diff\n-        if isinstance(word, DyckWord) and word.parent() is self:\n+        D = DyckWords_all()\n+        if isinstance(word, DyckWord) and word.parent() is D:\n             return word\n-        return self.element_class(self, list(word))\n+        return D.element_class(D, word)\n```\n`_element_constructor_` should return an element of ``self`` as these are not fa\u00e7ade parents. (Actually, the first check here can be removed because the coercion framework would have already caught that case before it got to the `_element_constructor_`.)\n\nGiven this change, I am very nervous about the resulting parent of the Dyck path. I suspect you are doing this because `ClonableList` also includes the parent in the check and you are subsequently forcing everything to be elements of the `DyckWords_all` to have comparisons work. This is bad practice and can mask a host of other subtle issues, especially when mixing fa\u00e7ade parents with code that is making a parent act like a fa\u00e7ade parent.\n\nThis looks like a bug to me:\n\n```diff\n                 sage: DyckWords().height_poset().an_element()   # indirect doctest\n-                [1, 0, 1, 0, 1, 0, 1, 0, 1, 0]\n+                [1, 0, 1, 0, 1, 0, 1, 0, 1, 1]\n```",
    "created_at": "2018-12-16T01:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516188",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
-1 on going through an essentially trivial `_element_constructor_` in internal code that should give valid output. At the very least, you should not run the checks when constructing objects from internal code.

I am also a little skeptical of this change:

```diff
-        if isinstance(word, DyckWord) and word.parent() is self:
+        D = DyckWords_all()
+        if isinstance(word, DyckWord) and word.parent() is D:
             return word
-        return self.element_class(self, list(word))
+        return D.element_class(D, word)
```
`_element_constructor_` should return an element of ``self`` as these are not façade parents. (Actually, the first check here can be removed because the coercion framework would have already caught that case before it got to the `_element_constructor_`.)

Given this change, I am very nervous about the resulting parent of the Dyck path. I suspect you are doing this because `ClonableList` also includes the parent in the check and you are subsequently forcing everything to be elements of the `DyckWords_all` to have comparisons work. This is bad practice and can mask a host of other subtle issues, especially when mixing façade parents with code that is making a parent act like a façade parent.

This looks like a bug to me:

```diff
                 sage: DyckWords().height_poset().an_element()   # indirect doctest
-                [1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
+                [1, 0, 1, 0, 1, 0, 1, 0, 1, 1]
```



---

archive/issue_comments_516189.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-12-16T01:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516189",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_066502.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66502"
}
```



---

archive/issue_events_066503.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66503"
}
```



---

archive/issue_comments_516190.json:
```json
{
    "body": "<a id='comment:14'></a>\nRetarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516190",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_516191.json:
```json
{
    "body": "<a id='comment:15'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516191",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_066504.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66504"
}
```



---

archive/issue_events_066505.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66505"
}
```



---

archive/issue_events_066506.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66506"
}
```



---

archive/issue_events_066507.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66507"
}
```



---

archive/issue_comments_516192.json:
```json
{
    "body": "<a id='comment:16'></a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516192",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_516193.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [tscrim](#comment%3A12):\n> -1 on going through an essentially trivial `_element_constructor_` in internal code that should give valid output. At the very least, you should not run the checks when constructing objects from internal code.\n\n\nThis is something that we need to discuss in relation with set factories. The idea of those is to allow the user to change the class and parent on an enumerating algorithm. Here you hardcoded the class and the parent. I strongly disagree with that. I'm using  `_element_constructor_` as a single entry point to allows for customisation.\n \n> `_element_constructor_` should return an element of ``self`` as these are not fa\u00e7ade parents. (Actually, the first check here can be removed because the coercion framework would have already caught that case before it got to the `_element_constructor_`.)\n\n\nAgain this is something that shoul'nt be hard coded.\n\n> I suspect you are doing this because `ClonableList` also includes the parent in the check and you are subsequently forcing everything to be elements of the `DyckWords_all` to have comparisons work. \n\n\nI'm not doing anything particular with parent for comparison that following the standard `element.__richcmp__` mechanism which compare the parent or use a coercion mechanism to ensure that the elements have the same parent. It seem that you decided to change this overall policy for some particular combinatorial objects which confuses me. \n\n> This is bad practice and can mask a host of other subtle issues, especially when mixing fa\u00e7ade parents with code that is making a parent act like a fa\u00e7ade parent. \n\n\nAny examples ?",
    "created_at": "2019-06-21T08:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516193",
    "user": "https://github.com/hivert"
}
```

<a id='comment:17'></a>
Replying to [tscrim](#comment%3A12):
> -1 on going through an essentially trivial `_element_constructor_` in internal code that should give valid output. At the very least, you should not run the checks when constructing objects from internal code.


This is something that we need to discuss in relation with set factories. The idea of those is to allow the user to change the class and parent on an enumerating algorithm. Here you hardcoded the class and the parent. I strongly disagree with that. I'm using  `_element_constructor_` as a single entry point to allows for customisation.
 
> `_element_constructor_` should return an element of ``self`` as these are not façade parents. (Actually, the first check here can be removed because the coercion framework would have already caught that case before it got to the `_element_constructor_`.)


Again this is something that shoul'nt be hard coded.

> I suspect you are doing this because `ClonableList` also includes the parent in the check and you are subsequently forcing everything to be elements of the `DyckWords_all` to have comparisons work. 


I'm not doing anything particular with parent for comparison that following the standard `element.__richcmp__` mechanism which compare the parent or use a coercion mechanism to ensure that the elements have the same parent. It seem that you decided to change this overall policy for some particular combinatorial objects which confuses me. 

> This is bad practice and can mask a host of other subtle issues, especially when mixing façade parents with code that is making a parent act like a façade parent. 


Any examples ?



---

archive/issue_comments_516194.json:
```json
{
    "body": "<a id='comment:18'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516194",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_066508.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66508"
}
```



---

archive/issue_events_066509.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66509"
}
```



---

archive/issue_comments_516195.json:
```json
{
    "body": "<a id='comment:19'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516195",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_066510.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66510"
}
```



---

archive/issue_events_066511.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66511"
}
```



---

archive/issue_events_066512.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66512"
}
```



---

archive/issue_events_066513.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66513"
}
```



---

archive/issue_events_066514.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66514"
}
```



---

archive/issue_events_066515.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66515"
}
```



---

archive/issue_comments_516196.json:
```json
{
    "body": "<a id='comment:21'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516196",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_066516.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66516"
}
```



---

archive/issue_events_066517.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66517"
}
```



---

archive/issue_comments_516197.json:
```json
{
    "body": "<a id='comment:22'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26884#issuecomment-516197",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_066518.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66518"
}
```



---

archive/issue_events_066519.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66519"
}
```



---

archive/issue_events_066520.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66520"
}
```



---

archive/issue_events_066521.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66521"
}
```



---

archive/issue_events_066522.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66522"
}
```



---

archive/issue_events_066523.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26884",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26884#event-66523"
}
```
