# Issue 26749: Let `factorial` accept float arguments

archive/issues_026512.json:
```json
{
    "assignees": [],
    "body": "In Sage 8.3 to 9.0, `factorial` chokes if fed a float argument:\n\n```\nsage: factorial(float(3.2))\nTraceback (most recent call last):\n...\nAttributeError: 'float' object has no attribute 'gamma'\n```\n\nWe change the numerical evaluation so it will accept a float argument.\n\nWith this ticket:\n\n```\nsage: factorial(float(3.2))\n7.756689535793181\n```\n\nAs a consequence, `factorial(x)` can be plotted again -- as gamma(x + 1).\n\nCC:  @mezzarobba @slel tmonteil @videlec\n\nKeywords: **plot, factorial, gamma, float**\n\nBranch/Commit: **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**\n\nReviewer: **Samuel Leli\u00e8vre**\n\nAuthor: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26749_\n\n",
    "closed_at": "2020-02-25T19:51:11Z",
    "created_at": "2018-11-23T19:42:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Let `factorial` accept float arguments",
    "type": "issue",
    "updated_at": "2020-02-25T19:51:11Z",
    "url": "https://github.com/sagemath/sage/issues/26749",
    "user": "https://github.com/pelegm"
}
```
In Sage 8.3 to 9.0, `factorial` chokes if fed a float argument:

```
sage: factorial(float(3.2))
Traceback (most recent call last):
...
AttributeError: 'float' object has no attribute 'gamma'
```

We change the numerical evaluation so it will accept a float argument.

With this ticket:

```
sage: factorial(float(3.2))
7.756689535793181
```

As a consequence, `factorial(x)` can be plotted again -- as gamma(x + 1).

CC:  @mezzarobba @slel tmonteil @videlec

Keywords: **plot, factorial, gamma, float**

Branch/Commit: **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**

Reviewer: **Samuel Lelièvre**

Author: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/26749_





---

archive/issue_events_349598.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-11-23T19:42:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349598"
}
```



---

archive/issue_events_349599.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-11-23T19:42:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349599"
}
```



---

archive/issue_events_349600.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-11-23T19:42:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349600"
}
```



---

archive/issue_events_349601.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-11-23T19:42:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349601"
}
```



---

archive/issue_comments_414747.json:
```json
{
    "body": "Branch: **[u/gh-durgeshra/cannot_plot_factorial](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-durgeshra/cannot_plot_factorial)**",
    "created_at": "2018-12-19T06:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414747",
    "user": "https://github.com/durgeshra"
}
```

Branch: **[u/gh-durgeshra/cannot_plot_factorial](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-durgeshra/cannot_plot_factorial)**



---

archive/issue_comments_414748.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f\">bc795d6</a></td><td><code>Change tabs to spaces</code></td></tr></table>\n",
    "created_at": "2018-12-19T06:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414748",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f">bc795d6</a></td><td><code>Change tabs to spaces</code></td></tr></table>




---

archive/issue_comments_414749.json:
```json
{
    "body": "Commit: **[bc795d6](https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f)**",
    "created_at": "2018-12-19T06:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414749",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[bc795d6](https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f)**



---

archive/issue_comments_414750.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [@durgeshra](#comment%3A1):\n\nExample:\n\n```\nsage: factorial(x).plot()\n---------------------------------------------------------------------------\nArithmeticError                           Traceback (most recent call last)\n<ipython-input-1-d07fdfec6413> in <module>()\n----> 1 factorial(x).plot()\n\n/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.plot (build/cythonized/sage/symbolic/expression.cpp:63513)()\n> 12067             except NotImplementedError:\n\n/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)\n--> 567             return func(*args, **options)\n\n/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in plot(funcs, *args, **kwds)\n-> 1956             G = _plot(funcs, (xmin, xmax), **kwds)\n\n/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in _plot(funcs, xrange, parametric, polar, fill, label, randomize, **options)\n-> 2266                                     randomize)\n\n/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in generate_plot_points(f, xrange, plot_points, adaptive_tolerance, adaptive_recursion, randomize, initial_points)\n-> 3731         raise ArithmeticError(\"The function cannot be plotted.\")\n\nArithmeticError: The function cannot be plotted.\n```\n(raises arithmetic error)\n\n```\nsage: (x).plot()\nLaunched png viewer for Graphics object consisting of 1 graphics primitive\n```\n(plots correctly)",
    "created_at": "2018-12-19T07:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414750",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [@durgeshra](#comment%3A1):

Example:

```
sage: factorial(x).plot()
---------------------------------------------------------------------------
ArithmeticError                           Traceback (most recent call last)
<ipython-input-1-d07fdfec6413> in <module>()
----> 1 factorial(x).plot()

/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.plot (build/cythonized/sage/symbolic/expression.cpp:63513)()
> 12067             except NotImplementedError:

/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
--> 567             return func(*args, **options)

/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in plot(funcs, *args, **kwds)
-> 1956             G = _plot(funcs, (xmin, xmax), **kwds)

/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in _plot(funcs, xrange, parametric, polar, fill, label, randomize, **options)
-> 2266                                     randomize)

/home/durgesh/Downloads/sage-8.4/local/lib/python2.7/site-packages/sage/plot/plot.py in generate_plot_points(f, xrange, plot_points, adaptive_tolerance, adaptive_recursion, randomize, initial_points)
-> 3731         raise ArithmeticError("The function cannot be plotted.")

ArithmeticError: The function cannot be plotted.
```
(raises arithmetic error)

```
sage: (x).plot()
Launched png viewer for Graphics object consisting of 1 graphics primitive
```
(plots correctly)



---

archive/issue_events_349602.json:
```json
{
    "actor": "https://github.com/durgeshra",
    "created_at": "2018-12-19T07:04:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349602"
}
```



---

archive/issue_comments_414751.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nDon't mask errors. By putting a whole statement in a bare \"try/except\" you make it very hard to debug the code, because *any* error that gets raised will now be masked by \"ArithmeticError\". \n\nNote that `gamma(x+1).plot()` works just fine, so what `factorial(x).plot()` tries to do could just be fine. If you absolutely think this example needs to perform better then the way that `factorial` tries to evaluate numerical arguments should probably be adjusted.\n\nHere you can see that the original error message is much more informative than what you suggest on this ticket: it actually tells what is going wrong and allows someone to come up with a fix. Carpeting over this very useful error message with a generic, uninformative `function cannot be plotted` is not an improvement at all.",
    "created_at": "2018-12-19T07:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414751",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'>Comment 4:</a>
Don't mask errors. By putting a whole statement in a bare "try/except" you make it very hard to debug the code, because *any* error that gets raised will now be masked by "ArithmeticError". 

Note that `gamma(x+1).plot()` works just fine, so what `factorial(x).plot()` tries to do could just be fine. If you absolutely think this example needs to perform better then the way that `factorial` tries to evaluate numerical arguments should probably be adjusted.

Here you can see that the original error message is much more informative than what you suggest on this ticket: it actually tells what is going wrong and allows someone to come up with a fix. Carpeting over this very useful error message with a generic, uninformative `function cannot be plotted` is not an improvement at all.



---

archive/issue_comments_414752.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@nbruin](#comment%3A4):\n> Don't mask errors. By putting a whole statement in a bare \"try/except\" you make it very hard to debug the code, because *any* error that gets raised will now be masked by \"ArithmeticError\". \n> \n> Note that `gamma(x+1).plot()` works just fine, so what `factorial(x).plot()` tries to do could just be fine. If you absolutely think this example needs to perform better then the way that `factorial` tries to evaluate numerical arguments should probably be adjusted.\n> \n> Here you can see that the original error message is much more informative than what you suggest on this ticket: it actually tells what is going wrong and allows someone to come up with a fix. Carpeting over this very useful error message with a generic, uninformative `function cannot be plotted` is not an improvement at all.\n\nSo what should `factorial(x).plot()` return? Should it make a plot like the gamma function?",
    "created_at": "2018-12-19T07:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414752",
    "user": "https://github.com/durgeshra"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@nbruin](#comment%3A4):
> Don't mask errors. By putting a whole statement in a bare "try/except" you make it very hard to debug the code, because *any* error that gets raised will now be masked by "ArithmeticError". 
> 
> Note that `gamma(x+1).plot()` works just fine, so what `factorial(x).plot()` tries to do could just be fine. If you absolutely think this example needs to perform better then the way that `factorial` tries to evaluate numerical arguments should probably be adjusted.
> 
> Here you can see that the original error message is much more informative than what you suggest on this ticket: it actually tells what is going wrong and allows someone to come up with a fix. Carpeting over this very useful error message with a generic, uninformative `function cannot be plotted` is not an improvement at all.

So what should `factorial(x).plot()` return? Should it make a plot like the gamma function?



---

archive/issue_events_349603.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-02-20T18:31:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349603"
}
```



---

archive/issue_events_349604.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-02-20T18:31:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349604"
}
```



---

archive/issue_comments_414753.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThe `factorial` function used to accept a Python float\nas an argument, but no longer does. It might have to do\nwith the refactoring in #25421. Compare the following.\n\nIn Sage 8.2:\n\n```\nsage: version()\n'SageMath version 8.2, Release Date: 2018-05-05'\nsage: factorial(1.2)\n1.10180249087971\nsage: factorial(1.2r)\n1.1018024908797128\n```\n\nIn Sage 8.3:\n\n```\nsage: version()\n'SageMath version 8.3, Release Date: 2018-08-03'\nsage: factorial(1.2)\n1.10180249087971\nsage: factorial(1.2r)\nTraceback (most recent call last)\n...\nAttributeError: 'float' object has no attribute 'gamma'\n```\n\nThe problem manifests itself when plotting because when\nplotting a symbolic function Sage feeds it Python floats.",
    "created_at": "2020-02-20T18:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414753",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'>Comment 6:</a>
The `factorial` function used to accept a Python float
as an argument, but no longer does. It might have to do
with the refactoring in #25421. Compare the following.

In Sage 8.2:

```
sage: version()
'SageMath version 8.2, Release Date: 2018-05-05'
sage: factorial(1.2)
1.10180249087971
sage: factorial(1.2r)
1.1018024908797128
```

In Sage 8.3:

```
sage: version()
'SageMath version 8.3, Release Date: 2018-08-03'
sage: factorial(1.2)
1.10180249087971
sage: factorial(1.2r)
Traceback (most recent call last)
...
AttributeError: 'float' object has no attribute 'gamma'
```

The problem manifests itself when plotting because when
plotting a symbolic function Sage feeds it Python floats.



---

archive/issue_comments_414754.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c\">684d323</a></td><td><code>26749: make factorial function accepts float argument</code></td></tr></table>\n",
    "created_at": "2020-02-20T21:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414754",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>Comment 7:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c">684d323</a></td><td><code>26749: make factorial function accepts float argument</code></td></tr></table>




---

archive/issue_events_349605.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-20T21:07:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "title_is": "Factorial can not handle float argument",
    "title_was": "Cannot plot factorial",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349605"
}
```



---

archive/issue_comments_414755.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,35 +1,9 @@\n-Trying to plot the factorial function:\n \n-```python\n-sage: factorial(x).plot()\n ```\n-raises an uninformative error:\n-\n-```pytb\n+sage: factorial(float(3.2))\n Traceback (most recent call last):\n-  File \"<ipython-input-157-d07fdfec6413>\", line 1, in <module>\n-    factorial(x).plot()\n-  File \"sage/symbolic/expression.pyx\", line 12043, in sage.symbolic.expression.Expression.plot (build/cythonized/sage/symbolic/expression.cpp:68741)\n-    return plot(f, *args, **kwds)\n-  File \"/sage/local/lib/python2.7/site-packages/sage/misc/decorators.py\", line 567, in wrapper\n-    return func(*args, **options)\n-  File \"/sage/local/lib/python2.7/site-packages/sage/plot/plot.py\", line 1957, in plot\n-    G = _plot(funcs, (xmin, xmax), **kwds)\n-  File \"/sage/local/lib/python2.7/site-packages/sage/plot/plot.py\", line 2267, in _plot\n-    randomize)\n-  File \"/sage/local/lib/python2.7/site-packages/sage/plot/plot.py\", line 3867, in generate_plot_points\n-    data[i] = (float(xi), float(f(xi)))\n-  File \"sage/ext/interpreters/wrapper_py.pyx\", line 80, in sage.ext.interpreters.wrapper_py.Wrapper_py.__call__ (build/cythonized/sage/ext/interpreters/wrapper_py.c:2192)\n-    raise\n-  File \"sage/ext/interpreters/wrapper_py.pyx\", line 72, in sage.ext.interpreters.wrapper_py.Wrapper_py.__call__ (build/cythonized/sage/ext/interpreters/wrapper_py.c:2126)\n-    return interp_py((<PyTupleObject*>args).ob_item\n-  File \"sage/symbolic/function.pyx\", line 998, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:11923)\n-    res = super(BuiltinFunction, self).__call__(\n-  File \"sage/symbolic/function.pyx\", line 489, in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6894)\n-    res = g_function_eval1(self._serial,\n-  File \"/sage/local/lib/python2.7/site-packages/sage/functions/other.py\", line 1430, in _eval_\n-    return (x + 1).gamma()\n+...\n AttributeError: 'float' object has no attribute 'gamma'\n ```\n \n-It may be ok that sage will refuse to plot it (well, it is not continuous as is), but then the error message should prboably be informative.\n+We change the numerical evaluation. As a consequence, it can be plotted.\n``````\n",
    "created_at": "2020-02-20T21:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414755",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,35 +1,9 @@
-Trying to plot the factorial function:
 
-```python
-sage: factorial(x).plot()
 ```
-raises an uninformative error:
-
-```pytb
+sage: factorial(float(3.2))
 Traceback (most recent call last):
-  File "<ipython-input-157-d07fdfec6413>", line 1, in <module>
-    factorial(x).plot()
-  File "sage/symbolic/expression.pyx", line 12043, in sage.symbolic.expression.Expression.plot (build/cythonized/sage/symbolic/expression.cpp:68741)
-    return plot(f, *args, **kwds)
-  File "/sage/local/lib/python2.7/site-packages/sage/misc/decorators.py", line 567, in wrapper
-    return func(*args, **options)
-  File "/sage/local/lib/python2.7/site-packages/sage/plot/plot.py", line 1957, in plot
-    G = _plot(funcs, (xmin, xmax), **kwds)
-  File "/sage/local/lib/python2.7/site-packages/sage/plot/plot.py", line 2267, in _plot
-    randomize)
-  File "/sage/local/lib/python2.7/site-packages/sage/plot/plot.py", line 3867, in generate_plot_points
-    data[i] = (float(xi), float(f(xi)))
-  File "sage/ext/interpreters/wrapper_py.pyx", line 80, in sage.ext.interpreters.wrapper_py.Wrapper_py.__call__ (build/cythonized/sage/ext/interpreters/wrapper_py.c:2192)
-    raise
-  File "sage/ext/interpreters/wrapper_py.pyx", line 72, in sage.ext.interpreters.wrapper_py.Wrapper_py.__call__ (build/cythonized/sage/ext/interpreters/wrapper_py.c:2126)
-    return interp_py((<PyTupleObject*>args).ob_item
-  File "sage/symbolic/function.pyx", line 998, in sage.symbolic.function.BuiltinFunction.__call__ (build/cythonized/sage/symbolic/function.cpp:11923)
-    res = super(BuiltinFunction, self).__call__(
-  File "sage/symbolic/function.pyx", line 489, in sage.symbolic.function.Function.__call__ (build/cythonized/sage/symbolic/function.cpp:6894)
-    res = g_function_eval1(self._serial,
-  File "/sage/local/lib/python2.7/site-packages/sage/functions/other.py", line 1430, in _eval_
-    return (x + 1).gamma()
+...
 AttributeError: 'float' object has no attribute 'gamma'
 ```
 
-It may be ok that sage will refuse to plot it (well, it is not continuous as is), but then the error message should prboably be informative.
+We change the numerical evaluation. As a consequence, it can be plotted.
``````




---

archive/issue_comments_414756.json:
```json
{
    "body": "Changed commit from **[bc795d6](https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f)** to **[684d323](https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c)**",
    "created_at": "2020-02-20T21:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414756",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[bc795d6](https://github.com/sagemath/sagetrac-mirror/commit/bc795d609f8b403df23fbe8a2c8b433292a9222f)** to **[684d323](https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c)**



---

archive/issue_comments_414757.json:
```json
{
    "body": "Changed branch from **[u/gh-durgeshra/cannot_plot_factorial](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-durgeshra/cannot_plot_factorial)** to **[public/26749](https://github.com/sagemath/sagetrac-mirror/tree/public/26749)**",
    "created_at": "2020-02-20T21:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414757",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/gh-durgeshra/cannot_plot_factorial](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-durgeshra/cannot_plot_factorial)** to **[public/26749](https://github.com/sagemath/sagetrac-mirror/tree/public/26749)**



---

archive/issue_comments_414758.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI like this try/except solution! Positive review from me if the patchbots are happy.",
    "created_at": "2020-02-21T00:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414758",
    "user": "https://github.com/slel"
}
```

<a id='comment:8'>Comment 8:</a>
I like this try/except solution! Positive review from me if the patchbots are happy.



---

archive/issue_events_349606.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-02-21T00:10:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "title_is": "Let `factorial` accept float arguments",
    "title_was": "Factorial can not handle float argument",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349606"
}
```



---

archive/issue_comments_414759.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n+In Sage 8.3 to 9.0, `factorial` chokes if fed a float argument:\n \n ```\n sage: factorial(float(3.2))\n@@ -6,4 +7,6 @@\n AttributeError: 'float' object has no attribute 'gamma'\n ```\n \n-We change the numerical evaluation. As a consequence, it can be plotted.\n+We change the numerical evaluation so it will accept a float argument.\n+\n+As a consequence, `factorial(x)` can be plotted -- as gamma(x + 1).\n``````\n",
    "created_at": "2020-02-21T00:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414759",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
+In Sage 8.3 to 9.0, `factorial` chokes if fed a float argument:
 
 ```
 sage: factorial(float(3.2))
@@ -6,4 +7,6 @@
 AttributeError: 'float' object has no attribute 'gamma'
 ```
 
-We change the numerical evaluation. As a consequence, it can be plotted.
+We change the numerical evaluation so it will accept a float argument.
+
+As a consequence, `factorial(x)` can be plotted -- as gamma(x + 1).
``````




---

archive/issue_comments_414760.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,11 @@\n \n We change the numerical evaluation so it will accept a float argument.\n \n-As a consequence, `factorial(x)` can be plotted -- as gamma(x + 1).\n+With this ticket:\n+\n+```\n+sage: factorial(float(3.2))\n+7.756689535793181\n+```\n+\n+As a consequence, `factorial(x)` can be plotted again -- as gamma(x + 1).\n``````\n",
    "created_at": "2020-02-21T00:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414760",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,11 @@
 
 We change the numerical evaluation so it will accept a float argument.
 
-As a consequence, `factorial(x)` can be plotted -- as gamma(x + 1).
+With this ticket:
+
+```
+sage: factorial(float(3.2))
+7.756689535793181
+```
+
+As a consequence, `factorial(x)` can be plotted again -- as gamma(x + 1).
``````




---

archive/issue_comments_414761.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2020-02-21T00:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414761",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_comments_414762.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2020-02-21T00:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414762",
    "user": "https://github.com/slel"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_414763.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nNote: a similar problem for `sqrt` was reported at\n\n- https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion",
    "created_at": "2020-02-21T09:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414763",
    "user": "https://github.com/slel"
}
```

<a id='comment:11'>Comment 11:</a>
Note: a similar problem for `sqrt` was reported at

- https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion



---

archive/issue_comments_414764.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@slel](#comment%3A11):\n> Note: a similar problem for `sqrt` was reported at\n> \n> - https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion\n\nWhat do you mean exactly? The following is with 9.1.beta4\n\n```\nsage: sqrt(float(1.3))\n1.140175425099138\nsage: type(sqrt(float(1.3)))\n<class 'float'>\n```",
    "created_at": "2020-02-21T09:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414764",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@slel](#comment%3A11):
> Note: a similar problem for `sqrt` was reported at
> 
> - https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion

What do you mean exactly? The following is with 9.1.beta4

```
sage: sqrt(float(1.3))
1.140175425099138
sage: type(sqrt(float(1.3)))
<class 'float'>
```



---

archive/issue_comments_414765.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@videlec](#comment%3A12):\n> Replying to [@slel](#comment%3A11):\n> > Note: a similar problem for `sqrt` was reported at\n> > \n> > - https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion\n\n> \n> What do you mean exactly? The following is with 9.1.beta4\n> \n> ```\n> sage: sqrt(float(1.3))\n> 1.140175425099138\n> sage: type(sqrt(float(1.3)))\n> <class 'float'>\n> ```\n\nThis was a call to `.sqrt()` that floats do not have.",
    "created_at": "2020-02-21T17:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414765",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@videlec](#comment%3A12):
> Replying to [@slel](#comment%3A11):
> > Note: a similar problem for `sqrt` was reported at
> > 
> > - https://groups.google.com/d/topic/cocalc/rblsUHwBXQc/discussion

> 
> What do you mean exactly? The following is with 9.1.beta4
> 
> ```
> sage: sqrt(float(1.3))
> 1.140175425099138
> sage: type(sqrt(float(1.3)))
> <class 'float'>
> ```

This was a call to `.sqrt()` that floats do not have.



---

archive/issue_comments_414766.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nSee #29232 for that other problem, sorry for the noise here.",
    "created_at": "2020-02-21T17:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414766",
    "user": "https://github.com/slel"
}
```

<a id='comment:14'>Comment 14:</a>
See #29232 for that other problem, sorry for the noise here.



---

archive/issue_comments_414767.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThis looks good to me.",
    "created_at": "2020-02-21T17:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414767",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:15'>Comment 15:</a>
This looks good to me.



---

archive/issue_events_349607.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2020-02-21T17:41:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349607"
}
```



---

archive/issue_events_349608.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2020-02-21T17:41:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349608"
}
```



---

archive/issue_comments_414768.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOn 32-bit\n\n```\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1471, in sage.functions.other.Function_factorial._eval_\nFailed example:\n    factorial(float(3.2))\nExpected:\n    7.756689535793181\nGot:\n    7.756689535793178\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.functions.other.Function_factorial._eval_\n    [448 tests, 1 failure, 26.12 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/functions/other.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-02-22T18:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414768",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'>Comment 16:</a>
On 32-bit

```
**********************************************************************
File "src/sage/functions/other.py", line 1471, in sage.functions.other.Function_factorial._eval_
Failed example:
    factorial(float(3.2))
Expected:
    7.756689535793181
Got:
    7.756689535793178
**********************************************************************
1 item had failures:
   1 of  11 in sage.functions.other.Function_factorial._eval_
    [448 tests, 1 failure, 26.12 s]
----------------------------------------------------------------------
sage -t --long src/sage/functions/other.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_349609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-22T18:24:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349609"
}
```



---

archive/issue_events_349610.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-22T18:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349610"
}
```



---

archive/issue_comments_414769.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nTurns out that 32 bits is much more accurate!\n\n```\nsage: RealBallField(64)(\"4.2\").gamma()                                                                    \n[7.7566895357931776 +/- 5.95e-17]\n```",
    "created_at": "2020-02-22T20:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414769",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'>Comment 17:</a>
Turns out that 32 bits is much more accurate!

```
sage: RealBallField(64)("4.2").gamma()                                                                    
[7.7566895357931776 +/- 5.95e-17]
```



---

archive/issue_comments_414770.json:
```json
{
    "body": "Changed commit from **[684d323](https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c)** to **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**",
    "created_at": "2020-02-22T21:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414770",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[684d323](https://github.com/sagemath/sagetrac-mirror/commit/684d323097a51706709430dceea72114b23a956c)** to **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**



---

archive/issue_comments_414771.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8da470c9717a82f24dc94b19adb7fc37fb1bdc51\">8da470c</a></td><td><code>26749: make factorial function accepts float argument</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8\">77389bc</a></td><td><code>26749: add fp tolerance</code></td></tr></table>\n",
    "created_at": "2020-02-22T21:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414771",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8da470c9717a82f24dc94b19adb7fc37fb1bdc51">8da470c</a></td><td><code>26749: make factorial function accepts float argument</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8">77389bc</a></td><td><code>26749: add fp tolerance</code></td></tr></table>




---

archive/issue_events_349611.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T21:02:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349611"
}
```



---

archive/issue_events_349612.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T21:02:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349612"
}
```



---

archive/issue_events_349613.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-02-23T14:35:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349613"
}
```



---

archive/issue_events_349614.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-02-23T14:35:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349614"
}
```



---

archive/issue_comments_414772.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThanks! Positive review.",
    "created_at": "2020-02-23T14:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414772",
    "user": "https://github.com/slel"
}
```

<a id='comment:20'>Comment 20:</a>
Thanks! Positive review.



---

archive/issue_comments_414773.json:
```json
{
    "body": "Changed branch from **[public/26749](https://github.com/sagemath/sagetrac-mirror/tree/public/26749)** to **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**",
    "created_at": "2020-02-25T19:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26749#issuecomment-414773",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/26749](https://github.com/sagemath/sagetrac-mirror/tree/public/26749)** to **[77389bc](https://github.com/sagemath/sagetrac-mirror/commit/77389bcc2ce2f10e61a0a1ba165c4f9316a5bbb8)**



---

archive/issue_events_349615.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-25T19:51:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349615"
}
```



---

archive/issue_events_349616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "96a28495be133bcb86a6905f202b0e472c542ca7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-02-25T19:51:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26749",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26749#event-349616"
}
```
