# Issue 26667: distutils no longer shows compiler commands

archive/issues_026430.json:
```json
{
    "body": "Running\n\n```\ntouch src/sage/rings/rational.pyx && ./sage -b\n```\nshows\n\n```\nCompiling sage/rings/rational.pyx because it changed.\n[1/1] Cythonizing sage/rings/rational.pyx\nExecuting 1 command (using 1 thread)\n[1/1] Time to execute 1 command: 0.51 seconds.\nTotal time spent compiling C/C++ extensions: 0.57 seconds.\n```\nNote that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging. This got \"broken\" in #24655.\n\nCC:  @embray @saraedum\n\nReviewer: Julian R\u00fcth, Volker Braun\n\nAuthor: Jeroen Demeyer\n\nBranch: c8925d1bdc4e29da85efe48f5934389e52634353\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26667\n\n",
    "closed_at": "2018-11-19T18:01:16Z",
    "created_at": "2018-11-09T10:47:26Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "distutils no longer shows compiler commands",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26667",
    "user": "https://github.com/jdemeyer"
}
```
Running

```
touch src/sage/rings/rational.pyx && ./sage -b
```
shows

```
Compiling sage/rings/rational.pyx because it changed.
[1/1] Cythonizing sage/rings/rational.pyx
Executing 1 command (using 1 thread)
[1/1] Time to execute 1 command: 0.51 seconds.
Total time spent compiling C/C++ extensions: 0.57 seconds.
```
Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging. This got "broken" in #24655.

CC:  @embray @saraedum

Reviewer: Julian Rüth, Volker Braun

Author: Jeroen Demeyer

Branch: c8925d1bdc4e29da85efe48f5934389e52634353

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26667





---

archive/issue_comments_512482.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/distutils_no_longer_shows_compiler_commands\"",
    "created_at": "2018-11-09T10:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512482",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/distutils_no_longer_shows_compiler_commands"



---

archive/issue_comments_512483.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2018-11-09T10:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512483",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_512484.json:
```json
{
    "body": "Changing commit from \"\" to \"c8925d1bdc4e29da85efe48f5934389e52634353\"",
    "created_at": "2018-11-09T10:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512484",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "c8925d1bdc4e29da85efe48f5934389e52634353"



---

archive/issue_comments_512485.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[c8925d1](https://git.sagemath.org/sage.git/commit?id=c8925d1bdc4e29da85efe48f5934389e52634353)|`Revert \"Silence setup.py\"`|",
    "created_at": "2018-11-09T10:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512485",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[c8925d1](https://git.sagemath.org/sage.git/commit?id=c8925d1bdc4e29da85efe48f5934389e52634353)|`Revert "Silence setup.py"`|



---

archive/issue_comments_512486.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-11-09T11:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512486",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_512487.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,5 +13,3 @@\n Total time spent compiling C/C++ extensions: 0.57 seconds.\n ```\n Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging.\n-\n-Possibly related, I also noticed that `-save-temps` is somehow broken. I wanted to took at the `gcc` command line to see what went wrong, but I couldn't...\n``````\n",
    "created_at": "2018-11-09T11:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512487",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,5 +13,3 @@
 Total time spent compiling C/C++ extensions: 0.57 seconds.
 ```
 Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging.
-
-Possibly related, I also noticed that `-save-temps` is somehow broken. I wanted to took at the `gcc` command line to see what went wrong, but I couldn't...
``````




---

archive/issue_comments_512488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n [1/1] Time to execute 1 command: 0.51 seconds.\n Total time spent compiling C/C++ extensions: 0.57 seconds.\n ```\n-Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging.\n+Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging. This got \"broken\" in #24655.\n``````\n",
    "created_at": "2018-11-09T11:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512488",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 [1/1] Time to execute 1 command: 0.51 seconds.
 Total time spent compiling C/C++ extensions: 0.57 seconds.
 ```
-Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging.
+Note that the compiler invocation (`gcc ...`) is not shown. This is really annoying for debugging. This got "broken" in #24655.
``````




---

archive/issue_comments_512489.json:
```json
{
    "body": "<a id='comment:7'></a>\nSorry for that.",
    "created_at": "2018-11-09T11:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512489",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
Sorry for that.



---

archive/issue_comments_512490.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-09T11:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512490",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_512491.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2018-11-09T11:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512491",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rüth"



---

archive/issue_comments_512492.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2018-11-09T12:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512492",
    "user": "https://github.com/embray"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_512493.json:
```json
{
    "body": "<a id='comment:8'></a>\nI actually rather like the quieter output.  Couldn't we make this an option?  When *not* debugging the extra output is not so helpful or necessary.",
    "created_at": "2018-11-09T12:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512493",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
I actually rather like the quieter output.  Couldn't we make this an option?  When *not* debugging the extra output is not so helpful or necessary.



---

archive/issue_comments_512494.json:
```json
{
    "body": "<a id='comment:9'></a>\nI agree that it's easier to see where the build process is at in the quieter version, and nicer to look at when things work. However, debugging compiler related problems is really hard like this. So, I'd propose to merge this as is, so we can debug again and then improve upon this in a follow-up.",
    "created_at": "2018-11-09T12:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512494",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:9'></a>
I agree that it's easier to see where the build process is at in the quieter version, and nicer to look at when things work. However, debugging compiler related problems is really hard like this. So, I'd propose to merge this as is, so we can debug again and then improve upon this in a follow-up.



---

archive/issue_comments_512495.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt would be trivial to just add an option.  I'll do it.  \"Merging\" this isn't going to allow anyone to \"debug\" anything *right now* anyways since things get \"merged\" whenever Volker feels like it (if there were GitHub/GitLab and I could just click \"merge\" I would agree).",
    "created_at": "2018-11-09T12:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512495",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
It would be trivial to just add an option.  I'll do it.  "Merging" this isn't going to allow anyone to "debug" anything *right now* anyways since things get "merged" whenever Volker feels like it (if there were GitHub/GitLab and I could just click "merge" I would agree).



---

archive/issue_comments_512496.json:
```json
{
    "body": "<a id='comment:11'></a>\nToo much information is annoying at worst, but missing information is impossible to get after the fact. So when logging, I very much like to err on the side of too much logging.\n\nAnd an option (with quiet logging by default) is only going to make it more complicated when users ask for help. It's already hard enough to get users send logs, but with Erik's proposal we add an extra hurdle of actually getting the info that we need in the logs.\n\nAnd I remind that we have the environment variable `SAGE_SILENT_BUILD` if you don't want to see everything on your stdout. That option still keeps the logs on disk intact.",
    "created_at": "2018-11-13T11:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512496",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Too much information is annoying at worst, but missing information is impossible to get after the fact. So when logging, I very much like to err on the side of too much logging.

And an option (with quiet logging by default) is only going to make it more complicated when users ask for help. It's already hard enough to get users send logs, but with Erik's proposal we add an extra hurdle of actually getting the info that we need in the logs.

And I remind that we have the environment variable `SAGE_SILENT_BUILD` if you don't want to see everything on your stdout. That option still keeps the logs on disk intact.



---

archive/issue_comments_512497.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-11-13T11:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512497",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_512498.json:
```json
{
    "body": "<a id='comment:13'></a>\nYou can debate what ends up being printed to the terminal, but whatever you do make sure that the compiler invocation is written to install.log...",
    "created_at": "2018-11-18T10:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512498",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
You can debate what ends up being printed to the terminal, but whatever you do make sure that the compiler invocation is written to install.log...



---

archive/issue_comments_512499.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-18T10:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512499",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_512500.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/distutils_no_longer_shows_compiler_commands\" to \"c8925d1bdc4e29da85efe48f5934389e52634353\"",
    "created_at": "2018-11-19T18:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512500",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/distutils_no_longer_shows_compiler_commands" to "c8925d1bdc4e29da85efe48f5934389e52634353"



---

archive/issue_events_066112.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-19T18:01:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26667#event-66112"
}
```



---

archive/issue_comments_512501.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-19T18:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512501",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_512502.json:
```json
{
    "body": "Changing commit from \"c8925d1bdc4e29da85efe48f5934389e52634353\" to \"\"",
    "created_at": "2018-11-20T09:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512502",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "c8925d1bdc4e29da85efe48f5934389e52634353" to ""



---

archive/issue_comments_512503.json:
```json
{
    "body": "Changing reviewer from \"Julian R\u00fcth\" to \"Julian R\u00fcth, Volker Braun\"",
    "created_at": "2018-11-20T09:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26667#issuecomment-512503",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "Julian Rüth" to "Julian Rüth, Volker Braun"
