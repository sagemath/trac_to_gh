# Issue 26307: compute DOL languages

archive/issues_026070.json:
```json
{
    "body": "With the patch\n\n```\nsage: s = WordMorphism({0: [0,1], 1:[0]})\nsage: %time L = s.language(10000)\nCPU times: user 221 ms, sys: 10.3 ms, total: 231 ms\nWall time: 221 ms\nsage: len(L)\n10001\n```\n\nCC:  @staroste @seblabbe\n\nBranch/Commit: 431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26307\n\n",
    "closed_at": "2018-09-22T10:22:31Z",
    "created_at": "2018-09-18T20:48:43Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "compute DOL languages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26307",
    "user": "https://github.com/videlec"
}
```
With the patch

```
sage: s = WordMorphism({0: [0,1], 1:[0]})
sage: %time L = s.language(10000)
CPU times: user 221 ms, sys: 10.3 ms, total: 231 ms
Wall time: 221 ms
sage: len(L)
10001
```

CC:  @staroste @seblabbe

Branch/Commit: 431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f

Reviewer: Sébastien Labbé

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26307





---

archive/issue_comments_505846.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/26307\"",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505846",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/26307"



---

archive/issue_comments_505847.json:
```json
{
    "body": "Changing commit from \"\" to \"4036c1c10b3901a24bf144dbaa6686142870e2cb\"",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505847",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "4036c1c10b3901a24bf144dbaa6686142870e2cb"



---

archive/issue_comments_505848.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505848",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_505849.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[f144c02](https://git.sagemath.org/sage.git/commit?id=f144c024e8bbd1b36a51c3ad325ba15ad23154b6)|`26307: DOL languages`|\n|[4036c1c](https://git.sagemath.org/sage.git/commit?id=4036c1c10b3901a24bf144dbaa6686142870e2cb)|`26307: more naive (and faster) powering of morphisms`|",
    "created_at": "2018-09-18T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505849",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[f144c02](https://git.sagemath.org/sage.git/commit?id=f144c024e8bbd1b36a51c3ad325ba15ad23154b6)|`26307: DOL languages`|
|[4036c1c](https://git.sagemath.org/sage.git/commit?id=4036c1c10b3901a24bf144dbaa6686142870e2cb)|`26307: more naive (and faster) powering of morphisms`|



---

archive/issue_comments_505850.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-09-20T08:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505850",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_505851.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is great! I remember almost 10 years ago, I suggested to write such a function and I remember you said it was not a good idea :P\n\nI would ask that you add an `INPUT` block for both `language` and `_language_naive` methods that explains both inputs `n` and `u` and also what happens when `u=None`. After this is done, it will be good to go for me (if all tests pass which I didn't check yet).",
    "created_at": "2018-09-20T08:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505851",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>
This is great! I remember almost 10 years ago, I suggested to write such a function and I remember you said it was not a good idea :P

I would ask that you add an `INPUT` block for both `language` and `_language_naive` methods that explains both inputs `n` and `u` and also what happens when `u=None`. After this is done, it will be good to go for me (if all tests pass which I didn't check yet).



---

archive/issue_comments_505852.json:
```json
{
    "body": "<a id='comment:3'></a>\nI obtain two failing doctests (also reported by the patchbot report) :\n\n```\nsage -t --long src/sage/combinat/words/morphism.py  # 2 doctests failed\n```",
    "created_at": "2018-09-20T08:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505852",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
I obtain two failing doctests (also reported by the patchbot report) :

```
sage -t --long src/sage/combinat/words/morphism.py  # 2 doctests failed
```



---

archive/issue_comments_505853.json:
```json
{
    "body": "<a id='comment:4'></a>\nI am not 100% convinced that this patch is a good idea. The problem is that you might expect `sigma.language()` to return an object for the set of factors, because for example you want to access the words of length {100, 101, 102, 103} and for that purpose it make no sense to call three times `s.language(n)` four times. We can still make that happen in the future without breaking backward compatibility.",
    "created_at": "2018-09-20T12:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505853",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
I am not 100% convinced that this patch is a good idea. The problem is that you might expect `sigma.language()` to return an object for the set of factors, because for example you want to access the words of length {100, 101, 102, 103} and for that purpose it make no sense to call three times `s.language(n)` four times. We can still make that happen in the future without breaking backward compatibility.



---

archive/issue_comments_505854.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[eddab47](https://git.sagemath.org/sage.git/commit/?id=eddab47ef650954f8b7e13fe9639985cd68c297b)|`26307: fix doctests`|\n|[1c7bc62](https://git.sagemath.org/sage.git/commit/?id=1c7bc622cee984c2982ed80a1916671146391c53)|`26307: INPUT sections`|",
    "created_at": "2018-09-20T13:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[eddab47](https://git.sagemath.org/sage.git/commit/?id=eddab47ef650954f8b7e13fe9639985cd68c297b)|`26307: fix doctests`|
|[1c7bc62](https://git.sagemath.org/sage.git/commit/?id=1c7bc622cee984c2982ed80a1916671146391c53)|`26307: INPUT sections`|



---

archive/issue_comments_505855.json:
```json
{
    "body": "Changing commit from \"4036c1c10b3901a24bf144dbaa6686142870e2cb\" to \"1c7bc622cee984c2982ed80a1916671146391c53\"",
    "created_at": "2018-09-20T13:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4036c1c10b3901a24bf144dbaa6686142870e2cb" to "1c7bc622cee984c2982ed80a1916671146391c53"



---

archive/issue_comments_505856.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-20T13:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505856",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_505857.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-09-20T14:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505857",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_505858.json:
```json
{
    "body": "<a id='comment:7'></a>\nI will be pickky, but can you use double `--` where needed please to conform with the developer manual:\n\n```diff\n- - ``n`` - non-negative inte\n+ - ``n`` -- non-negative inte\n```",
    "created_at": "2018-09-20T14:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505858",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
I will be pickky, but can you use double `--` where needed please to conform with the developer manual:

```diff
- - ``n`` - non-negative inte
+ - ``n`` -- non-negative inte
```



---

archive/issue_comments_505859.json:
```json
{
    "body": "<a id='comment:8'></a>\nOne other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.\n\n```diff\n- return list(L)\n+ return L\n```\n\nOften, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.",
    "created_at": "2018-09-20T14:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505859",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:8'></a>
One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.

```diff
- return list(L)
+ return L
```

Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.



---

archive/issue_comments_505860.json:
```json
{
    "body": "Changing reviewer from \"\" to \"S\u00e9bastien Labb\u00e9\"",
    "created_at": "2018-09-20T14:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505860",
    "user": "https://github.com/seblabbe"
}
```

Changing reviewer from "" to "Sébastien Labbé"



---

archive/issue_comments_505861.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [slabbe](#comment%3A8):\n> One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.\n> \n> \n> ```\n> #!diff\n> - return list(L)\n> + return L\n> ```\n> \n> Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.\n\n\nAgreed. Though `w.factor_set()` returns a \"Sage set\" and not a Python set... this is not so nice.",
    "created_at": "2018-09-20T16:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505861",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
Replying to [slabbe](#comment%3A8):
> One other comment, I think `language` should return a set instead of a list. It is better to let the translation from set to list be done by the user if he needs to.
> 
> 
> ```
> #!diff
> - return list(L)
> + return L
> ```
> 
> Often, one wants to test containment and it will be stupid that the user have to do `set(m.language(1000))`.


Agreed. Though `w.factor_set()` returns a "Sage set" and not a Python set... this is not so nice.



---

archive/issue_comments_505862.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[a4f0cd4](https://git.sagemath.org/sage.git/commit/?id=a4f0cd4fb2ec7d48998ba0df16454608e6a24877)|`26307: conform docstring`|\n|[431bee7](https://git.sagemath.org/sage.git/commit/?id=431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f)|`26307: return set`|",
    "created_at": "2018-09-20T16:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[a4f0cd4](https://git.sagemath.org/sage.git/commit/?id=a4f0cd4fb2ec7d48998ba0df16454608e6a24877)|`26307: conform docstring`|
|[431bee7](https://git.sagemath.org/sage.git/commit/?id=431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f)|`26307: return set`|



---

archive/issue_comments_505863.json:
```json
{
    "body": "Changing commit from \"1c7bc622cee984c2982ed80a1916671146391c53\" to \"431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f\"",
    "created_at": "2018-09-20T16:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1c7bc622cee984c2982ed80a1916671146391c53" to "431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f"



---

archive/issue_comments_505864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-20T16:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505864",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_505865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-09-20T18:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505865",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_505866.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks Sebastien!",
    "created_at": "2018-09-20T21:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505866",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>
Thanks Sebastien!



---

archive/issue_comments_505867.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-22T10:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505867",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_505868.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/26307\" to \"431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f\"",
    "created_at": "2018-09-22T10:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26307#issuecomment-505868",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/26307" to "431bee7852b4a246b5279cd8aa5ae9c5a43f8d6f"



---

archive/issue_events_065461.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-22T10:22:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26307",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26307#event-65461"
}
```
