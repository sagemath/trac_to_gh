# Issue 26846: py3: fix sparse graph isomorphism

archive/issues_026609.json:
```json
{
    "body": "\n\nCC:  @dcoudert @jhpalmieri\n\nBranch/Commit: [714417176c21fc2c3518ba3f776304dccb7876ad](https://github.com/sagemath/sagetrac-mirror/commit/714417176c21fc2c3518ba3f776304dccb7876ad)\n\nReviewer: David Coudert\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26846\n\n",
    "closed_at": "2018-12-23T23:40:31Z",
    "created_at": "2018-12-06T19:36:00Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.6",
    "title": "py3: fix sparse graph isomorphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26846",
    "user": "https://github.com/fchapoton"
}
```


CC:  @dcoudert @jhpalmieri

Branch/Commit: [714417176c21fc2c3518ba3f776304dccb7876ad](https://github.com/sagemath/sagetrac-mirror/commit/714417176c21fc2c3518ba3f776304dccb7876ad)

Reviewer: David Coudert

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26846





---

archive/issue_comments_517148.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/graphe_iso\"",
    "created_at": "2018-12-06T19:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517148",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/graphe_iso"



---

archive/issue_comments_517149.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-12-06T19:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517149",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_517150.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[fcb62df](https://github.com/sagemath/sagetrac-mirror/commit/fcb62df1eb56b694e7ce77d06e089a2777867000)|`py3: trying to fix graph isomorphism`|",
    "created_at": "2018-12-06T19:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517150",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[fcb62df](https://github.com/sagemath/sagetrac-mirror/commit/fcb62df1eb56b694e7ce77d06e089a2777867000)|`py3: trying to fix graph isomorphism`|



---

archive/issue_comments_517151.json:
```json
{
    "body": "Changing commit from \"\" to \"fcb62df1eb56b694e7ce77d06e089a2777867000\"",
    "created_at": "2018-12-06T19:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517151",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "fcb62df1eb56b694e7ce77d06e089a2777867000"



---

archive/issue_comments_517152.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-12-06T19:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517152",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_517153.json:
```json
{
    "body": "Changing commit from \"fcb62df1eb56b694e7ce77d06e089a2777867000\" to \"9678120712e2ef79305c96967469af8acd3ea83e\"",
    "created_at": "2018-12-07T08:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fcb62df1eb56b694e7ce77d06e089a2777867000" to "9678120712e2ef79305c96967469af8acd3ea83e"



---

archive/issue_comments_517154.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[9678120](https://github.com/sagemath/sagetrac-mirror/commit/9678120712e2ef79305c96967469af8acd3ea83e)|`trac 26846 fixing a few doctests`|",
    "created_at": "2018-12-07T08:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[9678120](https://github.com/sagemath/sagetrac-mirror/commit/9678120712e2ef79305c96967469af8acd3ea83e)|`trac 26846 fixing a few doctests`|



---

archive/issue_events_075417.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "rename": {
        "from": "py3: fix graph isomorphism",
        "to": "py3: fix sparse graph isomorphism"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26846#event-75417"
}
```



---

archive/issue_comments_517155.json:
```json
{
    "body": "<a id='comment:6'></a>\nUnfortunately, the fixed doctests are not the same with python3. The certificate of isomorphism is different. Maybe we should make these doctests more robust and more conceptual.",
    "created_at": "2018-12-07T08:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517155",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
Unfortunately, the fixed doctests are not the same with python3. The certificate of isomorphism is different. Maybe we should make these doctests more robust and more conceptual.



---

archive/issue_comments_517156.json:
```json
{
    "body": "<a id='comment:7'></a>\nRight, we could have some robust doctests to ensure that the result is correct and some `# not tested` doctests to illustrate the expected output. There are several places where the output ordering is different in py2 and py3.",
    "created_at": "2018-12-07T12:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517156",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
Right, we could have some robust doctests to ensure that the result is correct and some `# not tested` doctests to illustrate the expected output. There are several places where the output ordering is different in py2 and py3.



---

archive/issue_comments_517157.json:
```json
{
    "body": "Changing commit from \"9678120712e2ef79305c96967469af8acd3ea83e\" to \"1aeab526b544f3559028767fb8e79e3a4690b476\"",
    "created_at": "2018-12-07T14:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9678120712e2ef79305c96967469af8acd3ea83e" to "1aeab526b544f3559028767fb8e79e3a4690b476"



---

archive/issue_comments_517158.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[7327a8b](https://github.com/sagemath/sagetrac-mirror/commit/7327a8b90a2c94964605ab9b4880632e68118c63)|`trac 26846 mark some isomorphism doctests as random`|\n|[1aeab52](https://github.com/sagemath/sagetrac-mirror/commit/1aeab526b544f3559028767fb8e79e3a4690b476)|`trac 26846 more robust doctest`|",
    "created_at": "2018-12-07T14:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[7327a8b](https://github.com/sagemath/sagetrac-mirror/commit/7327a8b90a2c94964605ab9b4880632e68118c63)|`trac 26846 mark some isomorphism doctests as random`|
|[1aeab52](https://github.com/sagemath/sagetrac-mirror/commit/1aeab526b544f3559028767fb8e79e3a4690b476)|`trac 26846 more robust doctest`|



---

archive/issue_comments_517159.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have removed the dict from some doctests. These doctests are not here to doctest the `is_isomorphic` method itself, so I think there is not need to use the certificate. We can either forget it, or just not ask for it..\n\nThis does not fix completely the homology folder for python3, but this is still some progress on the way.",
    "created_at": "2018-12-07T14:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517159",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
I have removed the dict from some doctests. These doctests are not here to doctest the `is_isomorphic` method itself, so I think there is not need to use the certificate. We can either forget it, or just not ask for it..

This does not fix completely the homology folder for python3, but this is still some progress on the way.



---

archive/issue_comments_517160.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-12-07T14:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517160",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_517161.json:
```json
{
    "body": "Changing commit from \"1aeab526b544f3559028767fb8e79e3a4690b476\" to \"5441e6cc5fdf3643c05c055321a0126bae189f34\"",
    "created_at": "2018-12-07T14:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1aeab526b544f3559028767fb8e79e3a4690b476" to "5441e6cc5fdf3643c05c055321a0126bae189f34"



---

archive/issue_comments_517162.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[5441e6c](https://github.com/sagemath/sagetrac-mirror/commit/5441e6cc5fdf3643c05c055321a0126bae189f34)|`trac 26846 do not use .vertices in is_isomorphic`|",
    "created_at": "2018-12-07T14:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[5441e6c](https://github.com/sagemath/sagetrac-mirror/commit/5441e6cc5fdf3643c05c055321a0126bae189f34)|`trac 26846 do not use .vertices in is_isomorphic`|



---

archive/issue_comments_517163.json:
```json
{
    "body": "<a id='comment:11'></a>\npatchbot is green. This seems to be ready for review now.",
    "created_at": "2018-12-07T19:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517163",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
patchbot is green. This seems to be ready for review now.



---

archive/issue_comments_517164.json:
```json
{
    "body": "<a id='comment:12'></a>\napart from the possibly missing empty line between bullets, this patch looks good to me.\n\n```diff\n+        - ``vertices`` - a list of vertex labels\n+        - ``labels`` - boolean, whether to return labels as well\n```",
    "created_at": "2018-12-07T20:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517164",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
apart from the possibly missing empty line between bullets, this patch looks good to me.

```diff
+        - ``vertices`` - a list of vertex labels
+        - ``labels`` - boolean, whether to return labels as well
```



---

archive/issue_comments_517165.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2018-12-07T20:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517165",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_517166.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[7144171](https://github.com/sagemath/sagetrac-mirror/commit/714417176c21fc2c3518ba3f776304dccb7876ad)|`details of doc`|",
    "created_at": "2018-12-07T20:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[7144171](https://github.com/sagemath/sagetrac-mirror/commit/714417176c21fc2c3518ba3f776304dccb7876ad)|`details of doc`|



---

archive/issue_comments_517167.json:
```json
{
    "body": "Changing commit from \"5441e6cc5fdf3643c05c055321a0126bae189f34\" to \"714417176c21fc2c3518ba3f776304dccb7876ad\"",
    "created_at": "2018-12-07T20:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5441e6cc5fdf3643c05c055321a0126bae189f34" to "714417176c21fc2c3518ba3f776304dccb7876ad"



---

archive/issue_comments_517168.json:
```json
{
    "body": "<a id='comment:14'></a>\noh, well, here it is..",
    "created_at": "2018-12-07T20:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517168",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
oh, well, here it is..



---

archive/issue_comments_517169.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-12-07T20:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517169",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_517170.json:
```json
{
    "body": "<a id='comment:15'></a>\nLGTM.",
    "created_at": "2018-12-07T20:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517170",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>
LGTM.



---

archive/issue_events_075418.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-23T23:40:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26846#event-75418"
}
```



---

archive/issue_comments_517171.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-12-23T23:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517171",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_517172.json:
```json
{
    "body": "Changing branch from \"u/chapoton/graphe_iso\" to \"714417176c21fc2c3518ba3f776304dccb7876ad\"",
    "created_at": "2018-12-23T23:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517172",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/graphe_iso" to "714417176c21fc2c3518ba3f776304dccb7876ad"



---

archive/issue_comments_517173.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis tickets were closed as fixed after the Sage 8.5 release.",
    "created_at": "2018-12-28T14:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26846#issuecomment-517173",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
This tickets were closed as fixed after the Sage 8.5 release.



---

archive/issue_events_075419.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:06:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26846",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26846#event-75419"
}
```
