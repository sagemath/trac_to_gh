# Issue 26241: Modified Nakajima monomials for Borcherds algebras

archive/issues_026004.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @tscrim\n\nKeywords: **crystals, Nakajima monomials**\n\nBranch/Commit: **[u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras) @ [`7a31d0e`](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)**\n\nAuthor: **Ben Salisbury**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26241_\n\n",
    "created_at": "2018-09-11T12:33:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Modified Nakajima monomials for Borcherds algebras",
    "type": "issue",
    "updated_at": "2022-12-29T01:42:26Z",
    "url": "https://github.com/sagemath/sage/issues/26241",
    "user": "https://github.com/bsalisbury1"
}
```


CC:  @tscrim

Keywords: **crystals, Nakajima monomials**

Branch/Commit: **[u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras) @ [`7a31d0e`](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)**

Author: **Ben Salisbury**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/26241_





---

archive/issue_events_361871.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-09-11T12:33:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26241#event-361871"
}
```



---

archive/issue_events_361872.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-09-11T12:33:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26241#event-361872"
}
```



---

archive/issue_events_361873.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-09-11T12:33:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26241#event-361873"
}
```



---

archive/issue_events_361874.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-09-11T12:33:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26241#event-361874"
}
```



---

archive/issue_comments_404525.json:
```json
{
    "body": "Branch: **[u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)**",
    "created_at": "2018-09-11T12:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404525",
    "user": "https://github.com/bsalisbury1"
}
```

Branch: **[u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)**



---

archive/issue_comments_404526.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552\"><code>a062c0b</code></a></td><td><code>initial implementation -- broken</code></td></tr></table>\n",
    "created_at": "2018-09-11T12:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404526",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552"><code>a062c0b</code></a></td><td><code>initial implementation -- broken</code></td></tr></table>




---

archive/issue_comments_404527.json:
```json
{
    "body": "Commit: **[`a062c0b`](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)**",
    "created_at": "2018-09-11T12:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404527",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`a062c0b`](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)**



---

archive/issue_comments_404528.json:
```json
{
    "body": "Changed commit from **[`a062c0b`](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)** to **[`e8b022f`](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)**",
    "created_at": "2018-09-13T19:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404528",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a062c0b`](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)** to **[`e8b022f`](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)**



---

archive/issue_comments_404529.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c83ddf914da3457c208d9e4d801cd66baf794f5\"><code>7c83ddf</code></a></td><td><code>fixed mistake in cartan_matrix.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4\"><code>e8b022f</code></a></td><td><code>the f operator works?</code></td></tr></table>\n",
    "created_at": "2018-09-13T19:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404529",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c83ddf914da3457c208d9e4d801cd66baf794f5"><code>7c83ddf</code></a></td><td><code>fixed mistake in cartan_matrix.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4"><code>e8b022f</code></a></td><td><code>the f operator works?</code></td></tr></table>




---

archive/issue_comments_404530.json:
```json
{
    "body": "Changed commit from **[`e8b022f`](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)** to **[`2081c19`](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)**",
    "created_at": "2018-09-20T19:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404530",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8b022f`](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)** to **[`2081c19`](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)**



---

archive/issue_comments_404531.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e12273aadc1f59a4e1d2c1c3d1612dbed3ffe162\"><code>e12273a</code></a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2\"><code>2081c19</code></a></td><td><code>f fixed? e in progress</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404531",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e12273aadc1f59a4e1d2c1c3d1612dbed3ffe162"><code>e12273a</code></a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2"><code>2081c19</code></a></td><td><code>f fixed? e in progress</code></td></tr></table>




---

archive/issue_comments_404532.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThat shift is really just a hack to correct for the indexing set of the finite type. The correct thing to do is have `j = self.index_set().index(i)`. The way to optimize this is to store a\n\n```\nself._index_set_inverse = {ind: i for i,ind in enumerate(self.index_set())\n```\nin the parent that is constructed at initialization. Actually, this is probably better done as an `@lazy_attribute` in the `Crystals` category.",
    "created_at": "2018-09-20T22:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404532",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

That shift is really just a hack to correct for the indexing set of the finite type. The correct thing to do is have `j = self.index_set().index(i)`. The way to optimize this is to store a

```
self._index_set_inverse = {ind: i for i,ind in enumerate(self.index_set())
```
in the parent that is constructed at initialization. Actually, this is probably better done as an `@lazy_attribute` in the `Crystals` category.



---

archive/issue_comments_404533.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439\"><code>53c2cb1</code></a></td><td><code>getting there...</code></td></tr></table>\n",
    "created_at": "2018-09-21T17:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404533",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439"><code>53c2cb1</code></a></td><td><code>getting there...</code></td></tr></table>




---

archive/issue_comments_404534.json:
```json
{
    "body": "Changed commit from **[`2081c19`](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)** to **[`53c2cb1`](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)**",
    "created_at": "2018-09-21T17:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404534",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2081c19`](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)** to **[`53c2cb1`](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)**



---

archive/issue_comments_404535.json:
```json
{
    "body": "Changed commit from **[`53c2cb1`](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)** to **[`7a31d0e`](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)**",
    "created_at": "2018-09-24T14:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404535",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`53c2cb1`](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)** to **[`7a31d0e`](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)**



---

archive/issue_comments_404536.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065\"><code>7a31d0e</code></a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr></table>\n",
    "created_at": "2018-09-24T14:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26241#issuecomment-404536",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065"><code>7a31d0e</code></a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr></table>




---

archive/issue_events_361875.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:42:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/26241",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26241#event-361875"
}
```
