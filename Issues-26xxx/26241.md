# Issue 26241: Modified Nakajima monomials for Borcherds algebras

archive/issues_026004.json:
```json
{
    "body": "\n\n**CC:**  @tscrim\n\n**Keywords:** crystals, Nakajima monomials\n\n**Branch:** [u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)\n\n**Commit:** [7a31d0ea6ddbd5a49a62b769da8dbbf652c74065](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)\n\n**Author:** Ben Salisbury\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/26241\n\n",
    "created_at": "2018-09-11T12:33:47Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Modified Nakajima monomials for Borcherds algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26241",
    "user": "https://github.com/bsalisbury1"
}
```


**CC:**  @tscrim

**Keywords:** crystals, Nakajima monomials

**Branch:** [u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)

**Commit:** [7a31d0ea6ddbd5a49a62b769da8dbbf652c74065](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)

**Author:** Ben Salisbury

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/26241





---

archive/issue_comments_506236.json:
```json
{
    "body": "**Branch:** [u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)",
    "created_at": "2018-09-11T12:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506236",
    "user": "https://github.com/bsalisbury1"
}
```

**Branch:** [u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras](https://github.com/sagemath/sagetrac-mirror/tree/u/bsalisbury1/modified_nakajima_monomials_for_borcherds_algebras)



---

archive/issue_comments_506237.json:
```json
{
    "body": "**Commit:** [a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)",
    "created_at": "2018-09-11T12:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)



---

archive/issue_comments_506238.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552\">a062c0b</a></td><td><code>initial implementation -- broken</code></td></tr></table>\n",
    "created_at": "2018-09-11T12:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552">a062c0b</a></td><td><code>initial implementation -- broken</code></td></tr></table>




---

archive/issue_comments_506239.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c83ddf914da3457c208d9e4d801cd66baf794f5\">7c83ddf</a></td><td><code>fixed mistake in cartan_matrix.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4\">e8b022f</a></td><td><code>the f operator works?</code></td></tr></table>\n",
    "created_at": "2018-09-13T19:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c83ddf914da3457c208d9e4d801cd66baf794f5">7c83ddf</a></td><td><code>fixed mistake in cartan_matrix.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4">e8b022f</a></td><td><code>the f operator works?</code></td></tr></table>




---

archive/issue_comments_506240.json:
```json
{
    "body": "**Changing commit** from \"[a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)\" to \"[e8b022fd049391ac8ea146559ea471d4f08a9da4](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)\".",
    "created_at": "2018-09-13T19:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552](https://github.com/sagemath/sagetrac-mirror/commit/a062c0bfff1a1edfad90d0e3a8e6bcb4ec00f552)" to "[e8b022fd049391ac8ea146559ea471d4f08a9da4](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)".



---

archive/issue_comments_506241.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e12273aadc1f59a4e1d2c1c3d1612dbed3ffe162\">e12273a</a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2\">2081c19</a></td><td><code>f fixed? e in progress</code></td></tr></table>\n",
    "created_at": "2018-09-20T19:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e12273aadc1f59a4e1d2c1c3d1612dbed3ffe162">e12273a</a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2">2081c19</a></td><td><code>f fixed? e in progress</code></td></tr></table>




---

archive/issue_comments_506242.json:
```json
{
    "body": "**Changing commit** from \"[e8b022fd049391ac8ea146559ea471d4f08a9da4](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)\" to \"[2081c1990621033433663310b6dfd2ef837866d2](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)\".",
    "created_at": "2018-09-20T19:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e8b022fd049391ac8ea146559ea471d4f08a9da4](https://github.com/sagemath/sagetrac-mirror/commit/e8b022fd049391ac8ea146559ea471d4f08a9da4)" to "[2081c1990621033433663310b6dfd2ef837866d2](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)".



---

archive/issue_comments_506243.json:
```json
{
    "body": "<a id='comment:5'></a>\nThat shift is really just a hack to correct for the indexing set of the finite type. The correct thing to do is have `j = self.index_set().index(i)`. The way to optimize this is to store a\n\n```\nself._index_set_inverse = {ind: i for i,ind in enumerate(self.index_set())\n```\nin the parent that is constructed at initialization. Actually, this is probably better done as an `@lazy_attribute` in the `Crystals` category.",
    "created_at": "2018-09-20T22:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506243",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
That shift is really just a hack to correct for the indexing set of the finite type. The correct thing to do is have `j = self.index_set().index(i)`. The way to optimize this is to store a

```
self._index_set_inverse = {ind: i for i,ind in enumerate(self.index_set())
```
in the parent that is constructed at initialization. Actually, this is probably better done as an `@lazy_attribute` in the `Crystals` category.



---

archive/issue_comments_506244.json:
```json
{
    "body": "**Changing commit** from \"[2081c1990621033433663310b6dfd2ef837866d2](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)\" to \"[53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)\".",
    "created_at": "2018-09-21T17:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2081c1990621033433663310b6dfd2ef837866d2](https://github.com/sagemath/sagetrac-mirror/commit/2081c1990621033433663310b6dfd2ef837866d2)" to "[53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)".



---

archive/issue_comments_506245.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439\">53c2cb1</a></td><td><code>getting there...</code></td></tr></table>\n",
    "created_at": "2018-09-21T17:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439">53c2cb1</a></td><td><code>getting there...</code></td></tr></table>




---

archive/issue_comments_506246.json:
```json
{
    "body": "**Changing commit** from \"[53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)\" to \"[7a31d0ea6ddbd5a49a62b769da8dbbf652c74065](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)\".",
    "created_at": "2018-09-24T14:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439](https://github.com/sagemath/sagetrac-mirror/commit/53c2cb1cb6322c76fec9c7fbfe0b9c0d7e6a8439)" to "[7a31d0ea6ddbd5a49a62b769da8dbbf652c74065](https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065)".



---

archive/issue_comments_506247.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065\">7a31d0e</a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr></table>\n",
    "created_at": "2018-09-24T14:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26241#issuecomment-506247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a31d0ea6ddbd5a49a62b769da8dbbf652c74065">7a31d0e</a></td><td><code>Merge branch 'develop' into t/26241/modified_nakajima_monomials_for_borcherds_algebras</code></td></tr></table>

