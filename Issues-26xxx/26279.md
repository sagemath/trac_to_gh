# Issue 26279: Improve comparisons of PolyDicts

archive/issues_026042.json:
```json
{
    "body": "The `PolyDict` class has a `__richcmp__` method which just implements the default rich comparison between the underlying dicts of the `PolyDict`s being compared, which in of itself is not terrible useful, especially given that it's not a meaningful comparison for relational operators.\n\nHowever there is also an undocumented `PolyDict.rich_compare` method which i the same as `__richcmp__` but takes a `key` argument (previously required, but I made it optional and renamed it to `sortkey`) which can be used to provide meaningful ordering between polynomials.  This is used currently in Sage in exactly one place.  But this ticket shows one other example where it was useful to have.  We've also polished up the documentation just a little bit.\n\nBranch/Commit: 1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26279\n\n",
    "closed_at": "2018-11-07T11:27:21Z",
    "created_at": "2018-09-14T10:14:14Z",
    "labels": [
        "component: refactoring",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Improve comparisons of PolyDicts",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26279",
    "user": "https://github.com/embray"
}
```
The `PolyDict` class has a `__richcmp__` method which just implements the default rich comparison between the underlying dicts of the `PolyDict`s being compared, which in of itself is not terrible useful, especially given that it's not a meaningful comparison for relational operators.

However there is also an undocumented `PolyDict.rich_compare` method which i the same as `__richcmp__` but takes a `key` argument (previously required, but I made it optional and renamed it to `sortkey`) which can be used to provide meaningful ordering between polynomials.  This is used currently in Sage in exactly one place.  But this ticket shows one other example where it was useful to have.  We've also polished up the documentation just a little bit.

Branch/Commit: 1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2

Reviewer: Frédéric Chapoton

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26279





---

archive/issue_comments_498995.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-14T10:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-498995",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_498996.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-10-14T09:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-498996",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_498997.json:
```json
{
    "body": "<a id='comment:2'></a>\nbranch is red",
    "created_at": "2018-10-14T09:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-498997",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
branch is red



---

archive/issue_events_082155.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26279#event-82155"
}
```



---

archive/issue_comments_498998.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[4fd9277](https://github.com/sagemath/sagetrac-mirror/commit/4fd9277148d165c889c9513d460e8ef21460a697)|`some cleanup for PolyDict.rich_compare and __richcmp__`|\n|[5fb5c76](https://github.com/sagemath/sagetrac-mirror/commit/5fb5c762830796187163fb00dab42c80803e1950)|`demonstrate an example where it makes sense to use PolyDict.rich_compare`|",
    "created_at": "2018-10-28T16:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-498998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[4fd9277](https://github.com/sagemath/sagetrac-mirror/commit/4fd9277148d165c889c9513d460e8ef21460a697)|`some cleanup for PolyDict.rich_compare and __richcmp__`|
|[5fb5c76](https://github.com/sagemath/sagetrac-mirror/commit/5fb5c762830796187163fb00dab42c80803e1950)|`demonstrate an example where it makes sense to use PolyDict.rich_compare`|



---

archive/issue_comments_498999.json:
```json
{
    "body": "Changing commit from \"3edaefa0608c9bd36efa1a0e223da8b5d83edd2c\" to \"5fb5c762830796187163fb00dab42c80803e1950\"",
    "created_at": "2018-10-28T16:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-498999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3edaefa0608c9bd36efa1a0e223da8b5d83edd2c" to "5fb5c762830796187163fb00dab42c80803e1950"



---

archive/issue_comments_499000.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-10-28T16:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499000",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_499001.json:
```json
{
    "body": "<a id='comment:5'></a>\nTrivial rebase at first. But I also fixed a test that was failing on Python 2 (the `p1 < p2` test) due to the differences in default comparison behavior between Python 2 and 3.  Not 100% satisfied with that, and wondering if we should instead explicitly enforce `==` and `!=` only.",
    "created_at": "2018-10-28T16:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499001",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
Trivial rebase at first. But I also fixed a test that was failing on Python 2 (the `p1 < p2` test) due to the differences in default comparison behavior between Python 2 and 3.  Not 100% satisfied with that, and wondering if we should instead explicitly enforce `==` and `!=` only.



---

archive/issue_comments_499002.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499002",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_499003.json:
```json
{
    "body": "Changing branch from \"u/embray/polydict/richcmp\" to \"public/26279\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499003",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/embray/polydict/richcmp" to "public/26279"



---

archive/issue_comments_499004.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499004",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_499005.json:
```json
{
    "body": "Changing commit from \"5fb5c762830796187163fb00dab42c80803e1950\" to \"1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499005",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "5fb5c762830796187163fb00dab42c80803e1950" to "1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2"



---

archive/issue_comments_499006.json:
```json
{
    "body": "<a id='comment:6'></a>\nI have corrected a typo and changed 2 http to https.\n\nThis allows many doctests to pass in Iwahori-Hecke algebras with python3.\n\n---\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[ad058d6](https://github.com/sagemath/sagetrac-mirror/commit/ad058d69685c571cfce44c33f4ab5f26502487be)|`Merge branch 'u/embray/polydict/richcmp' in 8.5.b2`|\n|[1cfdd4c](https://github.com/sagemath/sagetrac-mirror/commit/1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2)|`trac 26279 some http details and one typo`|",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499006",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
I have corrected a typo and changed 2 http to https.

This allows many doctests to pass in Iwahori-Hecke algebras with python3.

---
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[ad058d6](https://github.com/sagemath/sagetrac-mirror/commit/ad058d69685c571cfce44c33f4ab5f26502487be)|`Merge branch 'u/embray/polydict/richcmp' in 8.5.b2`|
|[1cfdd4c](https://github.com/sagemath/sagetrac-mirror/commit/1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2)|`trac 26279 some http details and one typo`|



---

archive/issue_comments_499007.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks!",
    "created_at": "2018-11-06T11:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499007",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Thanks!



---

archive/issue_comments_499008.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-07T11:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499008",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_499009.json:
```json
{
    "body": "Changing branch from \"public/26279\" to \"1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\"",
    "created_at": "2018-11-07T11:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-499009",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/26279" to "1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2"



---

archive/issue_events_082156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-07T11:27:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26279#event-82156"
}
```
