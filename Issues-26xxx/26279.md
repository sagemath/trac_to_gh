# Issue 26279: Improve comparisons of PolyDicts

archive/issues_026042.json:
```json
{
    "body": "The `PolyDict` class has a `__richcmp__` method which just implements the default rich comparison between the underlying dicts of the `PolyDict`s being compared, which in of itself is not terrible useful, especially given that it's not a meaningful comparison for relational operators.\n\nHowever there is also an undocumented `PolyDict.rich_compare` method which i the same as `__richcmp__` but takes a `key` argument (previously required, but I made it optional and renamed it to `sortkey`) which can be used to provide meaningful ordering between polynomials.  This is used currently in Sage in exactly one place.  But this ticket shows one other example where it was useful to have.  We've also polished up the documentation just a little bit.\n\nBranch/Commit: 1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26279\n\n",
    "closed_at": "2018-11-07T11:27:21Z",
    "created_at": "2018-09-14T10:14:14Z",
    "labels": [
        "component: refactoring",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Improve comparisons of PolyDicts",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26279",
    "user": "https://github.com/embray"
}
```
The `PolyDict` class has a `__richcmp__` method which just implements the default rich comparison between the underlying dicts of the `PolyDict`s being compared, which in of itself is not terrible useful, especially given that it's not a meaningful comparison for relational operators.

However there is also an undocumented `PolyDict.rich_compare` method which i the same as `__richcmp__` but takes a `key` argument (previously required, but I made it optional and renamed it to `sortkey`) which can be used to provide meaningful ordering between polynomials.  This is used currently in Sage in exactly one place.  But this ticket shows one other example where it was useful to have.  We've also polished up the documentation just a little bit.

Branch/Commit: 1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2

Reviewer: Frédéric Chapoton

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26279





---

archive/issue_comments_505337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-14T10:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505337",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_505338.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-10-14T09:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505338",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_505339.json:
```json
{
    "body": "<a id='comment:2'></a>branch is red",
    "created_at": "2018-10-14T09:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505339",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>branch is red



---

archive/issue_events_065405.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26279#event-65405"
}
```



---

archive/issue_comments_505340.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-28T16:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_505341.json:
```json
{
    "body": "Changing commit from \"3edaefa0608c9bd36efa1a0e223da8b5d83edd2c\" to \"5fb5c762830796187163fb00dab42c80803e1950\"",
    "created_at": "2018-10-28T16:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3edaefa0608c9bd36efa1a0e223da8b5d83edd2c" to "5fb5c762830796187163fb00dab42c80803e1950"



---

archive/issue_comments_505342.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-10-28T16:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505342",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_505343.json:
```json
{
    "body": "<a id='comment:5'></a>Trivial rebase at first. But I also fixed a test that was failing on Python 2 (the `p1 < p2` test) due to the differences in default comparison behavior between Python 2 and 3.  Not 100% satisfied with that, and wondering if we should instead explicitly enforce `==` and `!=` only.",
    "created_at": "2018-10-28T16:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505343",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>Trivial rebase at first. But I also fixed a test that was failing on Python 2 (the `p1 < p2` test) due to the differences in default comparison behavior between Python 2 and 3.  Not 100% satisfied with that, and wondering if we should instead explicitly enforce `==` and `!=` only.



---

archive/issue_comments_505344.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505344",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_505345.json:
```json
{
    "body": "Changing branch from \"u/embray/polydict/richcmp\" to \"public/26279\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505345",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/embray/polydict/richcmp" to "public/26279"



---

archive/issue_comments_505346.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505346",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_505347.json:
```json
{
    "body": "Changing commit from \"5fb5c762830796187163fb00dab42c80803e1950\" to \"1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\"",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505347",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "5fb5c762830796187163fb00dab42c80803e1950" to "1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2"



---

archive/issue_comments_505348.json:
```json
{
    "body": "<a id='comment:6'></a>I have corrected a typo and changed 2 http to https.\n\nThis allows many doctests to pass in Iwahori-Hecke algebras with python3.\n\n---\nNew commits:",
    "created_at": "2018-11-04T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505348",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>I have corrected a typo and changed 2 http to https.

This allows many doctests to pass in Iwahori-Hecke algebras with python3.

---
New commits:



---

archive/issue_comments_505349.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks!",
    "created_at": "2018-11-06T11:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505349",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Thanks!



---

archive/issue_comments_505350.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-07T11:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505350",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_505351.json:
```json
{
    "body": "Changing branch from \"public/26279\" to \"1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2\"",
    "created_at": "2018-11-07T11:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26279#issuecomment-505351",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/26279" to "1cfdd4cb6b6fdf80b74fb905339027955cd5d7c2"



---

archive/issue_events_065406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-07T11:27:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26279",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26279#event-65406"
}
```
