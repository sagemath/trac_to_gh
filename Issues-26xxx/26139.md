# Issue 26139: Py3 doctest in hasse_diagram

archive/issues_025902.json:
```json
{
    "body": "This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.\n\n\nCC:  @tscrim @fchapoton\n\nBranch/Commit: 3b46d3a1364ddb11d080d07a7b840982040c3bbc\n\nReviewer: Vincent Klein, Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26139\n\n",
    "closed_at": "2018-09-03T23:29:08Z",
    "created_at": "2018-08-27T11:23:01Z",
    "labels": [
        "component: python3",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Py3 doctest in hasse_diagram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26139",
    "user": "https://github.com/jm58660"
}
```
This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.


CC:  @tscrim @fchapoton

Branch/Commit: 3b46d3a1364ddb11d080d07a7b840982040c3bbc

Reviewer: Vincent Klein, Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26139





---

archive/issue_comments_388899.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-27T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388899",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_388900.json:
```json
{
    "body": "<a id='comment:2'></a>Just to make sure before I try to make more modifications.\n\n---\nNew commits:",
    "created_at": "2018-08-27T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388900",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>Just to make sure before I try to make more modifications.

---
New commits:



---

archive/issue_comments_388901.json:
```json
{
    "body": "<a id='comment:3'></a>It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`. \n\nDid you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).",
    "created_at": "2018-08-27T15:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388901",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:3'></a>It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`. 

Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).



---

archive/issue_comments_388902.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 vklein]:\n> It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`.\n\n\nYes, but is this the Right Thing To Do(tm), compared for example `# python 3` comments?\n\n> Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).\n\n\nGood question. Should we continue from area to another (now posets, next matrices, then groups...), or from problem to another? For print function Fr\u00e9d\u00e9ric used the latter way.",
    "created_at": "2018-08-27T16:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388902",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>Replying to [comment:3 vklein]:
> It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`.


Yes, but is this the Right Thing To Do(tm), compared for example `# python 3` comments?

> Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).


Good question. Should we continue from area to another (now posets, next matrices, then groups...), or from problem to another? For print function Frédéric used the latter way.



---

archive/issue_comments_388903.json:
```json
{
    "body": "<a id='comment:5'></a>I would say that this is ok.\n\nThis precise issue seems to be not so frequent:\n\n```\n$ git grep -c \"<generator object\" src/sage\nsrc/sage/arith/srange.pyx:1\nsrc/sage/combinat/integer_matrices.py:1\nsrc/sage/combinat/posets/hasse_diagram.py:3\nsrc/sage/combinat/posets/posets.py:1\nsrc/sage/combinat/species/stream.py:1\nsrc/sage/combinat/words/morphism.py:1\nsrc/sage/combinat/words/word_infinite_datatypes.py:2\nsrc/sage/geometry/polyhedron/base_ZZ.py:1\nsrc/sage/geometry/polyhedron/palp_database.py:1\nsrc/sage/graphs/base/c_graph.pyx:2\nsrc/sage/interfaces/magma.py:1\nsrc/sage/matroids/matroid.pyx:2\nsrc/sage/misc/lazy_list.pyx:1\nsrc/sage/misc/misc.py:1\nsrc/sage/misc/sage_unittest.py:1\nsrc/sage/modules/free_module_element.pyx:1\nsrc/sage/plot/animate.py:1\nsrc/sage/rings/finite_rings/finite_field_base.pyx:1\nsrc/sage/rings/valuation/developing_valuation.py:1\nsrc/sage/schemes/toric/points.py:2\nsrc/sage/structure/coerce_dict.pyx:4\n```",
    "created_at": "2018-08-27T17:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388903",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>I would say that this is ok.

This precise issue seems to be not so frequent:

```
$ git grep -c "<generator object" src/sage
src/sage/arith/srange.pyx:1
src/sage/combinat/integer_matrices.py:1
src/sage/combinat/posets/hasse_diagram.py:3
src/sage/combinat/posets/posets.py:1
src/sage/combinat/species/stream.py:1
src/sage/combinat/words/morphism.py:1
src/sage/combinat/words/word_infinite_datatypes.py:2
src/sage/geometry/polyhedron/base_ZZ.py:1
src/sage/geometry/polyhedron/palp_database.py:1
src/sage/graphs/base/c_graph.pyx:2
src/sage/interfaces/magma.py:1
src/sage/matroids/matroid.pyx:2
src/sage/misc/lazy_list.pyx:1
src/sage/misc/misc.py:1
src/sage/misc/sage_unittest.py:1
src/sage/modules/free_module_element.pyx:1
src/sage/plot/animate.py:1
src/sage/rings/finite_rings/finite_field_base.pyx:1
src/sage/rings/valuation/developing_valuation.py:1
src/sage/schemes/toric/points.py:2
src/sage/structure/coerce_dict.pyx:4
```



---

archive/issue_comments_388904.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 chapoton]:\n> I would say that this is ok.\n> \n> This precise issue seems to be not so frequent:\n\nOk to fix all doctests output with generators or ok to let this ticket as it is ?\n\n`@`jmantysalo\nI suggest to set Component field to python3 it is handy to have a global view of what is done or not in py3.",
    "created_at": "2018-08-28T07:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388904",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:6'></a>Replying to [comment:5 chapoton]:
> I would say that this is ok.
> 
> This precise issue seems to be not so frequent:

Ok to fix all doctests output with generators or ok to let this ticket as it is ?

`@`jmantysalo
I suggest to set Component field to python3 it is handy to have a global view of what is done or not in py3.



---

archive/issue_comments_388905.json:
```json
{
    "body": "<a id='comment:7'></a>I would suggest\n\n* either to let this ticket as it is now\n\n* or to do the same correction everywhere inside combinat here",
    "created_at": "2018-08-28T07:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388905",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>I would suggest

* either to let this ticket as it is now

* or to do the same correction everywhere inside combinat here



---

archive/issue_comments_388906.json:
```json
{
    "body": "<a id='comment:8'></a>I would just do everything all at once since there are so few files to change (as per comment:5).",
    "created_at": "2018-08-28T21:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388906",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>I would just do everything all at once since there are so few files to change (as per comment:5).



---

archive/issue_comments_388907.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-29T05:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388908.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 tscrim]:\n> I would just do everything all at once since there are so few files to change (as per comment:5).\n\n\nOK. And anyways, this is perlable task so can be done again if conflicts with another patch. Done with\n\n```\negrep '<generator object [[:alnum:]_]+ at' src/sage -R -l | xargs perl -e 's|<generator object ([[:alnum:]_]+) at |<generator object ...\\1 at |g;' -p -i.bak\n```\n\n(Side question: is \"perlable\" a correct word derivative? `:=)`)",
    "created_at": "2018-08-29T05:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388908",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>Replying to [comment:8 tscrim]:
> I would just do everything all at once since there are so few files to change (as per comment:5).


OK. And anyways, this is perlable task so can be done again if conflicts with another patch. Done with

```
egrep '<generator object [[:alnum:]_]+ at' src/sage -R -l | xargs perl -e 's|<generator object ([[:alnum:]_]+) at |<generator object ...\1 at |g;' -p -i.bak
```

(Side question: is "perlable" a correct word derivative? `:=)`)



---

archive/issue_comments_388909.json:
```json
{
    "body": "Changing component from combinatorics to python3.",
    "created_at": "2018-08-29T05:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388909",
    "user": "https://github.com/jm58660"
}
```

Changing component from combinatorics to python3.



---

archive/issue_comments_388910.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-Is this a right way to correct iterator-related doctest failure in Python 3?\n+This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.\n+\n \n Author: Jori M\u00e4ntysalo\n \n```\n",
    "created_at": "2018-08-29T05:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388910",
    "user": "https://github.com/jm58660"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,5 @@
-Is this a right way to correct iterator-related doctest failure in Python 3?
+This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.
+
 
 Author: Jori Mäntysalo
 
```




---

archive/issue_comments_388911.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-29T06:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388911",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_388912.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 jmantysalo]:\n> Replying to [comment:8 tscrim]:\n> (Side question: is \"perlable\" a correct word derivative? `:=)`)\n\n\nMeh, probably. Although one might say that would make a nice pearl of wisdom. :P (Okay, you can hate me for that horrible pun.)",
    "created_at": "2018-08-29T06:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388912",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Replying to [comment:10 jmantysalo]:
> Replying to [comment:8 tscrim]:
> (Side question: is "perlable" a correct word derivative? `:=)`)


Meh, probably. Although one might say that would make a nice pearl of wisdom. :P (Okay, you can hate me for that horrible pun.)



---

archive/issue_events_065178.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-03T23:29:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26139#event-65178"
}
```



---

archive/issue_comments_388913.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-03T23:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-388913",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
