# Issue 26139: Py3 doctest in hasse_diagram

archive/issues_025902.json:
```json
{
    "body": "This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.\n\n\nCC:  @tscrim @fchapoton\n\nBranch/Commit: 3b46d3a1364ddb11d080d07a7b840982040c3bbc\n\nReviewer: Vincent Klein, Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26139\n\n",
    "closed_at": "2018-09-03T23:29:08Z",
    "created_at": "2018-08-27T11:23:01Z",
    "labels": [
        "component: python3",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Py3 doctest in hasse_diagram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26139",
    "user": "https://github.com/jm58660"
}
```
This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.


CC:  @tscrim @fchapoton

Branch/Commit: 3b46d3a1364ddb11d080d07a7b840982040c3bbc

Reviewer: Vincent Klein, Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26139





---

archive/issue_comments_495947.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jmantysalo/py3-generator\"",
    "created_at": "2018-08-27T11:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495947",
    "user": "https://github.com/jm58660"
}
```

Changing branch from "" to "u/jmantysalo/py3-generator"



---

archive/issue_comments_495948.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-27T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495948",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_495949.json:
```json
{
    "body": "<a id='comment:2'></a>\nJust to make sure before I try to make more modifications.\n\n---\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[862c033](https://github.com/sagemath/sagetrac-mirror/commit/862c0339bbb2c9408846874a1bd70ee6a5f7f7e9)|`Py3 and iterator string.`|",
    "created_at": "2018-08-27T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495949",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
Just to make sure before I try to make more modifications.

---
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[862c033](https://github.com/sagemath/sagetrac-mirror/commit/862c0339bbb2c9408846874a1bd70ee6a5f7f7e9)|`Py3 and iterator string.`|



---

archive/issue_comments_495950.json:
```json
{
    "body": "Changing commit from \"\" to \"862c0339bbb2c9408846874a1bd70ee6a5f7f7e9\"",
    "created_at": "2018-08-27T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495950",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "" to "862c0339bbb2c9408846874a1bd70ee6a5f7f7e9"



---

archive/issue_comments_495951.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Klein\"",
    "created_at": "2018-08-27T15:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495951",
    "user": "https://github.com/vinklein"
}
```

Changing reviewer from "" to "Vincent Klein"



---

archive/issue_comments_495952.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`. \n\nDid you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).",
    "created_at": "2018-08-27T15:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495952",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:3'></a>
It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`. 

Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).



---

archive/issue_comments_495953.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vklein](#comment%3A3):\n> It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`.\n\n\nYes, but is this the Right Thing To Do(tm), compared for example `# python 3` comments?\n\n> Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).\n\n\nGood question. Should we continue from area to another (now posets, next matrices, then groups...), or from problem to another? For print function Fr\u00e9d\u00e9ric used the latter way.",
    "created_at": "2018-08-27T16:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495953",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>
Replying to [vklein](#comment%3A3):
> It works for me. With your modifications all tests pass in py3 for `hasse_diagram.py`.


Yes, but is this the Right Thing To Do(tm), compared for example `# python 3` comments?

> Did you intend to make more modifications in this ticket ? (I will pass it in positive review if it's not the case).


Good question. Should we continue from area to another (now posets, next matrices, then groups...), or from problem to another? For print function Frédéric used the latter way.



---

archive/issue_comments_495954.json:
```json
{
    "body": "<a id='comment:5'></a>\nI would say that this is ok.\n\nThis precise issue seems to be not so frequent:\n\n```\n$ git grep -c \"<generator object\" src/sage\nsrc/sage/arith/srange.pyx:1\nsrc/sage/combinat/integer_matrices.py:1\nsrc/sage/combinat/posets/hasse_diagram.py:3\nsrc/sage/combinat/posets/posets.py:1\nsrc/sage/combinat/species/stream.py:1\nsrc/sage/combinat/words/morphism.py:1\nsrc/sage/combinat/words/word_infinite_datatypes.py:2\nsrc/sage/geometry/polyhedron/base_ZZ.py:1\nsrc/sage/geometry/polyhedron/palp_database.py:1\nsrc/sage/graphs/base/c_graph.pyx:2\nsrc/sage/interfaces/magma.py:1\nsrc/sage/matroids/matroid.pyx:2\nsrc/sage/misc/lazy_list.pyx:1\nsrc/sage/misc/misc.py:1\nsrc/sage/misc/sage_unittest.py:1\nsrc/sage/modules/free_module_element.pyx:1\nsrc/sage/plot/animate.py:1\nsrc/sage/rings/finite_rings/finite_field_base.pyx:1\nsrc/sage/rings/valuation/developing_valuation.py:1\nsrc/sage/schemes/toric/points.py:2\nsrc/sage/structure/coerce_dict.pyx:4\n```",
    "created_at": "2018-08-27T17:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495954",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
I would say that this is ok.

This precise issue seems to be not so frequent:

```
$ git grep -c "<generator object" src/sage
src/sage/arith/srange.pyx:1
src/sage/combinat/integer_matrices.py:1
src/sage/combinat/posets/hasse_diagram.py:3
src/sage/combinat/posets/posets.py:1
src/sage/combinat/species/stream.py:1
src/sage/combinat/words/morphism.py:1
src/sage/combinat/words/word_infinite_datatypes.py:2
src/sage/geometry/polyhedron/base_ZZ.py:1
src/sage/geometry/polyhedron/palp_database.py:1
src/sage/graphs/base/c_graph.pyx:2
src/sage/interfaces/magma.py:1
src/sage/matroids/matroid.pyx:2
src/sage/misc/lazy_list.pyx:1
src/sage/misc/misc.py:1
src/sage/misc/sage_unittest.py:1
src/sage/modules/free_module_element.pyx:1
src/sage/plot/animate.py:1
src/sage/rings/finite_rings/finite_field_base.pyx:1
src/sage/rings/valuation/developing_valuation.py:1
src/sage/schemes/toric/points.py:2
src/sage/structure/coerce_dict.pyx:4
```



---

archive/issue_comments_495955.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [chapoton](#comment%3A5):\n> I would say that this is ok.\n> \n> This precise issue seems to be not so frequent:\n\nOk to fix all doctests output with generators or ok to let this ticket as it is ?\n\n`@`jmantysalo\nI suggest to set Component field to python3 it is handy to have a global view of what is done or not in py3.",
    "created_at": "2018-08-28T07:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495955",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:6'></a>
Replying to [chapoton](#comment%3A5):
> I would say that this is ok.
> 
> This precise issue seems to be not so frequent:

Ok to fix all doctests output with generators or ok to let this ticket as it is ?

`@`jmantysalo
I suggest to set Component field to python3 it is handy to have a global view of what is done or not in py3.



---

archive/issue_comments_495956.json:
```json
{
    "body": "<a id='comment:7'></a>\nI would suggest\n\n* either to let this ticket as it is now\n\n* or to do the same correction everywhere inside combinat here",
    "created_at": "2018-08-28T07:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495956",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
I would suggest

* either to let this ticket as it is now

* or to do the same correction everywhere inside combinat here



---

archive/issue_comments_495957.json:
```json
{
    "body": "<a id='comment:8'></a>\nI would just do everything all at once since there are so few files to change (as per[comment:5](#comment%3A5)).",
    "created_at": "2018-08-28T21:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495957",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I would just do everything all at once since there are so few files to change (as per[comment:5](#comment%3A5)).



---

archive/issue_comments_495958.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[3b46d3a](https://github.com/sagemath/sagetrac-mirror/commit/3b46d3a1364ddb11d080d07a7b840982040c3bbc)|`Remaining cases.`|",
    "created_at": "2018-08-29T05:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[3b46d3a](https://github.com/sagemath/sagetrac-mirror/commit/3b46d3a1364ddb11d080d07a7b840982040c3bbc)|`Remaining cases.`|



---

archive/issue_comments_495959.json:
```json
{
    "body": "Changing commit from \"862c0339bbb2c9408846874a1bd70ee6a5f7f7e9\" to \"3b46d3a1364ddb11d080d07a7b840982040c3bbc\"",
    "created_at": "2018-08-29T05:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "862c0339bbb2c9408846874a1bd70ee6a5f7f7e9" to "3b46d3a1364ddb11d080d07a7b840982040c3bbc"



---

archive/issue_comments_495960.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [tscrim](#comment%3A8):\n> I would just do everything all at once since there are so few files to change (as per[comment:5](#comment%3A5)).\n\n\nOK. And anyways, this is perlable task so can be done again if conflicts with another patch. Done with\n\n```\negrep '<generator object [[:alnum:]_]+ at' src/sage -R -l | xargs perl -e 's|<generator object ([[:alnum:]_]+) at |<generator object ...\\1 at |g;' -p -i.bak\n```\n\n(Side question: is \"perlable\" a correct word derivative? `:=)`)",
    "created_at": "2018-08-29T05:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495960",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>
Replying to [tscrim](#comment%3A8):
> I would just do everything all at once since there are so few files to change (as per[comment:5](#comment%3A5)).


OK. And anyways, this is perlable task so can be done again if conflicts with another patch. Done with

```
egrep '<generator object [[:alnum:]_]+ at' src/sage -R -l | xargs perl -e 's|<generator object ([[:alnum:]_]+) at |<generator object ...\1 at |g;' -p -i.bak
```

(Side question: is "perlable" a correct word derivative? `:=)`)



---

archive/issue_comments_495961.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Is this a right way to correct iterator-related doctest failure in Python 3?\n+This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.\n+\n``````\n",
    "created_at": "2018-08-29T05:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495961",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Is this a right way to correct iterator-related doctest failure in Python 3?
+This patch corrects doctests for printing iterator so that they work on both Python 2 and 3.
+
``````




---

archive/issue_comments_495962.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-29T06:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495962",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_495963.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jmantysalo](#comment%3A10):\n> Replying to [tscrim](#comment%3A8):\n> (Side question: is \"perlable\" a correct word derivative? `:=)`)\n\n\nMeh, probably. Although one might say that would make a nice pearl of wisdom. :P (Okay, you can hate me for that horrible pun.)",
    "created_at": "2018-08-29T06:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495963",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Replying to [jmantysalo](#comment%3A10):
> Replying to [tscrim](#comment%3A8):
> (Side question: is "perlable" a correct word derivative? `:=)`)


Meh, probably. Although one might say that would make a nice pearl of wisdom. :P (Okay, you can hate me for that horrible pun.)



---

archive/issue_comments_495964.json:
```json
{
    "body": "Changing reviewer from \"Vincent Klein\" to \"Vincent Klein, Travis Scrimshaw\"",
    "created_at": "2018-08-29T06:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495964",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Vincent Klein" to "Vincent Klein, Travis Scrimshaw"



---

archive/issue_comments_495965.json:
```json
{
    "body": "Changing branch from \"u/jmantysalo/py3-generator\" to \"3b46d3a1364ddb11d080d07a7b840982040c3bbc\"",
    "created_at": "2018-09-03T23:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495965",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jmantysalo/py3-generator" to "3b46d3a1364ddb11d080d07a7b840982040c3bbc"



---

archive/issue_events_081907.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-03T23:29:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26139#event-81907"
}
```



---

archive/issue_comments_495966.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-03T23:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26139",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26139#issuecomment-495966",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
