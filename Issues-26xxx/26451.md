# Issue 26451: Upgrade to Sphinx 1.8.5

archive/issues_026214.json:
```json
{
    "body": "This ticket upgrades Sphinx to version 1.8.5.\n\nOur previous upgrade was to Sphinx 1.7.6 in #26033.\n\n**Tarball**: https://files.pythonhosted.org/packages/2a/86/8e1e8400bb6eca5ed960917952600fce90599e1cb0d20ddedd81ba163370/Sphinx-1.8.5.tar.gz\n\nCC:  @timokau @kiwifb @antonio-rojas @embray @slel @jhpalmieri @dimpase @tobihan\n\nKeywords: sphinx, conda, upgrade\n\nBranch/Commit: f1a08e3522b66afe96e8fdd389cf1114b1db1365\n\nReviewer: Dima Pasechnik\n\nAuthor: Julian R\u00fcth, Jeroen Demeyer, John Palmieri, Tobias Hansen\n\nDependencies: #27528\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26451\n\n",
    "closed_at": "2019-04-02T21:30:01Z",
    "created_at": "2018-10-10T07:53:52Z",
    "labels": [
        "component: packages: standard",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Upgrade to Sphinx 1.8.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26451",
    "user": "https://github.com/saraedum"
}
```
This ticket upgrades Sphinx to version 1.8.5.

Our previous upgrade was to Sphinx 1.7.6 in #26033.

**Tarball**: https://files.pythonhosted.org/packages/2a/86/8e1e8400bb6eca5ed960917952600fce90599e1cb0d20ddedd81ba163370/Sphinx-1.8.5.tar.gz

CC:  @timokau @kiwifb @antonio-rojas @embray @slel @jhpalmieri @dimpase @tobihan

Keywords: sphinx, conda, upgrade

Branch/Commit: f1a08e3522b66afe96e8fdd389cf1114b1db1365

Reviewer: Dima Pasechnik

Author: Julian Rüth, Jeroen Demeyer, John Palmieri, Tobias Hansen

Dependencies: #27528

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26451





---

archive/issue_comments_502191.json:
```json
{
    "body": "<a id='comment:1'></a>\nNote that there is nothing I can doctest here.",
    "created_at": "2018-10-10T07:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502191",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:1'></a>
Note that there is nothing I can doctest here.



---

archive/issue_comments_502192.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/26451\"",
    "created_at": "2018-10-10T07:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502192",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/26451"



---

archive/issue_comments_502193.json:
```json
{
    "body": "Changing work_issues from \"\" to \"is the patchbot happy?\"",
    "created_at": "2018-10-10T07:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502193",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "is the patchbot happy?"



---

archive/issue_comments_502194.json:
```json
{
    "body": "Changing commit from \"\" to \"eb00e754ad464ed4e0374e86ffd0e779e6909369\"",
    "created_at": "2018-10-10T07:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502194",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "eb00e754ad464ed4e0374e86ffd0e779e6909369"



---

archive/issue_comments_502195.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-10T07:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502195",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_502196.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[eb00e75](https://github.com/sagemath/sagetrac-mirror/commit/eb00e754ad464ed4e0374e86ffd0e779e6909369)|`Call Sphinx() 1.8 constructor`|",
    "created_at": "2018-10-10T07:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502196",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[eb00e75](https://github.com/sagemath/sagetrac-mirror/commit/eb00e754ad464ed4e0374e86ffd0e779e6909369)|`Call Sphinx() 1.8 constructor`|



---

archive/issue_comments_502197.json:
```json
{
    "body": "Changing keywords from \"\" to \"sphinx, conda\".",
    "created_at": "2018-10-10T07:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502197",
    "user": "https://github.com/saraedum"
}
```

Changing keywords from "" to "sphinx, conda".



---

archive/issue_comments_502198.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-10-10T08:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502198",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_502199.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'd rather upgrade Sphinx while we're at it. That's a good thing to do and I would need to do that anyway to test this ticket.",
    "created_at": "2018-10-10T08:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502199",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
I'd rather upgrade Sphinx while we're at it. That's a good thing to do and I would need to do that anyway to test this ticket.



---

archive/issue_comments_502200.json:
```json
{
    "body": "<a id='comment:7'></a>\nI was fearing that you would propose that ;)\n\nI am not planning on working on upgrading Sphinx in Sage (as I've got too many other things to worry about.) I don't know what has chahnged in 1.8.1 and whether we would want to upgrade at all.\n\nMore generally, I don't know what we're aiming for here. I feel we don't have enough people to keep Sage-the-distribution close to upstream most of the time so that's probably not what we should be aiming for?\n\nThat said, feel free to upgrade Sphinx :) But if anybody likes these small changes and we want to move the Sphinx upgrade into a separate ticket, I would prefer that.",
    "created_at": "2018-10-10T08:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502200",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
I was fearing that you would propose that ;)

I am not planning on working on upgrading Sphinx in Sage (as I've got too many other things to worry about.) I don't know what has chahnged in 1.8.1 and whether we would want to upgrade at all.

More generally, I don't know what we're aiming for here. I feel we don't have enough people to keep Sage-the-distribution close to upstream most of the time so that's probably not what we should be aiming for?

That said, feel free to upgrade Sphinx :) But if anybody likes these small changes and we want to move the Sphinx upgrade into a separate ticket, I would prefer that.



---

archive/issue_comments_502201.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n \n-coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.\n+coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx` constructor it seems.\n \n It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.\n``````\n",
    "created_at": "2018-10-10T08:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502201",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 ApplicationError: Source directory and destination directory cannot be identical
 ```
 
-coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.
+coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx` constructor it seems.
 
 It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.
``````




---

archive/issue_comments_502202.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n \n-coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx` constructor it seems.\n+coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.\n \n It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.\n``````\n",
    "created_at": "2018-10-10T08:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502202",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 ApplicationError: Source directory and destination directory cannot be identical
 ```
 
-coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx` constructor it seems.
+coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.
 
 It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.
``````




---

archive/issue_comments_502203.json:
```json
{
    "body": "<a id='comment:9'></a>\nUpgrading sphinx requires further changes to make docs build. I have a minimal patch at https://git.archlinux.org/svntogit/community.git/tree/trunk/sagemath-doc-sphinx-1.8.patch?h=packages/sagemath-doc\nto make it build, although with it one still gets lots of deprecation warnings due to changes in logging functions.",
    "created_at": "2018-10-10T08:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502203",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:9'></a>
Upgrading sphinx requires further changes to make docs build. I have a minimal patch at https://git.archlinux.org/svntogit/community.git/tree/trunk/sagemath-doc-sphinx-1.8.patch?h=packages/sagemath-doc
to make it build, although with it one still gets lots of deprecation warnings due to changes in logging functions.



---

archive/issue_comments_502204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n \n-coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.\n+coming out of Sphinx in conda as they have chahnged the argument checking of the `Sphinx` constructor it seems.\n \n It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.\n``````\n",
    "created_at": "2018-10-10T08:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502204",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 ApplicationError: Source directory and destination directory cannot be identical
 ```
 
-coming out of Sphinx as they have chahnged the argument checking of the `Sphinx` constructor it seems.
+coming out of Sphinx in conda as they have chahnged the argument checking of the `Sphinx` constructor it seems.
 
 It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.
``````




---

archive/issue_comments_502205.json:
```json
{
    "body": "<a id='comment:11'></a>\nAntonio, does Sphinx 1.8.1 work with just those changes (even if there are deprecation warnings)? If so, we might as well upgrade.",
    "created_at": "2018-10-10T08:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502205",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Antonio, does Sphinx 1.8.1 work with just those changes (even if there are deprecation warnings)? If so, we might as well upgrade.



---

archive/issue_comments_502206.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jdemeyer](#comment%3A11):\n> Antonio, does Sphinx 1.8.1 work with just those changes (even if there are deprecation warnings)? If so, we might as well upgrade.\n\n\nYes, with Julian's patch and mine introspection works and docs build correctly.",
    "created_at": "2018-10-10T08:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502206",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:12'></a>
Replying to [jdemeyer](#comment%3A11):
> Antonio, does Sphinx 1.8.1 work with just those changes (even if there are deprecation warnings)? If so, we might as well upgrade.


Yes, with Julian's patch and mine introspection works and docs build correctly.



---

archive/issue_comments_502207.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n \n-coming out of Sphinx in conda as they have chahnged the argument checking of the `Sphinx` constructor it seems.\n+coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.\n \n-It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.\n+**Tarball**: https://files.pythonhosted.org/packages/c7/e9/b1bed881847680cecc70159b8b9d5fd1cd4e85627c534712c2c7b339f8b6/Sphinx-1.8.1.tar.gz\n``````\n",
    "created_at": "2018-10-10T08:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502207",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 ApplicationError: Source directory and destination directory cannot be identical
 ```
 
-coming out of Sphinx in conda as they have chahnged the argument checking of the `Sphinx` constructor it seems.
+coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.
 
-It would be nice to be more friendly to downstream by making Sage work better with Sphinx 1.8 already.
+**Tarball**: https://files.pythonhosted.org/packages/c7/e9/b1bed881847680cecc70159b8b9d5fd1cd4e85627c534712c2c7b339f8b6/Sphinx-1.8.1.tar.gz
``````




---

archive/issue_events_082551.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "rename": {
        "from": "Prepare for sphinx 1.8",
        "to": "Upgrade to sphinx 1.8.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82551"
}
```



---

archive/issue_comments_502208.json:
```json
{
    "body": "Changing work_issues from \"is the patchbot happy?\" to \"\"",
    "created_at": "2018-10-10T08:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502208",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "is the patchbot happy?" to ""



---

archive/issue_comments_502209.json:
```json
{
    "body": "Changing author from \"Julian R\u00fcth\" to \"Julian R\u00fcth, Jeroen Demeyer\"",
    "created_at": "2018-10-10T08:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502209",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Julian Rüth" to "Julian Rüth, Jeroen Demeyer"



---

archive/issue_comments_502210.json:
```json
{
    "body": "<a id='comment:14'></a>\njdemeyer, did you forget to push your branch? (you added yourself as an Author but did not push any changes it seems.)",
    "created_at": "2018-10-10T10:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502210",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
jdemeyer, did you forget to push your branch? (you added yourself as an Author but did not push any changes it seems.)



---

archive/issue_comments_502211.json:
```json
{
    "body": "<a id='comment:15'></a>\nPlease give me time...",
    "created_at": "2018-10-10T10:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502211",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Please give me time...



---

archive/issue_comments_502212.json:
```json
{
    "body": "<a id='comment:16'></a>\nNote that there is a licensing issue in sphinxify.py, see #26453.",
    "created_at": "2018-10-10T10:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502212",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:16'></a>
Note that there is a licensing issue in sphinxify.py, see #26453.



---

archive/issue_comments_502213.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[a605143](https://github.com/sagemath/sagetrac-mirror/commit/a6051437fb79d3566313d641f1f31a79f2a8ff5e)|`Call Sphinx 1.8.! with the correct outdir set`|",
    "created_at": "2018-10-10T10:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[a605143](https://github.com/sagemath/sagetrac-mirror/commit/a6051437fb79d3566313d641f1f31a79f2a8ff5e)|`Call Sphinx 1.8.! with the correct outdir set`|



---

archive/issue_comments_502214.json:
```json
{
    "body": "Changing commit from \"eb00e754ad464ed4e0374e86ffd0e779e6909369\" to \"a6051437fb79d3566313d641f1f31a79f2a8ff5e\"",
    "created_at": "2018-10-10T10:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eb00e754ad464ed4e0374e86ffd0e779e6909369" to "a6051437fb79d3566313d641f1f31a79f2a8ff5e"



---

archive/issue_comments_502215.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[4ae155f](https://github.com/sagemath/sagetrac-mirror/commit/4ae155f09f45896ac8a06f35c128c500e3023deb)|`Call Sphinx 1.8.1 with the correct outdir set`|",
    "created_at": "2018-10-10T10:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[4ae155f](https://github.com/sagemath/sagetrac-mirror/commit/4ae155f09f45896ac8a06f35c128c500e3023deb)|`Call Sphinx 1.8.1 with the correct outdir set`|



---

archive/issue_comments_502216.json:
```json
{
    "body": "Changing commit from \"a6051437fb79d3566313d641f1f31a79f2a8ff5e\" to \"4ae155f09f45896ac8a06f35c128c500e3023deb\"",
    "created_at": "2018-10-10T10:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a6051437fb79d3566313d641f1f31a79f2a8ff5e" to "4ae155f09f45896ac8a06f35c128c500e3023deb"



---

archive/issue_comments_502217.json:
```json
{
    "body": "Changing branch from \"u/saraedum/26451\" to \"u/jdemeyer/26451\"",
    "created_at": "2018-10-11T07:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502217",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/saraedum/26451" to "u/jdemeyer/26451"



---

archive/issue_comments_502218.json:
```json
{
    "body": "<a id='comment:20'></a>\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[19b29e5](https://github.com/sagemath/sagetrac-mirror/commit/19b29e552caf792bbd5eb1e335b6072f2125a981)|`Upgrade to Sphinx 1.8.1`|",
    "created_at": "2018-10-12T17:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502218",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[19b29e5](https://github.com/sagemath/sagetrac-mirror/commit/19b29e552caf792bbd5eb1e335b6072f2125a981)|`Upgrade to Sphinx 1.8.1`|



---

archive/issue_comments_502219.json:
```json
{
    "body": "Changing commit from \"4ae155f09f45896ac8a06f35c128c500e3023deb\" to \"19b29e552caf792bbd5eb1e335b6072f2125a981\"",
    "created_at": "2018-10-12T17:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502219",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "4ae155f09f45896ac8a06f35c128c500e3023deb" to "19b29e552caf792bbd5eb1e335b6072f2125a981"



---

archive/issue_comments_502220.json:
```json
{
    "body": "<a id='comment:21'></a>\nBy the way, see also #26449 for issues with Sphinx and the Python 3 build of Sage.",
    "created_at": "2018-10-12T18:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502220",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:21'></a>
By the way, see also #26449 for issues with Sphinx and the Python 3 build of Sage.



---

archive/issue_comments_502221.json:
```json
{
    "body": "<a id='comment:22'></a>\nI just did the upgrade on nix and I also needed to apply the same patch to sagenb's `sphinxify.py` (https://github.com/sagemath/sagenb/pull/461).",
    "created_at": "2018-10-22T21:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502221",
    "user": "https://github.com/timokau"
}
```

<a id='comment:22'></a>
I just did the upgrade on nix and I also needed to apply the same patch to sagenb's `sphinxify.py` (https://github.com/sagemath/sagenb/pull/461).



---

archive/issue_events_082552.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-10-22T21:14:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82552"
}
```



---

archive/issue_comments_502222.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [gh-timokau](#comment%3A22):\n> I just did the upgrade on nix and I also needed to apply the same patch to sagenb's `sphinxify.py` (https://github.com/sagemath/sagenb/pull/461).\n\n\nOnce upon a time `sphinxify` was a part of sagenb and it was used in sage itself. So time ago we put an end to that. May be it is time to go in reverse and have (the now deprecated) sagenb use sage's sphinxify.",
    "created_at": "2018-10-22T21:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502222",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>
Replying to [gh-timokau](#comment%3A22):
> I just did the upgrade on nix and I also needed to apply the same patch to sagenb's `sphinxify.py` (https://github.com/sagemath/sagenb/pull/461).


Once upon a time `sphinxify` was a part of sagenb and it was used in sage itself. So time ago we put an end to that. May be it is time to go in reverse and have (the now deprecated) sagenb use sage's sphinxify.



---

archive/issue_comments_502223.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe documentation does not build for me on OS X: I get\n\n```\n[reference]     valuations: 1 todos, 14 index, 1409 citations, 13 modules\n[reference] ... done (472 todos, 2068 index, 1409 citations, 2019 modules)\n[reference] preparing documents... skipping loading of indexes... done\n[reference] Merging js index files...\n[reference]     algebras: 3466 js index entries\n[reference]     arithgroup: 966 js index entries\n\n   ...\n\n[reference]     structure: 1995 js index entries\n[reference]     tensor_free_modules: 1035 js index entries\n[reference]     valuations: 817 js index entries\n[reference] ... done (44888 js index entries)\n[reference] WARNING: cannot copy static file IOError(20, 'Not a directory')\n[reference] copying static files... copying extra files... done\n[reference] The HTML pages are in local/share/doc/sage/html/en/reference.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1715, in main\n    builder()\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 338, in _wrapper\n    getattr(get_builder(document), name)(*args, **kwds)\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 536, in _wrapper\n    getattr(DocBuilder(self.name, lang), format)(*args, **kwds)\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 130, in f\n    runsphinx()\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 319, in runsphinx\n    sys.stderr.raise_errors()\n  File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 254, in raise_errors\n    raise OSError(self._error)\nOSError: WARNING: cannot copy static file IOError(20, 'Not a directory')\n```\nIndeed, `local/share/doc/sage/html/en/reference/_static` is a file, not a directory: it is the file `graphviz.css` from Sphinx. If I delete it, create a directory `_static`, and run `make` again, then only `graphviz.css` is copied to the directory, so the reference manual is missing all of its css files. The other parts of the documentation look good.",
    "created_at": "2018-10-23T19:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502223",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>
The documentation does not build for me on OS X: I get

```
[reference]     valuations: 1 todos, 14 index, 1409 citations, 13 modules
[reference] ... done (472 todos, 2068 index, 1409 citations, 2019 modules)
[reference] preparing documents... skipping loading of indexes... done
[reference] Merging js index files...
[reference]     algebras: 3466 js index entries
[reference]     arithgroup: 966 js index entries

   ...

[reference]     structure: 1995 js index entries
[reference]     tensor_free_modules: 1035 js index entries
[reference]     valuations: 817 js index entries
[reference] ... done (44888 js index entries)
[reference] WARNING: cannot copy static file IOError(20, 'Not a directory')
[reference] copying static files... copying extra files... done
[reference] The HTML pages are in local/share/doc/sage/html/en/reference.
Error building the documentation.
Traceback (most recent call last):
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1715, in main
    builder()
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 338, in _wrapper
    getattr(get_builder(document), name)(*args, **kwds)
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 536, in _wrapper
    getattr(DocBuilder(self.name, lang), format)(*args, **kwds)
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 130, in f
    runsphinx()
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 319, in runsphinx
    sys.stderr.raise_errors()
  File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 254, in raise_errors
    raise OSError(self._error)
OSError: WARNING: cannot copy static file IOError(20, 'Not a directory')
```
Indeed, `local/share/doc/sage/html/en/reference/_static` is a file, not a directory: it is the file `graphviz.css` from Sphinx. If I delete it, create a directory `_static`, and run `make` again, then only `graphviz.css` is copied to the directory, so the reference manual is missing all of its css files. The other parts of the documentation look good.



---

archive/issue_comments_502224.json:
```json
{
    "body": "<a id='comment:26'></a>\nThere is some odd behavior with `graphviz.css`. First, it gets copied to `local/share/doc/sage/inventory/en/reference/_static` (a file, not a directory): Sphinx shouldn't copy any css files in the inventory build. Then it also gets copied to a similar location in the html build. I commented out `'sphinx.ext.graphviz'` in the list of extensions in `src/doc/common/conf.py` and started over, but the same thing happened. So something strange is going on with graphviz and our custom builder for the reference manual. In contrast, `./sage --docbuild tutorial html` works fine.",
    "created_at": "2018-10-23T21:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502224",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>
There is some odd behavior with `graphviz.css`. First, it gets copied to `local/share/doc/sage/inventory/en/reference/_static` (a file, not a directory): Sphinx shouldn't copy any css files in the inventory build. Then it also gets copied to a similar location in the html build. I commented out `'sphinx.ext.graphviz'` in the list of extensions in `src/doc/common/conf.py` and started over, but the same thing happened. So something strange is going on with graphviz and our custom builder for the reference manual. In contrast, `./sage --docbuild tutorial html` works fine.



---

archive/issue_comments_502225.json:
```json
{
    "body": "<a id='comment:27'></a>\nSee https://github.com/sphinx-doc/sphinx/pull/5549",
    "created_at": "2018-10-24T05:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502225",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
See https://github.com/sphinx-doc/sphinx/pull/5549



---

archive/issue_comments_502226.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jdemeyer](#comment%3A27):\n> See https://github.com/sphinx-doc/sphinx/pull/5549\n\n\nThat's very helpful, thank you, but it leads to my next problem: with that fix applied, `graphviz.css` is still copied to `local/share/doc/sage/inventory/en/reference/_static/`, and there is no reason to copy css files to the inventory build. As a consequence, I see this error:\n\n```\nBuilding reference manual, second pass.\n\n[arithgrou] WARNING: failed to reach any of the inventories with the following issues:\n[arithgrou] WARNING: intersphinx inventory '/Users/jpalmier/Desktop/Sage/git/sage/local/share/doc/sage/inventory/en/reference/_static/objects.inv' not fetchable due to <type 'exceptions.IOError'>: [Errno 2] No such file or directory: '/Users/jpalmier/Desktop/Sage/git/sage/local/share/doc/sage/inventory/en/reference/_static/objects.inv'\n```\nI think intersphinx looks in every subdirectory of `inventory/en/reference/`, including `_static`, which should not be there.",
    "created_at": "2018-10-24T18:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502226",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>
Replying to [jdemeyer](#comment%3A27):
> See https://github.com/sphinx-doc/sphinx/pull/5549


That's very helpful, thank you, but it leads to my next problem: with that fix applied, `graphviz.css` is still copied to `local/share/doc/sage/inventory/en/reference/_static/`, and there is no reason to copy css files to the inventory build. As a consequence, I see this error:

```
Building reference manual, second pass.

[arithgrou] WARNING: failed to reach any of the inventories with the following issues:
[arithgrou] WARNING: intersphinx inventory '/Users/jpalmier/Desktop/Sage/git/sage/local/share/doc/sage/inventory/en/reference/_static/objects.inv' not fetchable due to <type 'exceptions.IOError'>: [Errno 2] No such file or directory: '/Users/jpalmier/Desktop/Sage/git/sage/local/share/doc/sage/inventory/en/reference/_static/objects.inv'
```
I think intersphinx looks in every subdirectory of `inventory/en/reference/`, including `_static`, which should not be there.



---

archive/issue_comments_502227.json:
```json
{
    "body": "<a id='comment:29'></a>\nAnd once I clean that up, I still see a *file* `_static` in the html reference build.",
    "created_at": "2018-10-24T20:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502227",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:29'></a>
And once I clean that up, I still see a *file* `_static` in the html reference build.



---

archive/issue_comments_502228.json:
```json
{
    "body": "<a id='comment:30'></a>\nI wonder if the problem is that it tries to copy `graphviz.css` to, for example, `html/en/reference/algebras/_static`, which is a symlink pointing to the as yet non-existent `html/en/reference/_static`.",
    "created_at": "2018-10-24T23:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502228",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:30'></a>
I wonder if the problem is that it tries to copy `graphviz.css` to, for example, `html/en/reference/algebras/_static`, which is a symlink pointing to the as yet non-existent `html/en/reference/_static`.



---

archive/issue_comments_502229.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/26451\" to \"u/jhpalmieri/26451\"",
    "created_at": "2018-10-25T19:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502229",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "u/jdemeyer/26451" to "u/jhpalmieri/26451"



---

archive/issue_comments_502230.json:
```json
{
    "body": "<a id='comment:32'></a>\nHere is a new branch. I'm not happy about the changes to `src/sage_setup/docbuild/__init__.py`, but I couldn't get the reference manual to build otherwise. Maybe there is another Sphinx bug, or maybe it's something about our multidoc extension. I would be happy if someone found a cleaner fix.\n\n(This requires Jeroen's Sphinx fix from https://github.com/sphinx-doc/sphinx/pull/5549, by the way. I did not add that as a patch to Sphinx, although maybe we will need to if Sphinx doesn't fix it themselves.)\n\n---\nNew commits:\n|                                                                                                                                          |         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------|\n|[1efde59](https://github.com/sagemath/sagetrac-mirror/commit/1efde599241c638941b2e9f8ff38bb1a5b5c19e3)|`merging`|\n|[b79b1d9](https://github.com/sagemath/sagetrac-mirror/commit/b79b1d9af2d2769831ababb09803840711fb65c3)|`trac 26451: silence deprecation warnings about app.info, app.debug, etc.`|\n|[4a91a60](https://github.com/sagemath/sagetrac-mirror/commit/4a91a6005a550f99bd927b447d36cf7adc4e0f2c)|`trac 26451: remove bad _static directory, bad _static file`|",
    "created_at": "2018-10-25T19:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502230",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:32'></a>
Here is a new branch. I'm not happy about the changes to `src/sage_setup/docbuild/__init__.py`, but I couldn't get the reference manual to build otherwise. Maybe there is another Sphinx bug, or maybe it's something about our multidoc extension. I would be happy if someone found a cleaner fix.

(This requires Jeroen's Sphinx fix from https://github.com/sphinx-doc/sphinx/pull/5549, by the way. I did not add that as a patch to Sphinx, although maybe we will need to if Sphinx doesn't fix it themselves.)

---
New commits:
|                                                                                                                                          |         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------|
|[1efde59](https://github.com/sagemath/sagetrac-mirror/commit/1efde599241c638941b2e9f8ff38bb1a5b5c19e3)|`merging`|
|[b79b1d9](https://github.com/sagemath/sagetrac-mirror/commit/b79b1d9af2d2769831ababb09803840711fb65c3)|`trac 26451: silence deprecation warnings about app.info, app.debug, etc.`|
|[4a91a60](https://github.com/sagemath/sagetrac-mirror/commit/4a91a6005a550f99bd927b447d36cf7adc4e0f2c)|`trac 26451: remove bad _static directory, bad _static file`|



---

archive/issue_comments_502231.json:
```json
{
    "body": "Changing commit from \"19b29e552caf792bbd5eb1e335b6072f2125a981\" to \"4a91a6005a550f99bd927b447d36cf7adc4e0f2c\"",
    "created_at": "2018-10-25T19:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502231",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "19b29e552caf792bbd5eb1e335b6072f2125a981" to "4a91a6005a550f99bd927b447d36cf7adc4e0f2c"



---

archive/issue_comments_502232.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[65ab615](https://github.com/sagemath/sagetrac-mirror/commit/65ab61522cacad7558350f3cb1f0b16d0001235e)|`trac 26451: a little reST fix`|",
    "created_at": "2018-10-26T21:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[65ab615](https://github.com/sagemath/sagetrac-mirror/commit/65ab61522cacad7558350f3cb1f0b16d0001235e)|`trac 26451: a little reST fix`|



---

archive/issue_comments_502233.json:
```json
{
    "body": "Changing commit from \"4a91a6005a550f99bd927b447d36cf7adc4e0f2c\" to \"65ab61522cacad7558350f3cb1f0b16d0001235e\"",
    "created_at": "2018-10-26T21:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4a91a6005a550f99bd927b447d36cf7adc4e0f2c" to "65ab61522cacad7558350f3cb1f0b16d0001235e"



---

archive/issue_comments_502234.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#26558\"",
    "created_at": "2018-10-26T21:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502234",
    "user": "https://github.com/jhpalmieri"
}
```

Changing dependencies from "" to "#26558"



---

archive/issue_comments_502235.json:
```json
{
    "body": "<a id='comment:34'></a>\nWith this (plus Jeroen's Sphinx fix, plus #26558 if your version of TeXLive is recent), the html and pdf docs build for me.",
    "created_at": "2018-10-26T21:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502235",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'></a>
With this (plus Jeroen's Sphinx fix, plus #26558 if your version of TeXLive is recent), the html and pdf docs build for me.



---

archive/issue_events_082553.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "rename": {
        "from": "Upgrade to sphinx 1.8.1",
        "to": "Upgrade to Sphinx 1.8.2"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82553"
}
```



---

archive/issue_comments_502236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,12 @@\n-With sphinx 1.8.1 we see quite a few\n+This ticket is to upgrade to Sphinx 1.8.2.\n+\n+Our previous upgrade was to Sphinx 1.7.6 in #26033.\n+\n+With Sphinx 1.8.1 we see quite a few\n \n ```\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n-\n coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.\n \n-**Tarball**: https://files.pythonhosted.org/packages/c7/e9/b1bed881847680cecc70159b8b9d5fd1cd4e85627c534712c2c7b339f8b6/Sphinx-1.8.1.tar.gz\n+**Tarball**: https://files.pythonhosted.org/packages/4c/ea/7388faba7cf02999e1bc42f6a8eb1ea0120aec3dd93474cee21cea2d693f/Sphinx-1.8.2.tar.gz\n``````\n",
    "created_at": "2018-11-18T22:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502236",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,12 @@
-With sphinx 1.8.1 we see quite a few
+This ticket is to upgrade to Sphinx 1.8.2.
+
+Our previous upgrade was to Sphinx 1.7.6 in #26033.
+
+With Sphinx 1.8.1 we see quite a few
 
 ```
 ApplicationError: Source directory and destination directory cannot be identical
 ```
-
 coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.
 
-**Tarball**: https://files.pythonhosted.org/packages/c7/e9/b1bed881847680cecc70159b8b9d5fd1cd4e85627c534712c2c7b339f8b6/Sphinx-1.8.1.tar.gz
+**Tarball**: https://files.pythonhosted.org/packages/4c/ea/7388faba7cf02999e1bc42f6a8eb1ea0120aec3dd93474cee21cea2d693f/Sphinx-1.8.2.tar.gz
``````




---

archive/issue_comments_502237.json:
```json
{
    "body": "<a id='comment:35'></a>\nThe following tickets mentioned in the discussion above are now fixed and closed,\n\n- #26449 Sphinx and the Python 3 build of Sage\n- #26453 Relicense sphinxify.py\n- #26558 doc-pdf fails due to conflict with new babel.sty\n\nThe following pull request to Sphinx was merged on 2018-10-28,\n\n- [Sphinx issue 5549: Correctly deal with non-existing static dir in graphviz extension](https://github.com/sphinx-doc/sphinx/pull/5549)\n\nand finally\n\n- Sphinx 1.8.2 was uploaded to PyPI on 2018-11-11.\n\nIs this comment from the ticket description still a problem with Sphinx 1.8.2?\n\n> With Sphinx 1.8.1 we see quite a few\n> \n> ```\n> ApplicationError: Source directory and destination directory cannot be identical\n> ```\n> coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.",
    "created_at": "2018-11-18T22:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502237",
    "user": "https://github.com/slel"
}
```

<a id='comment:35'></a>
The following tickets mentioned in the discussion above are now fixed and closed,

- #26449 Sphinx and the Python 3 build of Sage
- #26453 Relicense sphinxify.py
- #26558 doc-pdf fails due to conflict with new babel.sty

The following pull request to Sphinx was merged on 2018-10-28,

- [Sphinx issue 5549: Correctly deal with non-existing static dir in graphviz extension](https://github.com/sphinx-doc/sphinx/pull/5549)

and finally

- Sphinx 1.8.2 was uploaded to PyPI on 2018-11-11.

Is this comment from the ticket description still a problem with Sphinx 1.8.2?

> With Sphinx 1.8.1 we see quite a few
> 
> ```
> ApplicationError: Source directory and destination directory cannot be identical
> ```
> coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.



---

archive/issue_comments_502238.json:
```json
{
    "body": "<a id='comment:36'></a>\nSphinx 1.8.3 was released on 2018-12-25.\n\nTarball: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz",
    "created_at": "2019-01-13T18:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502238",
    "user": "https://github.com/slel"
}
```

<a id='comment:36'></a>
Sphinx 1.8.3 was released on 2018-12-25.

Tarball: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz



---

archive/issue_comments_502239.json:
```json
{
    "body": "<a id='comment:37'></a>\nUnfortunately the patch no longer works with 1.8.3. I'm getting this error on the second pass:\n\n```\n[manifolds] building [html]: targets for 60 source files that are out of date\n[manifolds] updating environment: 60 added, 0 changed, 0 removed\n[manifolds]   app.builder.info(bold('loading cross citations... '), nonl=1)\n[manifolds]   app.builder.info(\"done (%s citations).\"%len(cache))\n[manifolds]   app.builder.info(bold('linking _static directory.'))\n[manifolds] The HTML pages are in doc/html/en/reference/manifolds.\n[manifolds] Exception occurred:\n[manifolds]   File \"/usr/lib/python2.7/os.py\", line 157, in makedirs\n[manifolds]     mkdir(name, mode)\n[manifolds] OSError: [Errno 17] File exists: '/build/sagemath-doc/src/sage-8.6/src/doc/html/en/reference/manifolds/_static'\n[manifolds] The full traceback has been saved in /tmp/sphinx-err-EkdWJl.log, if you want to report the issue to the developers.\n[manifolds] Please also report this if it was a user error, so that a better error message can be provided next time.\n[manifolds] A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\nError building the documentation.\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/build/sagemath-doc/src/sage-8.6/src/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 1744, in main\n    builder()\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 356, in _wrapper\n    getattr(get_builder(document), name)(*args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 547, in _wrapper\n    build_many(build_ref_doc, L)\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 290, in build_many\n    results.append(target(arg))\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 74, in build_ref_doc\n    getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 772, in _wrapper\n    getattr(DocBuilder, build_type)(self, *args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py\", line 130, in f\n    runsphinx()\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/sphinxbuild.py\", line 319, in runsphinx\n    sys.stderr.raise_errors()\n  File \"/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/sphinxbuild.py\", line 254, in raise_errors\n    raise OSError(self._error)\nOSError: Exception occurred:\n\n    Note: incremental documentation builds sometimes cause spurious\n    error messages. To be certain that these are real errors, run\n    \"make doc-clean\" first and try again.\n```",
    "created_at": "2019-01-17T07:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502239",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:37'></a>
Unfortunately the patch no longer works with 1.8.3. I'm getting this error on the second pass:

```
[manifolds] building [html]: targets for 60 source files that are out of date
[manifolds] updating environment: 60 added, 0 changed, 0 removed
[manifolds]   app.builder.info(bold('loading cross citations... '), nonl=1)
[manifolds]   app.builder.info("done (%s citations)."%len(cache))
[manifolds]   app.builder.info(bold('linking _static directory.'))
[manifolds] The HTML pages are in doc/html/en/reference/manifolds.
[manifolds] Exception occurred:
[manifolds]   File "/usr/lib/python2.7/os.py", line 157, in makedirs
[manifolds]     mkdir(name, mode)
[manifolds] OSError: [Errno 17] File exists: '/build/sagemath-doc/src/sage-8.6/src/doc/html/en/reference/manifolds/_static'
[manifolds] The full traceback has been saved in /tmp/sphinx-err-EkdWJl.log, if you want to report the issue to the developers.
[manifolds] Please also report this if it was a user error, so that a better error message can be provided next time.
[manifolds] A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
Error building the documentation.
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 174, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/build/sagemath-doc/src/sage-8.6/src/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 1744, in main
    builder()
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 356, in _wrapper
    getattr(get_builder(document), name)(*args, **kwds)
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 547, in _wrapper
    build_many(build_ref_doc, L)
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 290, in build_many
    results.append(target(arg))
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 74, in build_ref_doc
    getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 772, in _wrapper
    getattr(DocBuilder, build_type)(self, *args, **kwds)
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/__init__.py", line 130, in f
    runsphinx()
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/sphinxbuild.py", line 319, in runsphinx
    sys.stderr.raise_errors()
  File "/build/sagemath-doc/src/sage-8.6/local-python/sage_setup/docbuild/sphinxbuild.py", line 254, in raise_errors
    raise OSError(self._error)
OSError: Exception occurred:

    Note: incremental documentation builds sometimes cause spurious
    error messages. To be certain that these are real errors, run
    "make doc-clean" first and try again.
```



---

archive/issue_comments_502240.json:
```json
{
    "body": "<a id='comment:38'></a>\nThe problem is that /build/sagemath-doc/src/sage-8.6/src/doc/html/en/reference/manifolds/_static is a symlink to a non-existant ../_static, which makes sphinx raise an error after [this commit](https://github.com/sphinx-doc/sphinx/commit/a7d950ad580eb1feab5094b59857c2eebb8a8976)",
    "created_at": "2019-01-17T19:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502240",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:38'></a>
The problem is that /build/sagemath-doc/src/sage-8.6/src/doc/html/en/reference/manifolds/_static is a symlink to a non-existant ../_static, which makes sphinx raise an error after [this commit](https://github.com/sphinx-doc/sphinx/commit/a7d950ad580eb1feab5094b59857c2eebb8a8976)



---

archive/issue_comments_502241.json:
```json
{
    "body": "<a id='comment:39'></a>\nI don't understand what Sphinx is doing. I don't know if I will have time to work on this soon, but a starting point is to get rid of [my proposed _static commit](https://git.sagemath.org/sage.git/commit/?h=65ab61522cacad7558350f3cb1f0b16d0001235e&id=4a91a6005a550f99bd927b447d36cf7adc4e0f2c). The other commits (or variations on them \u2013 in particular `environment.patch` needs to be modified) are I think needed.\n\nHere is my first question: why does the inventory builder create `_static` directories? Those directories should not be there in the first place. They only contain `graphviz.css`, which makes me think it's a bug in Sphinx's graphviz extension. A Sage-specific patch for Sphinx that might help:\n\n```diff\ndiff --git a/sphinx/ext/graphviz.py~ b/sphinx/ext/graphviz.py\nindex c9b1541..6fffcd6 100644\n--- a/sphinx/ext/graphviz.py\n+++ b/sphinx/ext/graphviz.py\n@@ -410,7 +410,7 @@ def man_visit_graphviz(self, node):\n \n def on_build_finished(app, exc):\n     # type: (Sphinx, Exception) -> None\n-    if exc is None:\n+    if exc is None and not app.config.multidoc_first_pass:\n         src = path.join(sphinx.package_dir, 'templates', 'graphviz', 'graphviz.css')\n         dst = path.join(app.outdir, '_static')\n         copy_asset(src, dst)\n```",
    "created_at": "2019-01-18T00:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502241",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:39'></a>
I don't understand what Sphinx is doing. I don't know if I will have time to work on this soon, but a starting point is to get rid of [my proposed _static commit](https://git.sagemath.org/sage.git/commit/?h=65ab61522cacad7558350f3cb1f0b16d0001235e&id=4a91a6005a550f99bd927b447d36cf7adc4e0f2c). The other commits (or variations on them – in particular `environment.patch` needs to be modified) are I think needed.

Here is my first question: why does the inventory builder create `_static` directories? Those directories should not be there in the first place. They only contain `graphviz.css`, which makes me think it's a bug in Sphinx's graphviz extension. A Sage-specific patch for Sphinx that might help:

```diff
diff --git a/sphinx/ext/graphviz.py~ b/sphinx/ext/graphviz.py
index c9b1541..6fffcd6 100644
--- a/sphinx/ext/graphviz.py
+++ b/sphinx/ext/graphviz.py
@@ -410,7 +410,7 @@ def man_visit_graphviz(self, node):
 
 def on_build_finished(app, exc):
     # type: (Sphinx, Exception) -> None
-    if exc is None:
+    if exc is None and not app.config.multidoc_first_pass:
         src = path.join(sphinx.package_dir, 'templates', 'graphviz', 'graphviz.css')
         dst = path.join(app.outdir, '_static')
         copy_asset(src, dst)
```



---

archive/issue_comments_502242.json:
```json
{
    "body": "<a id='comment:40'></a>\nThat patch doesn't quite work: there is still a `_static` directory in `local/share/doc/sage/inventory/en/reference/`, although it prevents them from being created in all of the subdirectories. Something stupid like `not 'inventory' in app.outdir` works, although there should be better ways to check that we're doing an inventory build. That still doesn't work, of course, but it's a place to start.",
    "created_at": "2019-01-18T00:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502242",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:40'></a>
That patch doesn't quite work: there is still a `_static` directory in `local/share/doc/sage/inventory/en/reference/`, although it prevents them from being created in all of the subdirectories. Something stupid like `not 'inventory' in app.outdir` works, although there should be better ways to check that we're doing an inventory build. That still doesn't work, of course, but it's a place to start.



---

archive/issue_comments_502243.json:
```json
{
    "body": "<a id='comment:41'></a>\nIf I use some sort of stupid patch on graphviz.py, then Sphinx crashes when it reaches the second pass, because of the reason you point out: `html/en/reference/_static` does not exist, but there are symlinks pointing to it. If I then manually create this directory (which we could add to the code), the docbuild still fails:\n\n```\nWARNING: search index couldn't be loaded, but not all documents will be built: the index will be incomplete.\n```\nThere is a method in sphinx.builders.html called `load_indexer`, and for reasons I don't understand, it is not finding all of the relevant files: its input is two lists, the files it thinks it should include, and the files covered by the index, and if they are not the same, it raises this warning. I added some print statements to see how these two sets differed, and I couldn't see any pattern. When I disable that warning, it gets much farther, but I'm guessing that something will be broken with either the documentation or the index.",
    "created_at": "2019-01-18T06:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502243",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
If I use some sort of stupid patch on graphviz.py, then Sphinx crashes when it reaches the second pass, because of the reason you point out: `html/en/reference/_static` does not exist, but there are symlinks pointing to it. If I then manually create this directory (which we could add to the code), the docbuild still fails:

```
WARNING: search index couldn't be loaded, but not all documents will be built: the index will be incomplete.
```
There is a method in sphinx.builders.html called `load_indexer`, and for reasons I don't understand, it is not finding all of the relevant files: its input is two lists, the files it thinks it should include, and the files covered by the index, and if they are not the same, it raises this warning. I added some print statements to see how these two sets differed, and I couldn't see any pattern. When I disable that warning, it gets much farther, but I'm guessing that something will be broken with either the documentation or the index.



---

archive/issue_comments_502244.json:
```json
{
    "body": "Changing commit from \"65ab61522cacad7558350f3cb1f0b16d0001235e\" to \"fc3b36f017d01c198e87d146a868f1ab7eddd23d\"",
    "created_at": "2019-01-18T06:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "65ab61522cacad7558350f3cb1f0b16d0001235e" to "fc3b36f017d01c198e87d146a868f1ab7eddd23d"



---

archive/issue_comments_502245.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[a5f44be](https://github.com/sagemath/sagetrac-mirror/commit/a5f44be86403a552662fbf4c4a1c3d171ec0412e)|`trac 26451: src/misc/sphinxify fixes`|\n|[fc3b36f](https://github.com/sagemath/sagetrac-mirror/commit/fc3b36f017d01c198e87d146a868f1ab7eddd23d)|`trac 26451:`|",
    "created_at": "2019-01-18T06:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[a5f44be](https://github.com/sagemath/sagetrac-mirror/commit/a5f44be86403a552662fbf4c4a1c3d171ec0412e)|`trac 26451: src/misc/sphinxify fixes`|
|[fc3b36f](https://github.com/sagemath/sagetrac-mirror/commit/fc3b36f017d01c198e87d146a868f1ab7eddd23d)|`trac 26451:`|



---

archive/issue_comments_502246.json:
```json
{
    "body": "<a id='comment:43'></a>\nOkay, here is my current \"progress\". If I use the branch I just posted, along with this change to Sphinx (which is a terrible idea):\n\n```diff\ndiff --git a/sphinx/builders/html.py b/sphinx/builders/html.py\nindex 5060d1f..6747b6c 100644\n--- a/sphinx/builders/html.py\n+++ b/sphinx/builders/html.py\n@@ -1010,7 +1010,7 @@ class StandaloneHTMLBuilder(Builder):\n             with f:\n                 self.indexer.load(f, self.indexer_format)\n         except (IOError, OSError, ValueError):\n-            if keep:\n+            if keep and False:\n                 logger.warning(__('search index couldn\\'t be loaded, but not all '\n                                   'documents will be built: the index will be '\n                                   'incomplete.'))\n```\nthen the documentation builds. Remaining questions: is the documentation complete? Is the index complete? What is the right way to fix the problem that this stupid patch fixes? Are the other changes okay?",
    "created_at": "2019-01-18T06:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502246",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:43'></a>
Okay, here is my current "progress". If I use the branch I just posted, along with this change to Sphinx (which is a terrible idea):

```diff
diff --git a/sphinx/builders/html.py b/sphinx/builders/html.py
index 5060d1f..6747b6c 100644
--- a/sphinx/builders/html.py
+++ b/sphinx/builders/html.py
@@ -1010,7 +1010,7 @@ class StandaloneHTMLBuilder(Builder):
             with f:
                 self.indexer.load(f, self.indexer_format)
         except (IOError, OSError, ValueError):
-            if keep:
+            if keep and False:
                 logger.warning(__('search index couldn\'t be loaded, but not all '
                                   'documents will be built: the index will be '
                                   'incomplete.'))
```
then the documentation builds. Remaining questions: is the documentation complete? Is the index complete? What is the right way to fix the problem that this stupid patch fixes? Are the other changes okay?



---

archive/issue_comments_502247.json:
```json
{
    "body": "<a id='comment:44'></a>\nThis really should be rebased to #26949 since that makes non-trivial changes to the docbuilder.",
    "created_at": "2019-01-18T09:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502247",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
This really should be rebased to #26949 since that makes non-trivial changes to the docbuilder.



---

archive/issue_comments_502248.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n ```\n coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.\n \n-**Tarball**: https://files.pythonhosted.org/packages/4c/ea/7388faba7cf02999e1bc42f6a8eb1ea0120aec3dd93474cee21cea2d693f/Sphinx-1.8.2.tar.gz\n+**Tarball**: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz\n``````\n",
    "created_at": "2019-01-18T09:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502248",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 ```
 coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.
 
-**Tarball**: https://files.pythonhosted.org/packages/4c/ea/7388faba7cf02999e1bc42f6a8eb1ea0120aec3dd93474cee21cea2d693f/Sphinx-1.8.2.tar.gz
+**Tarball**: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz
``````




---

archive/issue_comments_502249.json:
```json
{
    "body": "Changing dependencies from \"#26558\" to \"#26949\"",
    "created_at": "2019-01-18T09:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502249",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#26558" to "#26949"



---

archive/issue_events_082554.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "rename": {
        "from": "Upgrade to Sphinx 1.8.2",
        "to": "Upgrade to Sphinx 1.8.3"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82554"
}
```



---

archive/issue_comments_502250.json:
```json
{
    "body": "<a id='comment:45'></a>\nNote that the line from #26949\n\n```\nfrom sphinx.ext.autodoc.inspector import format_annotation, formatargspec\n```\nand later use of `formatargspec` leads to deprecation warnings with new versions of Sphinx.",
    "created_at": "2019-01-18T23:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502250",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:45'></a>
Note that the line from #26949

```
from sphinx.ext.autodoc.inspector import format_annotation, formatargspec
```
and later use of `formatargspec` leads to deprecation warnings with new versions of Sphinx.



---

archive/issue_comments_502251.json:
```json
{
    "body": "<a id='comment:46'></a>\nOn the other hand, documentation seems to build with the branch here + #26949. Now to figure out which changes are actually needed once rebased to #26949.",
    "created_at": "2019-01-19T00:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502251",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>
On the other hand, documentation seems to build with the branch here + #26949. Now to figure out which changes are actually needed once rebased to #26949.



---

archive/issue_comments_502252.json:
```json
{
    "body": "Changing commit from \"fc3b36f017d01c198e87d146a868f1ab7eddd23d\" to \"54179cdace30db612c53e2626beab20c2e09f903\"",
    "created_at": "2019-01-21T07:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fc3b36f017d01c198e87d146a868f1ab7eddd23d" to "54179cdace30db612c53e2626beab20c2e09f903"



---

archive/issue_comments_502253.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[4a3ef7f](https://github.com/sagemath/sagetrac-mirror/commit/4a3ef7f3e59350b30da4aa19c7a9260fbfafdf40)|`Make sage autodoc work for both py2 and py3`|\n|[54179cd](https://github.com/sagemath/sagetrac-mirror/commit/54179cdace30db612c53e2626beab20c2e09f903)|`trac 26451: Sphinx 1.8.3`|",
    "created_at": "2019-01-21T07:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[4a3ef7f](https://github.com/sagemath/sagetrac-mirror/commit/4a3ef7f3e59350b30da4aa19c7a9260fbfafdf40)|`Make sage autodoc work for both py2 and py3`|
|[54179cd](https://github.com/sagemath/sagetrac-mirror/commit/54179cdace30db612c53e2626beab20c2e09f903)|`trac 26451: Sphinx 1.8.3`|



---

archive/issue_comments_502254.json:
```json
{
    "body": "Changing author from \"Julian R\u00fcth, Jeroen Demeyer\" to \"Julian R\u00fcth, Jeroen Demeyer, John Palmieri\"",
    "created_at": "2019-01-21T07:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502254",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "Julian Rüth, Jeroen Demeyer" to "Julian Rüth, Jeroen Demeyer, John Palmieri"



---

archive/issue_comments_502255.json:
```json
{
    "body": "<a id='comment:48'></a>\nOkay, let's try this.",
    "created_at": "2019-01-21T07:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502255",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:48'></a>
Okay, let's try this.



---

archive/issue_comments_502256.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-01-21T07:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502256",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_502257.json:
```json
{
    "body": "Changing commit from \"54179cdace30db612c53e2626beab20c2e09f903\" to \"08a92c96413f26e1a63fe346ab98fd5265cd0ef5\"",
    "created_at": "2019-01-21T07:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "54179cdace30db612c53e2626beab20c2e09f903" to "08a92c96413f26e1a63fe346ab98fd5265cd0ef5"



---

archive/issue_comments_502258.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[08a92c9](https://github.com/sagemath/sagetrac-mirror/commit/08a92c96413f26e1a63fe346ab98fd5265cd0ef5)|`trac 26451: patch Sphinx's graphviz.py`|",
    "created_at": "2019-01-21T07:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[08a92c9](https://github.com/sagemath/sagetrac-mirror/commit/08a92c96413f26e1a63fe346ab98fd5265cd0ef5)|`trac 26451: patch Sphinx's graphviz.py`|



---

archive/issue_comments_502259.json:
```json
{
    "body": "<a id='comment:50'></a>\nI'd rather wait until the dependency is actually merged to review this.",
    "created_at": "2019-01-21T07:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502259",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
I'd rather wait until the dependency is actually merged to review this.



---

archive/issue_comments_502260.json:
```json
{
    "body": "<a id='comment:51'></a>\nWhat's the upstream story of that patch? Was it proposed somewhere? What is its purpose?",
    "created_at": "2019-01-22T20:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502260",
    "user": "https://github.com/timokau"
}
```

<a id='comment:51'></a>
What's the upstream story of that patch? Was it proposed somewhere? What is its purpose?



---

archive/issue_comments_502261.json:
```json
{
    "body": "<a id='comment:52'></a>\nFor its purpose, see comments 25-30, 39, and maybe some others. (Search this page for \"graphviz\".) Basically, Sphinx needlessly copies the file `graphviz.css` to `inventory/en/refererence/MODULE/_static/` directories, and then that confuses the intersphinx build. I haven't reported it upstream because I don't know how Sage-specific it is. We have our own inventory builder, our own \"multidocs\" extension, etc., and it is not clear how much those are responsible for the problem.\n\nI would also not be surprised if there were better ways to handle the problem with `graphviz.css`. I believe that my suggestion works, so now is the time to confirm that and then to improve on it. (Or wait until #26949 is merged and then do that.)",
    "created_at": "2019-01-22T20:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502261",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:52'></a>
For its purpose, see comments 25-30, 39, and maybe some others. (Search this page for "graphviz".) Basically, Sphinx needlessly copies the file `graphviz.css` to `inventory/en/refererence/MODULE/_static/` directories, and then that confuses the intersphinx build. I haven't reported it upstream because I don't know how Sage-specific it is. We have our own inventory builder, our own "multidocs" extension, etc., and it is not clear how much those are responsible for the problem.

I would also not be surprised if there were better ways to handle the problem with `graphviz.css`. I believe that my suggestion works, so now is the time to confirm that and then to improve on it. (Or wait until #26949 is merged and then do that.)



---

archive/issue_comments_502262.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/26451\" to \"u/jdemeyer/26451\"",
    "created_at": "2019-01-29T08:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502262",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/jhpalmieri/26451" to "u/jdemeyer/26451"



---

archive/issue_comments_502263.json:
```json
{
    "body": "Changing dependencies from \"#26949\" to \"\"",
    "created_at": "2019-01-29T08:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502263",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#26949" to ""



---

archive/issue_comments_502264.json:
```json
{
    "body": "<a id='comment:54'></a>\nRebased to 8.7.beta1\n\n---\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[fe643be](https://github.com/sagemath/sagetrac-mirror/commit/fe643be82b82a4bb06ee04cbe24421fb9c55d97e)|`Upgrade to Sphinx 1.8.1`|\n|[e7aa042](https://github.com/sagemath/sagetrac-mirror/commit/e7aa0422d570a48265a1bf351e9237868fea31c4)|`Call Sphinx() 1.8 constructor`|\n|[fd941c1](https://github.com/sagemath/sagetrac-mirror/commit/fd941c1288596aaa7206c64455ea2b6f10f52a2b)|`trac 26451: Sphinx 1.8.3`|\n|[c7248a2](https://github.com/sagemath/sagetrac-mirror/commit/c7248a2c9737e1af66fadee939c281f94a16f3fe)|`trac 26451: patch Sphinx's graphviz.py`|",
    "created_at": "2019-01-29T08:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502264",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
Rebased to 8.7.beta1

---
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[fe643be](https://github.com/sagemath/sagetrac-mirror/commit/fe643be82b82a4bb06ee04cbe24421fb9c55d97e)|`Upgrade to Sphinx 1.8.1`|
|[e7aa042](https://github.com/sagemath/sagetrac-mirror/commit/e7aa0422d570a48265a1bf351e9237868fea31c4)|`Call Sphinx() 1.8 constructor`|
|[fd941c1](https://github.com/sagemath/sagetrac-mirror/commit/fd941c1288596aaa7206c64455ea2b6f10f52a2b)|`trac 26451: Sphinx 1.8.3`|
|[c7248a2](https://github.com/sagemath/sagetrac-mirror/commit/c7248a2c9737e1af66fadee939c281f94a16f3fe)|`trac 26451: patch Sphinx's graphviz.py`|



---

archive/issue_comments_502265.json:
```json
{
    "body": "Changing commit from \"08a92c96413f26e1a63fe346ab98fd5265cd0ef5\" to \"c7248a2c9737e1af66fadee939c281f94a16f3fe\"",
    "created_at": "2019-01-29T08:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502265",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "08a92c96413f26e1a63fe346ab98fd5265cd0ef5" to "c7248a2c9737e1af66fadee939c281f94a16f3fe"



---

archive/issue_comments_502266.json:
```json
{
    "body": "<a id='comment:55'></a>\nI also restored some of the older commits, to make clear who did what.",
    "created_at": "2019-01-29T09:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502266",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
I also restored some of the older commits, to make clear who did what.



---

archive/issue_comments_502267.json:
```json
{
    "body": "<a id='comment:56'></a>\nBased on the diff, I'm willing to give this ticket the benefit of the doubt. I cannot say that I understand everything but there is nothing obviously bad.\n\nI haven't actually built the documentation yet, I'll do that next.",
    "created_at": "2019-01-29T09:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502267",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
Based on the diff, I'm willing to give this ticket the benefit of the doubt. I cannot say that I understand everything but there is nothing obviously bad.

I haven't actually built the documentation yet, I'll do that next.



---

archive/issue_comments_502268.json:
```json
{
    "body": "<a id='comment:57'></a>\nAs a packager I share Timo's concerns about the sphinx patch. Are there plans to upstream it?",
    "created_at": "2019-01-29T09:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502268",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:57'></a>
As a packager I share Timo's concerns about the sphinx patch. Are there plans to upstream it?



---

archive/issue_comments_502269.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [arojas](#comment%3A57):\n> As a packager I share Timo's concerns about the sphinx patch.\n\n\nIs there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?",
    "created_at": "2019-01-29T13:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502269",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>
Replying to [arojas](#comment%3A57):
> As a packager I share Timo's concerns about the sphinx patch.


Is there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?



---

archive/issue_comments_502270.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [jdemeyer](#comment%3A58):\n> Replying to [arojas](#comment%3A57):\n> > As a packager I share Timo's concerns about the sphinx patch.\n\n> \n> Is there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?\n\n\nYes, those other patches either address minor issues or are not relevant to Arch, so not having them is not a problem. This one is necessary for docs to build at all.",
    "created_at": "2019-01-29T13:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502270",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:59'></a>
Replying to [jdemeyer](#comment%3A58):
> Replying to [arojas](#comment%3A57):
> > As a packager I share Timo's concerns about the sphinx patch.

> 
> Is there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?


Yes, those other patches either address minor issues or are not relevant to Arch, so not having them is not a problem. This one is necessary for docs to build at all.



---

archive/issue_comments_502271.json:
```json
{
    "body": "<a id='comment:60'></a>\nThere is a minor regression in the produced documentation: a `<BLANKLIKE>` in a doctest is now rendered as `<BLANKLINE>` instead of an actual blank line.",
    "created_at": "2019-01-29T15:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502271",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>
There is a minor regression in the produced documentation: a `<BLANKLIKE>` in a doctest is now rendered as `<BLANKLINE>` instead of an actual blank line.



---

archive/issue_comments_502272.json:
```json
{
    "body": "<a id='comment:61'></a>\nThat's the only issue in the generated documentation I could find by diffing the docs before and after this ticket. It does have problems with parsing ``A = ` ``self``` (see `src/sage/categories/filtered_algebras_with_basis.py`) but the current version also has problems, just different problems.",
    "created_at": "2019-01-29T15:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502272",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>
That's the only issue in the generated documentation I could find by diffing the docs before and after this ticket. It does have problems with parsing ``A = ` ``self``` (see `src/sage/categories/filtered_algebras_with_basis.py`) but the current version also has problems, just different problems.



---

archive/issue_comments_502273.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [jdemeyer](#comment%3A60):\n> There is a minor regression in the produced documentation: a `<BLANKLIKE>` in a doctest is now rendered as `<BLANKLINE>` instead of an actual blank line.\n\n\nDid you check to see if other `nonmath_substitutes` from `misc.sagedoc` are handled properly? (Or I should say, at least as properly as they currently are?)",
    "created_at": "2019-01-29T19:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502273",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:62'></a>
Replying to [jdemeyer](#comment%3A60):
> There is a minor regression in the produced documentation: a `<BLANKLIKE>` in a doctest is now rendered as `<BLANKLINE>` instead of an actual blank line.


Did you check to see if other `nonmath_substitutes` from `misc.sagedoc` are handled properly? (Or I should say, at least as properly as they currently are?)



---

archive/issue_comments_502274.json:
```json
{
    "body": "<a id='comment:63'></a>\nMaybe this isn't handled by `sage.misc.sagedoc`, but should instead be handled by `sphinx.ext.doctest`: lines like\n\n```\n        if self.name == 'doctest':\n            if '<BLANKLINE>' in code:\n                # convert <BLANKLINE>s to ordinary blank lines for presentation\n                test = code\n                code = blankline_re.sub('', code)\n```\nThere weren't any changes in this between the old and new versions of Sphinx.",
    "created_at": "2019-01-29T20:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502274",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:63'></a>
Maybe this isn't handled by `sage.misc.sagedoc`, but should instead be handled by `sphinx.ext.doctest`: lines like

```
        if self.name == 'doctest':
            if '<BLANKLINE>' in code:
                # convert <BLANKLINE>s to ordinary blank lines for presentation
                test = code
                code = blankline_re.sub('', code)
```
There weren't any changes in this between the old and new versions of Sphinx.



---

archive/issue_comments_502275.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/26451\" to \"u/jhpalmieri/26451\"",
    "created_at": "2019-01-30T06:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502275",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "u/jdemeyer/26451" to "u/jhpalmieri/26451"



---

archive/issue_comments_502276.json:
```json
{
    "body": "Changing commit from \"c7248a2c9737e1af66fadee939c281f94a16f3fe\" to \"5f7b6ecf8b4596fb497642b71cd87b140428fbab\"",
    "created_at": "2019-01-30T06:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502276",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "c7248a2c9737e1af66fadee939c281f94a16f3fe" to "5f7b6ecf8b4596fb497642b71cd87b140428fbab"



---

archive/issue_comments_502277.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [arojas](#comment%3A59):\n> Replying to [jdemeyer](#comment%3A58):\n> > Replying to [arojas](#comment%3A57):\n> > > As a packager I share Timo's concerns about the sphinx patch.\n\n> > \n> > Is there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?\n\n> \n> Yes, those other patches either address minor issues or are not relevant to Arch, so not having them is not a problem. This one is necessary for docs to build at all.\n\n\nHere is maybe a better approach with graphviz.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[0347a79](https://github.com/sagemath/sagetrac-mirror/commit/0347a79e81c77867f78b448ef1dc0796af24a9fe)|`trac 26461: inventory builder: remove _static directory upon cleanup`|\n|[5f7b6ec](https://github.com/sagemath/sagetrac-mirror/commit/5f7b6ecf8b4596fb497642b71cd87b140428fbab)|`trac 26451: change 'app.builder.info' to 'logger.info'`|",
    "created_at": "2019-01-30T06:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502277",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:65'></a>
Replying to [arojas](#comment%3A59):
> Replying to [jdemeyer](#comment%3A58):
> > Replying to [arojas](#comment%3A57):
> > > As a packager I share Timo's concerns about the sphinx patch.

> > 
> > Is there is any particular reason that you're concerned about that specific patch and not the other patches that Sage has for Sphinx?

> 
> Yes, those other patches either address minor issues or are not relevant to Arch, so not having them is not a problem. This one is necessary for docs to build at all.


Here is maybe a better approach with graphviz.

---
New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[0347a79](https://github.com/sagemath/sagetrac-mirror/commit/0347a79e81c77867f78b448ef1dc0796af24a9fe)|`trac 26461: inventory builder: remove _static directory upon cleanup`|
|[5f7b6ec](https://github.com/sagemath/sagetrac-mirror/commit/5f7b6ecf8b4596fb497642b71cd87b140428fbab)|`trac 26451: change 'app.builder.info' to 'logger.info'`|



---

archive/issue_comments_502278.json:
```json
{
    "body": "<a id='comment:66'></a>\nThe point here is that the inventory builder is Sage-specific, and that's where the problem lies. So patching graphviz.py to deal with the inventory builder is okay (in my opinion) and would not make sense to report upstream. It looks like we can deal with it differently, though: rather than preventing graphviz.py from populating `_static` directories, we can remove them in the cleanup stage of the inventory build.",
    "created_at": "2019-01-30T06:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502278",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:66'></a>
The point here is that the inventory builder is Sage-specific, and that's where the problem lies. So patching graphviz.py to deal with the inventory builder is okay (in my opinion) and would not make sense to report upstream. It looks like we can deal with it differently, though: rather than preventing graphviz.py from populating `_static` directories, we can remove them in the cleanup stage of the inventory build.



---

archive/issue_comments_502279.json:
```json
{
    "body": "<a id='comment:67'></a>\nGreat! I'll look into the `<BLANKLINE>` thing now.",
    "created_at": "2019-01-30T14:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502279",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:67'></a>
Great! I'll look into the `<BLANKLINE>` thing now.



---

archive/issue_comments_502280.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [jhpalmieri](#comment%3A66):\n> The point here is that the inventory builder is Sage-specific, and that's where the problem lies. So patching graphviz.py to deal with the inventory builder is okay (in my opinion) and would not make sense to report upstream. It looks like we can deal with it differently, though: rather than preventing graphviz.py from populating `_static` directories, we can remove them in the cleanup stage of the inventory build.\n\n\nThanks. With this branch, the docs build fine on Arch with unpatched sphinx 1.8.3, modulo #26608",
    "created_at": "2019-01-30T14:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502280",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:68'></a>
Replying to [jhpalmieri](#comment%3A66):
> The point here is that the inventory builder is Sage-specific, and that's where the problem lies. So patching graphviz.py to deal with the inventory builder is okay (in my opinion) and would not make sense to report upstream. It looks like we can deal with it differently, though: rather than preventing graphviz.py from populating `_static` directories, we can remove them in the cleanup stage of the inventory build.


Thanks. With this branch, the docs build fine on Arch with unpatched sphinx 1.8.3, modulo #26608



---

archive/issue_comments_502281.json:
```json
{
    "body": "Changing commit from \"5f7b6ecf8b4596fb497642b71cd87b140428fbab\" to \"a3ceda240bb3e8bbb840d8635e5a62dc240d858a\"",
    "created_at": "2019-01-30T17:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5f7b6ecf8b4596fb497642b71cd87b140428fbab" to "a3ceda240bb3e8bbb840d8635e5a62dc240d858a"



---

archive/issue_comments_502282.json:
```json
{
    "body": "<a id='comment:69'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[a3568fd](https://github.com/sagemath/sagetrac-mirror/commit/a3568fd6a76821e4903ea7693d6d8204a6b37a5e)|`trac 26461: inventory builder: remove _static directory upon cleanup`|\n|[a3ceda2](https://github.com/sagemath/sagetrac-mirror/commit/a3ceda240bb3e8bbb840d8635e5a62dc240d858a)|`trac 26451: change 'app.builder.info' to 'logger.info'`|",
    "created_at": "2019-01-30T17:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:69'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[a3568fd](https://github.com/sagemath/sagetrac-mirror/commit/a3568fd6a76821e4903ea7693d6d8204a6b37a5e)|`trac 26461: inventory builder: remove _static directory upon cleanup`|
|[a3ceda2](https://github.com/sagemath/sagetrac-mirror/commit/a3ceda240bb3e8bbb840d8635e5a62dc240d858a)|`trac 26451: change 'app.builder.info' to 'logger.info'`|



---

archive/issue_comments_502283.json:
```json
{
    "body": "<a id='comment:70'></a>\nThe most recent commit is an attempt on my part to squash the commits that add and then remove the graphviz patch. My first time squashing, so I hope it worked.",
    "created_at": "2019-01-30T17:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502283",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:70'></a>
The most recent commit is an attempt on my part to squash the commits that add and then remove the graphviz patch. My first time squashing, so I hope it worked.



---

archive/issue_comments_502284.json:
```json
{
    "body": "<a id='comment:71'></a>\nThanks for avoiding the graphviz.py patch. Now we can also use the patch in Debian.\n\nIn Debian we have a few new failing doctests with sage 8.6, sphinx 1.8.3 and this patch. There is this:\n\n```\nsage -t --long src/doc/common/conf.py\n**********************************************************************\nFile \"src/doc/common/conf.py\", line 619, in doc.common.conf.call_intersphinx\nFailed example:\n    for line in open(thematic_index).readlines():  # optional - dochtml\n        if \"padics\" in line:\n            sys.stdout.write(line)\nExpected:\n    <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(in Sage Reference Manual: p-Adics v...)\"><span>Introduction to the -adics</span></a></li>\nGot:\n    <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(in Sage Reference Manual: p-Adics v8.6)\"><span>Introduction to the p-adics</span></a></li>\n```\nand 6 occurances of `ApplicationError: Source directory and destination directory cannot be identical` in `sagenb/misc/sphinxify.py` (which need to be fixed in sagenb I guess).",
    "created_at": "2019-01-31T23:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502284",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:71'></a>
Thanks for avoiding the graphviz.py patch. Now we can also use the patch in Debian.

In Debian we have a few new failing doctests with sage 8.6, sphinx 1.8.3 and this patch. There is this:

```
sage -t --long src/doc/common/conf.py
**********************************************************************
File "src/doc/common/conf.py", line 619, in doc.common.conf.call_intersphinx
Failed example:
    for line in open(thematic_index).readlines():  # optional - dochtml
        if "padics" in line:
            sys.stdout.write(line)
Expected:
    <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(in Sage Reference Manual: p-Adics v...)"><span>Introduction to the -adics</span></a></li>
Got:
    <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(in Sage Reference Manual: p-Adics v8.6)"><span>Introduction to the p-adics</span></a></li>
```
and 6 occurances of `ApplicationError: Source directory and destination directory cannot be identical` in `sagenb/misc/sphinxify.py` (which need to be fixed in sagenb I guess).



---

archive/issue_events_082555.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-31T23:41:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82555"
}
```



---

archive/issue_events_082556.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-31T23:41:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82556"
}
```



---

archive/issue_comments_502285.json:
```json
{
    "body": "<a id='comment:72'></a>\nCc Dima Pasechnik about the sagenb question.",
    "created_at": "2019-01-31T23:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502285",
    "user": "https://github.com/slel"
}
```

<a id='comment:72'></a>
Cc Dima Pasechnik about the sagenb question.



---

archive/issue_comments_502286.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [slelievre](#comment%3A72):\n> Cc Dima Pasechnik about the sagenb question.\nThanks. This is now https://github.com/sagemath/sagenb/issues/465",
    "created_at": "2019-02-01T00:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502286",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:73'></a>
Replying to [slelievre](#comment%3A72):
> Cc Dima Pasechnik about the sagenb question.
Thanks. This is now https://github.com/sagemath/sagenb/issues/465



---

archive/issue_comments_502287.json:
```json
{
    "body": "<a id='comment:74'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[62b989d](https://github.com/sagemath/sagetrac-mirror/commit/62b989d5ee1d9646db85ea56053cd22e9ffde5ab)|`trac 26451: fix doctest in src/doc/common/conf.py`|",
    "created_at": "2019-02-01T18:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[62b989d](https://github.com/sagemath/sagetrac-mirror/commit/62b989d5ee1d9646db85ea56053cd22e9ffde5ab)|`trac 26451: fix doctest in src/doc/common/conf.py`|



---

archive/issue_comments_502288.json:
```json
{
    "body": "Changing commit from \"a3ceda240bb3e8bbb840d8635e5a62dc240d858a\" to \"62b989d5ee1d9646db85ea56053cd22e9ffde5ab\"",
    "created_at": "2019-02-01T18:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a3ceda240bb3e8bbb840d8635e5a62dc240d858a" to "62b989d5ee1d9646db85ea56053cd22e9ffde5ab"



---

archive/issue_comments_502289.json:
```json
{
    "body": "<a id='comment:75'></a>\nThe SageNB problem should be fixed from their end, and here is a fix for the Sage doctest failure.",
    "created_at": "2019-02-01T18:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502289",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:75'></a>
The SageNB problem should be fixed from their end, and here is a fix for the Sage doctest failure.



---

archive/issue_comments_502290.json:
```json
{
    "body": "<a id='comment:76'></a>\nReplying to [jhpalmieri](#comment%3A75):\n> The SageNB problem should be fixed from their end, and here is a fix for the Sage doctest failure.\n\n\nIt is fixed now (the fix will be the next sagenb release).",
    "created_at": "2019-02-01T19:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502290",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:76'></a>
Replying to [jhpalmieri](#comment%3A75):
> The SageNB problem should be fixed from their end, and here is a fix for the Sage doctest failure.


It is fixed now (the fix will be the next sagenb release).



---

archive/issue_comments_502291.json:
```json
{
    "body": "<a id='comment:77'></a>\nOne annoying warning with this sphinx now:\n\n```\nsrc/sage_setup/docbuild/ext/sage_autodoc.py:1170: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature \n```\n\n(and the same warning in `sage_autodoc.py:1072`)",
    "created_at": "2019-02-01T19:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502291",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:77'></a>
One annoying warning with this sphinx now:

```
src/sage_setup/docbuild/ext/sage_autodoc.py:1170: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature 
```

(and the same warning in `sage_autodoc.py:1072`)



---

archive/issue_comments_502292.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-02-01T19:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502292",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_502293.json:
```json
{
    "body": "<a id='comment:78'></a>\nNoted in[comment:45](#comment%3A45). It's annoying but can we deal with it on another ticket?",
    "created_at": "2019-02-01T20:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502293",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:78'></a>
Noted in[comment:45](#comment%3A45). It's annoying but can we deal with it on another ticket?



---

archive/issue_comments_502294.json:
```json
{
    "body": "<a id='comment:79'></a>\nIn particular, I don't know how to solve it. `Signature` does not seem to be just a drop-in replacement. We could just silence the warnings, but that's probably a bad idea.",
    "created_at": "2019-02-01T20:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502294",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:79'></a>
In particular, I don't know how to solve it. `Signature` does not seem to be just a drop-in replacement. We could just silence the warnings, but that's probably a bad idea.



---

archive/issue_comments_502295.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2019-02-01T20:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502295",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_502296.json:
```json
{
    "body": "<a id='comment:80'></a>\nI agree, it needs a bit of coding (examples may be found by googling this warning...)\nA new ticket then. By the way, the sagenb update is on #27200.",
    "created_at": "2019-02-01T20:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502296",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:80'></a>
I agree, it needs a bit of coding (examples may be found by googling this warning...)
A new ticket then. By the way, the sagenb update is on #27200.



---

archive/issue_comments_502297.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-02-01T20:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502297",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_502298.json:
```json
{
    "body": "<a id='comment:81'></a>\nJeroen, do you agree with the positive review?",
    "created_at": "2019-02-01T21:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502298",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:81'></a>
Jeroen, do you agree with the positive review?



---

archive/issue_comments_502299.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-02-02T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502299",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_502300.json:
```json
{
    "body": "<a id='comment:82'></a>\nIs the `<BLANKLINE>` issue fixed?",
    "created_at": "2019-02-02T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502300",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:82'></a>
Is the `<BLANKLINE>` issue fixed?



---

archive/issue_comments_502301.json:
```json
{
    "body": "<a id='comment:83'></a>\nto me, blankline is blankline, how to check this...",
    "created_at": "2019-02-02T08:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502301",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:83'></a>
to me, blankline is blankline, how to check this...



---

archive/issue_comments_502302.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#27200\"",
    "created_at": "2019-02-02T09:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502302",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "" to "#27200"



---

archive/issue_comments_502303.json:
```json
{
    "body": "<a id='comment:84'></a>\nsome of the doctests here are fixed by #27200, adding as a dependency",
    "created_at": "2019-02-02T09:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502303",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:84'></a>
some of the doctests here are fixed by #27200, adding as a dependency



---

archive/issue_comments_502304.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-02-02T17:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502304",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_502305.json:
```json
{
    "body": "<a id='comment:85'></a>\nTwo problems:\n- The BLANKLINE problem is still there. For example, in `calculus/riemann.pyx`, a doctest for `complex_to_spiderweb` includes `<BLANKLINE>`. With the old Sphinx, this was printed as an actual blank line, while with the new one, it prints \"<BLANKLINE>\".\n- The real blocker: math is not rendered in the reference manual (although it is in the tutorial). Indeed, in the generated html files, these lines were included in the old Sphinx, but not in the new one. I don't know why, and I don't know if I have time figure it out right now:\n\n```\n    <script type=\"text/javascript\" src=\"../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js\"></script>\n    <script type=\"text/javascript\" src=\"../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js\"></script>\n```\nManually adding those lines fixes the problem, but they should be there automatically.",
    "created_at": "2019-02-02T17:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502305",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:85'></a>
Two problems:
- The BLANKLINE problem is still there. For example, in `calculus/riemann.pyx`, a doctest for `complex_to_spiderweb` includes `<BLANKLINE>`. With the old Sphinx, this was printed as an actual blank line, while with the new one, it prints "<BLANKLINE>".
- The real blocker: math is not rendered in the reference manual (although it is in the tutorial). Indeed, in the generated html files, these lines were included in the old Sphinx, but not in the new one. I don't know why, and I don't know if I have time figure it out right now:

```
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
```
Manually adding those lines fixes the problem, but they should be there automatically.



---

archive/issue_comments_502306.json:
```json
{
    "body": "<a id='comment:86'></a>\nI tried to replace src/doc/common/themes/sageref with a symlink to src/doc/common/themes/sage, but this did not change the result (no TeX in reference manual).\n\nCould it be some special parallel hack that breaks it? I really have no idea.",
    "created_at": "2019-02-04T12:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502306",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:86'></a>
I tried to replace src/doc/common/themes/sageref with a symlink to src/doc/common/themes/sage, but this did not change the result (no TeX in reference manual).

Could it be some special parallel hack that breaks it? I really have no idea.



---

archive/issue_comments_502307.json:
```json
{
    "body": "<a id='comment:87'></a>\nI think the issue is that in the new Sphinx, `sphinx.ext.mathjax` has the line\n\n```\n    app.connect('env-check-consistency', install_mathjax)\n```\nAs far as I can tell, this means that those lines should be produced when `self.env.check_consistency()` is run, but it doesn't get run during the reference/html build. I'm guessing this is because of our multidocs extension, or maybe the sage_autodoc extension.",
    "created_at": "2019-02-05T18:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502307",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:87'></a>
I think the issue is that in the new Sphinx, `sphinx.ext.mathjax` has the line

```
    app.connect('env-check-consistency', install_mathjax)
```
As far as I can tell, this means that those lines should be produced when `self.env.check_consistency()` is run, but it doesn't get run during the reference/html build. I'm guessing this is because of our multidocs extension, or maybe the sage_autodoc extension.



---

archive/issue_comments_502308.json:
```json
{
    "body": "<a id='comment:89'></a>\nSphinx 1.8.4 was released and uploaded to PyPI on 2019-02-03.\n\n- **Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz",
    "created_at": "2019-02-14T14:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502308",
    "user": "https://github.com/slel"
}
```

<a id='comment:89'></a>
Sphinx 1.8.4 was released and uploaded to PyPI on 2019-02-03.

- **Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz



---

archive/issue_comments_502309.json:
```json
{
    "body": "<a id='comment:90'></a>\nUnfortunately this doesn't help with the mathjax issue. I'm stuck, so I hope someone else has some ideas.",
    "created_at": "2019-02-14T16:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502309",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:90'></a>
Unfortunately this doesn't help with the mathjax issue. I'm stuck, so I hope someone else has some ideas.



---

archive/issue_comments_502310.json:
```json
{
    "body": "Changing commit from \"62b989d5ee1d9646db85ea56053cd22e9ffde5ab\" to \"d566fc954df56bf61efab7eaf25d7ee87fee5f11\"",
    "created_at": "2019-02-19T22:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "62b989d5ee1d9646db85ea56053cd22e9ffde5ab" to "d566fc954df56bf61efab7eaf25d7ee87fee5f11"



---

archive/issue_comments_502311.json:
```json
{
    "body": "<a id='comment:91'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[bc5d0ab](https://github.com/sagemath/sagetrac-mirror/commit/bc5d0abb172cdb75f3b13a76f8e80c3e8841ca48)|`Upgrade to Sphinx 1.8.1`|\n|[8a55761](https://github.com/sagemath/sagetrac-mirror/commit/8a55761e8c54a382f6a36475212ac98754c2f3e9)|`Call Sphinx() 1.8 constructor`|\n|[d3b6076](https://github.com/sagemath/sagetrac-mirror/commit/d3b6076190ee56ad4d0425ae01994bd549d74ec8)|`trac 26451: Sphinx 1.8.3`|\n|[09a1415](https://github.com/sagemath/sagetrac-mirror/commit/09a1415cd5bfd7c0d67551631a5ef6bf625ec5dd)|`trac 26461: inventory builder: remove _static directory upon cleanup`|\n|[0ed8d9e](https://github.com/sagemath/sagetrac-mirror/commit/0ed8d9edc215961ad5989a0c10b4c84c84738a41)|`trac 26451: change 'app.builder.info' to 'logger.info'`|\n|[caef351](https://github.com/sagemath/sagetrac-mirror/commit/caef35123c420973199afeeb254b93e92de58ed7)|`trac 26451: upgrade to Sphinx 1.8.4.`|\n|[0b93bc2](https://github.com/sagemath/sagetrac-mirror/commit/0b93bc29f23061ce97c1172512c72ba35a39978b)|`trac 26451: patch Sphinx so it recognizes \"sage:\"`|\n|[d566fc9](https://github.com/sagemath/sagetrac-mirror/commit/d566fc954df56bf61efab7eaf25d7ee87fee5f11)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|",
    "created_at": "2019-02-19T22:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[bc5d0ab](https://github.com/sagemath/sagetrac-mirror/commit/bc5d0abb172cdb75f3b13a76f8e80c3e8841ca48)|`Upgrade to Sphinx 1.8.1`|
|[8a55761](https://github.com/sagemath/sagetrac-mirror/commit/8a55761e8c54a382f6a36475212ac98754c2f3e9)|`Call Sphinx() 1.8 constructor`|
|[d3b6076](https://github.com/sagemath/sagetrac-mirror/commit/d3b6076190ee56ad4d0425ae01994bd549d74ec8)|`trac 26451: Sphinx 1.8.3`|
|[09a1415](https://github.com/sagemath/sagetrac-mirror/commit/09a1415cd5bfd7c0d67551631a5ef6bf625ec5dd)|`trac 26461: inventory builder: remove _static directory upon cleanup`|
|[0ed8d9e](https://github.com/sagemath/sagetrac-mirror/commit/0ed8d9edc215961ad5989a0c10b4c84c84738a41)|`trac 26451: change 'app.builder.info' to 'logger.info'`|
|[caef351](https://github.com/sagemath/sagetrac-mirror/commit/caef35123c420973199afeeb254b93e92de58ed7)|`trac 26451: upgrade to Sphinx 1.8.4.`|
|[0b93bc2](https://github.com/sagemath/sagetrac-mirror/commit/0b93bc29f23061ce97c1172512c72ba35a39978b)|`trac 26451: patch Sphinx so it recognizes "sage:"`|
|[d566fc9](https://github.com/sagemath/sagetrac-mirror/commit/d566fc954df56bf61efab7eaf25d7ee87fee5f11)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|



---

archive/issue_comments_502312.json:
```json
{
    "body": "<a id='comment:92'></a>\nOkay, I've fixed the mathjax problem and the `<BLANKLINE>` problem. The second of these involves patching Sphinx, so if you don't want patches, you will get `<BLANKLINE>` in some doctest output, rather than an actual blank line. Sphinx still produces lots of `formatargspec() is now deprecated` warnings, but I suggest we deal with those in a separate ticket.\n\nOh, by the way, [Sphinx 2.0.0.beta1](https://github.com/sphinx-doc/sphinx/blob/v2.0.0b1/CHANGES) has been released. It drops Python 2.7 support, so it's not for us yet.",
    "created_at": "2019-02-19T22:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502312",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:92'></a>
Okay, I've fixed the mathjax problem and the `<BLANKLINE>` problem. The second of these involves patching Sphinx, so if you don't want patches, you will get `<BLANKLINE>` in some doctest output, rather than an actual blank line. Sphinx still produces lots of `formatargspec() is now deprecated` warnings, but I suggest we deal with those in a separate ticket.

Oh, by the way, [Sphinx 2.0.0.beta1](https://github.com/sphinx-doc/sphinx/blob/v2.0.0b1/CHANGES) has been released. It drops Python 2.7 support, so it's not for us yet.



---

archive/issue_comments_502313.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-02-19T23:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502313",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_502314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n ```\n coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.\n \n-**Tarball**: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz\n+**Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz\n``````\n",
    "created_at": "2019-02-19T23:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502314",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 ```
 coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.
 
-**Tarball**: https://files.pythonhosted.org/packages/4d/ed/4595274b5c9ce53a768cc0804ef65fd6282c956b93919a969e98d53894e4/Sphinx-1.8.3.tar.gz
+**Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz
``````




---

archive/issue_events_082557.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "rename": {
        "from": "Upgrade to Sphinx 1.8.3",
        "to": "Upgrade to Sphinx 1.8.4"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82557"
}
```



---

archive/issue_comments_502315.json:
```json
{
    "body": "Changing keywords from \"sphinx, conda\" to \"sphinx, conda, upgrade\".",
    "created_at": "2019-02-19T23:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502315",
    "user": "https://github.com/slel"
}
```

Changing keywords from "sphinx, conda" to "sphinx, conda, upgrade".



---

archive/issue_comments_502316.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket is to upgrade to Sphinx 1.8.2.\n+This ticket is to upgrade to Sphinx 1.8.4.\n \n Our previous upgrade was to Sphinx 1.7.6 in #26033.\n \n@@ -7,6 +7,7 @@\n ```\n ApplicationError: Source directory and destination directory cannot be identical\n ```\n-coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.\n+coming out of Sphinx in conda as they have changed the argument checking\n+of the `Sphinx()` constructor it seems.\n \n **Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz\n``````\n",
    "created_at": "2019-02-19T23:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502316",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket is to upgrade to Sphinx 1.8.2.
+This ticket is to upgrade to Sphinx 1.8.4.
 
 Our previous upgrade was to Sphinx 1.7.6 in #26033.
 
@@ -7,6 +7,7 @@
 ```
 ApplicationError: Source directory and destination directory cannot be identical
 ```
-coming out of Sphinx in conda as they have changed the argument checking of the `Sphinx()` constructor it seems.
+coming out of Sphinx in conda as they have changed the argument checking
+of the `Sphinx()` constructor it seems.
 
 **Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz
``````




---

archive/issue_comments_502317.json:
```json
{
    "body": "<a id='comment:95'></a>\nIf all else fails, we can just silence those deprecation warnings the same way we silence lots of other \"chatter\" in the Sphinx build. See `sage_setup/docbuild/sphinxbuild.py`.",
    "created_at": "2019-02-19T23:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502317",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:95'></a>
If all else fails, we can just silence those deprecation warnings the same way we silence lots of other "chatter" in the Sphinx build. See `sage_setup/docbuild/sphinxbuild.py`.



---

archive/issue_comments_502318.json:
```json
{
    "body": "<a id='comment:96'></a>\nWhy wasn't the `sage:` prompt patch necessary before?\n\nOn nixos with this patch applied I get some kind of unicode issue (not sure if its 100% reproducible; I think I've seen it working some time):\n\n```\nsage -t docsrc/common/conf.py\n**********************************************************************\nFile \"docsrc/common/conf.py\", line 614, in common.conf.call_intersphinx\nFailed example:\n    for line in open(thematic_index).readlines():  # optional - dochtml\n        if \"padics\" in line:\n            sys.stdout.write(line)\nExpected:\n    <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(i\nn Sage Reference Manual: p-Adics v...)\"><span>Introduction to the p-adics</span></a></li>\nGot:\n    <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(\u0432\n Sage Reference Manual: p-Adics v8.6)\"><span>Introduction to the p-adics</span></a></li>\n**********************************************************************\n1 item had failures:\n   1 of   4 in common.conf.call_intersphinx\n    [3 tests, 1 failure, 0.01 s]\n```\n\nI don't know if this has to do with some different dependency on nix or if it could also happen on sage-the-distro.",
    "created_at": "2019-02-20T14:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502318",
    "user": "https://github.com/timokau"
}
```

<a id='comment:96'></a>
Why wasn't the `sage:` prompt patch necessary before?

On nixos with this patch applied I get some kind of unicode issue (not sure if its 100% reproducible; I think I've seen it working some time):

```
sage -t docsrc/common/conf.py
**********************************************************************
File "docsrc/common/conf.py", line 614, in common.conf.call_intersphinx
Failed example:
    for line in open(thematic_index).readlines():  # optional - dochtml
        if "padics" in line:
            sys.stdout.write(line)
Expected:
    <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(i
n Sage Reference Manual: p-Adics v...)"><span>Introduction to the p-adics</span></a></li>
Got:
    <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(в
 Sage Reference Manual: p-Adics v8.6)"><span>Introduction to the p-adics</span></a></li>
**********************************************************************
1 item had failures:
   1 of   4 in common.conf.call_intersphinx
    [3 tests, 1 failure, 0.01 s]
```

I don't know if this has to do with some different dependency on nix or if it could also happen on sage-the-distro.



---

archive/issue_comments_502319.json:
```json
{
    "body": "<a id='comment:97'></a>\nReplying to [gh-timokau](#comment%3A96):\n> Why wasn't the `sage:` prompt patch necessary before?\n\n\nBecause the file being patched didn't exist before.\n\n> On nixos with this patch applied I get some kind of unicode issue (not sure if its 100% reproducible; I think I've seen it working some time):\n> \n> \n> ```\n> sage -t docsrc/common/conf.py\n> **********************************************************************\n> File \"docsrc/common/conf.py\", line 614, in common.conf.call_intersphinx\n> Failed example:\n>     for line in open(thematic_index).readlines():  # optional - dochtml\n>         if \"padics\" in line:\n>             sys.stdout.write(line)\n> Expected:\n>     <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(i\n> n Sage Reference Manual: p-Adics v...)\"><span>Introduction to the p-adics</span></a></li>\n> Got:\n>     <li><a class=\"reference external\" href=\"../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial\" title=\"(\u0432\n>  Sage Reference Manual: p-Adics v8.6)\"><span>Introduction to the p-adics</span></a></li>\n> **********************************************************************\n> 1 item had failures:\n>    1 of   4 in common.conf.call_intersphinx\n>     [3 tests, 1 failure, 0.01 s]\n> ```\n> \n> I don't know if this has to do with some different dependency on nix or if it could also happen on sage-the-distro.\n\n\nI don't see this with sage-the-distro. The file `doc/common/conf.py` had its doctests changed recently in another ticket (to fix Python 3 issues, I think). This branch doesn't touch that file, and I don't see why it would be related.",
    "created_at": "2019-02-20T16:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502319",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:97'></a>
Replying to [gh-timokau](#comment%3A96):
> Why wasn't the `sage:` prompt patch necessary before?


Because the file being patched didn't exist before.

> On nixos with this patch applied I get some kind of unicode issue (not sure if its 100% reproducible; I think I've seen it working some time):
> 
> 
> ```
> sage -t docsrc/common/conf.py
> **********************************************************************
> File "docsrc/common/conf.py", line 614, in common.conf.call_intersphinx
> Failed example:
>     for line in open(thematic_index).readlines():  # optional - dochtml
>         if "padics" in line:
>             sys.stdout.write(line)
> Expected:
>     <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(i
> n Sage Reference Manual: p-Adics v...)"><span>Introduction to the p-adics</span></a></li>
> Got:
>     <li><a class="reference external" href="../reference/padics/sage/rings/padics/tutorial.html#sage-rings-padics-tutorial" title="(в
>  Sage Reference Manual: p-Adics v8.6)"><span>Introduction to the p-adics</span></a></li>
> **********************************************************************
> 1 item had failures:
>    1 of   4 in common.conf.call_intersphinx
>     [3 tests, 1 failure, 0.01 s]
> ```
> 
> I don't know if this has to do with some different dependency on nix or if it could also happen on sage-the-distro.


I don't see this with sage-the-distro. The file `doc/common/conf.py` had its doctests changed recently in another ticket (to fix Python 3 issues, I think). This branch doesn't touch that file, and I don't see why it would be related.



---

archive/issue_comments_502320.json:
```json
{
    "body": "<a id='comment:98'></a>\nReplying to [jhpalmieri](#comment%3A92):\n> Okay, I've fixed the mathjax problem and the `<BLANKLINE>` problem. The second of these involves patching Sphinx, so if you don't want patches, you will get `<BLANKLINE>` in some doctest output, rather than an actual blank line.\n\n\nInstead of adding this very sage specific patch to sphinx, why not do this in a sphinx extension?\n\nLike this:\n\n```\n--- a/src/doc/common/conf.py\n+++ b/src/doc/common/conf.py\n@@ -13,7 +13,7 @@\n \n # Add any Sphinx extension module names here, as strings. They can be extensions\n # coming with Sphinx (named 'sphinx.ext.*') or your custom ones.\n-extensions = ['inventory_builder', 'multidocs',\n+extensions = ['inventory_builder', 'multidocs', 'trim_doctest_flags',\n               'sage_autodoc',  'sphinx.ext.graphviz',\n               'sphinx.ext.inheritance_diagram', 'sphinx.ext.todo',\n               'sphinx.ext.extlinks', 'matplotlib.sphinxext.plot_directive']\n--- /dev/null\n+++ b/src/sage_setup/docbuild/ext/trim_doctest_flags.py\n@@ -0,0 +1,67 @@\n+\"\"\"\n+    trim doctest flags\n+    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+    transforms for code-blocks.\n+\n+    modified from sphinx.transforms.post_transforms.code\n+\n+    :copyright: Copyright 2007-2019 by the Sphinx team, see AUTHORS.\n+    :license: BSD, see LICENSE for details.\n+\"\"\"\n+\n+import sys\n+from typing import NamedTuple\n+\n+from docutils import nodes\n+from pygments.lexers import PythonConsoleLexer, guess_lexer\n+\n+from sphinx import addnodes\n+from sphinx.ext import doctest\n+from sphinx.transforms import SphinxTransform\n+\n+class TrimDoctestFlagsTransformSage(SphinxTransform):\n+    \"\"\"\n+    Trim doctest flags like ``# doctest: +FLAG`` from sage code-blocks.\n+\n+    The only difference from Sphinx' TrimDoctestFlagsTransform is that\n+    here lines starting with 'sage:' rather than '>>>' are transformed.\n+    \"\"\"\n+    default_priority = 401\n+\n+    def apply(self, **kwargs):\n+        # type: (Any) -> None\n+        if not self.config.trim_doctest_flags:\n+            return\n+\n+        for node in self.document.traverse(nodes.literal_block):\n+            if self.is_pyconsole(node):\n+                source = node.rawsource\n+                source = doctest.blankline_re.sub('', source)\n+                source = doctest.doctestopt_re.sub('', source)\n+                node.rawsource = source\n+                node[:] = [nodes.Text(source)]\n+\n+    @staticmethod\n+    def is_pyconsole(node):\n+        # type: (nodes.literal_block) -> bool\n+        if node.rawsource != node.astext():\n+            return False  # skip parsed-literal node\n+\n+        language = node.get('language')\n+        if language in ('pycon', 'pycon3'):\n+            return True\n+        elif language in ('py', 'py3', 'python', 'python3', 'default'):\n+            return node.rawsource.startswith('sage:')\n+        elif language == 'guess':\n+            try:\n+                lexer = guess_lexer(node.rawsource)\n+                return isinstance(lexer, PythonConsoleLexer)\n+            except Exception:\n+                pass\n+\n+        return False\n+\n+\n+def setup(app):\n+    app.add_post_transform(TrimDoctestFlagsTransformSage)\n```\n\nhttps://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/u1-sphinx-1.8-doctest-transform.patch",
    "created_at": "2019-02-24T14:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502320",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:98'></a>
Replying to [jhpalmieri](#comment%3A92):
> Okay, I've fixed the mathjax problem and the `<BLANKLINE>` problem. The second of these involves patching Sphinx, so if you don't want patches, you will get `<BLANKLINE>` in some doctest output, rather than an actual blank line.


Instead of adding this very sage specific patch to sphinx, why not do this in a sphinx extension?

Like this:

```
--- a/src/doc/common/conf.py
+++ b/src/doc/common/conf.py
@@ -13,7 +13,7 @@
 
 # Add any Sphinx extension module names here, as strings. They can be extensions
 # coming with Sphinx (named 'sphinx.ext.*') or your custom ones.
-extensions = ['inventory_builder', 'multidocs',
+extensions = ['inventory_builder', 'multidocs', 'trim_doctest_flags',
               'sage_autodoc',  'sphinx.ext.graphviz',
               'sphinx.ext.inheritance_diagram', 'sphinx.ext.todo',
               'sphinx.ext.extlinks', 'matplotlib.sphinxext.plot_directive']
--- /dev/null
+++ b/src/sage_setup/docbuild/ext/trim_doctest_flags.py
@@ -0,0 +1,67 @@
+"""
+    trim doctest flags
+    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+    transforms for code-blocks.
+
+    modified from sphinx.transforms.post_transforms.code
+
+    :copyright: Copyright 2007-2019 by the Sphinx team, see AUTHORS.
+    :license: BSD, see LICENSE for details.
+"""
+
+import sys
+from typing import NamedTuple
+
+from docutils import nodes
+from pygments.lexers import PythonConsoleLexer, guess_lexer
+
+from sphinx import addnodes
+from sphinx.ext import doctest
+from sphinx.transforms import SphinxTransform
+
+class TrimDoctestFlagsTransformSage(SphinxTransform):
+    """
+    Trim doctest flags like ``# doctest: +FLAG`` from sage code-blocks.
+
+    The only difference from Sphinx' TrimDoctestFlagsTransform is that
+    here lines starting with 'sage:' rather than '>>>' are transformed.
+    """
+    default_priority = 401
+
+    def apply(self, **kwargs):
+        # type: (Any) -> None
+        if not self.config.trim_doctest_flags:
+            return
+
+        for node in self.document.traverse(nodes.literal_block):
+            if self.is_pyconsole(node):
+                source = node.rawsource
+                source = doctest.blankline_re.sub('', source)
+                source = doctest.doctestopt_re.sub('', source)
+                node.rawsource = source
+                node[:] = [nodes.Text(source)]
+
+    @staticmethod
+    def is_pyconsole(node):
+        # type: (nodes.literal_block) -> bool
+        if node.rawsource != node.astext():
+            return False  # skip parsed-literal node
+
+        language = node.get('language')
+        if language in ('pycon', 'pycon3'):
+            return True
+        elif language in ('py', 'py3', 'python', 'python3', 'default'):
+            return node.rawsource.startswith('sage:')
+        elif language == 'guess':
+            try:
+                lexer = guess_lexer(node.rawsource)
+                return isinstance(lexer, PythonConsoleLexer)
+            except Exception:
+                pass
+
+        return False
+
+
+def setup(app):
+    app.add_post_transform(TrimDoctestFlagsTransformSage)
```

https://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/u1-sphinx-1.8-doctest-transform.patch



---

archive/issue_comments_502321.json:
```json
{
    "body": "<a id='comment:99'></a>\nThere is a balance to be struck: we're more or less forking Sphinx with extensions like this, so they require maintenance: as Sphinx changes, so should the extension. This recently required a fair amount of work for Sage's autodoc extension (#26949).\n\nSo is it better to patch Sphinx or create an extension?",
    "created_at": "2019-02-24T16:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502321",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:99'></a>
There is a balance to be struck: we're more or less forking Sphinx with extensions like this, so they require maintenance: as Sphinx changes, so should the extension. This recently required a fair amount of work for Sage's autodoc extension (#26949).

So is it better to patch Sphinx or create an extension?



---

archive/issue_comments_502322.json:
```json
{
    "body": "<a id='comment:0'></a>\nAny more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?",
    "created_at": "2019-03-07T04:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502322",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:0'></a>
Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?



---

archive/issue_comments_502323.json:
```json
{
    "body": "<a id='comment:101'></a>\nReplying to [jhpalmieri](#comment%3A100):\n> Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?\n\n\nI already implemented it and posted the patch here. Is there something wrong with it?",
    "created_at": "2019-03-07T09:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502323",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:101'></a>
Replying to [jhpalmieri](#comment%3A100):
> Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?


I already implemented it and posted the patch here. Is there something wrong with it?



---

archive/issue_comments_502324.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [thansen](#comment%3A101):\n> Replying to [jhpalmieri](#comment%3A100):\n> > Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?\n\n> \n> I already implemented it and posted the patch here. Is there something wrong with it?\n\n\nCare to propose a full branch? (So that it's 100% clear what the solution is)",
    "created_at": "2019-03-07T12:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502324",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:102'></a>
Replying to [thansen](#comment%3A101):
> Replying to [jhpalmieri](#comment%3A100):
> > Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?

> 
> I already implemented it and posted the patch here. Is there something wrong with it?


Care to propose a full branch? (So that it's 100% clear what the solution is)



---

archive/issue_comments_502325.json:
```json
{
    "body": "<a id='comment:103'></a>\nReplying to [thansen](#comment%3A101):\n> Replying to [jhpalmieri](#comment%3A100):\n> > Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?\n\n> \n> I already implemented it and posted the patch here. Is there something wrong with it?\n\n\nNot necessarily, but I did respond and ask a question about the philosophy of patches vs. extensions. I was hoping for a discussion.",
    "created_at": "2019-03-07T16:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502325",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:103'></a>
Replying to [thansen](#comment%3A101):
> Replying to [jhpalmieri](#comment%3A100):
> > Any more comments on this? If people who deal with distributions feel that using a Sphinx extension would be better than a patch, then please go ahead and implement that. If people feel that patching is better, then what else needs to be done?

> 
> I already implemented it and posted the patch here. Is there something wrong with it?


Not necessarily, but I did respond and ask a question about the philosophy of patches vs. extensions. I was hoping for a discussion.



---

archive/issue_comments_502326.json:
```json
{
    "body": "<a id='comment:4'></a>\nFrom a packagers standpoint the extension is clearly better. Since the sphinx patch does not make much sense for us we would probably have to keep patching in the extension anyway. But I thought that was obvious and you were asking for opinions of sage developers.",
    "created_at": "2019-03-07T16:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502326",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:4'></a>
From a packagers standpoint the extension is clearly better. Since the sphinx patch does not make much sense for us we would probably have to keep patching in the extension anyway. But I thought that was obvious and you were asking for opinions of sage developers.



---

archive/issue_comments_502327.json:
```json
{
    "body": "<a id='comment:5'></a>\nFrom developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...",
    "created_at": "2019-03-15T16:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502327",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...



---

archive/issue_comments_502328.json:
```json
{
    "body": "<a id='comment:106'></a>\nReplying to [dimpase](#comment%3A105):\n> From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...\n\n\nOk, here is a branch:\nhttps://git.sagemath.org/sage.git/log/?h=u/thansen/26451",
    "created_at": "2019-03-17T13:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502328",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:106'></a>
Replying to [dimpase](#comment%3A105):
> From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...


Ok, here is a branch:
https://git.sagemath.org/sage.git/log/?h=u/thansen/26451



---

archive/issue_comments_502329.json:
```json
{
    "body": "<a id='comment:107'></a>\nReplying to [thansen](#comment%3A106):\n> Replying to [dimpase](#comment%3A105):\n> > From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...\n\n> \n> Ok, here is a branch:\n> https://git.sagemath.org/sage.git/log/?h=u/thansen/26451\n\n\nClarification. I am assuming this needs to be applied on top of the current branch already in this ticket. Right?",
    "created_at": "2019-03-17T21:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502329",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:107'></a>
Replying to [thansen](#comment%3A106):
> Replying to [dimpase](#comment%3A105):
> > From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...

> 
> Ok, here is a branch:
> https://git.sagemath.org/sage.git/log/?h=u/thansen/26451


Clarification. I am assuming this needs to be applied on top of the current branch already in this ticket. Right?



---

archive/issue_comments_502330.json:
```json
{
    "body": "<a id='comment:108'></a>\nReplying to [fbissey](#comment%3A107):\n> Replying to [thansen](#comment%3A106):\n> > Replying to [dimpase](#comment%3A105):\n> > > From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...\n\n> > \n> > Ok, here is a branch:\n> > https://git.sagemath.org/sage.git/log/?h=u/thansen/26451\n\n> \n> Clarification. I am assuming this needs to be applied on top of the current branch already in this ticket. Right?\n\n\nNo, this is just the branch of this ticket with John's fix for the <BLANKLINE> issue removed and my patch applied.",
    "created_at": "2019-03-17T23:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502330",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:108'></a>
Replying to [fbissey](#comment%3A107):
> Replying to [thansen](#comment%3A106):
> > Replying to [dimpase](#comment%3A105):
> > > From developers point of view, we appreciate your efforts a lot --- although  we'd much prefer a branch with your solution to a link to Debian patches, from which one sometimes might need to do reverse engineering to get what's needed and works in Sage sans Debian...

> > 
> > Ok, here is a branch:
> > https://git.sagemath.org/sage.git/log/?h=u/thansen/26451

> 
> Clarification. I am assuming this needs to be applied on top of the current branch already in this ticket. Right?


No, this is just the branch of this ticket with John's fix for the <BLANKLINE> issue removed and my patch applied.



---

archive/issue_comments_502331.json:
```json
{
    "body": "<a id='comment:9'></a>\nSo, building reference manual, mathjax works on u/thansen/26451",
    "created_at": "2019-03-17T23:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502331",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
So, building reference manual, mathjax works on u/thansen/26451



---

archive/issue_comments_502332.json:
```json
{
    "body": "<a id='comment:110'></a>\nReplying to [dimpase](#comment%3A109):\n> So, building reference manual, mathjax works on u/thansen/26451\n\n\nThe thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.",
    "created_at": "2019-03-17T23:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502332",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:110'></a>
Replying to [dimpase](#comment%3A109):
> So, building reference manual, mathjax works on u/thansen/26451


The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.



---

archive/issue_comments_502333.json:
```json
{
    "body": "<a id='comment:111'></a>\nReplying to [thansen](#comment%3A110):\n> Replying to [dimpase](#comment%3A109):\n> > So, building reference manual, mathjax works on u/thansen/26451\n\n> \n> The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.\n\n\nSorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.",
    "created_at": "2019-03-18T09:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502333",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:111'></a>
Replying to [thansen](#comment%3A110):
> Replying to [dimpase](#comment%3A109):
> > So, building reference manual, mathjax works on u/thansen/26451

> 
> The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.


Sorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.



---

archive/issue_comments_502334.json:
```json
{
    "body": "<a id='comment:112'></a>\nReplying to [dimpase](#comment%3A111):\n> Replying to [thansen](#comment%3A110):\n> > Replying to [dimpase](#comment%3A109):\n> > > So, building reference manual, mathjax works on u/thansen/26451\n\n> > \n> > The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.\n\n> \n> Sorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.\n\n\nThat's why I asked the question earlier. I was going to do just that on thansen's behalf, but when I clicked on the link I could only see one commit. Now that may just have been the way I navigated there, that's why I asked.",
    "created_at": "2019-03-18T09:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502334",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:112'></a>
Replying to [dimpase](#comment%3A111):
> Replying to [thansen](#comment%3A110):
> > Replying to [dimpase](#comment%3A109):
> > > So, building reference manual, mathjax works on u/thansen/26451

> > 
> > The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.

> 
> Sorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.


That's why I asked the question earlier. I was going to do just that on thansen's behalf, but when I clicked on the link I could only see one commit. Now that may just have been the way I navigated there, that's why I asked.



---

archive/issue_comments_502335.json:
```json
{
    "body": "<a id='comment:113'></a>\nReplying to [dimpase](#comment%3A111):\n> Replying to [thansen](#comment%3A110):\n> > Replying to [dimpase](#comment%3A109):\n> > > So, building reference manual, mathjax works on u/thansen/26451\n\n> > \n> > The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.\n\n> \n> Sorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.\n\n\nYes, it's a complete branch. I didn't put it in the branch field of the ticket because this is John's ticket and he never said we should use my fix instead of his.",
    "created_at": "2019-03-18T10:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502335",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:113'></a>
Replying to [dimpase](#comment%3A111):
> Replying to [thansen](#comment%3A110):
> > Replying to [dimpase](#comment%3A109):
> > > So, building reference manual, mathjax works on u/thansen/26451

> > 
> > The thing I changed has nothing to do with mathjax, it's a different fix for the <BLANKLINE> issue.

> 
> Sorry, I got lost here. Is `u/thansen/26451` a complete branch? If so, please put it into the Branch field of the ticket, and add your name to the list of authors.


Yes, it's a complete branch. I didn't put it in the branch field of the ticket because this is John's ticket and he never said we should use my fix instead of his.



---

archive/issue_comments_502336.json:
```json
{
    "body": "Changing author from \"Julian R\u00fcth, Jeroen Demeyer, John Palmieri\" to \"Julian R\u00fcth, Jeroen Demeyer, John Palmieri, Tobias Hansen\"",
    "created_at": "2019-03-18T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502336",
    "user": "https://github.com/dimpase"
}
```

Changing author from "Julian Rüth, Jeroen Demeyer, John Palmieri" to "Julian Rüth, Jeroen Demeyer, John Palmieri, Tobias Hansen"



---

archive/issue_comments_502337.json:
```json
{
    "body": "<a id='comment:4'></a>\nIMHO John won't mind---in fact he appears to have said OK to this on[comment:101](#comment%3A101). (John, please shout if I am wrong).\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[dca2e53](https://github.com/sagemath/sagetrac-mirror/commit/dca2e53c28a14edfb0c41e24deb6a5d986512bd2)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|\n|[c17bbf8](https://github.com/sagemath/sagetrac-mirror/commit/c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27)|`trac 26451: Add sphinx extension to modify lines in codeblocks starting with 'sage:'`|",
    "created_at": "2019-03-18T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502337",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
IMHO John won't mind---in fact he appears to have said OK to this on[comment:101](#comment%3A101). (John, please shout if I am wrong).

---
New commits:
|                                                                                                                                          |                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[dca2e53](https://github.com/sagemath/sagetrac-mirror/commit/dca2e53c28a14edfb0c41e24deb6a5d986512bd2)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|
|[c17bbf8](https://github.com/sagemath/sagetrac-mirror/commit/c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27)|`trac 26451: Add sphinx extension to modify lines in codeblocks starting with 'sage:'`|



---

archive/issue_comments_502338.json:
```json
{
    "body": "Changing commit from \"d566fc954df56bf61efab7eaf25d7ee87fee5f11\" to \"c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27\"",
    "created_at": "2019-03-18T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502338",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "d566fc954df56bf61efab7eaf25d7ee87fee5f11" to "c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27"



---

archive/issue_comments_502339.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/26451\" to \"u/thansen/26451\"",
    "created_at": "2019-03-18T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502339",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "u/jhpalmieri/26451" to "u/thansen/26451"



---

archive/issue_comments_502340.json:
```json
{
    "body": "Changing dependencies from \"#27200\" to \"\"",
    "created_at": "2019-03-18T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502340",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "#27200" to ""



---

archive/issue_comments_502341.json:
```json
{
    "body": "Changing branch from \"u/thansen/26451\" to \"u/jhpalmieri/26451\"",
    "created_at": "2019-03-22T03:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502341",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "u/thansen/26451" to "u/jhpalmieri/26451"



---

archive/issue_comments_502342.json:
```json
{
    "body": "<a id='comment:6'></a>\nHere is a different approach for the `<BLANKLINE>` problem, as suggested [on Sphinx's github page](https://github.com/sphinx-doc/sphinx/issues/6188). I've added a dependency, #27528, which also removes `highlighting.patch`. It is necessary here because it suppresses some warnings which are produced by `SageMathTransform`.\n\nIf this is acceptable, we should probably squash some commits: we don't need to create `trim_doctest_flags.py` and then delete it.\n\n---\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[ea84309](https://github.com/sagemath/sagetrac-mirror/commit/ea8430971336174dabb9511b9360a242e3475155)|`Upgrade to Sphinx 1.8.1`|\n|[f93af93](https://github.com/sagemath/sagetrac-mirror/commit/f93af9335c4e1204a3a56311ee0cd4e583c5f184)|`Call Sphinx() 1.8 constructor`|\n|[d559c88](https://github.com/sagemath/sagetrac-mirror/commit/d559c8839cb1ca935bd26400ff4aa647bf46ae03)|`trac 26451: Sphinx 1.8.3`|\n|[e912974](https://github.com/sagemath/sagetrac-mirror/commit/e91297450b9aace4c41501d168b30b7b19f38cbc)|`trac 26461: inventory builder: remove _static directory upon cleanup`|\n|[89332f4](https://github.com/sagemath/sagetrac-mirror/commit/89332f44bbdfa0f0a593cf517fa225b9048c21c9)|`trac 26451: change 'app.builder.info' to 'logger.info'`|\n|[35e7862](https://github.com/sagemath/sagetrac-mirror/commit/35e7862dfdac5bf1fc25e9dcb35ff105970df773)|`trac 26451: upgrade to Sphinx 1.8.4.`|\n|[3b96fa8](https://github.com/sagemath/sagetrac-mirror/commit/3b96fa8057e69c162a2c94778f9ca72cb3cc223e)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|\n|[550e469](https://github.com/sagemath/sagetrac-mirror/commit/550e46933210efbe2c18f81051e3dc32740122f7)|`trac 26451: Add sphinx extension to modify lines in codeblocks starting with 'sage:'`|\n|[0dfcab9](https://github.com/sagemath/sagetrac-mirror/commit/0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff)|`trac 26451: use a Sphinx transform module to deal with <BLANKLINE>`|",
    "created_at": "2019-03-22T03:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502342",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Here is a different approach for the `<BLANKLINE>` problem, as suggested [on Sphinx's github page](https://github.com/sphinx-doc/sphinx/issues/6188). I've added a dependency, #27528, which also removes `highlighting.patch`. It is necessary here because it suppresses some warnings which are produced by `SageMathTransform`.

If this is acceptable, we should probably squash some commits: we don't need to create `trim_doctest_flags.py` and then delete it.

---
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[ea84309](https://github.com/sagemath/sagetrac-mirror/commit/ea8430971336174dabb9511b9360a242e3475155)|`Upgrade to Sphinx 1.8.1`|
|[f93af93](https://github.com/sagemath/sagetrac-mirror/commit/f93af9335c4e1204a3a56311ee0cd4e583c5f184)|`Call Sphinx() 1.8 constructor`|
|[d559c88](https://github.com/sagemath/sagetrac-mirror/commit/d559c8839cb1ca935bd26400ff4aa647bf46ae03)|`trac 26451: Sphinx 1.8.3`|
|[e912974](https://github.com/sagemath/sagetrac-mirror/commit/e91297450b9aace4c41501d168b30b7b19f38cbc)|`trac 26461: inventory builder: remove _static directory upon cleanup`|
|[89332f4](https://github.com/sagemath/sagetrac-mirror/commit/89332f44bbdfa0f0a593cf517fa225b9048c21c9)|`trac 26451: change 'app.builder.info' to 'logger.info'`|
|[35e7862](https://github.com/sagemath/sagetrac-mirror/commit/35e7862dfdac5bf1fc25e9dcb35ff105970df773)|`trac 26451: upgrade to Sphinx 1.8.4.`|
|[3b96fa8](https://github.com/sagemath/sagetrac-mirror/commit/3b96fa8057e69c162a2c94778f9ca72cb3cc223e)|`trac 26451: emit 'env-check-consistency' if not first pass building ref manual,`|
|[550e469](https://github.com/sagemath/sagetrac-mirror/commit/550e46933210efbe2c18f81051e3dc32740122f7)|`trac 26451: Add sphinx extension to modify lines in codeblocks starting with 'sage:'`|
|[0dfcab9](https://github.com/sagemath/sagetrac-mirror/commit/0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff)|`trac 26451: use a Sphinx transform module to deal with <BLANKLINE>`|



---

archive/issue_comments_502343.json:
```json
{
    "body": "Changing commit from \"c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27\" to \"0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff\"",
    "created_at": "2019-03-22T03:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502343",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "c17bbf83d2cdf7d748fd9fa4d3b10348bce3ed27" to "0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff"



---

archive/issue_comments_502344.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#27528\"",
    "created_at": "2019-03-22T03:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502344",
    "user": "https://github.com/jhpalmieri"
}
```

Changing dependencies from "" to "#27528"



---

archive/issue_comments_502345.json:
```json
{
    "body": "<a id='comment:7'></a>\nWith this branch on top of 8.7 and sphinx 1.8.5 I'm getting:\n\n```\nProcess Process-79:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/multiprocessing/process.py\", line 267, in _bootstrap\n    self.run()\n  File \"/usr/lib/python2.7/multiprocessing/process.py\", line 114, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 79, in build_ref_doc\n    getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 763, in _wrapper\n    getattr(DocBuilder, build_type)(self, *args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 135, in f\n    runsphinx()\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py\", line 314, in runsphinx\n    sys.stderr.raise_errors()\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py\", line 249, in raise_errors\n    raise OSError(self._error)\nOSError: /build/sagemath-doc/src/sage-8.7/src/doc/en/reference/combinat/sage/combinat/shifted_primed_tableau.rst:267: WARNING: Could not lex literal_block as \"pycon\". Highlighting skipped.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/build/sagemath-doc/src/sage-8.7/src/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 1732, in main\n    builder()\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 358, in _wrapper\n    getattr(get_builder(document), name)(*args, **kwds)\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 549, in _wrapper\n    build_many(build_ref_doc, L)\n  File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/utils.py\", line 214, in _build_many\n    raise worker_exc\nWorkerDiedException: worker for ('reference/combinat', 'en', 'html', {}) died with non-zero exit code 1\n\n    Note: incremental documentation builds sometimes cause spurious\n    error messages. To be certain that these are real errors, run\n    \"make doc-clean\" first and try again.\n```",
    "created_at": "2019-03-24T12:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502345",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:7'></a>
With this branch on top of 8.7 and sphinx 1.8.5 I'm getting:

```
Process Process-79:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 267, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 79, in build_ref_doc
    getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 763, in _wrapper
    getattr(DocBuilder, build_type)(self, *args, **kwds)
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 135, in f
    runsphinx()
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py", line 314, in runsphinx
    sys.stderr.raise_errors()
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py", line 249, in raise_errors
    raise OSError(self._error)
OSError: /build/sagemath-doc/src/sage-8.7/src/doc/en/reference/combinat/sage/combinat/shifted_primed_tableau.rst:267: WARNING: Could not lex literal_block as "pycon". Highlighting skipped.
Error building the documentation.
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 174, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/build/sagemath-doc/src/sage-8.7/src/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 1732, in main
    builder()
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 358, in _wrapper
    getattr(get_builder(document), name)(*args, **kwds)
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 549, in _wrapper
    build_many(build_ref_doc, L)
  File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/utils.py", line 214, in _build_many
    raise worker_exc
WorkerDiedException: worker for ('reference/combinat', 'en', 'html', {}) died with non-zero exit code 1

    Note: incremental documentation builds sometimes cause spurious
    error messages. To be certain that these are real errors, run
    "make doc-clean" first and try again.
```



---

archive/issue_comments_502346.json:
```json
{
    "body": "<a id='comment:8'></a>\nSphinx 1.8.5 was released on PyPI on 2019-03-10, and Sphinx 2.0.0b2 on 2019-03-20. See\n\n- https://pypi.org/project/Sphinx/#history",
    "created_at": "2019-03-24T14:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502346",
    "user": "https://github.com/slel"
}
```

<a id='comment:8'></a>
Sphinx 1.8.5 was released on PyPI on 2019-03-10, and Sphinx 2.0.0b2 on 2019-03-20. See

- https://pypi.org/project/Sphinx/#history



---

archive/issue_comments_502347.json:
```json
{
    "body": "<a id='comment:9'></a>\nI believe that Sphinx 2.0.0b2 is dropping support for Python 2.7, so we can't use that. I'll look at 1.8.5.",
    "created_at": "2019-03-24T18:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502347",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
I believe that Sphinx 2.0.0b2 is dropping support for Python 2.7, so we can't use that. I'll look at 1.8.5.



---

archive/issue_comments_502348.json:
```json
{
    "body": "<a id='comment:120'></a>\nReplying to [arojas](#comment%3A117):\n> With this branch on top of 8.7 and sphinx 1.8.5 I'm getting:\n> \n> \n> ```\n> Process Process-79:\n> Traceback (most recent call last):\n>   File \"/usr/lib/python2.7/multiprocessing/process.py\", line 267, in _bootstrap\n>     self.run()\n>   File \"/usr/lib/python2.7/multiprocessing/process.py\", line 114, in run\n>     self._target(*self._args, **self._kwargs)\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 79, in build_ref_doc\n>     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 763, in _wrapper\n>     getattr(DocBuilder, build_type)(self, *args, **kwds)\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 135, in f\n>     runsphinx()\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py\", line 314, in runsphinx\n>     sys.stderr.raise_errors()\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py\", line 249, in raise_errors\n>     raise OSError(self._error)\n> OSError: /build/sagemath-doc/src/sage-8.7/src/doc/en/reference/combinat/sage/combinat/shifted_primed_tableau.rst:267: WARNING: Could not lex literal_block as \"pycon\". Highlighting skipped.\n> Error building the documentation.\n> Traceback (most recent call last):\n>   File \"/usr/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n>     \"__main__\", fname, loader, pkg_name)\n>   File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n>     exec code in run_globals\n>   File \"/build/sagemath-doc/src/sage-8.7/src/sage_setup/docbuild/__main__.py\", line 2, in <module>\n>     main()\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 1732, in main\n>     builder()\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 358, in _wrapper\n>     getattr(get_builder(document), name)(*args, **kwds)\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py\", line 549, in _wrapper\n>     build_many(build_ref_doc, L)\n>   File \"/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/utils.py\", line 214, in _build_many\n>     raise worker_exc\n> WorkerDiedException: worker for ('reference/combinat', 'en', 'html', {}) died with non-zero exit code 1\n> \n>     Note: incremental documentation builds sometimes cause spurious\n>     error messages. To be certain that these are real errors, run\n>     \"make doc-clean\" first and try again.\n> ```\n\n\nDid you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.",
    "created_at": "2019-03-24T18:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502348",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:120'></a>
Replying to [arojas](#comment%3A117):
> With this branch on top of 8.7 and sphinx 1.8.5 I'm getting:
> 
> 
> ```
> Process Process-79:
> Traceback (most recent call last):
>   File "/usr/lib/python2.7/multiprocessing/process.py", line 267, in _bootstrap
>     self.run()
>   File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
>     self._target(*self._args, **self._kwargs)
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 79, in build_ref_doc
>     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 763, in _wrapper
>     getattr(DocBuilder, build_type)(self, *args, **kwds)
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 135, in f
>     runsphinx()
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py", line 314, in runsphinx
>     sys.stderr.raise_errors()
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/sphinxbuild.py", line 249, in raise_errors
>     raise OSError(self._error)
> OSError: /build/sagemath-doc/src/sage-8.7/src/doc/en/reference/combinat/sage/combinat/shifted_primed_tableau.rst:267: WARNING: Could not lex literal_block as "pycon". Highlighting skipped.
> Error building the documentation.
> Traceback (most recent call last):
>   File "/usr/lib/python2.7/runpy.py", line 174, in _run_module_as_main
>     "__main__", fname, loader, pkg_name)
>   File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
>     exec code in run_globals
>   File "/build/sagemath-doc/src/sage-8.7/src/sage_setup/docbuild/__main__.py", line 2, in <module>
>     main()
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 1732, in main
>     builder()
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 358, in _wrapper
>     getattr(get_builder(document), name)(*args, **kwds)
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/__init__.py", line 549, in _wrapper
>     build_many(build_ref_doc, L)
>   File "/build/sagemath-doc/src/sage-8.7/local-python/sage_setup/docbuild/utils.py", line 214, in _build_many
>     raise worker_exc
> WorkerDiedException: worker for ('reference/combinat', 'en', 'html', {}) died with non-zero exit code 1
> 
>     Note: incremental documentation builds sometimes cause spurious
>     error messages. To be certain that these are real errors, run
>     "make doc-clean" first and try again.
> ```


Did you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.



---

archive/issue_comments_502349.json:
```json
{
    "body": "<a id='comment:121'></a>\nReplying to [jhpalmieri](#comment%3A120):\n> \n> Did you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.\n\n\nAh, no. I was under the (wrong) impression that branches in trac tickets already pulled the changes from dependant tickets.",
    "created_at": "2019-03-24T18:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502349",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:121'></a>
Replying to [jhpalmieri](#comment%3A120):
> 
> Did you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.


Ah, no. I was under the (wrong) impression that branches in trac tickets already pulled the changes from dependant tickets.



---

archive/issue_comments_502350.json:
```json
{
    "body": "<a id='comment:122'></a>\nReplying to [arojas](#comment%3A121):\n> Replying to [jhpalmieri](#comment%3A120):\n> > \n> > Did you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.\n\n> \n> Ah, no. I was under the (wrong) impression that branches in trac tickets already pulled the changes from dependant tickets.\n\n\nSometimes they do and sometimes they don't. I don't know what I am supposed to do when preparing branches: base this one on the one from #27528 or on `develop`?",
    "created_at": "2019-03-24T18:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502350",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:122'></a>
Replying to [arojas](#comment%3A121):
> Replying to [jhpalmieri](#comment%3A120):
> > 
> > Did you also use the branch from #27528? That would get rid of the warning which is causing the problems. This is somewhat moot, since I am reworking #27528. I should be able to post something later today.

> 
> Ah, no. I was under the (wrong) impression that branches in trac tickets already pulled the changes from dependant tickets.


Sometimes they do and sometimes they don't. I don't know what I am supposed to do when preparing branches: base this one on the one from #27528 or on `develop`?



---

archive/issue_comments_502351.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,5 @@\n-This ticket is to upgrade to Sphinx 1.8.4.\n+This ticket is to upgrade to Sphinx 1.8.5.\n \n Our previous upgrade was to Sphinx 1.7.6 in #26033.\n \n-With Sphinx 1.8.1 we see quite a few\n-\n-```\n-ApplicationError: Source directory and destination directory cannot be identical\n-```\n-coming out of Sphinx in conda as they have changed the argument checking\n-of the `Sphinx()` constructor it seems.\n-\n-**Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz\n+**Tarball**: https://files.pythonhosted.org/packages/2a/86/8e1e8400bb6eca5ed960917952600fce90599e1cb0d20ddedd81ba163370/Sphinx-1.8.5.tar.gz\n``````\n",
    "created_at": "2019-03-24T23:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502351",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,5 @@
-This ticket is to upgrade to Sphinx 1.8.4.
+This ticket is to upgrade to Sphinx 1.8.5.
 
 Our previous upgrade was to Sphinx 1.7.6 in #26033.
 
-With Sphinx 1.8.1 we see quite a few
-
-```
-ApplicationError: Source directory and destination directory cannot be identical
-```
-coming out of Sphinx in conda as they have changed the argument checking
-of the `Sphinx()` constructor it seems.
-
-**Tarball**: https://files.pythonhosted.org/packages/dd/f8/df628d41f42793d446285767164c6a8da71d82892f2c98c43e0523836d39/Sphinx-1.8.4.tar.gz
+**Tarball**: https://files.pythonhosted.org/packages/2a/86/8e1e8400bb6eca5ed960917952600fce90599e1cb0d20ddedd81ba163370/Sphinx-1.8.5.tar.gz
``````




---

archive/issue_comments_502352.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-24T23:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502352",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_502353.json:
```json
{
    "body": "Changing commit from \"0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff\" to \"0a92d485970b31b8fb4b70a589d063534b9ab936\"",
    "created_at": "2019-03-24T23:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0dfcab9dfbc4d403c77cf058df1ef0502d0b2eff" to "0a92d485970b31b8fb4b70a589d063534b9ab936"



---

archive/issue_comments_502354.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[48b7acd](https://github.com/sagemath/sagetrac-mirror/commit/48b7acd9c132462e57317ededf422269e4e389d3)|`trac 27528: remove some patches for Sphinx and pygments.`|\n|[b23b8cc](https://github.com/sagemath/sagetrac-mirror/commit/b23b8ccc43bdb63e6606e39cc73b2b4984bdfa7c)|`trac 27528: use a custom Sphinx transform to handle <BLANKLINE>`|\n|[687b338](https://github.com/sagemath/sagetrac-mirror/commit/687b3385e80af4efd6ee8db79200c518a731af1d)|`trac 27528: clean up some code-blocks in the reST documentation.`|\n|[e1794bb](https://github.com/sagemath/sagetrac-mirror/commit/e1794bb9a26ddf577832884e4eaff79f86f41307)|`trac 26451: upgrade to Sphinx 1.8.5.`|\n|[c61a041](https://github.com/sagemath/sagetrac-mirror/commit/c61a0417ac55a8b77a938006180d22c7bfead99e)|`trac 26451: Call Sphinx() 1.8 constructor`|\n|[5e32410](https://github.com/sagemath/sagetrac-mirror/commit/5e32410abb5756c181cd9d90f363cb023b3a9542)|`trac 26451: change 'app.builder.info' to 'logger.info'.`|\n|[0a92d48](https://github.com/sagemath/sagetrac-mirror/commit/0a92d485970b31b8fb4b70a589d063534b9ab936)|`trac 26451: inventory builder: remove _static directory upon cleanup,`|",
    "created_at": "2019-03-24T23:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[48b7acd](https://github.com/sagemath/sagetrac-mirror/commit/48b7acd9c132462e57317ededf422269e4e389d3)|`trac 27528: remove some patches for Sphinx and pygments.`|
|[b23b8cc](https://github.com/sagemath/sagetrac-mirror/commit/b23b8ccc43bdb63e6606e39cc73b2b4984bdfa7c)|`trac 27528: use a custom Sphinx transform to handle <BLANKLINE>`|
|[687b338](https://github.com/sagemath/sagetrac-mirror/commit/687b3385e80af4efd6ee8db79200c518a731af1d)|`trac 27528: clean up some code-blocks in the reST documentation.`|
|[e1794bb](https://github.com/sagemath/sagetrac-mirror/commit/e1794bb9a26ddf577832884e4eaff79f86f41307)|`trac 26451: upgrade to Sphinx 1.8.5.`|
|[c61a041](https://github.com/sagemath/sagetrac-mirror/commit/c61a0417ac55a8b77a938006180d22c7bfead99e)|`trac 26451: Call Sphinx() 1.8 constructor`|
|[5e32410](https://github.com/sagemath/sagetrac-mirror/commit/5e32410abb5756c181cd9d90f363cb023b3a9542)|`trac 26451: change 'app.builder.info' to 'logger.info'.`|
|[0a92d48](https://github.com/sagemath/sagetrac-mirror/commit/0a92d485970b31b8fb4b70a589d063534b9ab936)|`trac 26451: inventory builder: remove _static directory upon cleanup,`|



---

archive/issue_comments_502355.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-24T23:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502355",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_502356.json:
```json
{
    "body": "<a id='comment:5'></a>\nHere is a new branch which is based on #27528. I put the `<BLANKLINE>` stuff at #27528, not here, since I needed it there.",
    "created_at": "2019-03-24T23:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502356",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Here is a new branch which is based on #27528. I put the `<BLANKLINE>` stuff at #27528, not here, since I needed it there.



---

archive/issue_events_082558.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "rename": {
        "from": "Upgrade to Sphinx 1.8.4",
        "to": "Upgrade to Sphinx 1.8.5"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82558"
}
```



---

archive/issue_events_082559.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82559"
}
```



---

archive/issue_events_082560.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82560"
}
```



---

archive/issue_comments_502357.json:
```json
{
    "body": "<a id='comment:7'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502357",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_502358.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket is to upgrade to Sphinx 1.8.5.\n+This ticket upgrades Sphinx to version 1.8.5.\n \n Our previous upgrade was to Sphinx 1.7.6 in #26033.\n \n``````\n",
    "created_at": "2019-03-25T17:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502358",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket is to upgrade to Sphinx 1.8.5.
+This ticket upgrades Sphinx to version 1.8.5.
 
 Our previous upgrade was to Sphinx 1.7.6 in #26033.
 
``````




---

archive/issue_comments_502359.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[737afd8](https://github.com/sagemath/sagetrac-mirror/commit/737afd8f314bd1e16feaec562bb4b5efa2effa8b)|`trac 26451: fix one doctest`|",
    "created_at": "2019-03-25T18:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[737afd8](https://github.com/sagemath/sagetrac-mirror/commit/737afd8f314bd1e16feaec562bb4b5efa2effa8b)|`trac 26451: fix one doctest`|



---

archive/issue_comments_502360.json:
```json
{
    "body": "Changing commit from \"0a92d485970b31b8fb4b70a589d063534b9ab936\" to \"737afd8f314bd1e16feaec562bb4b5efa2effa8b\"",
    "created_at": "2019-03-25T18:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0a92d485970b31b8fb4b70a589d063534b9ab936" to "737afd8f314bd1e16feaec562bb4b5efa2effa8b"



---

archive/issue_comments_502361.json:
```json
{
    "body": "<a id='comment:0'></a>\nPDF documentation builds fine for me.",
    "created_at": "2019-03-25T22:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502361",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:0'></a>
PDF documentation builds fine for me.



---

archive/issue_comments_502362.json:
```json
{
    "body": "<a id='comment:1'></a>\nlooks good to me.",
    "created_at": "2019-03-26T00:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502362",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
looks good to me.



---

archive/issue_comments_502363.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-26T00:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502363",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_502364.json:
```json
{
    "body": "<a id='comment:2'></a>\nGreat! Now we need to silence all of the stupid deprecation warnings.",
    "created_at": "2019-03-26T04:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502364",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
Great! Now we need to silence all of the stupid deprecation warnings.



---

archive/issue_comments_502365.json:
```json
{
    "body": "<a id='comment:3'></a>\nSee #27578 for a ticket to stop using the deprecated `formatargspec`.",
    "created_at": "2019-03-30T22:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502365",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
See #27578 for a ticket to stop using the deprecated `formatargspec`.



---

archive/issue_comments_502366.json:
```json
{
    "body": "<a id='comment:4'></a>\nMerge conflict",
    "created_at": "2019-03-30T22:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502366",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
Merge conflict



---

archive/issue_comments_502367.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-03-30T22:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502367",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_502368.json:
```json
{
    "body": "Changing commit from \"737afd8f314bd1e16feaec562bb4b5efa2effa8b\" to \"f1a08e3522b66afe96e8fdd389cf1114b1db1365\"",
    "created_at": "2019-03-31T01:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "737afd8f314bd1e16feaec562bb4b5efa2effa8b" to "f1a08e3522b66afe96e8fdd389cf1114b1db1365"



---

archive/issue_comments_502369.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[a55438e](https://github.com/sagemath/sagetrac-mirror/commit/a55438e9fe1f53931a8b0ed96f928a05f8e72e71)|`trac 26451: upgrade to Sphinx 1.8.5.`|\n|[827ff80](https://github.com/sagemath/sagetrac-mirror/commit/827ff8023fb8e0d12de3613738585a3940b514eb)|`trac 26451: Call Sphinx() 1.8 constructor`|\n|[22736d7](https://github.com/sagemath/sagetrac-mirror/commit/22736d7d7e0f2ef96ddd08ef9fbb4544d8824b3d)|`trac 26451: change 'app.builder.info' to 'logger.info'.`|\n|[4cab150](https://github.com/sagemath/sagetrac-mirror/commit/4cab150f22d17a8613d061f82888ae0dc28ad412)|`trac 26451: inventory builder: remove _static directory upon cleanup,`|\n|[f1a08e3](https://github.com/sagemath/sagetrac-mirror/commit/f1a08e3522b66afe96e8fdd389cf1114b1db1365)|`trac 26451: fix one doctest`|",
    "created_at": "2019-03-31T01:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502369",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[a55438e](https://github.com/sagemath/sagetrac-mirror/commit/a55438e9fe1f53931a8b0ed96f928a05f8e72e71)|`trac 26451: upgrade to Sphinx 1.8.5.`|
|[827ff80](https://github.com/sagemath/sagetrac-mirror/commit/827ff8023fb8e0d12de3613738585a3940b514eb)|`trac 26451: Call Sphinx() 1.8 constructor`|
|[22736d7](https://github.com/sagemath/sagetrac-mirror/commit/22736d7d7e0f2ef96ddd08ef9fbb4544d8824b3d)|`trac 26451: change 'app.builder.info' to 'logger.info'.`|
|[4cab150](https://github.com/sagemath/sagetrac-mirror/commit/4cab150f22d17a8613d061f82888ae0dc28ad412)|`trac 26451: inventory builder: remove _static directory upon cleanup,`|
|[f1a08e3](https://github.com/sagemath/sagetrac-mirror/commit/f1a08e3522b66afe96e8fdd389cf1114b1db1365)|`trac 26451: fix one doctest`|



---

archive/issue_comments_502370.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-03-31T01:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502370",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_502371.json:
```json
{
    "body": "<a id='comment:6'></a>\nRebased.",
    "created_at": "2019-03-31T01:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502371",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Rebased.



---

archive/issue_comments_502372.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/26451\" to \"f1a08e3522b66afe96e8fdd389cf1114b1db1365\"",
    "created_at": "2019-04-02T21:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502372",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/26451" to "f1a08e3522b66afe96e8fdd389cf1114b1db1365"



---

archive/issue_events_082561.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-02T21:30:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26451#event-82561"
}
```



---

archive/issue_comments_502373.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-02T21:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26451#issuecomment-502373",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
