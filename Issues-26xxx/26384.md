# Issue 26384: cleanup non-decreasing parking functions

archive/issues_026147.json:
```json
{
    "body": "in particular get rid of CombinatorialClass there (#12913)\n\nCC:  @tscrim\n\nBranch/Commit: 12bca395ae60f37d4a429a5fed0335f5c2443841\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/26384\n\n",
    "closed_at": "2018-10-04T21:54:02Z",
    "created_at": "2018-10-02T16:54:43Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "cleanup non-decreasing parking functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26384",
    "user": "https://github.com/fchapoton"
}
```
in particular get rid of CombinatorialClass there (#12913)

CC:  @tscrim

Branch/Commit: 12bca395ae60f37d4a429a5fed0335f5c2443841

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/26384





---

archive/issue_comments_500916.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500916",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_500917.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[07177d0](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)|`get rid of CombinatorialClass for non-decreasing parking functions`|",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500917",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[07177d0](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)|`get rid of CombinatorialClass for non-decreasing parking functions`|



---

archive/issue_comments_500918.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/26384\"",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500918",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/26384"



---

archive/issue_comments_500919.json:
```json
{
    "body": "Changing commit from \"\" to \"07177d015db515015c187cc15349a53fa11cbf02\"",
    "created_at": "2018-10-02T16:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500919",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "07177d015db515015c187cc15349a53fa11cbf02"



---

archive/issue_comments_500920.json:
```json
{
    "body": "<a id='comment:2'></a>\nMaybe I should have kept CombinatorialObject ?",
    "created_at": "2018-10-02T17:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500920",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
Maybe I should have kept CombinatorialObject ?



---

archive/issue_comments_500921.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [chapoton](#comment%3A2):\n> Maybe I should have kept CombinatorialObject ?\n\n\nThat one is a maybe. The biggest issue is they are no longer hashable:\n\n```\nsage: hash(NonDecreasingParkingFunction([]))\n11648069979105038\n```\nwhich is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.",
    "created_at": "2018-10-02T22:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500921",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Replying to [chapoton](#comment%3A2):
> Maybe I should have kept CombinatorialObject ?


That one is a maybe. The biggest issue is they are no longer hashable:

```
sage: hash(NonDecreasingParkingFunction([]))
11648069979105038
```
which is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.



---

archive/issue_comments_500922.json:
```json
{
    "body": "<a id='comment:4'></a>\nIIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.",
    "created_at": "2018-10-02T22:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500922",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
IIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.



---

archive/issue_comments_500923.json:
```json
{
    "body": "<a id='comment:5'></a>\nTravis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..",
    "created_at": "2018-10-03T12:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500923",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
Travis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..



---

archive/issue_comments_500924.json:
```json
{
    "body": "<a id='comment:6'></a>\nI think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.",
    "created_at": "2018-10-03T12:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500924",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
I think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.



---

archive/issue_comments_500925.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[12bca39](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)|`trac 26384 adding hash`|",
    "created_at": "2018-10-03T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[12bca39](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)|`trac 26384 adding hash`|



---

archive/issue_comments_500926.json:
```json
{
    "body": "Changing commit from \"07177d015db515015c187cc15349a53fa11cbf02\" to \"12bca395ae60f37d4a429a5fed0335f5c2443841\"",
    "created_at": "2018-10-03T12:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "07177d015db515015c187cc15349a53fa11cbf02" to "12bca395ae60f37d4a429a5fed0335f5c2443841"



---

archive/issue_comments_500927.json:
```json
{
    "body": "<a id='comment:8'></a>\nok, I have added the hash. Thanks a lot for your help.",
    "created_at": "2018-10-03T12:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500927",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
ok, I have added the hash. Thanks a lot for your help.



---

archive/issue_comments_500928.json:
```json
{
    "body": "<a id='comment:9'></a>\nNo problem. Thanks for fixing that.",
    "created_at": "2018-10-03T13:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500928",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
No problem. Thanks for fixing that.



---

archive/issue_comments_500929.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-03T13:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500929",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_500930.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-10-03T13:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500930",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_events_082399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-04T21:54:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26384#event-82399"
}
```



---

archive/issue_comments_500931.json:
```json
{
    "body": "Changing branch from \"u/chapoton/26384\" to \"12bca395ae60f37d4a429a5fed0335f5c2443841\"",
    "created_at": "2018-10-04T21:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500931",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/26384" to "12bca395ae60f37d4a429a5fed0335f5c2443841"



---

archive/issue_comments_500932.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-04T21:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26384#issuecomment-500932",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
