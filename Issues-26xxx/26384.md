# Issue 26384: cleanup non-decreasing parking functions

archive/issues_026147.json:
```json
{
    "assignees": [],
    "body": "in particular get rid of CombinatorialClass there (#12913)\n\nCC:  @tscrim\n\nBranch/Commit: **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26384_\n\n",
    "closed_at": "2018-10-04T21:54:02Z",
    "created_at": "2018-10-02T16:54:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cleanup non-decreasing parking functions",
    "type": "issue",
    "updated_at": "2018-10-04T21:54:02Z",
    "url": "https://github.com/sagemath/sage/issues/26384",
    "user": "https://github.com/fchapoton"
}
```
in particular get rid of CombinatorialClass there (#12913)

CC:  @tscrim

Branch/Commit: **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/26384_





---

archive/issue_events_360510.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-10-02T16:54:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360510"
}
```



---

archive/issue_events_360511.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-10-02T16:54:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360511"
}
```



---

archive/issue_events_360512.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-10-02T16:54:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360512"
}
```



---

archive/issue_events_360513.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-10-02T16:54:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360513"
}
```



---

archive/issue_events_360514.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-10-02T16:55:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360514"
}
```



---

archive/issue_comments_406705.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02\"><code>07177d0</code></a></td><td><code>get rid of CombinatorialClass for non-decreasing parking functions</code></td></tr></table>\n",
    "created_at": "2018-10-02T16:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406705",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02"><code>07177d0</code></a></td><td><code>get rid of CombinatorialClass for non-decreasing parking functions</code></td></tr></table>




---

archive/issue_comments_406706.json:
```json
{
    "body": "Branch: **[u/chapoton/26384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/26384)**",
    "created_at": "2018-10-02T16:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406706",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/26384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/26384)**



---

archive/issue_comments_406707.json:
```json
{
    "body": "Commit: **[`07177d0`](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)**",
    "created_at": "2018-10-02T16:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406707",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`07177d0`](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)**



---

archive/issue_comments_406708.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nMaybe I should have kept CombinatorialObject ?",
    "created_at": "2018-10-02T17:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406708",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

Maybe I should have kept CombinatorialObject ?



---

archive/issue_comments_406709.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@fchapoton](#comment%3A2):\n> Maybe I should have kept CombinatorialObject ?\n\nThat one is a maybe. The biggest issue is they are no longer hashable:\n\n```\nsage: hash(NonDecreasingParkingFunction([]))\n11648069979105038\n```\nwhich is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.",
    "created_at": "2018-10-02T22:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406709",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@fchapoton](#comment%3A2):
> Maybe I should have kept CombinatorialObject ?

That one is a maybe. The biggest issue is they are no longer hashable:

```
sage: hash(NonDecreasingParkingFunction([]))
11648069979105038
```
which is an error on your branch. It is possible that someone is using the other list-like features of `CombinatorialObject` not already reimplemented (mainly the `__add__` being concatenation), but I find that highly unlikely.



---

archive/issue_comments_406710.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.",
    "created_at": "2018-10-02T22:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406710",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

IIRC, Nicolas has told me we should use `ClonableArray` instead of `CombinatorialObject/Element`. Although I do not like some of the features of the former (mainly, the hash and equality depends on the parent, which can cause lots of subtle problems with objects that live in multiple incompatible (wrt to coercion) parents). Here, however, this would be a reasonable thing to inherit from.



---

archive/issue_comments_406711.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nTravis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..",
    "created_at": "2018-10-03T12:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406711",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

Travis, do you think this could enter sage in the current state ? I would prefer not to spend more time on that..



---

archive/issue_comments_406712.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.",
    "created_at": "2018-10-03T12:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406712",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

I think it is probably better in the long run to not use `CombinatorialObject`. However, it does need a `__hash__`. Other than that, it is good to go.



---

archive/issue_comments_406713.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841\"><code>12bca39</code></a></td><td><code>trac 26384 adding hash</code></td></tr></table>\n",
    "created_at": "2018-10-03T12:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841"><code>12bca39</code></a></td><td><code>trac 26384 adding hash</code></td></tr></table>




---

archive/issue_comments_406714.json:
```json
{
    "body": "Changed commit from **[`07177d0`](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)** to **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**",
    "created_at": "2018-10-03T12:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`07177d0`](https://github.com/sagemath/sagetrac-mirror/commit/07177d015db515015c187cc15349a53fa11cbf02)** to **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**



---

archive/issue_comments_406715.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nok, I have added the hash. Thanks a lot for your help.",
    "created_at": "2018-10-03T12:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406715",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

ok, I have added the hash. Thanks a lot for your help.



---

archive/issue_comments_406716.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nNo problem. Thanks for fixing that.",
    "created_at": "2018-10-03T13:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406716",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

No problem. Thanks for fixing that.



---

archive/issue_events_360515.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T13:09:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360515"
}
```



---

archive/issue_events_360516.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-10-03T13:09:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360516"
}
```



---

archive/issue_comments_406717.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-10-03T13:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406717",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_360517.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-04T21:54:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360517"
}
```



---

archive/issue_events_360518.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa7caa1860e4c54b93e100f659a9009ddd36d26b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-10-04T21:54:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26384#event-360518"
}
```



---

archive/issue_comments_406718.json:
```json
{
    "body": "Changed branch from **[u/chapoton/26384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/26384)** to **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**",
    "created_at": "2018-10-04T21:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26384#issuecomment-406718",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/26384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/26384)** to **[`12bca39`](https://github.com/sagemath/sagetrac-mirror/commit/12bca395ae60f37d4a429a5fed0335f5c2443841)**
