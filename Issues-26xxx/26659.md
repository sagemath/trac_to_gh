# Issue 26659: py3: Fix some doctests errors in sets module for python3

archive/issues_026422.json:
```json
{
    "assignees": [],
    "body": "Fix doctests errors and / or output order issues.\n\nCC:  @seblabbe\n\nKeywords: **thursdaysbdx**\n\nBranch/Commit: **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **Vincent Klein**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/26659_\n\n",
    "closed_at": "2018-11-15T22:57:30Z",
    "created_at": "2018-11-08T11:12:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: Fix some doctests errors in sets module for python3",
    "type": "issue",
    "updated_at": "2018-11-15T22:57:30Z",
    "url": "https://github.com/sagemath/sage/issues/26659",
    "user": "https://github.com/vinklein"
}
```
Fix doctests errors and / or output order issues.

CC:  @seblabbe

Keywords: **thursdaysbdx**

Branch/Commit: **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**

Reviewer: **Sébastien Labbé**

Author: **Vincent Klein**

_Issue created by migration from https://trac.sagemath.org/ticket/26659_





---

archive/issue_events_348661.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-08T11:12:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348661"
}
```



---

archive/issue_events_348662.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-08T11:12:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348662"
}
```



---

archive/issue_events_348663.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-08T11:12:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348663"
}
```



---

archive/issue_events_348664.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-08T11:12:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348664"
}
```



---

archive/issue_comments_413671.json:
```json
{
    "body": "Changed keywords from none to **thursdaysbdx**",
    "created_at": "2018-11-08T11:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413671",
    "user": "https://github.com/vinklein"
}
```

Changed keywords from none to **thursdaysbdx**



---

archive/issue_comments_413672.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\n@seblabbe In the method breadth_first_search_iterator(self,max_depth=None),               \nthe algorithm uses a python set to determine the next elements to discover.     \n                                                                                \nAs we have no information on those elements, it is correct to use generic set.\nThe problem is that python3 is not determinist when it iterates on elements of a set.\n\nThis feature make the tests complex : we need to guess all the possibilities and accept all the correct answers.\n\nA solution is to have a parameter 'order=None'. If the parameter is None, the implementation doesn't change. If order is a function giving a total order on the elements of the set, then, the algorithm will discover all the elements by choosing elements (when needed) with the help of that order.",
    "created_at": "2018-11-09T14:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413672",
    "user": "https://github.com/sagetrac-boussica"
}
```

<div id="comment:3" align="right">Comment 3</div>

@seblabbe In the method breadth_first_search_iterator(self,max_depth=None),               
the algorithm uses a python set to determine the next elements to discover.     
                                                                                
As we have no information on those elements, it is correct to use generic set.
The problem is that python3 is not determinist when it iterates on elements of a set.

This feature make the tests complex : we need to guess all the possibilities and accept all the correct answers.

A solution is to have a parameter 'order=None'. If the parameter is None, the implementation doesn't change. If order is a function giving a total order on the elements of the set, then, the algorithm will discover all the elements by choosing elements (when needed) with the help of that order.



---

archive/issue_comments_413673.json:
```json
{
    "body": "Branch: **[u/vklein/py3__fix_sets_module_for_python3](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/py3__fix_sets_module_for_python3)**",
    "created_at": "2018-11-09T15:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413673",
    "user": "https://github.com/vinklein"
}
```

Branch: **[u/vklein/py3__fix_sets_module_for_python3](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/py3__fix_sets_module_for_python3)**



---

archive/issue_comments_413674.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\n`@`reviewer: Related to boussica [comment:3](https://github.com/sagemath/sage/issues/26659#comment:3). The test : `sage: [next(it_breadth) for _ in range(10)]` line 70 file `recursively_enumerated_set.pyx` give different results in py2 and py3 because of that problem. \n\nFor now i have modified the test on 13 elements instead of 10 in order to have all elements \"of depth 2 and less\" in all cases.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2\">b29f12e</a></td><td><code>Trac #26659: Py3 Fix doctests in sets module</code></td></tr></table>\n",
    "created_at": "2018-11-09T15:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413674",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:5" align="right">Comment 5</div>

`@`reviewer: Related to boussica [comment:3](https://github.com/sagemath/sage/issues/26659#comment:3). The test : `sage: [next(it_breadth) for _ in range(10)]` line 70 file `recursively_enumerated_set.pyx` give different results in py2 and py3 because of that problem. 

For now i have modified the test on 13 elements instead of 10 in order to have all elements "of depth 2 and less" in all cases.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2">b29f12e</a></td><td><code>Trac #26659: Py3 Fix doctests in sets module</code></td></tr></table>




---

archive/issue_comments_413675.json:
```json
{
    "body": "Commit: **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**",
    "created_at": "2018-11-09T15:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413675",
    "user": "https://github.com/vinklein"
}
```

Commit: **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**



---

archive/issue_events_348665.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-09T15:33:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "title_is": "py3: Fix some doctests errors in sets module for python3",
    "title_was": "py3: Fix sets module for python3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348665"
}
```



---

archive/issue_comments_413676.json:
```json
{
    "body": "Author: **Vincent Klein**",
    "created_at": "2018-11-09T15:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413676",
    "user": "https://github.com/vinklein"
}
```

Author: **Vincent Klein**



---

archive/issue_events_348666.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-11-13T14:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348666"
}
```



---

archive/issue_events_348667.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-11-13T19:49:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348667"
}
```



---

archive/issue_events_348668.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2018-11-13T19:49:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348668"
}
```



---

archive/issue_comments_413677.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2018-11-13T19:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413677",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_events_348669.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-15T22:57:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348669"
}
```



---

archive/issue_events_348670.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1d7c682c58186d6879a1a02f9051255cb3abfd97",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-11-15T22:57:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/26659#event-348670"
}
```



---

archive/issue_comments_413678.json:
```json
{
    "body": "Changed branch from **[u/vklein/py3__fix_sets_module_for_python3](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/py3__fix_sets_module_for_python3)** to **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**",
    "created_at": "2018-11-15T22:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/26659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/26659#issuecomment-413678",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vklein/py3__fix_sets_module_for_python3](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/py3__fix_sets_module_for_python3)** to **[b29f12e](https://github.com/sagemath/sagetrac-mirror/commit/b29f12e9db52552df0b6403642fa1dae91630df2)**
