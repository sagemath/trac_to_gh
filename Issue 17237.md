# Issue 17237: directed graph from polyhedron

Issue created by migration from https://trac.sagemath.org/ticket/17474

Original creator: chapoton

Original creation time: 2014-12-09 08:40:49

Keywords: polyhedron, digraph

This ticket proposes to implement a method taking a polyhedron and a linear form 
and returning the directed graph made of vertices and edges of the polyhedron, oriented using the linear form.


---

Comment by chapoton created at 2014-12-09 08:41:31

Changing status from new to needs_review.


---

Comment by chapoton created at 2014-12-09 08:41:31

New commits:


---

Comment by vdelecroix created at 2014-12-10 19:17:14

Hello,

Why is it a cached method?

Vincent


---

Comment by chapoton created at 2014-12-10 19:21:44

Well, vertex_graph is cached, so I just did the same. But if you prefer not, no problem.


---

Comment by vdelecroix created at 2014-12-10 20:33:11

The thing is that caching costs (in memory) and these methods do not (in time). So I really do not see the point. Do you agree to also "uncache" the `vertex_graph` method?

I think that in most cases, the use of cached method is dirty programming (though it is very cool in development phase).

Vincent


---

Comment by git created at 2014-12-10 20:45:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2014-12-13 17:28:45

Changing status from needs_review to needs_info.


---

Comment by tmonteil created at 2014-12-13 17:28:45

In your implementation, there is no oriented edge associated to an edge of the polyhedron that belongs to the kernel of the linear form, hence the underlying undirected graph of your graph is only a subgraph of vertices and edges of the polyhedron, see for example:


```
sage: penta = Polyhedron([[0,0],[1,0],[0,1],[1,2],[3,2]])
sage: penta.vertex_digraph(vector([1,0]))
```


What is the purpose of this method ? Depending on this, the described behaviour may cause troubles. Other possibilities is to have two oriented edges facing eachother (just replace `> 0` by `>= 0`), or choosing one (but you lose some symmetry).


---

Comment by tmonteil created at 2014-12-13 18:01:27

One could also want to provide a genuine linear form (see `linear_transformation()` function) as an input, instead of a vector (this could be useful in (possible future) case the underlying vector space is not euclidean).

Also, it seems not very natural that the edges of the graph go in the decreasing direction of the linear form (note that `v-w` is the vector that goes from `w` to `v`, hence if an oriented edge `e` of the polyhedron is viewed as a vector, it is selected if `f(e)<0`), but perhaps it makes sense in the use case (it looks weird from an optimization perspective such as simplex method (note that Sage's MILP maximizes by default)).


---

Comment by git created at 2014-12-16 01:17:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-16 01:24:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-16 01:30:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-16 01:38:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-12-20 01:28:04

I am always using this with generic linear forms where every edge is not parallel to the kernel of the form. I then turn the digraphs into posets. Anyway, I have replaced `>` by `>=` so that doubled edges are added when this happen. This will raise an error when I use the Poset constructor, so I am happy with that.

I have also added a keyword to ask for the reverse orientation.

How can I check if the input is a linear form ?


---

Comment by tmonteil created at 2014-12-22 16:45:09

Replying to [comment:12 chapoton]:
> How can I check if the input is a linear form ?

I uploaded a patch that checks if the input is an instance of `VectorSpaceMorphism` whose codomain has dimension 1.

I removed from the doc the possibility to input a list or a tuple since it was not working in the previous version (it is doable to try/except `f = vector(f)` but i am not sure we have to think for the user).

> I have also added a keyword to ask for the reverse orientation.

It works well. Do you have some important reason to go in the decreasing direction by default ? If not, i would prefer to have it the other way by default, to be consistent with the MILP default, but perhaps i miss some other use case.
----
New commits:


---

Comment by chapoton created at 2014-12-24 10:06:11

ok, thanks.

I have made it increasing by default, as you seem to prefer it so.

I have added a test to check that the orientation is correct.

I have also removed an usused import and made two minor pep8 changes.

----
New commits:


---

Comment by chapoton created at 2014-12-25 08:41:38

Changing status from needs_info to needs_review.


---

Comment by tmonteil created at 2014-12-25 14:58:29

It looks good to me. Thanks.


---

Comment by tmonteil created at 2014-12-25 14:58:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-01-02 22:12:16

Resolution: fixed
