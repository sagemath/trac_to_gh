# Issue 28641: psutil doesn't build on recent Cygwin

Issue created by migration from https://trac.sagemath.org/ticket/28878

Original creator: embray

Original creation time: 2019-12-13 11:15:10

CC:  slelievre

psutil's Windows-related modules include some C headers that copy some Windows function and type declarations that are missing from public APIs.  However, Cygwin includes the [win32 API headers from the MinGW project](http://mingw-w64.org/doku.php/contribute#win32_api_and_runtime), which are more extensive.

Cygwin recently updated to MinGW-w64 7.0 which added some new structs to those headers that happen to already be redefined in psutil, so the psutil Cygwin patch needs to be updated to account for this (it still works on Cygwin installations using the older win32 headers, but for new builds this will be a problem).


---

Comment by embray created at 2019-12-13 11:15:23

I'm working on a patch...


---

Comment by embray created at 2019-12-13 11:44:45

Changing keywords from "" to "cygwin psutil".


---

Comment by embray created at 2019-12-13 11:44:45

This patch works on the new version of the headers, as well as an older version.  To check whether or not the patch is even relevant to your Cygwin install, run


```
$ cygcheck -s | grep 'w32api-headers'
w32api-headers                          5.0.4-1                    OK
```


This issue only affects version 7.0.0 and up.

There is no need to increase the patch level on the SPKG, because this is not a runtime issue; it only impacts building, so the patch will be needed if psutil is being built for the first time, or is being rebuilt for some other reason.
----
New commits:


---

Comment by embray created at 2019-12-13 11:44:45

Changing status from new to needs_review.


---

Comment by vbraun created at 2019-12-28 11:11:05

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-12-28 22:53:19

Resolution: fixed


---

Comment by embray created at 2019-12-30 15:00:56

Thanks!
