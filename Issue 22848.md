# Issue 22848: sagetex 3.0 is not python 3 compatible

Issue created by migration from Trac.

Original creator: aapitzsch

Original creation time: 2017-05-26 13:38:58

CC:  ddrake dimpase

Keywords: python3

Building Sage for python3 failed with


```
copying build/lib/sagetex.py -> $SAGE_SRC/local/lib/python3.6/site-packages
[sagetex-3.0]     byte-compiling $SAGE_SRC/local/lib/python3.6/site-packages/sagetex.py to sagetex.cpython-36.pyc
[sagetex-3.0]       File "$SAGE_SRC/local/lib/python3.6/site-packages/sagetex.py", line 76
[sagetex-3.0]         raise VersionError, errstr
[sagetex-3.0]                           ^
[sagetex-3.0]     SyntaxError: invalid syntax
```




---

Comment by chapoton created at 2017-05-26 19:40:11

where is the source of sagetex.py ?


---

Comment by chapoton created at 2017-05-26 19:40:11

Changing status from new to needs_info.


---

Comment by chapoton created at 2017-05-26 19:48:06

humm... it seems that sagetex.py is **generated** somehow from sagetex.dtx

The sources are in https://github.com/dandrake/sagetex


---

Comment by aapitzsch created at 2017-05-26 20:25:59

To fix this issue we probably have to wait for #22499.

The line causing the error is
https://github.com/dandrake/sagetex/blob/master/py-and-sty.dtx#L964


---

Comment by chapoton created at 2017-05-26 20:27:50

see https://github.com/dandrake/sagetex/pull/11/files


---

Comment by chapoton created at 2017-05-27 19:25:13

I have tried to write an email to Dan Drake, but I only managed to guess his email.


---

Comment by chapoton created at 2017-05-30 15:53:30

I got an answer from Dan Drake, saying that he is willing to transfer the ownership of sagetex github repository to the sagemath group.


---

Comment by chapoton created at 2017-06-02 20:11:19

sagetex is now part of the sagemath group in github:

https://github.com/sagemath/sagetex

People from this group, please merge there the pull requests `#5` and `#11`


---

Comment by kcrisman created at 2017-06-07 13:00:14

> sagetex is now part of the sagemath group in github:
> 
> https://github.com/sagemath/sagetexhttps://github.com/sagemath/sagetex
> 
> People from this group, please merge there the pull requests `#5` and `#11`
These have been merged, so should depend on #22499 (new package).


---

Comment by jhpalmieri created at 2018-09-25 03:15:08

Sagetex does not run correctly when using Sage built with Python 3. I mean, sagetex now builds, but it does not work:

```
$ ./sage example.sagetex.sage 
  File "example.sagetex.sage.py", line 248
    print 'SageTeX paused on example.tex line 365'
                                                 ^
SyntaxError: Missing parentheses in call to 'print'. Did you mean print('SageTeX paused on example.tex line 365')?
```

All of the print statements need to be updated.


---

Comment by jhpalmieri created at 2018-09-25 04:02:26

There is also an error when building sagetex with Python 3 which doesn't seem to stop the installation, but it breaks using it:

```
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/PYTHON3/sage-8.4.beta6/local/lib/python3.6/site-packages/sagetex.py", line 181
        exec preparse(splitup[i][2]) in globals, locals
                    ^
    SyntaxError: invalid syntax
```



---

Comment by chapoton created at 2018-09-26 12:31:44

I made a pull request on github, for the print problem only


---

Comment by kcrisman created at 2019-01-07 21:57:43

There is now a new release of SageTeX at #27024 which hopefully fixes most of this.


---

Comment by kcrisman created at 2019-01-09 20:23:13

Was this ever on #15530 or a related ticket, by the way?


---

Comment by dimpase created at 2019-01-10 04:45:12

Changing status from needs_info to positive_review.


---

Comment by dimpase created at 2019-01-10 04:45:12

I think this is fixed by #27024


---

Comment by dimpase created at 2019-01-10 06:19:43

Replying to [comment:13 kcrisman]:
> Was this ever on #15530 or a related ticket, by the way?
just added it there


---

Comment by kcrisman created at 2019-01-10 13:32:07

Nice.


---

Comment by embray created at 2019-02-26 13:58:00

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.


---

Comment by embray created at 2019-02-26 13:58:00

Resolution: invalid
