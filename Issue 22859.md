# Issue 22859: New format for the package installed stamp files in $SAGE_SPKG_INST

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2017-05-29 14:20:37

CC:  jdemeyer

The contents of the stamp files that get written to `$SAGE_SPKG_INST` by `spkg-install` have a somewhat ad-hoc format.  This updates the format to use JSON.

This change, and in particular the use of JSON, is motivated by #22510.  The idea here is I would like to write a list of installed files for a package, along with any other metadata about that package to the same file, so this requires some amount of structure.

This _could_ be accomplished with a simpler format easily, but I wanted to avoid using an ad-hoc format.

The downside to using JSON is that it is harder to parse with simple shell tools.  But as far as I know there are not currently any tools that consume the contents of these files.  And if such tools are written they can use Python or another language with JSON support.

Alternatively the files could be YAML-formatted--_simple_ YAML files can be simpler to parse than JSON.  But if want to parse it from Python we would probably want to include pyyaml as a dependency.


---

Comment by git created at 2017-05-29 14:21:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-05-29 15:26:38

This change should be mostly harmless :-)

Let me know when this is needs_review.


---

Comment by embray created at 2017-05-29 16:02:19

I was just waiting to see if by some chance there was a test somewhere broken by this.  I didn't think so just because grepping through the code it seemed highly unlikely.


---

Comment by embray created at 2017-05-29 16:02:19

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-06-01 19:39:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-04 10:08:47

Resolution: fixed
