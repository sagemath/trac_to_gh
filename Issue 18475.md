# Issue 18475: Create test for Degeneracy in Normal Form Games

Issue created by migration from https://trac.sagemath.org/ticket/18712

Original creator: jcampbell

Original creation time: 2015-06-16 12:49:21

CC:  kcrisman ptigwe vinceknight dimpase

Keywords: Game Theory, Normal Form Game, Degenerate

Degenerate games can cause problems for many algorithms resulting in strange and conflicting output. This ticket would add a method `game.is_degenerate()` to test for such behaviour.


---

Comment by vinceknight created at 2015-06-16 13:10:12

I'm CC'ing Karl also in case it is of interest to him.


---

Comment by jcampbell created at 2015-06-18 09:53:59

Last 10 new commits:


---

Comment by jcampbell created at 2015-06-18 09:53:59

Changing status from new to needs_review.


---

Comment by ptigwe created at 2015-06-19 14:20:13

Could you add a test where the row players payoff is given as

[[3, 0],
[0, 3],
[1.5, 1.5]]

This shows an example where the game is degenerate in mixed strategies, but not in pure.


---

Comment by vinceknight created at 2015-06-20 15:19:26

Done :)
----
New commits:


---

Comment by ptigwe created at 2015-06-22 10:59:50

Unless if I've gone wrong some where, the following game shouldn't be degenerate.


```
A = [[1, 0], [0, 1], [0, 0]]
B = [[1, 0], [0, 1], [0.7, 0.8]]
g = NormalFormGame([A, B])
g.is_degenerate()
True
```


You could try plotting the upper envelope diagrams on http://www.maths.lse.ac.uk/personal/stengel/UpperEnv.swf to see this.


---

Comment by jcampbell created at 2015-06-22 11:01:44

i'll look into it now


---

Comment by git created at 2015-06-26 16:33:39

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by vinceknight created at 2015-06-26 16:37:40

This is now ready for review. It involved a bit of work to figure out how to change the search over all mixed strategies to one over supports. We wrote the idea up here: http://vknight.org/unpeudemath/code/2015/06/25/on_testing_degeneracy_of_games/

It would be nice to reorganise the method in to a separate file but this could potentially be left to #18609 http://trac.sagemath.org/ticket/18609 and there is also a discussion here about reorganising the file structure: https://github.com/theref/sage-game-theory/issues/103


---

Comment by ptigwe created at 2015-06-29 11:33:56

I think it might be useful to have a `best_responses` function, which returns the indexes of the best response. So as a result, one could either make a call to this function from `num_best_responses`, or remove it completely as it would become a single line.


---

Comment by jcampbell created at 2015-07-01 08:49:04

New commits:


---

Comment by ptigwe created at 2015-07-01 14:51:20

Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.


---

Comment by vinceknight created at 2015-07-05 14:53:35

Replying to [comment:11 ptigwe]:
> Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.

Have implemented this: went for 0,1 indexing although this is not documented as such. Everything is documented with examples. Furthermore I added exception handling for games with more than 2 players and also handling certain bad strategy vectors.

I've also changed some of the documentation slightly to make use of the normal form game catalog that is now in `develop` (see #17392).
----
New commits:


---

Comment by ptigwe created at 2015-07-07 11:34:14

In the examples for the `best_responses` function, the second example for the second player actually calculates the best response for the first player.


```
sage: g.best_responses((1/2, 1/2), player=0)
```


Also, I think a value error should be raised when `player` is greater than 1. Currently the following happens.


```
g = NormalFormGame([matrix.identity(3)])
g.best_responses([1, 0, 0], 2)
.....
UnboundLocalError: local variable 'payoff_matrix' referenced before assignment
```



---

Comment by jcampbell created at 2015-07-08 10:34:19

New commits:


---

Comment by git created at 2015-07-28 08:05:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-07-28 10:11:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vinceknight created at 2015-07-28 10:53:17

New commits:


---

Comment by vinceknight created at 2015-07-28 10:54:02

Have tested and documentation builds.


---

Comment by git created at 2015-07-28 10:56:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2015-07-28 11:04:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-28 18:40:36

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-07-28 18:40:36

author & reviewer name


---

Comment by vinceknight created at 2015-07-28 18:43:09

Changing status from needs_work to needs_review.


---

Comment by vinceknight created at 2015-08-20 17:06:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-08-21 01:56:11

Resolution: fixed
