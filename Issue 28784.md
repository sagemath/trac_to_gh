# Issue 28784: Bug in setting the calculus method on manifolds

Issue created by migration from https://trac.sagemath.org/ticket/29021

Original creator: egourgoulhon

Original creation time: 2020-01-15 21:23:17

CC:  tscrim

Keywords: manifolds, calculus

In Sage 9.1.beta0, we have 

```
sage: M = Manifold(2, 'M')
sage: M.set_calculus_method('sympy')
sage: X.<x,y> = M.chart()
sage: X.calculus_method()
Available calculus methods (* = current):
 - SR (default) (*)
 - sympy
```

while the current calculus method on the chart `X` should be `sympy`, as requested for any chart on `M` by `M.set_calculus_method('sympy')`.
Prior to Sage 8.8, it was OK. The bug was actually introduced in #27601 (merged in Sage 8.8.beta1) by the accidental removal of the line 

```
self._calculus_method = method
```

in the code of `set_calculus_method()`. 

This ticket fixes it.


---

Comment by egourgoulhon created at 2020-01-15 21:25:20

New commits:


---

Comment by egourgoulhon created at 2020-01-15 21:26:57

Changing status from new to needs_review.


---

Comment by git created at 2020-01-15 21:43:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-01-15 23:53:55

LGTM.


---

Comment by tscrim created at 2020-01-15 23:53:55

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2020-01-16 09:00:45

Thank you for the review!


---

Comment by vbraun created at 2020-01-20 21:17:56

Resolution: fixed
