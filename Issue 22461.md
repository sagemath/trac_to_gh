# Issue 22461: Improve spyx documentation

archive/issues_022461.json:
```json
{
    "body": "CC:  @robertwb jpflori\n\nDo you do\n\n```\nimport sage.all\n```\n\nor \n\n```\nfrom sage.all import *\n```\n\nand when?  How else can one use spyx files well?  People seem to have trouble with this, based on posts to sage support groups, and even [Stackoverflow](http://stackoverflow.com/questions/43067894/differences-between-sage-and-spyx-in-numerical-evaluation).  Let's improve this situation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22698\n\n",
    "created_at": "2017-03-28T15:41:33Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Improve spyx documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22461",
    "user": "https://github.com/kcrisman"
}
```
CC:  @robertwb jpflori

Do you do

```
import sage.all
```

or 

```
from sage.all import *
```

and when?  How else can one use spyx files well?  People seem to have trouble with this, based on posts to sage support groups, and even [Stackoverflow](http://stackoverflow.com/questions/43067894/differences-between-sage-and-spyx-in-numerical-evaluation).  Let's improve this situation.

Issue created by migration from https://trac.sagemath.org/ticket/22698





---

archive/issue_comments_312622.json:
```json
{
    "body": "For the record: `.spyx` files are exactly the same as `.pyx` files. So we could even deprecate `.spyx` files if it makes people think that it's something Sage-specific while it's not.",
    "created_at": "2017-04-18T15:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312622",
    "user": "https://github.com/jdemeyer"
}
```

For the record: `.spyx` files are exactly the same as `.pyx` files. So we could even deprecate `.spyx` files if it makes people think that it's something Sage-specific while it's not.



---

archive/issue_comments_312623.json:
```json
{
    "body": "Wait, they don't have preparsing? Then ... why \"s\"pyx? WTH?",
    "created_at": "2017-04-19T12:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312623",
    "user": "https://github.com/kcrisman"
}
```

Wait, they don't have preparsing? Then ... why "s"pyx? WTH?



---

archive/issue_comments_312624.json:
```json
{
    "body": "Replying to [comment:2 kcrisman]:\n> Wait, they don't have preparsing?\n\nNo.",
    "created_at": "2017-04-19T14:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312624",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:2 kcrisman]:
> Wait, they don't have preparsing?

No.



---

archive/issue_comments_312625.json:
```json
{
    "body": "Then I guess a good way to document this would be to either deprecate them (this would have to be discussed on sage-devel though, maybe ask William too if he introduced them) or to make it really clear in lots of places where one might encounter them that there is zero difference with `.pyx`.  I'm still baffled by this ... Maybe when `SageX` was originally founded the idea was that `.pyx` would stay for old-style Pyrex files but that was abandoned, I'm just guessing.  Robert Bradshaw might know more.",
    "created_at": "2017-04-19T14:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312625",
    "user": "https://github.com/kcrisman"
}
```

Then I guess a good way to document this would be to either deprecate them (this would have to be discussed on sage-devel though, maybe ask William too if he introduced them) or to make it really clear in lots of places where one might encounter them that there is zero difference with `.pyx`.  I'm still baffled by this ... Maybe when `SageX` was originally founded the idea was that `.pyx` would stay for old-style Pyrex files but that was abandoned, I'm just guessing.  Robert Bradshaw might know more.



---

archive/issue_comments_312626.json:
```json
{
    "body": "I was mostly right but not 100%: there is one difference between `.spyx` and `.pyx` files: when running a command like\n\n```\n$ sage --cython somefile.spyx\n```\n\nSage will add some `.pxi` includes to the Cython sources and set some Sage-specific flags.\n\nWithin Sage itself, doing `cython(\"somefile.spyx\")`, there is no difference. When *executing* a Cython file by running `sage somefile.spyx`, there is also no difference.\n\nIn my opinion, `sage --cython` should just run plain Cython. Related: #22805",
    "created_at": "2017-04-20T10:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312626",
    "user": "https://github.com/jdemeyer"
}
```

I was mostly right but not 100%: there is one difference between `.spyx` and `.pyx` files: when running a command like

```
$ sage --cython somefile.spyx
```

Sage will add some `.pxi` includes to the Cython sources and set some Sage-specific flags.

Within Sage itself, doing `cython("somefile.spyx")`, there is no difference. When *executing* a Cython file by running `sage somefile.spyx`, there is also no difference.

In my opinion, `sage --cython` should just run plain Cython. Related: #22805



---

archive/issue_comments_312627.json:
```json
{
    "body": "Just reformulating my last comment, I can think of 3 ways to run Cython in a Sage environment:\n\n1. Within Sage, `load(\"foo.spyx\")`: compiles and executes the file\n\n2. `sage foo.spyx`: compiles and executes the file\n\n3. `sage --cython foo.spyx`: only runs Cython on the file\n\nOnly 3 makes a difference between `.spyx` and `.pyx` files. I suggest to deprecate this. More precisely, keep the current behaviour but deprecate `sage --cython foo.spyx` (but not `sage --cython foo.pyx` which just runs Cython).",
    "created_at": "2017-05-14T11:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312627",
    "user": "https://github.com/jdemeyer"
}
```

Just reformulating my last comment, I can think of 3 ways to run Cython in a Sage environment:

1. Within Sage, `load("foo.spyx")`: compiles and executes the file

2. `sage foo.spyx`: compiles and executes the file

3. `sage --cython foo.spyx`: only runs Cython on the file

Only 3 makes a difference between `.spyx` and `.pyx` files. I suggest to deprecate this. More precisely, keep the current behaviour but deprecate `sage --cython foo.spyx` (but not `sage --cython foo.pyx` which just runs Cython).



---

archive/issue_comments_312628.json:
```json
{
    "body": "Changing component from documentation to scripts.",
    "created_at": "2017-05-25T08:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312628",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from documentation to scripts.



---

archive/issue_comments_312629.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-25T08:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312629",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_312630.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-05-25T08:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312630",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_312631.json:
```json
{
    "body": "What about Sage specific `%runfile` and `%attach`?",
    "created_at": "2017-07-14T13:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312631",
    "user": "https://github.com/videlec"
}
```

What about Sage specific `%runfile` and `%attach`?



---

archive/issue_comments_312632.json:
```json
{
    "body": "Replying to [comment:13 vdelecroix]:\n> What about Sage specific `%runfile` and `%attach`?\n\nWhat do you mean; what is your question?",
    "created_at": "2017-07-14T13:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312632",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:13 vdelecroix]:
> What about Sage specific `%runfile` and `%attach`?

What do you mean; what is your question?



---

archive/issue_comments_312633.json:
```json
{
    "body": "Replying to [comment:14 jdemeyer]:\n> Replying to [comment:13 vdelecroix]:\n> > What about Sage specific `%runfile` and `%attach`?\n> \n> What do you mean; what is your question?\n\nThese are two other ways of running Cython code in Sage that were not mentioned.",
    "created_at": "2017-07-14T14:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312633",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:14 jdemeyer]:
> Replying to [comment:13 vdelecroix]:
> > What about Sage specific `%runfile` and `%attach`?
> 
> What do you mean; what is your question?

These are two other ways of running Cython code in Sage that were not mentioned.



---

archive/issue_comments_312634.json:
```json
{
    "body": "Replying to [comment:15 vdelecroix]:\n> These are two other ways of running Cython code in Sage that were not mentioned.\n\nRight: `%runfile` and `%attach` are essentially just wrappers around `load()`. So they also treat `.spyx` files and `.pyx` files the same.",
    "created_at": "2017-07-14T14:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312634",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 vdelecroix]:
> These are two other ways of running Cython code in Sage that were not mentioned.

Right: `%runfile` and `%attach` are essentially just wrappers around `load()`. So they also treat `.spyx` files and `.pyx` files the same.



---

archive/issue_comments_312635.json:
```json
{
    "body": "**ping**",
    "created_at": "2017-09-07T12:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312635",
    "user": "https://github.com/jdemeyer"
}
```

**ping**



---

archive/issue_comments_312636.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-07T16:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312636",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_312637.json:
```json
{
    "body": "Looks ok.",
    "created_at": "2017-09-07T16:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312637",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Looks ok.



---

archive/issue_comments_312638.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-10T22:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22461#issuecomment-312638",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
