# Issue 22461: Improve spyx documentation

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2017-03-28 15:41:33

CC:  robertwb jpflori

Do you do

```
import sage.all
```

or 

```
from sage.all import *
```

and when?  How else can one use spyx files well?  People seem to have trouble with this, based on posts to sage support groups, and even [Stackoverflow](http://stackoverflow.com/questions/43067894/differences-between-sage-and-spyx-in-numerical-evaluation).  Let's improve this situation.


---

Comment by jdemeyer created at 2017-04-18 15:56:11

For the record: `.spyx` files are exactly the same as `.pyx` files. So we could even deprecate `.spyx` files if it makes people think that it's something Sage-specific while it's not.


---

Comment by kcrisman created at 2017-04-19 12:59:14

Wait, they don't have preparsing? Then ... why "s"pyx? WTH?


---

Comment by jdemeyer created at 2017-04-19 14:52:55

Replying to [comment:2 kcrisman]:
> Wait, they don't have preparsing?

No.


---

Comment by kcrisman created at 2017-04-19 14:58:29

Then I guess a good way to document this would be to either deprecate them (this would have to be discussed on sage-devel though, maybe ask William too if he introduced them) or to make it really clear in lots of places where one might encounter them that there is zero difference with `.pyx`.  I'm still baffled by this ... Maybe when `SageX` was originally founded the idea was that `.pyx` would stay for old-style Pyrex files but that was abandoned, I'm just guessing.  Robert Bradshaw might know more.


---

Comment by jdemeyer created at 2017-04-20 10:18:03

I was mostly right but not 100%: there is one difference between `.spyx` and `.pyx` files: when running a command like

```
$ sage --cython somefile.spyx
```

Sage will add some `.pxi` includes to the Cython sources and set some Sage-specific flags.

Within Sage itself, doing `cython("somefile.spyx")`, there is no difference. When _executing_ a Cython file by running `sage somefile.spyx`, there is also no difference.

In my opinion, `sage --cython` should just run plain Cython. Related: #22805


---

Comment by jdemeyer created at 2017-05-14 11:19:53

Just reformulating my last comment, I can think of 3 ways to run Cython in a Sage environment:

1. Within Sage, `load("foo.spyx")`: compiles and executes the file

2. `sage foo.spyx`: compiles and executes the file

3. `sage --cython foo.spyx`: only runs Cython on the file

Only 3 makes a difference between `.spyx` and `.pyx` files. I suggest to deprecate this. More precisely, keep the current behaviour but deprecate `sage --cython foo.spyx` (but not `sage --cython foo.pyx` which just runs Cython).


---

Comment by jdemeyer created at 2017-05-25 08:35:18

Changing component from documentation to scripts.


---

Comment by jdemeyer created at 2017-05-25 08:39:22

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-05-25 08:39:22

New commits:


---

Comment by vdelecroix created at 2017-07-14 13:54:18

What about Sage specific `%runfile` and `%attach`?


---

Comment by jdemeyer created at 2017-07-14 13:57:48

Replying to [comment:13 vdelecroix]:
> What about Sage specific `%runfile` and `%attach`?

What do you mean; what is your question?


---

Comment by vdelecroix created at 2017-07-14 14:01:40

Replying to [comment:14 jdemeyer]:
> Replying to [comment:13 vdelecroix]:
> > What about Sage specific `%runfile` and `%attach`?
> 
> What do you mean; what is your question?

These are two other ways of running Cython code in Sage that were not mentioned.


---

Comment by jdemeyer created at 2017-07-14 14:09:11

Replying to [comment:15 vdelecroix]:
> These are two other ways of running Cython code in Sage that were not mentioned.

Right: `%runfile` and `%attach` are essentially just wrappers around `load()`. So they also treat `.spyx` files and `.pyx` files the same.


---

Comment by jdemeyer created at 2017-09-07 12:22:07

*ping*


---

Comment by jpflori created at 2017-09-07 16:54:54

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2017-09-07 16:54:54

Looks ok.


---

Comment by vbraun created at 2017-09-10 22:05:44

Resolution: fixed
