# Issue 33592: sage.graphs: Do not use SAGE_TMP in doctests

archive/issues_033592.json:
```json
{
    "body": "CC:  @orlitzky @dcoudert @dimpase @fchapoton\n\n(split out from #33213)\n\nIssue created by migration from https://trac.sagemath.org/ticket/33829\n\n",
    "created_at": "2022-05-09T23:26:54Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage.graphs: Do not use SAGE_TMP in doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33592",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @orlitzky @dcoudert @dimpase @fchapoton

(split out from #33213)

Issue created by migration from https://trac.sagemath.org/ticket/33829





---

archive/issue_comments_477541.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-05-09T23:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477541",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_477542.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-09T23:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477542",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477543.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-09T23:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477544.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-10T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477544",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477545.json:
```json
{
    "body": "LGTM. All tests pass.",
    "created_at": "2022-05-10T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477545",
    "user": "https://github.com/dcoudert"
}
```

LGTM. All tests pass.



---

archive/issue_comments_477546.json:
```json
{
    "body": "Merge failure on top of:\n\ne2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel\n\nb4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable\n\naf23627f18 Trac #33809: some pathlib in combinat and groups\n\n955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories\n\n3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl\n\na3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP\n\n2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure\n\n7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file\n\nd1152701c4 Trac #33787: Installation manual: Update section \"system-wide install\"\n\n0ae55652cf Trac #33782: ci-cygwin: Update python version\n\n833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte\n\nb376a8d71c Trac #33771: SSLContext needs an argument\n\ndf168c8112 Trac #33763: Refactor src/sage/docs\n\n9597eafded Trac #33748: make accessing coefficients of finite-field elements easier\n\nf02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion\n\n8943dc07fc Trac #33743: Faster random tree generator\n\n773ec37bec Trac #33740: Add conda dev environment\n\n5e65c16108 Trac #33734: variety() for polynomial systems over \u211a using msolve\n\n8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers\n\n6f4efb0bf3 Updated [SageMath](SageMath) version to 9.7.beta0\n\n\n\nmerge was not clean: conflicts in src/sage/graphs/isgci.py",
    "created_at": "2022-05-22T10:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477546",
    "user": "https://github.com/vbraun"
}
```

Merge failure on top of:

e2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel

b4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable

af23627f18 Trac #33809: some pathlib in combinat and groups

955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories

3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl

a3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP

2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure

7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file

d1152701c4 Trac #33787: Installation manual: Update section "system-wide install"

0ae55652cf Trac #33782: ci-cygwin: Update python version

833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte

b376a8d71c Trac #33771: SSLContext needs an argument

df168c8112 Trac #33763: Refactor src/sage/docs

9597eafded Trac #33748: make accessing coefficients of finite-field elements easier

f02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion

8943dc07fc Trac #33743: Faster random tree generator

773ec37bec Trac #33740: Add conda dev environment

5e65c16108 Trac #33734: variety() for polynomial systems over â„š using msolve

8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers

6f4efb0bf3 Updated [SageMath](SageMath) version to 9.7.beta0



merge was not clean: conflicts in src/sage/graphs/isgci.py



---

archive/issue_comments_477547.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-22T10:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477547",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_477548.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-25T20:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477549.json:
```json
{
    "body": "Merged #33771 to resolve merge conflict",
    "created_at": "2022-05-25T20:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477549",
    "user": "https://github.com/mkoeppe"
}
```

Merged #33771 to resolve merge conflict



---

archive/issue_comments_477550.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-25T20:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477550",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_477551.json:
```json
{
    "body": "in `isgci.py` in the following block you use variable `d` but this variable is unknown (reported by pyflakes)\n\n```diff\n+            # Save a systemwide updated copy whenever possible\n+            try:\n+                z.extract(_XML_FILE, GRAPHS_DATA_DIR)\n+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)\n+            except IOError:\n+                z.extract(_XML_FILE, d)\n+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)\n```\n\n\npyflakes also complains about  `os`  that is imported but not used. This is a minor issue.",
    "created_at": "2022-05-26T08:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477551",
    "user": "https://github.com/dcoudert"
}
```

in `isgci.py` in the following block you use variable `d` but this variable is unknown (reported by pyflakes)

```diff
+            # Save a systemwide updated copy whenever possible
+            try:
+                z.extract(_XML_FILE, GRAPHS_DATA_DIR)
+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)
+            except IOError:
+                z.extract(_XML_FILE, d)
+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)
```


pyflakes also complains about  `os`  that is imported but not used. This is a minor issue.



---

archive/issue_comments_477552.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-06-10T09:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477552",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_477553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-10T09:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477553",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477554.json:
```json
{
    "body": "something should still be done with the `isgci.py` routine from comment:10\n\nit looks like the fallback `SAGE_TMP` location never worked because `_parse_db` doesn't try the fallback location, so maybe we should just delete the whole `except IOError:` block",
    "created_at": "2022-06-10T11:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477554",
    "user": "https://github.com/orlitzky"
}
```

something should still be done with the `isgci.py` routine from comment:10

it looks like the fallback `SAGE_TMP` location never worked because `_parse_db` doesn't try the fallback location, so maybe we should just delete the whole `except IOError:` block



---

archive/issue_comments_477555.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-06-10T11:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477555",
    "user": "https://github.com/orlitzky"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_477556.json:
```json
{
    "body": "I'm trying to replace what's inside the `except` by `pass`. We can of course go even further and get rid of `try` all together.",
    "created_at": "2022-06-10T16:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477556",
    "user": "https://github.com/dimpase"
}
```

I'm trying to replace what's inside the `except` by `pass`. We can of course go even further and get rid of `try` all together.



---

archive/issue_comments_477557.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-10T22:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477557",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_477558.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-06-10T22:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477558",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_477559.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-13T10:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_477560.json:
```json
{
    "body": "rebased over latest 9.7.beta2",
    "created_at": "2022-06-13T10:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477560",
    "user": "https://github.com/dimpase"
}
```

rebased over latest 9.7.beta2



---

archive/issue_comments_477561.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-13T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477561",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477562.json:
```json
{
    "body": "it works",
    "created_at": "2022-06-13T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477562",
    "user": "https://github.com/dimpase"
}
```

it works



---

archive/issue_comments_477563.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-17T22:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33592#issuecomment-477563",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_030314.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2022-06-17T22:52:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33592",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33592#event-30314"
}
```
