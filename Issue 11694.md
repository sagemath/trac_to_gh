# Issue 11694: zshell prompt

Issue created by migration from Trac.

Original creator: malb

Original creation time: 2011-09-28 19:54:22

This sucks:


```
malb`@`road:~ $ env | grep "SHELL="                                                                                                                                
SHELL=/bin/zsh
malb`@`road:~ $ sage -sh
...

Bypassing shell configuration files ...

SAGE_ROOT=/home/malb/Sage/current\n(sage subshell) \h:\W \u$ 
```


i.e., the prompt is all wrong, compared to:


```
malb`@`road:/opt/sage-4.7.2.alpha3-prerelease/local/bin $ /opt/sage-4.7.2.alpha3-prerelease/sage -sh

Starting subshell with Sage environment variables set.
Be sure to exit when you are done and do not do anything
with other copies of Sage!

Bypassing shell configuration files ...

SAGE_ROOT=/opt/sage-4.7.2.alpha3-prerelease
(sage subshell) road:/opt/sage-4.7.2.alpha3-prerelease/local/bin malb$ 
```



---

Attachment


---

Comment by malb created at 2011-09-28 19:57:11

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2011-09-28 20:39:01

This looks good and it works in my (brief) testing.  See #10822 and #11790 for patches which already include this particular fix. It's probably easiest to get this one merged, and then rebase the others with respect to this one.  But if you use zsh, I would be happy to hear your input on #10822.

I think that since it seems to work, and since we came up with the same change completely independently, this can be given a positive review.

(Note that the "scripts" repository and the "root" repository are different.  This should be applied to the scripts repository.  I've changed the ticket description to clarify this.)


---

Comment by jhpalmieri created at 2011-09-28 20:39:01

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2011-09-28 20:39:01

Changing priority from major to minor.


---

Comment by malb created at 2011-09-28 21:25:14

Replying to [comment:2 jhpalmieri]:
> This looks good and it works in my (brief) testing.  See #10822 and #11790 for patches which already include this particular fix. It's probably easiest to get this one merged, and then rebase the others with respect to this one. 

Oh, thanks!

> But if you use zsh, I would be happy to hear your input on #10822.

I'll take a look.

> I think that since it seems to work, and since we came up with the same change completely independently, this can be given a positive review.

Thanks!

> (Note that the "scripts" repository and the "root" repository are different.  This should be applied to the scripts repository.  I've changed the ticket description to clarify this.)


Whoops, I thought they would have been merged a while ago.


---

Comment by jdemeyer created at 2011-10-05 07:47:20

Resolution: fixed
