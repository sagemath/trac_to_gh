# Issue 27213: some refactoring in plot3d

archive/issues_027213.json:
```json
{
    "body": "CC:  @tscrim\n\njust small changes, no major revamp\n\nOne could be smarter when plotting these things, but not now.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27450\n\n",
    "created_at": "2019-03-09T20:53:19Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "some refactoring in plot3d",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27213",
    "user": "https://github.com/fchapoton"
}
```
CC:  @tscrim

just small changes, no major revamp

One could be smarter when plotting these things, but not now.

Issue created by migration from https://trac.sagemath.org/ticket/27450





---

archive/issue_comments_382994.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-09T21:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382994",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_382995.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-03-09T21:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382995",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_382996.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-10T06:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382996",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_382997.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-10T08:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382997",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382998.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-10T08:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382998",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_382999.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-11T09:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-382999",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_068184.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27213#event-68184"
}
```



---

archive/issue_comments_383000.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383000",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_383001.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-05T15:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383001",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_383002.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-05T15:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383002",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_383003.json:
```json
{
    "body": "Why does this remove\n\n\n```diff\n-def len3d(v):\n-    \"\"\"\n-    Return the norm of a vector in three dimensions.\n-\n-    EXAMPLES::\n-\n-        sage: from sage.plot.plot3d.index_face_set import len3d\n-        sage: len3d((1,2,3))\n-        3.7416573867739413\n-    \"\"\"\n-    return sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2])\n-\n-\n```\n\n\nEven if it isn't used anywhere, and probably doesn't belong there (which I agree), it's still a documented, public function, and has to go through a deprecation process.  An unfortunate fact of overdocumenting and underuse of private underscored functions.",
    "created_at": "2019-04-05T16:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383003",
    "user": "https://github.com/embray"
}
```

Why does this remove


```diff
-def len3d(v):
-    """
-    Return the norm of a vector in three dimensions.
-
-    EXAMPLES::
-
-        sage: from sage.plot.plot3d.index_face_set import len3d
-        sage: len3d((1,2,3))
-        3.7416573867739413
-    """
-    return sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2])
-
-
```


Even if it isn't used anywhere, and probably doesn't belong there (which I agree), it's still a documented, public function, and has to go through a deprecation process.  An unfortunate fact of overdocumenting and underuse of private underscored functions.



---

archive/issue_comments_383004.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-04-05T18:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383004",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_383005.json:
```json
{
    "body": "ok, deprecation done as required, thx",
    "created_at": "2019-04-05T18:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383005",
    "user": "https://github.com/fchapoton"
}
```

ok, deprecation done as required, thx



---

archive/issue_comments_383006.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-05T18:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383006",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_383007.json:
```json
{
    "body": "still one failing doctest, see bots",
    "created_at": "2019-04-06T06:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383007",
    "user": "https://github.com/fchapoton"
}
```

still one failing doctest, see bots



---

archive/issue_comments_383008.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-06T06:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383008",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_383009.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-06T16:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_383010.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-06T16:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383010",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_383011.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2019-04-07T16:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383011",
    "user": "https://github.com/fchapoton"
}
```

green bot, please review



---

archive/issue_comments_383012.json:
```json
{
    "body": "Replying to [comment:14 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[a703dce](https://git.sagemath.org/sage.git/commit/?id=a703dcea09bb7a5993e74c7cf79b49ddb5cd13a1)||`fix doctest in plot3d`||\n\nDo we know why this test result changed and if that change is expected/acceptable?",
    "created_at": "2019-04-08T15:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383012",
    "user": "https://github.com/embray"
}
```

Replying to [comment:14 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[a703dce](https://git.sagemath.org/sage.git/commit/?id=a703dcea09bb7a5993e74c7cf79b49ddb5cd13a1)||`fix doctest in plot3d`||

Do we know why this test result changed and if that change is expected/acceptable?



---

archive/issue_comments_383013.json:
```json
{
    "body": "hmm, in fact, it probably did not change. It seems to have changed during some intermediate state of the code. I then put it back, but not perfectly..",
    "created_at": "2019-04-08T18:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383013",
    "user": "https://github.com/fchapoton"
}
```

hmm, in fact, it probably did not change. It seems to have changed during some intermediate state of the code. I then put it back, but not perfectly..



---

archive/issue_comments_383014.json:
```json
{
    "body": "Erik ? do you want me to make it more clear that the doctest was unchanged ?",
    "created_at": "2019-04-12T09:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383014",
    "user": "https://github.com/fchapoton"
}
```

Erik ? do you want me to make it more clear that the doctest was unchanged ?



---

archive/issue_comments_383015.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2019-04-15T17:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383015",
    "user": "https://github.com/fchapoton"
}
```

green bot, please review



---

archive/issue_comments_383016.json:
```json
{
    "body": "Only comment from me is `if not(foo and bar):` -> `if not (foo and bar):`.",
    "created_at": "2019-04-16T01:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383016",
    "user": "https://github.com/tscrim"
}
```

Only comment from me is `if not(foo and bar):` -> `if not (foo and bar):`.



---

archive/issue_comments_383017.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-16T06:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_383018.json:
```json
{
    "body": "Replying to [comment:18 chapoton]:\n> hmm, in fact, it probably did not change. It seems to have changed during some intermediate state of the code. I then put it back, but not perfectly..\n\nI still don't understand.  Did the output change or not?  It should be easy enough to confirm; and if so then the question is \"why?\"",
    "created_at": "2019-04-16T15:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383018",
    "user": "https://github.com/embray"
}
```

Replying to [comment:18 chapoton]:
> hmm, in fact, it probably did not change. It seems to have changed during some intermediate state of the code. I then put it back, but not perfectly..

I still don't understand.  Did the output change or not?  It should be easy enough to confirm; and if so then the question is "why?"



---

archive/issue_comments_383019.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-04-16T16:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_383020.json:
```json
{
    "body": "I have squashed my commits.\n\nThe answer is \"no change\".",
    "created_at": "2019-04-16T16:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383020",
    "user": "https://github.com/fchapoton"
}
```

I have squashed my commits.

The answer is "no change".



---

archive/issue_comments_383021.json:
```json
{
    "body": "and the bot is green again",
    "created_at": "2019-04-16T18:25:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383021",
    "user": "https://github.com/fchapoton"
}
```

and the bot is green again



---

archive/issue_comments_383022.json:
```json
{
    "body": "LGTM.",
    "created_at": "2019-04-23T05:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383022",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_383023.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-23T05:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383023",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_383024.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-27T17:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27213#issuecomment-383024",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068185.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-27T17:44:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27213",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27213#event-68185"
}
```
