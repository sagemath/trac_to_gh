# Issue 34573: Automaton.language() implementation is not consistent with docstring

Issue created by migration from https://trac.sagemath.org/ticket/34810

Original creator: @DaveWitteMorris

Original creation time: 2022-11-30 05:05:16

Keywords: automaton

As pointed out in [this sage-devel thread](https://groups.google.com/g/sage-devel/c/kRcCO_-9MCc), the docstring of `Automaton.language()` states that all keyword arguments "will be passed on to the process iterator", but, in fact, the code of this method completely ignores the keyword arguments:

```
def language(self, max_length=None, **kwargs):
        <docstring omitted>
    T = self.with_output()
    return T.language(max_length)
```

We should fix the code (or correct the docstring if that's not feasible).


---

Comment by @jimkoen created at 2022-12-03 15:54:14

From reading the source code, it should be enough to just pass the keyword arguments to the transducer created in Automaton.language:


```
    def language(self, max_length=None, **kwargs):
        <omitted string>
        T = self.with_output()
        return T.language(max_length)
```

calls this:


```
#Transducer.language():
def language(self, max_length=None, **kwargs):
        <string omitted>
        kwargs['process_iterator_class'] = _FSMProcessIteratorAll_
        kwargs['max_length'] = max_length
        kwargs['process_all_prefixes_of_input'] = True
        it = self.iter_process(**kwargs)
        for _ in it:
            for branch in it._finished_:
                if branch.accept:
                    yield branch.output
            it._finished_ = []
```

