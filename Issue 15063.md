# Issue 15063: Weyl and Clifford Algebras

archive/issues_015063.json:
```json
{
    "body": "Assignee: @tscrim\n\nCC:  @darijgr sage-combinat\n\nInitial implementations of Weyl and Clifford algebras.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15300\n\n",
    "created_at": "2013-10-16T23:16:37Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Weyl and Clifford Algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15063",
    "user": "https://github.com/tscrim"
}
```
Assignee: @tscrim

CC:  @darijgr sage-combinat

Initial implementations of Weyl and Clifford algebras.

Issue created by migration from https://trac.sagemath.org/ticket/15300





---

archive/issue_comments_192417.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-16T23:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192417",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_192418.json:
```json
{
    "body": "Attachment [trac_15300-weyl_clifford_algebras-ts.patch](tarball://root/attachments/some-uuid/ticket15300/trac_15300-weyl_clifford_algebras-ts.patch) by @tscrim created at 2013-11-02 21:17:22",
    "created_at": "2013-11-02T21:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192418",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_15300-weyl_clifford_algebras-ts.patch](tarball://root/attachments/some-uuid/ticket15300/trac_15300-weyl_clifford_algebras-ts.patch) by @tscrim created at 2013-11-02 21:17:22



---

archive/issue_comments_192419.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-11-05T23:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192419",
    "user": "https://github.com/anneschilling"
}
```

New commits:



---

archive/issue_comments_192420.json:
```json
{
    "body": "Attachment [trac_15300-todos-dg.patch](tarball://root/attachments/some-uuid/ticket15300/trac_15300-todos-dg.patch) by @darijgr created at 2013-11-07 08:43:21\n\nThe patch I've posted contains a couple corrections and comments. Sorry for being this slow; the cold isn't very beneficial for my concentration.\n\nEDIT: The commit list below has nothing to do with my post; it seems that trac automatically appends it to whatever post is made first after the commits. Anyway, for everyone who is not at Davis: The git commits on this ticket are a sandbox for people merging git; the true work is being done in the hg patches. I'm very positive this one is going to be reviewed way before we move over to git.\n----\nNew commits:",
    "created_at": "2013-11-07T08:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192420",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_15300-todos-dg.patch](tarball://root/attachments/some-uuid/ticket15300/trac_15300-todos-dg.patch) by @darijgr created at 2013-11-07 08:43:21

The patch I've posted contains a couple corrections and comments. Sorry for being this slow; the cold isn't very beneficial for my concentration.

EDIT: The commit list below has nothing to do with my post; it seems that trac automatically appends it to whatever post is made first after the commits. Anyway, for everyone who is not at Davis: The git commits on this ticket are a sandbox for people merging git; the true work is being done in the hg patches. I'm very positive this one is going to be reviewed way before we move over to git.
----
New commits:



---

archive/issue_comments_192421.json:
```json
{
    "body": "New commits:",
    "created_at": "2013-11-08T20:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192421",
    "user": "https://github.com/tscrim"
}
```

New commits:



---

archive/issue_comments_192422.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-08T20:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192423.json:
```json
{
    "body": "Changing keywords from \"\" to \"days54\".",
    "created_at": "2013-11-08T22:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192423",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "" to "days54".



---

archive/issue_comments_192424.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-30T05:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192425.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-30T07:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192426.json:
```json
{
    "body": "Is there an established class for bilinear forms (not necessarily symmetric!) on free modules? I'd need one to get anywhere towards the Clifford-exterior iso.\n\nThe `scalar` function as it stands is rather useless, since on the exterior algebra it just returns the product of the constant coefficients of `self` and `other`. What should be made (I can do that) is the lift of a bilinear (not quadratic) form on `V` to the exterior algebra of `V` (using the Gram matrix). But that requires bilinear forms, too, so I'd love to hear whether they exist before doing any changes.",
    "created_at": "2013-12-03T01:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192426",
    "user": "https://github.com/darijgr"
}
```

Is there an established class for bilinear forms (not necessarily symmetric!) on free modules? I'd need one to get anywhere towards the Clifford-exterior iso.

The `scalar` function as it stands is rather useless, since on the exterior algebra it just returns the product of the constant coefficients of `self` and `other`. What should be made (I can do that) is the lift of a bilinear (not quadratic) form on `V` to the exterior algebra of `V` (using the Gram matrix). But that requires bilinear forms, too, so I'd love to hear whether they exist before doing any changes.



---

archive/issue_comments_192427.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-03T03:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192428.json:
```json
{
    "body": "Replying to [comment:16 darij]:\n> Is there an established class for bilinear forms (not necessarily symmetric!) on free modules? I'd need one to get anywhere towards the Clifford-exterior iso.\n\nI don't think so. I think this is usually worked (hacked) around using dedicated methods.\n\n> The `scalar` function as it stands is rather useless, since on the exterior algebra it just returns the product of the constant coefficients of `self` and `other`. What should be made (I can do that) is the lift of a bilinear (not quadratic) form on `V` to the exterior algebra of `V` (using the Gram matrix). But that requires bilinear forms, too, so I'd love to hear whether they exist before doing any changes.\n\nI'd just have a function `Element.scalar(other)` (or some other name) which projects down `self` and `other` to the exterior algebra and does the computation there via some (predefined) `scalar()` method.",
    "created_at": "2013-12-03T04:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192428",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:16 darij]:
> Is there an established class for bilinear forms (not necessarily symmetric!) on free modules? I'd need one to get anywhere towards the Clifford-exterior iso.

I don't think so. I think this is usually worked (hacked) around using dedicated methods.

> The `scalar` function as it stands is rather useless, since on the exterior algebra it just returns the product of the constant coefficients of `self` and `other`. What should be made (I can do that) is the lift of a bilinear (not quadratic) form on `V` to the exterior algebra of `V` (using the Gram matrix). But that requires bilinear forms, too, so I'd love to hear whether they exist before doing any changes.

I'd just have a function `Element.scalar(other)` (or some other name) which projects down `self` and `other` to the exterior algebra and does the computation there via some (predefined) `scalar()` method.



---

archive/issue_comments_192429.json:
```json
{
    "body": "Do you think it makes sense to add a `BilinearForm` class in analogy to `QuadraticForm`, or should I just use matrices to represent bilinear forms?",
    "created_at": "2013-12-06T04:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192429",
    "user": "https://github.com/darijgr"
}
```

Do you think it makes sense to add a `BilinearForm` class in analogy to `QuadraticForm`, or should I just use matrices to represent bilinear forms?



---

archive/issue_comments_192430.json:
```json
{
    "body": "It depends what feature about bilinear forms you need for now. If it's just about computing it on some elements, I would stick for now with implementing appropriate \"scalar\" methods. Granted, it's a bit rudimentary. In the long run we want to have proper multivariate morphisms, with support from the coercion model. See #8900 and http://trac.sagemath.org/wiki/CategoriesRoadMap.\n\nCheers,\n                                       Nicolas",
    "created_at": "2013-12-10T09:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192430",
    "user": "https://github.com/nthiery"
}
```

It depends what feature about bilinear forms you need for now. If it's just about computing it on some elements, I would stick for now with implementing appropriate "scalar" methods. Granted, it's a bit rudimentary. In the long run we want to have proper multivariate morphisms, with support from the coercion model. See #8900 and http://trac.sagemath.org/wiki/CategoriesRoadMap.

Cheers,
                                       Nicolas



---

archive/issue_comments_192431.json:
```json
{
    "body": "What I want is to change the `WeylAlgebra` class to depend upon a space with a bilinear form, not on a polynomial ring. So the bilinear form will be a parameter. Still OK if it is a matrix or should I rather have an extra class?",
    "created_at": "2013-12-10T16:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192431",
    "user": "https://github.com/darijgr"
}
```

What I want is to change the `WeylAlgebra` class to depend upon a space with a bilinear form, not on a polynomial ring. So the bilinear form will be a parameter. Still OK if it is a matrix or should I rather have an extra class?



---

archive/issue_comments_192432.json:
```json
{
    "body": "Replying to [comment:21 darij]:\n> What I want is to change the `WeylAlgebra` class to depend upon a space with a bilinear form, not on a polynomial ring. So the bilinear form will be a parameter. Still OK if it is a matrix or should I rather have an extra class?\n\nI think a matrix would be best for now (although I would like to keep the polynomial ring version).\n\nThanks,\n\nTravis",
    "created_at": "2013-12-10T16:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192432",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:21 darij]:
> What I want is to change the `WeylAlgebra` class to depend upon a space with a bilinear form, not on a polynomial ring. So the bilinear form will be a parameter. Still OK if it is a matrix or should I rather have an extra class?

I think a matrix would be best for now (although I would like to keep the polynomial ring version).

Thanks,

Travis



---

archive/issue_comments_192433.json:
```json
{
    "body": "Will be a matrix then.\n\nYeah, I'm not going to deprecate your Weyl algebra; I *might* end up renaming it, though. Thing is, the Weyl algebra of an antisymmetric bilinear form is the most correct analogue of the Clifford algebra known to me (there might be better ones, though) -- far closer than the Weyl algebra of a polynomial ring (which is just the Weyl algebra of the usual antisymmetric form which is\n\n```\n0 1\n-1 0\n```\n\nas a block matrix.",
    "created_at": "2013-12-10T17:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192433",
    "user": "https://github.com/darijgr"
}
```

Will be a matrix then.

Yeah, I'm not going to deprecate your Weyl algebra; I *might* end up renaming it, though. Thing is, the Weyl algebra of an antisymmetric bilinear form is the most correct analogue of the Clifford algebra known to me (there might be better ones, though) -- far closer than the Weyl algebra of a polynomial ring (which is just the Weyl algebra of the usual antisymmetric form which is

```
0 1
-1 0
```

as a block matrix.



---

archive/issue_comments_192434.json:
```json
{
    "body": "I'm okay with renaming the class, but I'd like to keep the global entry point the same. In other words, I'd like to create it via `WeylAlgebra(QQ, 4)`, where the absence of the bilinear form says to use the polynomial representation, or perhaps with a keyword such as `polynomial=True`. Thanks.",
    "created_at": "2013-12-10T20:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192434",
    "user": "https://github.com/tscrim"
}
```

I'm okay with renaming the class, but I'd like to keep the global entry point the same. In other words, I'd like to create it via `WeylAlgebra(QQ, 4)`, where the absence of the bilinear form says to use the polynomial representation, or perhaps with a keyword such as `polynomial=True`. Thanks.



---

archive/issue_comments_192435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-04T01:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192436.json:
```json
{
    "body": "There is a stupid `__repr__` bug I've no idea how to fix.\n\n```\nsage: A = CliffordAlgebra(QuadraticForm(QQ, 3, [1,0,-1,3,-4,5]))\nsage: A.basis()\nFinite family {(0, 1): e0*e1, (1, 2): ee2, (0,): e0, (1,): e1, (0, 1, 2): e0*ee2, (2,): e2, (): 1, (0, 2): e0*e2}\n```\n\nSee the `ee2`? It's an `e1*e2`, which the `__repr__` routine seems to simplify to `ee2` because `1*` can be omitted, right? One way to deal with it would be to not use the multiplication signs; what do you think about that?\n\n(Also, the doctests of `lift_isometry` are wrong -- could you compute them by hand and re-insert them? Thank you.)\n\nEDIT: Oh, I see, the bug is in `repr_from_monomials` of `weyl_algebra.py`, not in some big free-module module.",
    "created_at": "2014-03-26T00:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192436",
    "user": "https://github.com/darijgr"
}
```

There is a stupid `__repr__` bug I've no idea how to fix.

```
sage: A = CliffordAlgebra(QuadraticForm(QQ, 3, [1,0,-1,3,-4,5]))
sage: A.basis()
Finite family {(0, 1): e0*e1, (1, 2): ee2, (0,): e0, (1,): e1, (0, 1, 2): e0*ee2, (2,): e2, (): 1, (0, 2): e0*e2}
```

See the `ee2`? It's an `e1*e2`, which the `__repr__` routine seems to simplify to `ee2` because `1*` can be omitted, right? One way to deal with it would be to not use the multiplication signs; what do you think about that?

(Also, the doctests of `lift_isometry` are wrong -- could you compute them by hand and re-insert them? Thank you.)

EDIT: Oh, I see, the bug is in `repr_from_monomials` of `weyl_algebra.py`, not in some big free-module module.



---

archive/issue_comments_192437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-30T19:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-30T22:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T02:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192440.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T02:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192441.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T02:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192442.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T03:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192443.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T03:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192444.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T04:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192445.json:
```json
{
    "body": "OK, enough for today. I've left you a question in the latest commit.\n\nAlso, what exactly does this do?\n\n```\n        E = super(ExteriorAlgebra, cls).__classcall__(cls, R, names)\n```\n\nI thought it would classcall ``cls`` as a ``CliffordAlgebra``, but then shouldn't it give it a quadratic form?\n----\nNew commits:",
    "created_at": "2014-03-31T04:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192445",
    "user": "https://github.com/darijgr"
}
```

OK, enough for today. I've left you a question in the latest commit.

Also, what exactly does this do?

```
        E = super(ExteriorAlgebra, cls).__classcall__(cls, R, names)
```

I thought it would classcall ``cls`` as a ``CliffordAlgebra``, but then shouldn't it give it a quadratic form?
----
New commits:



---

archive/issue_comments_192446.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T16:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192447.json:
```json
{
    "body": "I've added a cohomology part as well, but there's still some tweaks left to do.\n\nThat passes to the `__classcall__` (not `__classcall_private__`) of the class `CliffordAlgebra`, which just ends up constructing the object.",
    "created_at": "2014-03-31T16:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192447",
    "user": "https://github.com/tscrim"
}
```

I've added a cohomology part as well, but there's still some tweaks left to do.

That passes to the `__classcall__` (not `__classcall_private__`) of the class `CliffordAlgebra`, which just ends up constructing the object.



---

archive/issue_comments_192448.json:
```json
{
    "body": "Yes, but wouldn't that method require passing it a quadratic form? Or am I confusing it with `__init__`?",
    "created_at": "2014-03-31T16:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192448",
    "user": "https://github.com/darijgr"
}
```

Yes, but wouldn't that method require passing it a quadratic form? Or am I confusing it with `__init__`?



---

archive/issue_comments_192449.json:
```json
{
    "body": "Loads of doctests fail currently. Is this a WIP or have you changed some class names without changing references to them?\n\nAlso, I feel like more info is needed on what `s_coeff` represents and how it should be given.",
    "created_at": "2014-03-31T16:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192449",
    "user": "https://github.com/darijgr"
}
```

Loads of doctests fail currently. Is this a WIP or have you changed some class names without changing references to them?

Also, I feel like more info is needed on what `s_coeff` represents and how it should be given.



---

archive/issue_comments_192450.json:
```json
{
    "body": "You're confusing it with `__init__()`.\n\nIt's currently a WIP. I had to push from my home computer and was in a slight rush to get out the door. I'll add some more info on `s_coeff` too.",
    "created_at": "2014-03-31T21:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192450",
    "user": "https://github.com/tscrim"
}
```

You're confusing it with `__init__()`.

It's currently a WIP. I had to push from my home computer and was in a slight rush to get out the door. I'll add some more info on `s_coeff` too.



---

archive/issue_comments_192451.json:
```json
{
    "body": "Found a bug with the hashing of `Family`: I could get equal families with unequal hashes. This stems from the fact that `keys()` from (python) dicts aren't necessarily sorted. I'm almost done, but not quite yet.",
    "created_at": "2014-03-31T22:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192451",
    "user": "https://github.com/tscrim"
}
```

Found a bug with the hashing of `Family`: I could get equal families with unequal hashes. This stems from the fact that `keys()` from (python) dicts aren't necessarily sorted. I'm almost done, but not quite yet.



---

archive/issue_comments_192452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-31T22:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192453.json:
```json
{
    "body": "Ack, #16026 somehow as gotten in there. I'll fix it later.",
    "created_at": "2014-03-31T22:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192453",
    "user": "https://github.com/tscrim"
}
```

Ack, #16026 somehow as gotten in there. I'll fix it later.



---

archive/issue_comments_192454.json:
```json
{
    "body": "Oh, so `__classcall__` just serves to typecast the object into the right class?\n\nI'll continue looking at the code tomorrow, as today I barely have any time left. I'm done looking at the Clifford algebra classes, and I'll look at the Exterior algebra classes once you're done implementing homology; so the next step is likely to be the general Weyl algebra. If I'll have any troubles with the OOP (I imagine there might be issues with making differential Weyl algebras inherit from Weyl algebras), I'll let you know.",
    "created_at": "2014-03-31T23:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192454",
    "user": "https://github.com/darijgr"
}
```

Oh, so `__classcall__` just serves to typecast the object into the right class?

I'll continue looking at the code tomorrow, as today I barely have any time left. I'm done looking at the Clifford algebra classes, and I'll look at the Exterior algebra classes once you're done implementing homology; so the next step is likely to be the general Weyl algebra. If I'll have any troubles with the OOP (I imagine there might be issues with making differential Weyl algebras inherit from Weyl algebras), I'll let you know.



---

archive/issue_comments_192455.json:
```json
{
    "body": "Well, to parse the input into a standard form and then create the object using those standardized inputs (or sometimes to emulate a factory).\n\nIt's done. The only thing left is some documentation and to make the exterior algebra more functor-like, and I should get that done tonight.",
    "created_at": "2014-04-01T00:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192455",
    "user": "https://github.com/tscrim"
}
```

Well, to parse the input into a standard form and then create the object using those standardized inputs (or sometimes to emulate a factory).

It's done. The only thing left is some documentation and to make the exterior algebra more functor-like, and I should get that done tonight.



---

archive/issue_comments_192456.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-01T17:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_192457.json:
```json
{
    "body": "Okay, fixed. I'm also done making changes.",
    "created_at": "2014-04-01T17:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192457",
    "user": "https://github.com/tscrim"
}
```

Okay, fixed. I'm also done making changes.



---

archive/issue_comments_192458.json:
```json
{
    "body": "Any idea what to do about this?\n\n```\nsage: Q = QuadraticForm(ZZ, 3, [1,2,3,4,5,6])\nsage: Qp = QuadraticForm(Integers(3), 3, [1,2,3,4,5,6])\nsage: Cl = CliffordAlgebra(Q)\nsage: Clp = CliffordAlgebra(Qp)\nsage: a = Cl.basis()[(1,2)]\nsage: a\ne1*e2\nsage: Clp(a) # so far so good\ne1*e2\nsage: Clp(3*a) # but now\n0*e1*e2\nsage: Clp(3*a) == 0 # not good!\nFalse\n```\n\nI wouldn't be surprised if other covariant functors had the same bug...",
    "created_at": "2014-04-02T03:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192458",
    "user": "https://github.com/darijgr"
}
```

Any idea what to do about this?

```
sage: Q = QuadraticForm(ZZ, 3, [1,2,3,4,5,6])
sage: Qp = QuadraticForm(Integers(3), 3, [1,2,3,4,5,6])
sage: Cl = CliffordAlgebra(Q)
sage: Clp = CliffordAlgebra(Qp)
sage: a = Cl.basis()[(1,2)]
sage: a
e1*e2
sage: Clp(a) # so far so good
e1*e2
sage: Clp(3*a) # but now
0*e1*e2
sage: Clp(3*a) == 0 # not good!
False
```

I wouldn't be surprised if other covariant functors had the same bug...



---

archive/issue_comments_192459.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-02T03:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192460.json:
```json
{
    "body": "It's coming from the fact that terms with coefficients of 0 aren't always being removed (like they should be). So it's something with the module morphisms, either that it's how we construct the module morphisms or in `_element_constructor_`.",
    "created_at": "2014-04-02T03:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192460",
    "user": "https://github.com/tscrim"
}
```

It's coming from the fact that terms with coefficients of 0 aren't always being removed (like they should be). So it's something with the module morphisms, either that it's how we construct the module morphisms or in `_element_constructor_`.



---

archive/issue_comments_192461.json:
```json
{
    "body": "Random comments and questions:\n\nNote that when you're using `CombinatorialFreeModule`, you shouldn't need both `_repr_term` and `_repr_` for elements: just use `_repr_term`. You should also delete the `_latex_` method for elements.\n\nFor the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?\n\nBy the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.",
    "created_at": "2014-04-02T05:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192461",
    "user": "https://github.com/jhpalmieri"
}
```

Random comments and questions:

Note that when you're using `CombinatorialFreeModule`, you shouldn't need both `_repr_term` and `_repr_` for elements: just use `_repr_term`. You should also delete the `_latex_` method for elements.

For the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?

By the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.



---

archive/issue_comments_192462.json:
```json
{
    "body": "Replying to [comment:52 jhpalmieri]:\n> Note that when you're using `CombinatorialFreeModule`, you shouldn't need both `_repr_term` and `_repr_` for elements: just use `_repr_term`. You should also delete the `_latex_` method for elements.\n\nIf I didn't override `_repr_`, it wouldn't redirect to `repr_from_monomials` (it goes to `repr_lincomb`).\n\n> For the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?\n\nAs I recall, `repr_lincomb` doesn't have as nice of printing (IMO) as `repr_from_monomials` with regard to spacing with the base ring being a polynomial ring.\n\n> By the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.\n\nA counter question, do you want the honest center or the supercenter of the Clifford/exterior algebra?\n\nFor the honest center, it should be trivial (given there is an even and odd element) since given an odd `x` and even `y`, we have `xy = -yx + LOT`. The exterior algebra is supercommutative, so its supercenter is the entire algebra. For general Clifford algebras, my first thought is it would correspond to rows of 0 in the quadratic form, but IDK off the top of my head for certain.\n\nEdit - IDK off the top of my head either for the Weyl algebra. Darij, do you know what the (super)centers are to any of these?",
    "created_at": "2014-04-02T06:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192462",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:52 jhpalmieri]:
> Note that when you're using `CombinatorialFreeModule`, you shouldn't need both `_repr_term` and `_repr_` for elements: just use `_repr_term`. You should also delete the `_latex_` method for elements.

If I didn't override `_repr_`, it wouldn't redirect to `repr_from_monomials` (it goes to `repr_lincomb`).

> For the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?

As I recall, `repr_lincomb` doesn't have as nice of printing (IMO) as `repr_from_monomials` with regard to spacing with the base ring being a polynomial ring.

> By the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.

A counter question, do you want the honest center or the supercenter of the Clifford/exterior algebra?

For the honest center, it should be trivial (given there is an even and odd element) since given an odd `x` and even `y`, we have `xy = -yx + LOT`. The exterior algebra is supercommutative, so its supercenter is the entire algebra. For general Clifford algebras, my first thought is it would correspond to rows of 0 in the quadratic form, but IDK off the top of my head for certain.

Edit - IDK off the top of my head either for the Weyl algebra. Darij, do you know what the (super)centers are to any of these?



---

archive/issue_comments_192463.json:
```json
{
    "body": "This is actually more complicated than you think (and I have made lots of mistakes when working with these centers). See http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-dim-v . I'd say let's wait until we have finite-dimensional algebras in Sage (or do we already?), since the center is *not* usually spanned by a subset of the standard basis.",
    "created_at": "2014-04-02T06:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192463",
    "user": "https://github.com/darijgr"
}
```

This is actually more complicated than you think (and I have made lots of mistakes when working with these centers). See http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-dim-v . I'd say let's wait until we have finite-dimensional algebras in Sage (or do we already?), since the center is *not* usually spanned by a subset of the standard basis.



---

archive/issue_comments_192464.json:
```json
{
    "body": "Arbitrary finite (dimensional) algebras given by multiplication tables were done in #12141.",
    "created_at": "2014-04-02T06:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192464",
    "user": "https://github.com/tscrim"
}
```

Arbitrary finite (dimensional) algebras given by multiplication tables were done in #12141.



---

archive/issue_comments_192465.json:
```json
{
    "body": "Oh; what I meant was algebras without a pre-chosen basis. There is no good canonical choice for a basis of the center of the Clifford algebra, unless the vector space comes with an *orthogonal* basis.",
    "created_at": "2014-04-02T06:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192465",
    "user": "https://github.com/darijgr"
}
```

Oh; what I meant was algebras without a pre-chosen basis. There is no good canonical choice for a basis of the center of the Clifford algebra, unless the vector space comes with an *orthogonal* basis.



---

archive/issue_comments_192466.json:
```json
{
    "body": "I think a part of #15916 would be something to that effect.",
    "created_at": "2014-04-02T06:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192466",
    "user": "https://github.com/tscrim"
}
```

I think a part of #15916 would be something to that effect.



---

archive/issue_comments_192467.json:
```json
{
    "body": "Replying to [comment:53 tscrim]:\n> Replying to [comment:52 jhpalmieri]:\n\n> > For the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?\n> \n> As I recall, `repr_lincomb` doesn't have as nice of printing (IMO) as `repr_from_monomials` with regard to spacing with the base ring being a polynomial ring.\n\nIt seems like it would be better to fix `repr_lincomb` than to add new code which reproduces a lot of its functionality. How should a user decide which of these to use, if they're both available? But maybe I'm missing something.\n\n> > By the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.\n> \n> A counter question, do you want the honest center or the supercenter of the Clifford/exterior algebra?\n\nI meant the honest center. For exterior algebras, this is easy: it's the evenly graded part. For Clifford algebras, these are finite dimensional, so what happens if you try to solve the linear algebra problem (find all solutions to `[x,-]=0` for all generators `x`)? You could try to do the same with the supercenter.",
    "created_at": "2014-04-02T16:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192467",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:53 tscrim]:
> Replying to [comment:52 jhpalmieri]:

> > For the function `repr_from_monomials`, I wonder if `repr_lincomb` (defined in `sage.misc.latex`) does kind of the same thing?
> 
> As I recall, `repr_lincomb` doesn't have as nice of printing (IMO) as `repr_from_monomials` with regard to spacing with the base ring being a polynomial ring.

It seems like it would be better to fix `repr_lincomb` than to add new code which reproduces a lot of its functionality. How should a user decide which of these to use, if they're both available? But maybe I'm missing something.

> > By the way, can you compute the centers of any of these algebras? If so, having a method which returns it would be very nice.
> 
> A counter question, do you want the honest center or the supercenter of the Clifford/exterior algebra?

I meant the honest center. For exterior algebras, this is easy: it's the evenly graded part. For Clifford algebras, these are finite dimensional, so what happens if you try to solve the linear algebra problem (find all solutions to `[x,-]=0` for all generators `x`)? You could try to do the same with the supercenter.



---

archive/issue_comments_192468.json:
```json
{
    "body": "Replying to [comment:58 jhpalmieri]:\n> It seems like it would be better to fix `repr_lincomb` than to add new code which reproduces a lot of its functionality. How should a user decide which of these to use, if they're both available? But maybe I'm missing something.\n\nI haven't checked to see how many doctests would need to be fixed, but I was worried it was a lot. I'll look into it.\n\n> I meant the honest center. For exterior algebras, this is easy: it's the evenly graded part. For Clifford algebras, these are finite dimensional, so what happens if you try to solve the linear algebra problem (find all solutions to `[x,-]=0` for all generators `x`)? You could try to do the same with the supercenter.\n\nAck, you're right. I really shouldn't try to do math in my head late at night. I'll work the centers into this ticket as well.",
    "created_at": "2014-04-02T19:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192468",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:58 jhpalmieri]:
> It seems like it would be better to fix `repr_lincomb` than to add new code which reproduces a lot of its functionality. How should a user decide which of these to use, if they're both available? But maybe I'm missing something.

I haven't checked to see how many doctests would need to be fixed, but I was worried it was a lot. I'll look into it.

> I meant the honest center. For exterior algebras, this is easy: it's the evenly graded part. For Clifford algebras, these are finite dimensional, so what happens if you try to solve the linear algebra problem (find all solutions to `[x,-]=0` for all generators `x`)? You could try to do the same with the supercenter.

Ack, you're right. I really shouldn't try to do math in my head late at night. I'll work the centers into this ticket as well.



---

archive/issue_comments_192469.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-04T03:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192470.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-04T06:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192471.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-04T06:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192472.json:
```json
{
    "body": "Sorry for my slowness. I just fixed a bug in which the on_basis part of the lift_morphism morphism was using the domain instead of the codomain as parent. Don't you find it weird that it worked before? I do. The on_basis function would throw an IndexError whenever called on a nonempty sequence, but for some reason the module morphism worked. Maybe cython methods thwart exceptions? I can't explain this in any other way. (The cython method here is `dict_linear_combination` in `sage/combinat/dict_addition.pyx`. It is called by the `linear_combination` method. Now that I have changed the `linear_combination` call to a `_from_dict` one, the wrong parent wouldn't work anymore.)",
    "created_at": "2014-04-04T06:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192472",
    "user": "https://github.com/darijgr"
}
```

Sorry for my slowness. I just fixed a bug in which the on_basis part of the lift_morphism morphism was using the domain instead of the codomain as parent. Don't you find it weird that it worked before? I do. The on_basis function would throw an IndexError whenever called on a nonempty sequence, but for some reason the module morphism worked. Maybe cython methods thwart exceptions? I can't explain this in any other way. (The cython method here is `dict_linear_combination` in `sage/combinat/dict_addition.pyx`. It is called by the `linear_combination` method. Now that I have changed the `linear_combination` call to a `_from_dict` one, the wrong parent wouldn't work anymore.)



---

archive/issue_comments_192473.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-05T18:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192474.json:
```json
{
    "body": "Travis, which definition of the interior product are you using? I'm asking because there are probably several (at the very least, there is a right-left issue, and there is the question which is the multiplier and which is the multiplied).",
    "created_at": "2014-04-05T18:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192474",
    "user": "https://github.com/darijgr"
}
```

Travis, which definition of the interior product are you using? I'm asking because there are probably several (at the very least, there is a right-left issue, and there is the question which is the multiplier and which is the multiplied).



---

archive/issue_comments_192475.json:
```json
{
    "body": "Also, are you fine with my edits to the `CliffordAlgebra` and `CliffordAlgebraElement` classes? If so, I could clone them to make Weyl algebras (the general case).",
    "created_at": "2014-04-05T19:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192475",
    "user": "https://github.com/darijgr"
}
```

Also, are you fine with my edits to the `CliffordAlgebra` and `CliffordAlgebraElement` classes? If so, I could clone them to make Weyl algebras (the general case).



---

archive/issue_comments_192476.json:
```json
{
    "body": "I think you should do:\n\n- `if self.base_ring() is R:` in `_element_constructor_` instead of the `==`.\n- Move the unshuffle out into `combinat/combinat.py` since it is a general (low-level) operation.\n- Is using the `remove_zeros` option the fastest, as opposed to doing the `!= R.zero()` check (which probably should be pulled out?)\n\nOtherwise your changes look good. For the interior product, I'm using the definition I gave (the other one should be equivalent to the first one...) with `\\alpha` as `x`.\n\nPS - John, I'm still working on the centers.",
    "created_at": "2014-04-06T01:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192476",
    "user": "https://github.com/tscrim"
}
```

I think you should do:

- `if self.base_ring() is R:` in `_element_constructor_` instead of the `==`.
- Move the unshuffle out into `combinat/combinat.py` since it is a general (low-level) operation.
- Is using the `remove_zeros` option the fastest, as opposed to doing the `!= R.zero()` check (which probably should be pulled out?)

Otherwise your changes look good. For the interior product, I'm using the definition I gave (the other one should be equivalent to the first one...) with `\alpha` as `x`.

PS - John, I'm still working on the centers.



---

archive/issue_comments_192477.json:
```json
{
    "body": "Is this a reasonable speed test?\n\n```\nsage: R = PolynomialRing(QQ, 'x')\nsage: Q = QuadraticForm(R, 3, [1,2,3,4,5,6])\nsage: Cl.<x,y,z> = CliffordAlgebra(Q)\nsage: d = {(0,1): R.gens()[0], (1,2): R.zero(), (0,2): R.one()}\nsage: %timeit Cl._from_dict(d, remove_zeros=True)\n100000 loops, best of 3: 5.32 \u00b5s per loop\nsage: l = (((0,1), R.gens()[0]), ((1,2), R.zero()), ((0,2), R.one()))\nsage: %timeit Cl._from_dict({m: k for (m, k) in l if k != 0})\n10000 loops, best of 3: 23.8 \u00b5s per loop\nsage: %timeit Cl.sum_of_terms(l, distinct=True)\n100000 loops, best of 3: 7.36 \u00b5s per loop\n```\n\n(I've misnamed the variables but this shouldn't matter...)\n\nWhere should the unshuffle go?",
    "created_at": "2014-04-06T02:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192477",
    "user": "https://github.com/darijgr"
}
```

Is this a reasonable speed test?

```
sage: R = PolynomialRing(QQ, 'x')
sage: Q = QuadraticForm(R, 3, [1,2,3,4,5,6])
sage: Cl.<x,y,z> = CliffordAlgebra(Q)
sage: d = {(0,1): R.gens()[0], (1,2): R.zero(), (0,2): R.one()}
sage: %timeit Cl._from_dict(d, remove_zeros=True)
100000 loops, best of 3: 5.32 µs per loop
sage: l = (((0,1), R.gens()[0]), ((1,2), R.zero()), ((0,2), R.one()))
sage: %timeit Cl._from_dict({m: k for (m, k) in l if k != 0})
10000 loops, best of 3: 23.8 µs per loop
sage: %timeit Cl.sum_of_terms(l, distinct=True)
100000 loops, best of 3: 7.36 µs per loop
```

(I've misnamed the variables but this shouldn't matter...)

Where should the unshuffle go?



---

archive/issue_comments_192478.json:
```json
{
    "body": "Ooooh, now I see the definition of the internal product that you gave. I was looking at the wrong docstring.",
    "created_at": "2014-04-06T02:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192478",
    "user": "https://github.com/darijgr"
}
```

Ooooh, now I see the definition of the internal product that you gave. I was looking at the wrong docstring.



---

archive/issue_comments_192479.json:
```json
{
    "body": "Replying to [comment:67 tscrim]:\n> ... into `combinat/combinat.py`\n\nWe should probably have `internal_product_on_basis` reference `Element.internal_product`.",
    "created_at": "2014-04-06T03:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192479",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:67 tscrim]:
> ... into `combinat/combinat.py`

We should probably have `internal_product_on_basis` reference `Element.internal_product`.



---

archive/issue_comments_192480.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-06T05:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-06T05:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192482.json:
```json
{
    "body": "I have done some improvements on the interior product. But I still need to reiterate my question: How is the interior product defined? You define it only when one of the two factors (the \"smaller\" one) is a single vector; but the method is defined for any two wedges. You seem to be reading the factor left-to-right, but a point can be made for the opposite convention. If you can give a reference, that's fine -- just please let's not leave this undocumented.\n\nShould I generally use identity to compare base rings? I thought equality was more robust, or can we assume parents to be UniqueRepresentation?...\n\nSorry for ongoing lameness; I got some kind of cold again and my QSym paper is not progressing :/",
    "created_at": "2014-04-06T05:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192482",
    "user": "https://github.com/darijgr"
}
```

I have done some improvements on the interior product. But I still need to reiterate my question: How is the interior product defined? You define it only when one of the two factors (the "smaller" one) is a single vector; but the method is defined for any two wedges. You seem to be reading the factor left-to-right, but a point can be made for the opposite convention. If you can give a reference, that's fine -- just please let's not leave this undocumented.

Should I generally use identity to compare base rings? I thought equality was more robust, or can we assume parents to be UniqueRepresentation?...

Sorry for ongoing lameness; I got some kind of cold again and my QSym paper is not progressing :/



---

archive/issue_comments_192483.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-06T06:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192484.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-06T06:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192485.json:
```json
{
    "body": "Also, an explanation of how exactly the `s_coeff` dictionary is being parsed would be nice (e.g. what happens if I set both its `(1,2)` and its `(2,1)` values?).",
    "created_at": "2014-04-06T06:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192485",
    "user": "https://github.com/darijgr"
}
```

Also, an explanation of how exactly the `s_coeff` dictionary is being parsed would be nice (e.g. what happens if I set both its `(1,2)` and its `(2,1)` values?).



---

archive/issue_comments_192486.json:
```json
{
    "body": "Sorry for the delays on this; been doing some math and construction. I'll add some doc to the interior product which will hopefully make everything clear. Same for the `s_coeff`.\n\nI think it's better to do by identity. It's faster for UR base rings (or so I've been told and I'd be surprised if it wasn't), and if it's equal but not identical, I think we should change it to make sure its parent is identically the base ring.\n\nHope you feel better Darij.",
    "created_at": "2014-04-07T19:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192486",
    "user": "https://github.com/tscrim"
}
```

Sorry for the delays on this; been doing some math and construction. I'll add some doc to the interior product which will hopefully make everything clear. Same for the `s_coeff`.

I think it's better to do by identity. It's faster for UR base rings (or so I've been told and I'd be surprised if it wasn't), and if it's equal but not identical, I think we should change it to make sure its parent is identically the base ring.

Hope you feel better Darij.



---

archive/issue_comments_192487.json:
```json
{
    "body": "Thank you. As long as the identity check doesn't cause bugs (rather than just slowness) when the rings are non-identical but equal, it's all fine (and does make more sense than equality, probably). I'll come back to reviewing once `s_coeff` is documented.\n\nWhat centers are you going to add? Exterior algebra or also the Clifford algebra? Regular center or supercenter or both? How are you planning to deal with the cases where the basis of the center is not part of the basis of the algebra?",
    "created_at": "2014-04-08T00:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192487",
    "user": "https://github.com/darijgr"
}
```

Thank you. As long as the identity check doesn't cause bugs (rather than just slowness) when the rings are non-identical but equal, it's all fine (and does make more sense than equality, probably). I'll come back to reviewing once `s_coeff` is documented.

What centers are you going to add? Exterior algebra or also the Clifford algebra? Regular center or supercenter or both? How are you planning to deal with the cases where the basis of the center is not part of the basis of the algebra?



---

archive/issue_comments_192488.json:
```json
{
    "body": "Replying to [comment:78 darij]:\n> What centers are you going to add? Exterior algebra or also the Clifford algebra? Regular center or supercenter or both? How are you planning to deal with the cases where the basis of the center is not part of the basis of the algebra?\n\nBoth Clifford and special case the exterior algebra, and I'm going to (try to do) both regular center and the supercenter. It reduces down to a linear algebra problem, and I was just going to return the elements which are a basis for the center (since there's currently no good framework for subalgebras).",
    "created_at": "2014-04-08T02:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192488",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:78 darij]:
> What centers are you going to add? Exterior algebra or also the Clifford algebra? Regular center or supercenter or both? How are you planning to deal with the cases where the basis of the center is not part of the basis of the algebra?

Both Clifford and special case the exterior algebra, and I'm going to (try to do) both regular center and the supercenter. It reduces down to a linear algebra problem, and I was just going to return the elements which are a basis for the center (since there's currently no good framework for subalgebras).



---

archive/issue_comments_192489.json:
```json
{
    "body": "Ah, very nice!",
    "created_at": "2014-04-08T02:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192489",
    "user": "https://github.com/darijgr"
}
```

Ah, very nice!



---

archive/issue_comments_192490.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T00:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192491.json:
```json
{
    "body": "Centers, supercenters, and documentation added. Back to you Darij.",
    "created_at": "2014-04-09T00:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192491",
    "user": "https://github.com/tscrim"
}
```

Centers, supercenters, and documentation added. Back to you Darij.



---

archive/issue_comments_192492.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T00:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192493.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T19:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192494.json:
```json
{
    "body": "Thanks for the docs! I'll look into them (currently I'm recompiling Sage, for the third time within 2 days). Is it really your intention to denote the supercommutator by `[x, y\\}`?\n\nThe `Classification_of_Clifford_algebras#Pseudoscalar` wikipedia link is misformatted.",
    "created_at": "2014-04-09T21:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192494",
    "user": "https://github.com/darijgr"
}
```

Thanks for the docs! I'll look into them (currently I'm recompiling Sage, for the third time within 2 days). Is it really your intention to denote the supercommutator by `[x, y\}`?

The `Classification_of_Clifford_algebras#Pseudoscalar` wikipedia link is misformatted.



---

archive/issue_comments_192495.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T06:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192496.json:
```json
{
    "body": "Yes, that is my intention. It's notation from my algebra teacher and it comes from a combo of the commutator and anticommutator notations.\n\nI've also fixed the link formatting.",
    "created_at": "2014-04-10T06:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192496",
    "user": "https://github.com/tscrim"
}
```

Yes, that is my intention. It's notation from my algebra teacher and it comes from a combo of the commutator and anticommutator notations.

I've also fixed the link formatting.



---

archive/issue_comments_192497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T06:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192498.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T06:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192499.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-10T06:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192500.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T02:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192501.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T03:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192502.json:
```json
{
    "body": "While I'm not yet done with clifford_algebra.py, could you perhaps improve the doc of the `expand_derivative` method in `weyl_algebras.py`? It looks mysterious to me (and is it really supposed to change the dictionary `d` while iterating through it?). Thank you!\n\nEDIT: Also, what do you think of renaming `(super)center` as `(super)center_basis`, for the off chance that Sage will eventually be expressive enough to define actual subalgebras?",
    "created_at": "2014-04-11T03:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192502",
    "user": "https://github.com/darijgr"
}
```

While I'm not yet done with clifford_algebra.py, could you perhaps improve the doc of the `expand_derivative` method in `weyl_algebras.py`? It looks mysterious to me (and is it really supposed to change the dictionary `d` while iterating through it?). Thank you!

EDIT: Also, what do you think of renaming `(super)center` as `(super)center_basis`, for the off chance that Sage will eventually be expressive enough to define actual subalgebras?



---

archive/issue_comments_192503.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T23:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192504.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-11T23:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192505.json:
```json
{
    "body": "I've added some more to the doc. Also I iterate over the items of `d` (which is a list created when the for loop is first called), so it's safe for me to do that iteration. I've also changed the `(super)center()` to `(super)center_basis()` since that will make it easier to deprecate these once subalgebras are properly implemented.",
    "created_at": "2014-04-11T23:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192505",
    "user": "https://github.com/tscrim"
}
```

I've added some more to the doc. Also I iterate over the items of `d` (which is a list created when the for loop is first called), so it's safe for me to do that iteration. I've also changed the `(super)center()` to `(super)center_basis()` since that will make it easier to deprecate these once subalgebras are properly implemented.



---

archive/issue_comments_192506.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T01:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192507.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T02:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192508.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T04:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192509.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-24T00:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192510.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-24T01:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192511.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-24T03:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192512.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-25T16:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192513.json:
```json
{
    "body": "Thanks for catching my stupid mistake in the supercommutator doctests!\n\nThe reason why I said \"exactly one\" rather than \"only one\" is this:\n\n\n```\nsage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})\nsage: w2 = E.boundary({(0,1): 0, (1,2): 0})\nsage: w == w2\nFalse\n```\n\n\nIs this an issue? Is `w2` still functional?\n\nSorry for my renewed slowdown; the good news is that semester isn't going to go on forever.",
    "created_at": "2014-05-07T23:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192513",
    "user": "https://github.com/darijgr"
}
```

Thanks for catching my stupid mistake in the supercommutator doctests!

The reason why I said "exactly one" rather than "only one" is this:


```
sage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})
sage: w2 = E.boundary({(0,1): 0, (1,2): 0})
sage: w == w2
False
```


Is this an issue? Is `w2` still functional?

Sorry for my renewed slowdown; the good news is that semester isn't going to go on forever.



---

archive/issue_comments_192514.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-07T23:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192515.json:
```json
{
    "body": "Replying to [comment:105 darij]:\n> The reason why I said \"exactly one\" rather than \"only one\" is this:\n> {{{\n> sage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})\n> sage: w2 = E.boundary({(0,1): 0, (1,2): 0})\n> sage: w == w2\n> False\n> }}}\n> \n> Is this an issue? Is `w2` still functional?\n\nIt's more of an abuse and lack of good normalization (i.e. the 0's should be removed from UR supercall).",
    "created_at": "2014-05-08T00:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192515",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:105 darij]:
> The reason why I said "exactly one" rather than "only one" is this:
> {{{
> sage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})
> sage: w2 = E.boundary({(0,1): 0, (1,2): 0})
> sage: w == w2
> False
> }}}
> 
> Is this an issue? Is `w2` still functional?

It's more of an abuse and lack of good normalization (i.e. the 0's should be removed from UR supercall).



---

archive/issue_comments_192516.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-12T23:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192517.json:
```json
{
    "body": "Fixed:\n\n```\nsage: E.<x,y,z> = ExteriorAlgebra(QQ)\nsage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})\nsage: w2 = E.boundary({(0,1): 0, (1,2): 0})\nsage: w == w2\nTrue\n```\n",
    "created_at": "2014-05-12T23:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192517",
    "user": "https://github.com/tscrim"
}
```

Fixed:

```
sage: E.<x,y,z> = ExteriorAlgebra(QQ)
sage: w = E.boundary({(0,1): 0, (1,2): 0, (2,0): 0})
sage: w2 = E.boundary({(0,1): 0, (1,2): 0})
sage: w == w2
True
```




---

archive/issue_comments_192518.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-25T16:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192519.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-02T16:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192520.json:
```json
{
    "body": "Red again. (Not that I have time to review it these days, but I just noticed when trying to move the branches over to a new install.)",
    "created_at": "2014-07-19T23:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192520",
    "user": "https://github.com/darijgr"
}
```

Red again. (Not that I have time to review it these days, but I just noticed when trying to move the branches over to a new install.)



---

archive/issue_comments_192521.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-21T17:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192522.json:
```json
{
    "body": "Hmmm...I didn't get any merge conflicts...",
    "created_at": "2014-07-21T17:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192522",
    "user": "https://github.com/tscrim"
}
```

Hmmm...I didn't get any merge conflicts...



---

archive/issue_comments_192523.json:
```json
{
    "body": "Ah, thanks. I think git's automerge is smarter than what the trac server does...",
    "created_at": "2014-07-21T17:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192523",
    "user": "https://github.com/darijgr"
}
```

Ah, thanks. I think git's automerge is smarter than what the trac server does...



---

archive/issue_comments_192524.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-28T23:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192525.json:
```json
{
    "body": "Sorry, I think my merge is wrong; or why am I getting this:\n\n```\nTraceback (most recent call last):\n  File \"/home/darij/sage-6.3.beta6/src/bin/sage-runtests\", line 87, in <module>\n    err = DC.run()\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/control.py\", line 904, in run\n    self.run_doctests()\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/control.py\", line 674, in run_doctests\n    self.dispatcher = DocTestDispatcher(self)\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1335, in __init__\n    init_sage()\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 95, in init_sage\n    import sage.all_cmdline\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/all_cmdline.py\", line 18, in <module>\n    from sage.all import *\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/all.py\", line 134, in <module>\n    from sage.combinat.all   import *\n  File \"/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/combinat/all.py\", line 1, in <module>\n    from combinat import bell_number, catalan_number, euler_number, fibonacci, \\\nImportError: cannot import name permutations_iterator\n```\n\n\nAlso, do you happen to remember what parts I have reviewed? I reviewed clifford_algebra.py once, but I'm not sure whether it was the latest version.",
    "created_at": "2014-07-28T23:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192525",
    "user": "https://github.com/darijgr"
}
```

Sorry, I think my merge is wrong; or why am I getting this:

```
Traceback (most recent call last):
  File "/home/darij/sage-6.3.beta6/src/bin/sage-runtests", line 87, in <module>
    err = DC.run()
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/control.py", line 904, in run
    self.run_doctests()
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/control.py", line 674, in run_doctests
    self.dispatcher = DocTestDispatcher(self)
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1335, in __init__
    init_sage()
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 95, in init_sage
    import sage.all_cmdline
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/all_cmdline.py", line 18, in <module>
    from sage.all import *
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/all.py", line 134, in <module>
    from sage.combinat.all   import *
  File "/home/darij/sage-6.3.beta6/local/lib/python2.7/site-packages/sage/combinat/all.py", line 1, in <module>
    from combinat import bell_number, catalan_number, euler_number, fibonacci, \
ImportError: cannot import name permutations_iterator
```


Also, do you happen to remember what parts I have reviewed? I reviewed clifford_algebra.py once, but I'm not sure whether it was the latest version.



---

archive/issue_comments_192526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-29T20:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192527.json:
```json
{
    "body": "OK, fixed (this was a stupid conflict from one of the previous merges).",
    "created_at": "2014-07-29T20:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192527",
    "user": "https://github.com/darijgr"
}
```

OK, fixed (this was a stupid conflict from one of the previous merges).



---

archive/issue_comments_192528.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-29T21:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192529.json:
```json
{
    "body": "IIRC, you've reviewed the current version of `clifford_algebra.py` and `SubsetsSorted`. You had mentioned you wanted to do a bit of a rewrite of `WeylAlgebra` to include more general definitions, but IDK if you reviewed the current implementation.",
    "created_at": "2014-07-29T21:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192529",
    "user": "https://github.com/tscrim"
}
```

IIRC, you've reviewed the current version of `clifford_algebra.py` and `SubsetsSorted`. You had mentioned you wanted to do a bit of a rewrite of `WeylAlgebra` to include more general definitions, but IDK if you reviewed the current implementation.



---

archive/issue_comments_192530.json:
```json
{
    "body": "Why does the branch look like it nukes permutation.py?\nhttp://git.sagemath.org/sage.git/diff/?id=d3aba3ff1bcfb9acc035013fb7f794de57c8f09e",
    "created_at": "2014-10-03T14:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192530",
    "user": "https://github.com/darijgr"
}
```

Why does the branch look like it nukes permutation.py?
http://git.sagemath.org/sage.git/diff/?id=d3aba3ff1bcfb9acc035013fb7f794de57c8f09e



---

archive/issue_comments_192531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-03T15:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192532.json:
```json
{
    "body": "Replying to [comment:123 darij]:\n> Why does the branch look like it nukes permutation.py?\n> http://git.sagemath.org/sage.git/diff/?id=d3aba3ff1bcfb9acc035013fb7f794de57c8f09e\n\nIt's a trac issue (likely due to a merge (to be) done `permutation.py`). Here's what I got when I pulled the branch:\n\n```\nFrom trac.sagemath.org:sage\n * branch            public/algebras/weyl_clifford-15300 -> FETCH_HEAD\nAuto-merging src/sage/combinat/permutation.py\nMerge made by the 'recursive' strategy.\n src/doc/en/reference/algebras/index.rst |    4 +\n src/sage/algebras/all.py                |    4 +\n src/sage/algebras/clifford_algebra.py   | 2575 +++++++++++++++++++++++++++++++\n src/sage/algebras/weyl_algebra.py       |  548 +++++++\n src/sage/combinat/all.py                |    4 +-\n src/sage/combinat/combinat.py           |  202 ++-\n src/sage/combinat/descent_algebra.py    |   11 +-\n src/sage/combinat/permutation.py        |    8 +-\n src/sage/combinat/subset.py             |  201 ++-\n 9 files changed, 3456 insertions(+), 101 deletions(-)\n create mode 100644 src/sage/algebras/clifford_algebra.py\n create mode 100644 src/sage/algebras/weyl_algebra.py\n```\n\nI've push a rebased branch which takes care of that. Are you getting back to finishing the review here?",
    "created_at": "2014-10-03T15:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192532",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:123 darij]:
> Why does the branch look like it nukes permutation.py?
> http://git.sagemath.org/sage.git/diff/?id=d3aba3ff1bcfb9acc035013fb7f794de57c8f09e

It's a trac issue (likely due to a merge (to be) done `permutation.py`). Here's what I got when I pulled the branch:

```
From trac.sagemath.org:sage
 * branch            public/algebras/weyl_clifford-15300 -> FETCH_HEAD
Auto-merging src/sage/combinat/permutation.py
Merge made by the 'recursive' strategy.
 src/doc/en/reference/algebras/index.rst |    4 +
 src/sage/algebras/all.py                |    4 +
 src/sage/algebras/clifford_algebra.py   | 2575 +++++++++++++++++++++++++++++++
 src/sage/algebras/weyl_algebra.py       |  548 +++++++
 src/sage/combinat/all.py                |    4 +-
 src/sage/combinat/combinat.py           |  202 ++-
 src/sage/combinat/descent_algebra.py    |   11 +-
 src/sage/combinat/permutation.py        |    8 +-
 src/sage/combinat/subset.py             |  201 ++-
 9 files changed, 3456 insertions(+), 101 deletions(-)
 create mode 100644 src/sage/algebras/clifford_algebra.py
 create mode 100644 src/sage/algebras/weyl_algebra.py
```

I've push a rebased branch which takes care of that. Are you getting back to finishing the review here?



---

archive/issue_comments_192533.json:
```json
{
    "body": "I can't say that yet, but I guess I'll know by the end of this week. I'm just finished with procrastinated work I was to do this summer...",
    "created_at": "2014-10-03T15:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192533",
    "user": "https://github.com/darijgr"
}
```

I can't say that yet, but I guess I'll know by the end of this week. I'm just finished with procrastinated work I was to do this summer...



---

archive/issue_comments_192534.json:
```json
{
    "body": "Replying to [comment:126 darij]:\n> I can't say that yet, but I guess I'll know by the end of this week. I'm just finished with procrastinated work I was to do this summer...\n\nI know that feeling. Don't worry too much as there isn't a big rush on this. Also I might have #17096 ready before this (most of the code just needs to be factored out of #15484 and graded algebras).",
    "created_at": "2014-10-03T15:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192534",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:126 darij]:
> I can't say that yet, but I guess I'll know by the end of this week. I'm just finished with procrastinated work I was to do this summer...

I know that feeling. Don't worry too much as there isn't a big rush on this. Also I might have #17096 ready before this (most of the code just needs to be factored out of #15484 and graded algebras).



---

archive/issue_comments_192535.json:
```json
{
    "body": "Thanks for the merge, by the way!\n\nSo am I seeing it right that the purpose of `expand_derivative` is to commute a (monomial) differential operator past a polynomial?",
    "created_at": "2014-10-03T20:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192535",
    "user": "https://github.com/darijgr"
}
```

Thanks for the merge, by the way!

So am I seeing it right that the purpose of `expand_derivative` is to commute a (monomial) differential operator past a polynomial?



---

archive/issue_comments_192536.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-10T05:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192537.json:
```json
{
    "body": "Sorry, I fear I won't have the time for this until November :(\n\nPlease ask on sage-devel for someone to review the rest of weyl_algebra.py (I have reviewed repr_from_monomials, though I can't guarantee it was the newest version). The general Weyl algebra can then go into a separate ticket, although it might require reverse-incompatible changes to the differential one (I hope it won't).\n\nPS. Why does `__monomial` work on a DifferentialAlgebraElement in the sourcecode but not in the Sage console? Is this some cython hackery?",
    "created_at": "2014-10-10T05:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192537",
    "user": "https://github.com/darijgr"
}
```

Sorry, I fear I won't have the time for this until November :(

Please ask on sage-devel for someone to review the rest of weyl_algebra.py (I have reviewed repr_from_monomials, though I can't guarantee it was the newest version). The general Weyl algebra can then go into a separate ticket, although it might require reverse-incompatible changes to the differential one (I hope it won't).

PS. Why does `__monomial` work on a DifferentialAlgebraElement in the sourcecode but not in the Sage console? Is this some cython hackery?



---

archive/issue_comments_192538.json:
```json
{
    "body": "I might be able to finish the review, but I'm not sure. Meanwhile, a few questions and comments:\n\n- should there be a `weyl_algebra` (or similarly named) method for polynomial rings, so this could be found by tab completion once you had a polynomial ring `R`?\n- should it be possible to do `W.<dx0, dx1, ...> = DifferentialWeylAlgebra(R)`?\n\nSome links are broken in clifford_algebra.py:\n\n```diff\ndiff --git a/src/sage/algebras/clifford_algebra.py b/src/sage/algebras/clifford_algebra.py\nindex 7670255..15a305d 100644\n--- a/src/sage/algebras/clifford_algebra.py\n+++ b/src/sage/algebras/clifford_algebra.py\n@@ -899,7 +899,7 @@ class CliffordAlgebra(CombinatorialFreeModule):\n \n         REFERENCES:\n \n-        - :wikipedia:`Classification_of_Clifford_algebras#Pseudoscalar`\n+        - :wikipedia:`Classification_of_Clifford_algebras#Unit_pseudoscalar`\n         \"\"\"\n         d = self._quadratic_form.dim()\n         return self.element_class(self, {tuple(range(d)): self.base_ring().one()})\n@@ -1113,7 +1113,7 @@ class CliffordAlgebra(CombinatorialFreeModule):\n \n         .. SEEALSO::\n \n-            :meth:`supercenter`,\n+            :meth:`supercenter_basis`,\n             http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-d\n \n         .. TODO::\n@@ -1203,7 +1203,7 @@ class CliffordAlgebra(CombinatorialFreeModule):\n \n         .. SEEALSO::\n \n-            :meth:`center`,\n+            :meth:`center_basis`,\n             http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-d\n \n         .. TODO::\n```\n",
    "created_at": "2014-10-10T19:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192538",
    "user": "https://github.com/jhpalmieri"
}
```

I might be able to finish the review, but I'm not sure. Meanwhile, a few questions and comments:

- should there be a `weyl_algebra` (or similarly named) method for polynomial rings, so this could be found by tab completion once you had a polynomial ring `R`?
- should it be possible to do `W.<dx0, dx1, ...> = DifferentialWeylAlgebra(R)`?

Some links are broken in clifford_algebra.py:

```diff
diff --git a/src/sage/algebras/clifford_algebra.py b/src/sage/algebras/clifford_algebra.py
index 7670255..15a305d 100644
--- a/src/sage/algebras/clifford_algebra.py
+++ b/src/sage/algebras/clifford_algebra.py
@@ -899,7 +899,7 @@ class CliffordAlgebra(CombinatorialFreeModule):
 
         REFERENCES:
 
-        - :wikipedia:`Classification_of_Clifford_algebras#Pseudoscalar`
+        - :wikipedia:`Classification_of_Clifford_algebras#Unit_pseudoscalar`
         """
         d = self._quadratic_form.dim()
         return self.element_class(self, {tuple(range(d)): self.base_ring().one()})
@@ -1113,7 +1113,7 @@ class CliffordAlgebra(CombinatorialFreeModule):
 
         .. SEEALSO::
 
-            :meth:`supercenter`,
+            :meth:`supercenter_basis`,
             http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-d
 
         .. TODO::
@@ -1203,7 +1203,7 @@ class CliffordAlgebra(CombinatorialFreeModule):
 
         .. SEEALSO::
 
-            :meth:`center`,
+            :meth:`center_basis`,
             http://math.stackexchange.com/questions/129183/center-of-clifford-algebra-depending-on-the-parity-of-d
 
         .. TODO::
```




---

archive/issue_comments_192539.json:
```json
{
    "body": "A few more comments: the documentation for `expand_derivative` could use a little work. The sum in the displayed math is over which monomials? What is `c_{\\alpha}(X)`?\n\nI think you could also add more to the documentation for the `DifferentialWeylAlgebra` class: all you really have now is a link to a wikipedia article. At least mention the generators and relations. Your documentation for `CliffordAlgebra` is very nice, in contrast.\n\nI'm wondering about the generators for a Weyl algebra. I think I expect `gen` (and `gens` and `ngens`) to return the algebra generators, so if we start with a polynomial algebra on one generator `x`, we should get both `x` and `dx`, not just `dx`. I can see that it would be useful to have a method returning just `dx` as a generator, but maybe that method should be called something else. Alternatively, the `gen` method could just return `dx`, but it should be clearly documented, explaining that it doesn't return all of the algebra generators; to get those, you should do `algebra_generators` instead (which at the moment is available via tab-completion but is not implemented). The method `ngens` should be changed accordingly.\n\nI guess you could be viewing the Weyl algebra as an algebra over the polynomial ring, but isn't it usual, if you have an algebra `A` over a ring `R`, to assume that `R` is central in `A`? The Weyl algebra is an iterated Ore extension over the polynomial ring on `n` generators, adding in one `dx` at a time, but even so, the first two places I look (Wikipedia, and McConnell & Robson's *Noncommutative Noetherian Rings*) describe such a Weyl algebra as having `2n` generators, the original polynomial generators and the `dx`'s. So I would discourage your current use of `gen`, `gens`, and `ngens`.",
    "created_at": "2014-10-10T20:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192539",
    "user": "https://github.com/jhpalmieri"
}
```

A few more comments: the documentation for `expand_derivative` could use a little work. The sum in the displayed math is over which monomials? What is `c_{\alpha}(X)`?

I think you could also add more to the documentation for the `DifferentialWeylAlgebra` class: all you really have now is a link to a wikipedia article. At least mention the generators and relations. Your documentation for `CliffordAlgebra` is very nice, in contrast.

I'm wondering about the generators for a Weyl algebra. I think I expect `gen` (and `gens` and `ngens`) to return the algebra generators, so if we start with a polynomial algebra on one generator `x`, we should get both `x` and `dx`, not just `dx`. I can see that it would be useful to have a method returning just `dx` as a generator, but maybe that method should be called something else. Alternatively, the `gen` method could just return `dx`, but it should be clearly documented, explaining that it doesn't return all of the algebra generators; to get those, you should do `algebra_generators` instead (which at the moment is available via tab-completion but is not implemented). The method `ngens` should be changed accordingly.

I guess you could be viewing the Weyl algebra as an algebra over the polynomial ring, but isn't it usual, if you have an algebra `A` over a ring `R`, to assume that `R` is central in `A`? The Weyl algebra is an iterated Ore extension over the polynomial ring on `n` generators, adding in one `dx` at a time, but even so, the first two places I look (Wikipedia, and McConnell & Robson's *Noncommutative Noetherian Rings*) describe such a Weyl algebra as having `2n` generators, the original polynomial generators and the `dx`'s. So I would discourage your current use of `gen`, `gens`, and `ngens`.



---

archive/issue_comments_192540.json:
```json
{
    "body": "Agreeing with jhpalmieri on the generators. In particular, ngens should give 2n as opposed to n (or else the generalization to arbitrary skew forms will have a non-integer number of generators). I am also highly against non-central algebras being encoded as algebras.\n\nAs for `expand_derivative`, if I remember correctly it commutes a differential operator past a polynomial in the Weyl algebra; but I have never actually checked what it really does.\n\nIn other news, the failing doctests of the buildbot have nothing to do with this patch. When did Sage become so fickle?",
    "created_at": "2014-10-10T20:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192540",
    "user": "https://github.com/darijgr"
}
```

Agreeing with jhpalmieri on the generators. In particular, ngens should give 2n as opposed to n (or else the generalization to arbitrary skew forms will have a non-integer number of generators). I am also highly against non-central algebras being encoded as algebras.

As for `expand_derivative`, if I remember correctly it commutes a differential operator past a polynomial in the Weyl algebra; but I have never actually checked what it really does.

In other news, the failing doctests of the buildbot have nothing to do with this patch. When did Sage become so fickle?



---

archive/issue_comments_192541.json:
```json
{
    "body": "I'm making these changes now (it's somewhat of a rewrite of the Weyl algebra, so it might take a day or so).",
    "created_at": "2014-10-12T14:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192541",
    "user": "https://github.com/tscrim"
}
```

I'm making these changes now (it's somewhat of a rewrite of the Weyl algebra, so it might take a day or so).



---

archive/issue_comments_192542.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-13T08:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192543.json:
```json
{
    "body": "Okay, I've rewritten `WeylAlgebra` to be over the base ring of the polynomial ring and I've done the other reviewer changes. Back to you John.\n\nThe `__monomial` gets name mangled because of the 2 underscores by python. Sage hasn't become so fickle, so much as numerical imprecision/noise on different machines can be hard to foresee (or something like that). I think the tolerance for the noise has been slightly increased and the buildbots need updating, but IDK for sure right now.",
    "created_at": "2014-10-13T08:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192543",
    "user": "https://github.com/tscrim"
}
```

Okay, I've rewritten `WeylAlgebra` to be over the base ring of the polynomial ring and I've done the other reviewer changes. Back to you John.

The `__monomial` gets name mangled because of the 2 underscores by python. Sage hasn't become so fickle, so much as numerical imprecision/noise on different machines can be hard to foresee (or something like that). I think the tolerance for the noise has been slightly increased and the buildbots need updating, but IDK for sure right now.



---

archive/issue_comments_192544.json:
```json
{
    "body": "I didn't take a real look at this, but there are some issues here:\n\n\n```\n+ - It's a simple ring that is not a matrix ring over a division ring.\n+ - It's a non-commutative domain.\n+ - For `n = `, it's a quotient of the universal enveloping algebra of the\n+ Heisenberg algebra.\n+ - Has no finite-dimensional representations in characteristic zero.\n```\n\nThe \"simple\" part holds when R is a field. The \"non-commutative domain\" works only if R is an integral domain. In the third line, what is n ? (I think it is always a quotient of U(Heisenberg_n).",
    "created_at": "2014-10-13T13:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192544",
    "user": "https://github.com/darijgr"
}
```

I didn't take a real look at this, but there are some issues here:


```
+ - It's a simple ring that is not a matrix ring over a division ring.
+ - It's a non-commutative domain.
+ - For `n = `, it's a quotient of the universal enveloping algebra of the
+ Heisenberg algebra.
+ - Has no finite-dimensional representations in characteristic zero.
```

The "simple" part holds when R is a field. The "non-commutative domain" works only if R is an integral domain. In the third line, what is n ? (I think it is always a quotient of U(Heisenberg_n).



---

archive/issue_comments_192545.json:
```json
{
    "body": "Actually, the simplicity of the Weyl algebra requires R to be a field of characteristic 0. If R is a field of positive characteristic p, then the Weyl algebra acts on `R[x]/(x^p)`, and the kernel of the action is a nonzero proper ideal of the Weyl algebra.",
    "created_at": "2014-10-13T14:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192545",
    "user": "https://github.com/darijgr"
}
```

Actually, the simplicity of the Weyl algebra requires R to be a field of characteristic 0. If R is a field of positive characteristic p, then the Weyl algebra acts on `R[x]/(x^p)`, and the kernel of the action is a nonzero proper ideal of the Weyl algebra.



---

archive/issue_comments_192546.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-14T02:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192547.json:
```json
{
    "body": "Fixed.",
    "created_at": "2014-10-14T02:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192547",
    "user": "https://github.com/tscrim"
}
```

Fixed.



---

archive/issue_comments_192548.json:
```json
{
    "body": "When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.\n\nWhen does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.\n\nA few small changes:\n\n```diff\ndiff --git a/src/sage/algebras/weyl_algebra.py b/src/sage/algebras/weyl_algebra.py\nindex 22300d9..8c256a0 100644\n--- a/src/sage/algebras/weyl_algebra.py\n+++ b/src/sage/algebras/weyl_algebra.py\n@@ -502,7 +502,7 @@ class DifferentialWeylAlgebra(Algebra, UniqueRepresentation):\n \n     - ``R`` -- a (polynomial) ring\n     - ``names`` -- (default: ``None``) if ``None`` and ``R`` is a\n-      polynomial ring, then consider the variable names corrspond to\n+      polynomial ring, then the variable names correspond to\n       those of ``R``; otherwise if ``names`` is specified, then ``R``\n       is the base ring\n \n@@ -577,7 +577,7 @@ class DifferentialWeylAlgebra(Algebra, UniqueRepresentation):\n \n     def _element_constructor_(self, x):\n         \"\"\"\n-        Construct and element of ``self`` from ``x``.\n+        Construct an element of ``self`` from ``x``.\n \n         EXAMPLES::\n \n```\n",
    "created_at": "2014-10-20T23:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192548",
    "user": "https://github.com/jhpalmieri"
}
```

When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.

When does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.

A few small changes:

```diff
diff --git a/src/sage/algebras/weyl_algebra.py b/src/sage/algebras/weyl_algebra.py
index 22300d9..8c256a0 100644
--- a/src/sage/algebras/weyl_algebra.py
+++ b/src/sage/algebras/weyl_algebra.py
@@ -502,7 +502,7 @@ class DifferentialWeylAlgebra(Algebra, UniqueRepresentation):
 
     - ``R`` -- a (polynomial) ring
     - ``names`` -- (default: ``None``) if ``None`` and ``R`` is a
-      polynomial ring, then consider the variable names corrspond to
+      polynomial ring, then the variable names correspond to
       those of ``R``; otherwise if ``names`` is specified, then ``R``
       is the base ring
 
@@ -577,7 +577,7 @@ class DifferentialWeylAlgebra(Algebra, UniqueRepresentation):
 
     def _element_constructor_(self, x):
         """
-        Construct and element of ``self`` from ``x``.
+        Construct an element of ``self`` from ``x``.
 
         EXAMPLES::
 
```




---

archive/issue_comments_192549.json:
```json
{
    "body": "Replying to [comment:141 jhpalmieri]:\n> When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.\n\nThe question is do we want to return a `Family` indexed by the variable names, which makes it act like a `dict` and have some specified order of output, or act like a list where the ordered of the output is the order of the input.\n\nThere's actually somewhat of mismatch and that `algebra_generators` should match the behavior of `variables` and `differentials`. The reason why `inject_variables` works is because of a specified order of `gens`, not `algebra_generators` (which would also be tweaked accordingly).\n\nI'm bias towards making the outputs being indexed since it carries more information. However I do agree with adding examples demonstrating `inject_variables` and other similar constructions. Your thoughts?\n\n> When does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.\n\nThis is the design of the function, and if it returns `True`, then `coerce_map_from` creates a map using `_element_constructor_`. There are times when it's easier/better-design to implement a custom morphism (like for a module with basis using `module_morphism`).",
    "created_at": "2014-10-21T04:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192549",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:141 jhpalmieri]:
> When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.

The question is do we want to return a `Family` indexed by the variable names, which makes it act like a `dict` and have some specified order of output, or act like a list where the ordered of the output is the order of the input.

There's actually somewhat of mismatch and that `algebra_generators` should match the behavior of `variables` and `differentials`. The reason why `inject_variables` works is because of a specified order of `gens`, not `algebra_generators` (which would also be tweaked accordingly).

I'm bias towards making the outputs being indexed since it carries more information. However I do agree with adding examples demonstrating `inject_variables` and other similar constructions. Your thoughts?

> When does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.

This is the design of the function, and if it returns `True`, then `coerce_map_from` creates a map using `_element_constructor_`. There are times when it's easier/better-design to implement a custom morphism (like for a module with basis using `module_morphism`).



---

archive/issue_comments_192550.json:
```json
{
    "body": "Replying to [comment:142 tscrim]:\n> Replying to [comment:141 jhpalmieri]:\n> > When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.\n> \n> The question is do we want to return a `Family` indexed by the variable names, which makes it act like a `dict` and have some specified order of output, or act like a list where the ordered of the output is the order of the input.\n\nI don't object to your design choice. My question was maybe more practical: is it ever safe to do `dx,dy,dz=W.differentials()`, or should they always be sorted? If it's not really safe, then there shouldn't be examples like that in the documentation.\n\n> I'm bias towards making the outputs being indexed since it carries more information. However I do agree with adding examples demonstrating `inject_variables` and other similar constructions. Your thoughts?\n\nI think adding some examples using `inject_variables` would be useful. I think you could add them to the class-level docstring for `DifferentialWeylAlgebra` and/or to the `weyl_algebra` methods for polynomial rings (pointing out that the result of `inject_variables` is that the variables will now be in the Weyl algebra, not the polynomial ring).\n\n> > When does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.\n> \n> This is the design of the function, and if it returns `True`, then `coerce_map_from` creates a map using `_element_constructor_`. There are times when it's easier/better-design to implement a custom morphism (like for a module with basis using `module_morphism`).\n\nThe docstring basically says, \"if A, then return either X or Y, and otherwise return Z\". A natural question is, when does it return X and when Y? Presumably it's not a coin flip. I'd like the documentation and the examples to explain this. Or do I never need to know this, things are just taken care of in the background? Then the documentation should say so.",
    "created_at": "2014-10-21T18:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192550",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:142 tscrim]:
> Replying to [comment:141 jhpalmieri]:
> > When do I need to do `dx,dy,dz = sorted(W.differentials(), key=str)` vs. `dx,dy,dz = W.differentials()`? There are examples of both sorts; is the second version ever safe? I've seen in my own testing that the `variables` method can return its elements in a random order, not necessarily alphabetical. Will the same happen with `differentials` or `algebra_generators`? It's nice that `W.inject_variables()` works well; maybe that should be advertised, or at least used in some examples.
> 
> The question is do we want to return a `Family` indexed by the variable names, which makes it act like a `dict` and have some specified order of output, or act like a list where the ordered of the output is the order of the input.

I don't object to your design choice. My question was maybe more practical: is it ever safe to do `dx,dy,dz=W.differentials()`, or should they always be sorted? If it's not really safe, then there shouldn't be examples like that in the documentation.

> I'm bias towards making the outputs being indexed since it carries more information. However I do agree with adding examples demonstrating `inject_variables` and other similar constructions. Your thoughts?

I think adding some examples using `inject_variables` would be useful. I think you could add them to the class-level docstring for `DifferentialWeylAlgebra` and/or to the `weyl_algebra` methods for polynomial rings (pointing out that the result of `inject_variables` is that the variables will now be in the Weyl algebra, not the polynomial ring).

> > When does `_coerce_map_from_` return a map and not just True or False? Please add more explanation and an example.
> 
> This is the design of the function, and if it returns `True`, then `coerce_map_from` creates a map using `_element_constructor_`. There are times when it's easier/better-design to implement a custom morphism (like for a module with basis using `module_morphism`).

The docstring basically says, "if A, then return either X or Y, and otherwise return Z". A natural question is, when does it return X and when Y? Presumably it's not a coin flip. I'd like the documentation and the examples to explain this. Or do I never need to know this, things are just taken care of in the background? Then the documentation should say so.



---

archive/issue_comments_192551.json:
```json
{
    "body": "Replying to [comment:143 jhpalmieri]:\n> I don't object to your design choice. My question was maybe more practical: is it ever safe to do `dx,dy,dz=W.differentials()`, or should they always be sorted? If it's not really safe, then there shouldn't be examples like that in the documentation.\n\nI'm starting to question my consistency in the design, so I will take another pass over things. Anyways, it's as safe as the ordering of `d.keys()` where `d` is a python `dict`...so not really. I'll make the necessary changes.\n\n> I think adding some examples using `inject_variables` would be useful. I think you could add them to the class-level docstring for `DifferentialWeylAlgebra` and/or to the `weyl_algebra` methods for polynomial rings (pointing out that the result of `inject_variables` is that the variables will now be in the Weyl algebra, not the polynomial ring).\n\nWill do.\n\n> The docstring basically says, \"if A, then return either X or Y, and otherwise return Z\". A natural question is, when does it return X and when Y? Presumably it's not a coin flip. I'd like the documentation and the examples to explain this. Or do I never need to know this, things are just taken care of in the background? Then the documentation should say so.\n\nAs mentioned, this is the (abridged) specifications of the method, but I see your point. I will reword this.\n\nChanges will be done in a little bit.",
    "created_at": "2014-10-22T00:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192551",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:143 jhpalmieri]:
> I don't object to your design choice. My question was maybe more practical: is it ever safe to do `dx,dy,dz=W.differentials()`, or should they always be sorted? If it's not really safe, then there shouldn't be examples like that in the documentation.

I'm starting to question my consistency in the design, so I will take another pass over things. Anyways, it's as safe as the ordering of `d.keys()` where `d` is a python `dict`...so not really. I'll make the necessary changes.

> I think adding some examples using `inject_variables` would be useful. I think you could add them to the class-level docstring for `DifferentialWeylAlgebra` and/or to the `weyl_algebra` methods for polynomial rings (pointing out that the result of `inject_variables` is that the variables will now be in the Weyl algebra, not the polynomial ring).

Will do.

> The docstring basically says, "if A, then return either X or Y, and otherwise return Z". A natural question is, when does it return X and when Y? Presumably it's not a coin flip. I'd like the documentation and the examples to explain this. Or do I never need to know this, things are just taken care of in the background? Then the documentation should say so.

As mentioned, this is the (abridged) specifications of the method, but I see your point. I will reword this.

Changes will be done in a little bit.



---

archive/issue_comments_192552.json:
```json
{
    "body": "Is this a standard situation in Sage that the order of the `gens` of an algebra/group/whatever cannot be trusted? This sounds like another reason to rewrite that method, and deserves its meta-ticket.",
    "created_at": "2014-10-22T00:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192552",
    "user": "https://github.com/darijgr"
}
```

Is this a standard situation in Sage that the order of the `gens` of an algebra/group/whatever cannot be trusted? This sounds like another reason to rewrite that method, and deserves its meta-ticket.



---

archive/issue_comments_192553.json:
```json
{
    "body": "Replying to [comment:145 darij]:\n> Is this a standard situation in Sage that the order of the `gens` of an algebra/group/whatever cannot be trusted? This sounds like another reason to rewrite that method, and deserves its meta-ticket.\n\nIt's not the order of `gens` (which by specs return a tuple), but instead that of `algebra_generators` (or similar) that returns a `Family` (by specs) which takes a `dict` as input. So the question becomes do we care about the ordering of the algebra generators? For me, the answer is no except for what's needed by `inject_variables`, but this is handled by `gens`.\n\nNow it is possible to construct the data with a fixed input order by `Family(index_set, function)`, and I wouldn't be too opposed to doing things this way. It gives a slight code smell to me, but it would probably be less surprising to a user...?\n\nThoughts?",
    "created_at": "2014-10-22T01:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192553",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:145 darij]:
> Is this a standard situation in Sage that the order of the `gens` of an algebra/group/whatever cannot be trusted? This sounds like another reason to rewrite that method, and deserves its meta-ticket.

It's not the order of `gens` (which by specs return a tuple), but instead that of `algebra_generators` (or similar) that returns a `Family` (by specs) which takes a `dict` as input. So the question becomes do we care about the ordering of the algebra generators? For me, the answer is no except for what's needed by `inject_variables`, but this is handled by `gens`.

Now it is possible to construct the data with a fixed input order by `Family(index_set, function)`, and I wouldn't be too opposed to doing things this way. It gives a slight code smell to me, but it would probably be less surprising to a user...?

Thoughts?



---

archive/issue_comments_192554.json:
```json
{
    "body": "I think we should strive to have `algebra_generators` behave as `gens` should behave, as we are going to deprecate the latter in favor of the former one day. Or am I getting you wrong?",
    "created_at": "2014-10-22T01:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192554",
    "user": "https://github.com/darijgr"
}
```

I think we should strive to have `algebra_generators` behave as `gens` should behave, as we are going to deprecate the latter in favor of the former one day. Or am I getting you wrong?



---

archive/issue_comments_192555.json:
```json
{
    "body": "Replying to [comment:147 darij]:\n> I think we should strive to have `algebra_generators` behave as `gens` should behave, as we are going to deprecate the latter in favor of the former one day. Or am I getting you wrong?\n\nI think on that day, we should change the mechanism of `inject_variables` and the `R.<x,y,z>` syntax to retrieve the generators by their name. Also if we make `algebra_generators` return a `Family` which acts like a tuple, then we distance ourselves somewhat from what the infinite cases behave like-.",
    "created_at": "2014-10-22T01:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192555",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:147 darij]:
> I think we should strive to have `algebra_generators` behave as `gens` should behave, as we are going to deprecate the latter in favor of the former one day. Or am I getting you wrong?

I think on that day, we should change the mechanism of `inject_variables` and the `R.<x,y,z>` syntax to retrieve the generators by their name. Also if we make `algebra_generators` return a `Family` which acts like a tuple, then we distance ourselves somewhat from what the infinite cases behave like-.



---

archive/issue_comments_192556.json:
```json
{
    "body": "I'm curious, where does it say that `algebra_generators` should return a `Family`?\n\nI suppose in parallel with `algebra_generators` and `gens`, we could have `variables` and `vars`, returning a `Family` and a `tuple` respectively, and also `differentials` and `diffs`. Or something like that. Those names are not very evocative, so this does not seem ideal. \n\nI feel that users will frequently want to do things like `dx, dy, dz = W.differentials()`, so we should have an obvious method which returns a sorted tuple. Maybe the method returning a family could be private (`W._differentials()`) or have a name like `W.differentials_as_family()`?",
    "created_at": "2014-10-22T18:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192556",
    "user": "https://github.com/jhpalmieri"
}
```

I'm curious, where does it say that `algebra_generators` should return a `Family`?

I suppose in parallel with `algebra_generators` and `gens`, we could have `variables` and `vars`, returning a `Family` and a `tuple` respectively, and also `differentials` and `diffs`. Or something like that. Those names are not very evocative, so this does not seem ideal. 

I feel that users will frequently want to do things like `dx, dy, dz = W.differentials()`, so we should have an obvious method which returns a sorted tuple. Maybe the method returning a family could be private (`W._differentials()`) or have a name like `W.differentials_as_family()`?



---

archive/issue_comments_192557.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-22T19:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192558.json:
```json
{
    "body": "As per discussion, the result of `variables` and `differentials` returns sorted families based upon the ordering of the variable names. I also made it so that `algebra_generators` of the Clifford algebra returns a (similarly sorted) family. Furthermore I fixed the coercion (well...really a conversion) issue for modular images for Weyl algebras as was done for Clifford algebras.",
    "created_at": "2014-10-22T19:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192558",
    "user": "https://github.com/tscrim"
}
```

As per discussion, the result of `variables` and `differentials` returns sorted families based upon the ordering of the variable names. I also made it so that `algebra_generators` of the Clifford algebra returns a (similarly sorted) family. Furthermore I fixed the coercion (well...really a conversion) issue for modular images for Weyl algebras as was done for Clifford algebras.



---

archive/issue_comments_192559.json:
```json
{
    "body": "The warning in clifford_algebra.py has some typos:\n\n```\nThe Clifford is not graded, but instead filtred.\n```\n\nshould be\n\n```\nThe Clifford algebra is not graded, but instead filtered.\n```\n\nOtherwise, I'm happy with it.",
    "created_at": "2014-10-22T23:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192559",
    "user": "https://github.com/jhpalmieri"
}
```

The warning in clifford_algebra.py has some typos:

```
The Clifford is not graded, but instead filtred.
```

should be

```
The Clifford algebra is not graded, but instead filtered.
```

Otherwise, I'm happy with it.



---

archive/issue_comments_192560.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-23T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192561.json:
```json
{
    "body": "Fixed. So I believe everything has been reviewed at this point and means this is a positive review?",
    "created_at": "2014-10-23T03:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192561",
    "user": "https://github.com/tscrim"
}
```

Fixed. So I believe everything has been reviewed at this point and means this is a positive review?



---

archive/issue_comments_192562.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-23T03:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192562",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_192563.json:
```json
{
    "body": "Thank you both!",
    "created_at": "2014-10-23T03:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192563",
    "user": "https://github.com/tscrim"
}
```

Thank you both!



---

archive/issue_comments_192564.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-10-23T14:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_192565.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-10-23T14:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_192566.json:
```json
{
    "body": "Thanks from me, too, John and Travis! Care to review one final piece of code? I have added the lifted bilinear form on the exterior algebra.\n\nTODO list for further patches:\n\nWEYL:\n\n- Weyl algebras in general. This will be mostly copypasting the structure of the Clifford algebra class.\n\n- Differential Weyl algebra as a particular case of a Weyl algebra (I think the matrix is the block matrix \\\\ (0 -I \\\\ I 0) \\\\ here). Is this best achieved by having DifferentialWeylAlgebra inherit from WeylAlgebra, or better by coercions from one to the other? (I hope it's the former.)\n\nCLIFFORD:\n\n- The canonical isomorphism between a Clifford algebra and an exterior algebra induced by a bilinear (! not quadratic !) form. This isomorphism, and its inverse, are particular cases of a common construction (Bourbaki's \"Alg\u00e8bre IX\", \u00a79, no. 2-3; Ricardo Baeza's \"Quadratic Forms over Semilocal Rings\", Lecture Notes in Mathematics 655, Springer 1978): If f and g are two bilinear forms on a module V, and if F and G are their corresponding quadratic forms (so F(x) = f(x, x) and G(x) = g(x, x)), then there is a canonical isomorphism from Cl(V, F) to Cl(V, F + G), which however depends on g and not just on G.\n\n- Use this Clifford-exterior isomorphism to define constant coefficients and scalar products on Clifford algebras. This will depend on a bilinear form.\n\n- Check if the scalar product on the Clifford algebra allows a faster way to compute the lifted bilinear form on the exterior algebra.",
    "created_at": "2014-10-23T14:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192566",
    "user": "https://github.com/darijgr"
}
```

Thanks from me, too, John and Travis! Care to review one final piece of code? I have added the lifted bilinear form on the exterior algebra.

TODO list for further patches:

WEYL:

- Weyl algebras in general. This will be mostly copypasting the structure of the Clifford algebra class.

- Differential Weyl algebra as a particular case of a Weyl algebra (I think the matrix is the block matrix \\ (0 -I \\ I 0) \\ here). Is this best achieved by having DifferentialWeylAlgebra inherit from WeylAlgebra, or better by coercions from one to the other? (I hope it's the former.)

CLIFFORD:

- The canonical isomorphism between a Clifford algebra and an exterior algebra induced by a bilinear (! not quadratic !) form. This isomorphism, and its inverse, are particular cases of a common construction (Bourbaki's "Algèbre IX", §9, no. 2-3; Ricardo Baeza's "Quadratic Forms over Semilocal Rings", Lecture Notes in Mathematics 655, Springer 1978): If f and g are two bilinear forms on a module V, and if F and G are their corresponding quadratic forms (so F(x) = f(x, x) and G(x) = g(x, x)), then there is a canonical isomorphism from Cl(V, F) to Cl(V, F + G), which however depends on g and not just on G.

- Use this Clifford-exterior isomorphism to define constant coefficients and scalar products on Clifford algebras. This will depend on a bilinear form.

- Check if the scalar product on the Clifford algebra allows a faster way to compute the lifted bilinear form on the exterior algebra.



---

archive/issue_comments_192567.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-23T15:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192567",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_192568.json:
```json
{
    "body": "\n```\nsage -t --long --warn-long 38.2 src/sage/combinat/descent_algebra.py\ngit log**********************************************************************\nFile \"src/sage/combinat/descent_algebra.py\", line 292, in sage.combinat.descent_algebra.DescentAlgebra.D.to_B_basis\nFailed example:\n    map(B, D.basis()) # indirect doctest\nExpected:\n    [B[4],\n     B[1, 3] - B[4],\n     B[2, 2] - B[4],\n     B[1, 1, 2] - B[1, 3] - B[2, 2] + B[4],\n     B[3, 1] - B[4],\n     B[1, 2, 1] - B[1, 3] - B[3, 1] + B[4],\n     B[2, 1, 1] - B[2, 2] - B[3, 1] + B[4],\n     B[1, 1, 1, 1] - B[1, 1, 2] - B[1, 2, 1] + B[1, 3]\n      - B[2, 1, 1] + B[2, 2] + B[3, 1] - B[4]]\nGot:\n    [B[4],\n     B[1, 3] - B[4],\n     B[2, 2] - B[4],\n     B[3, 1] - B[4],\n     B[1, 1, 2] - B[1, 3] - B[2, 2] + B[4],\n     B[1, 2, 1] - B[1, 3] - B[3, 1] + B[4],\n     B[2, 1, 1] - B[2, 2] - B[3, 1] + B[4],\n     B[1, 1, 1, 1] - B[1, 1, 2] - B[1, 2, 1] + B[1, 3] - B[2, 1, 1] + B[2, 2] + B[3, 1] - B[4]]\n **********************************************************************\n1 item had failures:\n   1 of   5 in sage.combinat.descent_algebra.DescentAlgebra.D.to_B_basis\n```\n",
    "created_at": "2014-10-23T15:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192568",
    "user": "https://github.com/vbraun"
}
```


```
sage -t --long --warn-long 38.2 src/sage/combinat/descent_algebra.py
git log**********************************************************************
File "src/sage/combinat/descent_algebra.py", line 292, in sage.combinat.descent_algebra.DescentAlgebra.D.to_B_basis
Failed example:
    map(B, D.basis()) # indirect doctest
Expected:
    [B[4],
     B[1, 3] - B[4],
     B[2, 2] - B[4],
     B[1, 1, 2] - B[1, 3] - B[2, 2] + B[4],
     B[3, 1] - B[4],
     B[1, 2, 1] - B[1, 3] - B[3, 1] + B[4],
     B[2, 1, 1] - B[2, 2] - B[3, 1] + B[4],
     B[1, 1, 1, 1] - B[1, 1, 2] - B[1, 2, 1] + B[1, 3]
      - B[2, 1, 1] + B[2, 2] + B[3, 1] - B[4]]
Got:
    [B[4],
     B[1, 3] - B[4],
     B[2, 2] - B[4],
     B[3, 1] - B[4],
     B[1, 1, 2] - B[1, 3] - B[2, 2] + B[4],
     B[1, 2, 1] - B[1, 3] - B[3, 1] + B[4],
     B[2, 1, 1] - B[2, 2] - B[3, 1] + B[4],
     B[1, 1, 1, 1] - B[1, 1, 2] - B[1, 2, 1] + B[1, 3] - B[2, 1, 1] + B[2, 2] + B[3, 1] - B[4]]
 **********************************************************************
1 item had failures:
   1 of   5 in sage.combinat.descent_algebra.DescentAlgebra.D.to_B_basis
```




---

archive/issue_comments_192569.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-23T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192570.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-23T15:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192570",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_192571.json:
```json
{
    "body": "I made some tweaks to the `lifted_bilinear_form`. Most importantly I made it return a `PoorManMap` so the repr is nicer, and I changed the doc. I also fixed the doctest Volker noted.",
    "created_at": "2014-10-23T15:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192571",
    "user": "https://github.com/tscrim"
}
```

I made some tweaks to the `lifted_bilinear_form`. Most importantly I made it return a `PoorManMap` so the repr is nicer, and I changed the doc. I also fixed the doctest Volker noted.



---

archive/issue_comments_192572.json:
```json
{
    "body": "Darij could you check my changes (and add a space to that last line in that `descent_algebra.py` doctest since all my cython files are recompiling currently)?",
    "created_at": "2014-10-23T15:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192572",
    "user": "https://github.com/tscrim"
}
```

Darij could you check my changes (and add a space to that last line in that `descent_algebra.py` doctest since all my cython files are recompiling currently)?



---

archive/issue_comments_192573.json:
```json
{
    "body": "Done and done. I had to change the domain of the PoorManMap, though, and I don't like the result very much.",
    "created_at": "2014-10-23T15:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192573",
    "user": "https://github.com/darijgr"
}
```

Done and done. I had to change the domain of the PoorManMap, though, and I don't like the result very much.



---

archive/issue_comments_192574.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-23T15:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_192575.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-23T16:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192575",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_192576.json:
```json
{
    "body": "Ah yea. Duh. Thanks.",
    "created_at": "2014-10-23T16:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192576",
    "user": "https://github.com/tscrim"
}
```

Ah yea. Duh. Thanks.



---

archive/issue_comments_192577.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-24T10:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15063#issuecomment-192577",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
