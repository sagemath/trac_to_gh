# Issue 26060: Fix comparison of symbolic constants

Issue created by migration from https://trac.sagemath.org/ticket/26297

Original creator: embray

Original creation time: 2018-09-17 10:07:23

CC:  chapoton

Originally labeled this "python 3" but really this is buggy on Python 2 as well.

On Python 3 it at least straight up doesn't work:


```
sage: bool(golden_ratio < pi)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-e16abba7bd09> in <module>()
----> 1 bool(golden_ratio < pi)

/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__nonzero__ (build/cythonized/sage/symbolic/expression.cpp:19335)()
   2851             # constants are wrappers around Sage objects, compare directly
   2852             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):
-> 2853                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())
   2854             sig_on()
   2855             try:

TypeError: '<' not supported between instances of 'GoldenRatio' and 'Pi'
```


On Python 2 this may or may not give the right result, but in general it is wrong:


```
sage: bool(golden_ratio < pi)
False
```


This is because `Expression.__bool__` does this:


```
 2849         if self.is_relational():
 2850             # constants are wrappers around Sage objects, compare directly
 2851             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):
 2852                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())
```


Where the `pyobject()`s in this case are `sage.symbolic.constants.Constant` instances, which does not implement rich comparison (only `__eq__`).

How do we want to go about fixing this?  What would be the best way?  Realistically speaking we should be able to compare constants' float values.  In theory one could define two constants that differ from each other only in the 100th decimal place or something, but is that really a realistic case?


---

Comment by embray created at 2018-12-28 14:10:15

Retargeting some of my tickets (somewhat optimistically for now).


---

Comment by embray created at 2019-03-25 10:44:36

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.
