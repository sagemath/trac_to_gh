# Issue 26060: Fix comparison of symbolic constants

archive/issues_026060.json:
```json
{
    "body": "CC:  @fchapoton\n\nOriginally labeled this \"python 3\" but really this is buggy on Python 2 as well.\n\nOn Python 3 it at least straight up doesn't work:\n\n\n```\nsage: bool(golden_ratio < pi)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-5-e16abba7bd09> in <module>()\n----> 1 bool(golden_ratio < pi)\n\n/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__nonzero__ (build/cythonized/sage/symbolic/expression.cpp:19335)()\n   2851             # constants are wrappers around Sage objects, compare directly\n   2852             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):\n-> 2853                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())\n   2854             sig_on()\n   2855             try:\n\nTypeError: '<' not supported between instances of 'GoldenRatio' and 'Pi'\n```\n\n\nOn Python 2 this may or may not give the right result, but in general it is wrong:\n\n\n```\nsage: bool(golden_ratio < pi)\nFalse\n```\n\n\nThis is because `Expression.__bool__` does this:\n\n\n```\n 2849         if self.is_relational():\n 2850             # constants are wrappers around Sage objects, compare directly\n 2851             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):\n 2852                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())\n```\n\n\nWhere the `pyobject()`s in this case are `sage.symbolic.constants.Constant` instances, which does not implement rich comparison (only `__eq__`).\n\nHow do we want to go about fixing this?  What would be the best way?  Realistically speaking we should be able to compare constants' float values.  In theory one could define two constants that differ from each other only in the 100th decimal place or something, but is that really a realistic case?\n\nIssue created by migration from https://trac.sagemath.org/ticket/26297\n\n",
    "created_at": "2018-09-17T10:07:23Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Fix comparison of symbolic constants",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26060",
    "user": "@embray"
}
```
CC:  @fchapoton

Originally labeled this "python 3" but really this is buggy on Python 2 as well.

On Python 3 it at least straight up doesn't work:


```
sage: bool(golden_ratio < pi)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-e16abba7bd09> in <module>()
----> 1 bool(golden_ratio < pi)

/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__nonzero__ (build/cythonized/sage/symbolic/expression.cpp:19335)()
   2851             # constants are wrappers around Sage objects, compare directly
   2852             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):
-> 2853                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())
   2854             sig_on()
   2855             try:

TypeError: '<' not supported between instances of 'GoldenRatio' and 'Pi'
```


On Python 2 this may or may not give the right result, but in general it is wrong:


```
sage: bool(golden_ratio < pi)
False
```


This is because `Expression.__bool__` does this:


```
 2849         if self.is_relational():
 2850             # constants are wrappers around Sage objects, compare directly
 2851             if is_a_constant(self._gobj.lhs()) and is_a_constant(self._gobj.rhs()):
 2852                 return self.operator()(self.lhs().pyobject(), self.rhs().pyobject())
```


Where the `pyobject()`s in this case are `sage.symbolic.constants.Constant` instances, which does not implement rich comparison (only `__eq__`).

How do we want to go about fixing this?  What would be the best way?  Realistically speaking we should be able to compare constants' float values.  In theory one could define two constants that differ from each other only in the 100th decimal place or something, but is that really a realistic case?

Issue created by migration from https://trac.sagemath.org/ticket/26297





---

archive/issue_comments_367522.json:
```json
{
    "body": "Retargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26060#issuecomment-367522",
    "user": "@embray"
}
```

Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_comments_367523.json:
```json
{
    "body": "Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.",
    "created_at": "2019-03-25T10:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26060#issuecomment-367523",
    "user": "@embray"
}
```

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.
