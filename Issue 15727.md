# Issue 15727: Remove superfluous import statement in ell_point

Issue created by migration from Trac.

Original creator: cremona

Original creation time: 2014-03-17 15:39:52

As reported on sage-devel, in Sage 6.1.1 this works as designed:

```
sage: N = 1715761513
sage: E = EllipticCurve(Integers(N),[3,-13])
sage: P = E(2,1)
sage: LCM([2..60])*P
...ZeroDivisionError: Inverse of 1520944668 does not exist (characteristic = 1715761513 = 26927*63719)
```

but this fails in the wrong way:

```
N = 35
E = EllipticCurve(Integers(N),[5,1])
P = E(0,1)
LCM([2..6])*P
...
UnboundLocalError: local variable 'ZZ' referenced before assignment
```

The problem is that there are two places where the fail condiction can be triggered (and in this situation this happens by design, as it is used to detect the fact that the modulus is not prime and factor it): one in addition of points and one in duplication.  In the latter there is an explicit "import ZZ" while in the former there is not.   This could be fixed by deleting the import on line 708 (thus relying on the import at the top of the file in line 130), or by deleting line 130 (since ZZ is not referred to elsehere in the file) and inderting a copy of line 708 before line 696.



---

Comment by nbruin created at 2014-03-17 17:05:59

Alternative: changing `ZZ(value)` to `value.lift()`, so that ZZ doesn't need to be imported at all.

Really we'd need to check that R is a quotient of ZZ before attempting any of this, not just if R is finite.

In general: doing in import of ZZ at module instantiation time should be cheap enough, but it's not required at all here, since integers mod N come with a method to get a representing integer.


---

Comment by chapoton created at 2014-03-21 20:14:53

Here is a branch, please review
----
New commits:


---

Comment by chapoton created at 2014-03-21 20:14:53

Changing status from new to needs_review.


---

Comment by chapoton created at 2014-04-01 19:15:11

Hello, this seems to be an easy ticket, and should be rather simple to review.


---

Comment by pbruin created at 2014-04-07 00:19:20

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-07 19:08:52

Resolution: fixed
