# Issue 33245: Improve variable declaration and naming of localization of integral domains

Issue created by migration from https://trac.sagemath.org/ticket/33482

Original creator: soehms

Original creation time: 2022-03-08 19:08:46

CC:  slelievre vdelecroix

Keywords: inline declaration localization variables

The user should be able to change the display of the variables in the localisation.

Something like:


```sage
sage: P.<X, Y> = QQ[]
sage: L.<x, y> = P.localization(X - Y)
```


where the generators would display as `X, Y `in `P` and as `x, y` in `L`. 

Furthermore some minor style fixes mentioned in [comment 16](https://trac.sagemath.org/ticket/33463#comment:16) of #33463 should be realized.


---

Comment by soehms created at 2022-03-10 17:48:42

The issue described here is open concerning the fraction field, too:
  

```sage
sage: P.<X, Y> = QQ[]
sage: F.<x,y> = P.fraction_field()
sage: x
X
```



I think we should have a similar behavior there as well. What do you think? Should I open another ticket for this? Shall I open another ticket for that?
----
New commits:


---

Comment by soehms created at 2022-03-10 17:48:42

Changing keywords from "inline declaration localization variables" to "localization variable names".


---

Comment by soehms created at 2022-03-10 17:48:42

Changing status from new to needs_review.


---

Comment by soehms created at 2022-03-10 17:50:59

The branch is implemented on top of #33463 just to avoid merge conflict.


---

Comment by tscrim created at 2022-03-15 01:13:56

I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.

Green bot => positive review.


---

Comment by soehms created at 2022-03-15 17:39:26

Replying to [comment:5 tscrim]:
> I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.

I agree as it's not an entirely new option. It is an already existing option to declare separate variables. But currently these are displayed as the original ones. So we would change the existing behavior of a core functionality.


> Green bot => positive review.

Thanks, but I fear this bot wan't do the job:


```
2022-03-15 12:28:23
Traceback (most recent call last):
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/patchbot.py", line 1051, in test_a_ticket
    pull_from_trac(self.sage_root, ticket['id'], force=True,
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/trac.py", line 307, in pull_from_trac
    ensure_free_space(sage_root)
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/util.py", line 275, in ensure_free_space
    raise ConfigException(msg.format(N, free, path))
sage_patchbot.util.ConfigException: Refusing to build with less than 4.00G free (3724734464 bytes available on /home/debian/sage)
2022-03-15 12:28:29
5 seconds
```


Vincent, can you have a look at that?


---

Comment by vdelecroix created at 2022-03-15 22:49:07

The `/tmp/` repository was full. Not sure it is a bug. I will set up a cleaner.


---

Comment by tscrim created at 2022-03-16 00:03:31

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-03-16 00:04:32

I did set a positive review, but it seems that message has been lost from trac.


---

Comment by soehms created at 2022-03-16 07:23:48

Replying to [comment:9 tscrim]:
> I did set a positive review, but it seems that message has been lost from trac.

No, its there! Many thanks!


---

Comment by tscrim created at 2022-03-16 07:26:36

Weird; I cannot see comment:8. I have tried a hard refresh to clear out any cache info too, but I see it in the page source code.


---

Comment by vbraun created at 2022-03-27 15:44:03

Resolution: fixed
