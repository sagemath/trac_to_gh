# Issue 33245: Improve variable declaration and naming of localization of integral domains

archive/issues_033245.json:
```json
{
    "body": "CC:  @slel @videlec\n\nKeywords: inline declaration localization variables\n\nThe user should be able to change the display of the variables in the localisation.\n\nSomething like:\n\n```sage\nsage: P.<X, Y> = QQ[]\nsage: L.<x, y> = P.localization(X - Y)\n```\n\nwhere the generators would display as `X, Y `in `P` and as `x, y` in `L`. \n\nFurthermore some minor style fixes mentioned in [comment 16](https://trac.sagemath.org/ticket/33463#comment:16) of #33463 should be realized.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33482\n\n",
    "created_at": "2022-03-08T19:08:46Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Improve variable declaration and naming of localization of integral domains",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33245",
    "user": "https://github.com/soehms"
}
```
CC:  @slel @videlec

Keywords: inline declaration localization variables

The user should be able to change the display of the variables in the localisation.

Something like:

```sage
sage: P.<X, Y> = QQ[]
sage: L.<x, y> = P.localization(X - Y)
```

where the generators would display as `X, Y `in `P` and as `x, y` in `L`. 

Furthermore some minor style fixes mentioned in [comment 16](https://trac.sagemath.org/ticket/33463#comment:16) of #33463 should be realized.

Issue created by migration from https://trac.sagemath.org/ticket/33482





---

archive/issue_comments_472815.json:
```json
{
    "body": "The issue described here is open concerning the fraction field, too:\n  \n```sage\nsage: P.<X, Y> = QQ[]\nsage: F.<x,y> = P.fraction_field()\nsage: x\nX\n```\n\n\nI think we should have a similar behavior there as well. What do you think? Should I open another ticket for this? Shall I open another ticket for that?\n\n---\nNew commits:",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472815",
    "user": "https://github.com/soehms"
}
```

The issue described here is open concerning the fraction field, too:
  
```sage
sage: P.<X, Y> = QQ[]
sage: F.<x,y> = P.fraction_field()
sage: x
X
```


I think we should have a similar behavior there as well. What do you think? Should I open another ticket for this? Shall I open another ticket for that?

---
New commits:



---

archive/issue_comments_472816.json:
```json
{
    "body": "Changing keywords from \"inline declaration localization variables\" to \"localization variable names\".",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472816",
    "user": "https://github.com/soehms"
}
```

Changing keywords from "inline declaration localization variables" to "localization variable names".



---

archive/issue_comments_472817.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472817",
    "user": "https://github.com/soehms"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_472818.json:
```json
{
    "body": "The branch is implemented on top of #33463 just to avoid merge conflict.",
    "created_at": "2022-03-10T17:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472818",
    "user": "https://github.com/soehms"
}
```

The branch is implemented on top of #33463 just to avoid merge conflict.



---

archive/issue_comments_472819.json:
```json
{
    "body": "I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.\n\nGreen bot => positive review.",
    "created_at": "2022-03-15T01:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472819",
    "user": "https://github.com/tscrim"
}
```

I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.

Green bot => positive review.



---

archive/issue_comments_472820.json:
```json
{
    "body": "Replying to [comment:5 tscrim]:\n> I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.\n\n\nI agree as it's not an entirely new option. It is an already existing option to declare separate variables. But currently these are displayed as the original ones. So we would change the existing behavior of a core functionality.\n\n\n> Green bot => positive review.\n\n\nThanks, but I fear this bot wan't do the job:\n\n```\n2022-03-15 12:28:23\nTraceback (most recent call last):\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/patchbot.py\", line 1051, in test_a_ticket\n    pull_from_trac(self.sage_root, ticket['id'], force=True,\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/trac.py\", line 307, in pull_from_trac\n    ensure_free_space(sage_root)\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/util.py\", line 275, in ensure_free_space\n    raise ConfigException(msg.format(N, free, path))\nsage_patchbot.util.ConfigException: Refusing to build with less than 4.00G free (3724734464 bytes available on /home/debian/sage)\n2022-03-15 12:28:29\n5 seconds\n```\n\nVincent, can you have a look at that?",
    "created_at": "2022-03-15T17:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472820",
    "user": "https://github.com/soehms"
}
```

Replying to [comment:5 tscrim]:
> I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.


I agree as it's not an entirely new option. It is an already existing option to declare separate variables. But currently these are displayed as the original ones. So we would change the existing behavior of a core functionality.


> Green bot => positive review.


Thanks, but I fear this bot wan't do the job:

```
2022-03-15 12:28:23
Traceback (most recent call last):
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/patchbot.py", line 1051, in test_a_ticket
    pull_from_trac(self.sage_root, ticket['id'], force=True,
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/trac.py", line 307, in pull_from_trac
    ensure_free_space(sage_root)
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/util.py", line 275, in ensure_free_space
    raise ConfigException(msg.format(N, free, path))
sage_patchbot.util.ConfigException: Refusing to build with less than 4.00G free (3724734464 bytes available on /home/debian/sage)
2022-03-15 12:28:29
5 seconds
```

Vincent, can you have a look at that?



---

archive/issue_comments_472821.json:
```json
{
    "body": "The `/tmp/` repository was full. Not sure it is a bug. I will set up a cleaner.",
    "created_at": "2022-03-15T22:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472821",
    "user": "https://github.com/videlec"
}
```

The `/tmp/` repository was full. Not sure it is a bug. I will set up a cleaner.



---

archive/issue_comments_472822.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-16T00:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472822",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_472823.json:
```json
{
    "body": "I did set a positive review, but it seems that message has been lost from trac.",
    "created_at": "2022-03-16T00:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472823",
    "user": "https://github.com/tscrim"
}
```

I did set a positive review, but it seems that message has been lost from trac.



---

archive/issue_comments_472824.json:
```json
{
    "body": "Replying to [comment:9 tscrim]:\n> I did set a positive review, but it seems that message has been lost from trac.\n\n\nNo, its there! Many thanks!",
    "created_at": "2022-03-16T07:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472824",
    "user": "https://github.com/soehms"
}
```

Replying to [comment:9 tscrim]:
> I did set a positive review, but it seems that message has been lost from trac.


No, its there! Many thanks!



---

archive/issue_comments_472825.json:
```json
{
    "body": "Weird; I cannot see comment:8. I have tried a hard refresh to clear out any cache info too, but I see it in the page source code.",
    "created_at": "2022-03-16T07:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472825",
    "user": "https://github.com/tscrim"
}
```

Weird; I cannot see comment:8. I have tried a hard refresh to clear out any cache info too, but I see it in the page source code.



---

archive/issue_events_088208.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-27T15:44:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33245#event-88208"
}
```



---

archive/issue_comments_472826.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-27T15:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33245#issuecomment-472826",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
