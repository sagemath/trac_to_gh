# Issue 14679: Weird multiplication by identity in set_partition_ordered.py

Issue created by migration from https://trac.sagemath.org/ticket/14883

Original creator: darij

Original creation time: 2013-07-12 15:04:14

Assignee: sage-combinat

Keywords: combinat, ordered set partitions, permutations

See the attached patch which, I hope, speaks for itself. I don't see any reason why that permutation had to be multiplied by an identity permutation. I thought it might have been meant to coerce the permutation into a larger symmetric group or to avoid some corner-case bugs, but this doesn't seem to be an issue (cf. the doctests I added). The patch has a minor but nontrivial effect on speed:


```
sage: timeit("list(OrderedSetPartitions([1,2,3,4,5],[3,2]))")
```

now takes 6.75 rather than 7.67 ms.


---

Comment by darij created at 2013-07-12 15:09:38

Changing status from new to needs_review.


---

Attachment


---

Comment by chapoton created at 2013-07-12 15:48:48

patch does not apply, maybe because the dependency is not written correctly, let us see.


---

Comment by darij created at 2013-07-12 15:59:03

Oops, the dependency definitely needed a hash. But how does that affect the failure of the patch? Do you have a bot which pulls dependencies automatically?


---

Comment by chapoton created at 2013-07-12 17:15:12

yes, the patchbot is smart enough to do that, indeed. Click on the red circle and you will see !


---

Comment by darij created at 2013-07-12 17:18:31

Oh, the patchbot. I'm not (yet) smart enough to understand its output...


---

Comment by tscrim created at 2013-07-20 05:04:59

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-07-20 05:04:59

Looks good to me.


---

Comment by jdemeyer created at 2013-08-28 06:53:43

Resolution: fixed
