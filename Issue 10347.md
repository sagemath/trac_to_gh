# Issue 10347: upgrade optional biopython package to 1.56

archive/issues_010347.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  mvngu\n\nKeywords: biopython\n\nBiopython 1.56 was released November 26th, 2010.  The candidate package at:\n\nhttp://sage.math.washington.edu/home/mhampton/biopython-1.56.spkg\n\nhas updated src and SPKG.txt.  \nDetails on this release can be found at:\n\nhttp://news.open-bio.org/news/2010/11/biopython-1-56-released/\n\nIssue created by migration from https://trac.sagemath.org/ticket/10348\n\n",
    "created_at": "2010-11-27T23:06:58Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "upgrade optional biopython package to 1.56",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10347",
    "user": "mhampton"
}
```
Assignee: tbd

CC:  mvngu

Keywords: biopython

Biopython 1.56 was released November 26th, 2010.  The candidate package at:

http://sage.math.washington.edu/home/mhampton/biopython-1.56.spkg

has updated src and SPKG.txt.  
Details on this release can be found at:

http://news.open-bio.org/news/2010/11/biopython-1-56-released/

Issue created by migration from https://trac.sagemath.org/ticket/10348





---

archive/issue_comments_106234.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-11-27T23:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106234",
    "user": "mhampton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_106235.json:
```json
{
    "body": "Any hints on what someone who doesn't actually use biopython might do to review this (that is, pitfalls or something)?",
    "created_at": "2010-12-02T16:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106235",
    "user": "kcrisman"
}
```

Any hints on what someone who doesn't actually use biopython might do to review this (that is, pitfalls or something)?



---

archive/issue_comments_106236.json:
```json
{
    "body": "You could try to do some examples from the Biopython tutorial:\n[http://www.biopython.org/DIST/docs/tutorial/Tutorial.html](http://www.biopython.org/DIST/docs/tutorial/Tutorial.html)\n\nor look at previous reviews such as:\n[http://trac.sagemath.org/sage_trac/ticket/9857](http://trac.sagemath.org/sage_trac/ticket/9857)\n\nBut biopython has good internal testing and is pretty stable, so there shouldn't be any problems.  Its more double-checking the packaging.",
    "created_at": "2011-02-08T18:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106236",
    "user": "mhampton"
}
```

You could try to do some examples from the Biopython tutorial:
[http://www.biopython.org/DIST/docs/tutorial/Tutorial.html](http://www.biopython.org/DIST/docs/tutorial/Tutorial.html)

or look at previous reviews such as:
[http://trac.sagemath.org/sage_trac/ticket/9857](http://trac.sagemath.org/sage_trac/ticket/9857)

But biopython has good internal testing and is pretty stable, so there shouldn't be any problems.  Its more double-checking the packaging.



---

archive/issue_comments_106237.json:
```json
{
    "body": "Hi,\n\n* the changes to SPKG.txt are not checked in\n* I think the order of the changelog is the wrong way around, the newest entry should be at the top\n\nOn the plus side:\n\n* src is indeed the same as upstram\n* spkg installs cleanly on sage.math\n* I ran one example from the tutorial and it worked\n\n\n```python\n>>> from Bio.Seq import Seq\n>>> from Bio.Alphabet import IUPAC\n>>> my_seq = Seq(\"AGTACACTGGT\", IUPAC.unambiguous_dna)\n>>> my_seq\nSeq('AGTACACTGGT', IUPACUnambiguousDNA())\n>>> my_seq.alphabet\n```\n",
    "created_at": "2011-02-08T22:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106237",
    "user": "malb"
}
```

Hi,

* the changes to SPKG.txt are not checked in
* I think the order of the changelog is the wrong way around, the newest entry should be at the top

On the plus side:

* src is indeed the same as upstram
* spkg installs cleanly on sage.math
* I ran one example from the tutorial and it worked


```python
>>> from Bio.Seq import Seq
>>> from Bio.Alphabet import IUPAC
>>> my_seq = Seq("AGTACACTGGT", IUPAC.unambiguous_dna)
>>> my_seq
Seq('AGTACACTGGT', IUPACUnambiguousDNA())
>>> my_seq.alphabet
```




---

archive/issue_comments_106238.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-02-08T22:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106238",
    "user": "malb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106239.json:
```json
{
    "body": "It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. \n\n\n```\nif [ \"x$SAGE_LOCAL\" = x ]; then\n```\n\nis preferable to\n\n```\nif [ \"$SAGE_LOCAL\" = \"\" ]; then\n```\n\n\nAlso, the line\n\n```\n   echo \"SAGE_LOCAL undefined ... exiting\";\n```\n\n\nin spkg-install does not need that semi-colon on the end. It seems someone wrote this some time with a semi-colon, then it's been cut/pasted around. The same comments apply to spkg-check\n\nIMHO it would be better to check if this builds, before trying to install. i.e. add \n\n\n```\nif [ $? -ne 0 ]; then\n   echo \"Error building biopython\"\n   exit 1\nfi\n```\n\n\nin the right place. \n\nAlso, in SPKG.txt, there is no list of `Dependencies` or any `Special Update/Build Instructions` Yet the Sage developers guide says these should both exist, with the `Special Update/Build Instructions` having a list of what the patches do. For `Dependencies` I would just wrote \"none\". \n\n\n\n```\n## Dependencies\n\nList the dependencies here\n\n## Special Update/Build Instructions\n\nList patches that need to be applied and what they do\n```\n\n\nI don't have a clue how to use this, but I installed it ok on OpenSolaris and run the same code as Martin Albrecht and got some sensible looking results.",
    "created_at": "2011-02-09T06:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106239",
    "user": "drkirkby"
}
```

It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. 


```
if [ "x$SAGE_LOCAL" = x ]; then
```

is preferable to

```
if [ "$SAGE_LOCAL" = "" ]; then
```


Also, the line

```
   echo "SAGE_LOCAL undefined ... exiting";
```


in spkg-install does not need that semi-colon on the end. It seems someone wrote this some time with a semi-colon, then it's been cut/pasted around. The same comments apply to spkg-check

IMHO it would be better to check if this builds, before trying to install. i.e. add 


```
if [ $? -ne 0 ]; then
   echo "Error building biopython"
   exit 1
fi
```


in the right place. 

Also, in SPKG.txt, there is no list of `Dependencies` or any `Special Update/Build Instructions` Yet the Sage developers guide says these should both exist, with the `Special Update/Build Instructions` having a list of what the patches do. For `Dependencies` I would just wrote "none". 



```
## Dependencies

List the dependencies here

## Special Update/Build Instructions

List patches that need to be applied and what they do
```


I don't have a clue how to use this, but I installed it ok on OpenSolaris and run the same code as Martin Albrecht and got some sensible looking results.



---

archive/issue_comments_106240.json:
```json
{
    "body": "Replying to [comment:5 drkirkby]:\n> It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. \n> \n> {{{\n> if [ \"x$SAGE_LOCAL\" = x ]; then\n> }}}\n> is preferable to\n> {{{\n> if [ \"$SAGE_LOCAL\" = \"\" ]; then\n> }}}\n\nReally?  I have yet to see a shell where the latter won't work properly...",
    "created_at": "2011-02-09T12:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106240",
    "user": "jdemeyer"
}
```

Replying to [comment:5 drkirkby]:
> It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. 
> 
> {{{
> if [ "x$SAGE_LOCAL" = x ]; then
> }}}
> is preferable to
> {{{
> if [ "$SAGE_LOCAL" = "" ]; then
> }}}

Really?  I have yet to see a shell where the latter won't work properly...



---

archive/issue_comments_106241.json:
```json
{
    "body": "Replying to [comment:6 jdemeyer]:\n> Replying to [comment:5 drkirkby]:\n> > It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. \n> > \n> > {{{\n> > if [ \"x$SAGE_LOCAL\" = x ]; then\n> > }}}\n> > is preferable to\n> > {{{\n> > if [ \"$SAGE_LOCAL\" = \"\" ]; then\n> > }}}\n> \n> Really?  I have yet to see a shell where the latter won't work properly...\n\nThe original Bourne shell, and many of its derivatives will fail under some circumstances with the syntax. They are \"corner cases\", and will not be met much in practice, but if one gets into the habit of doing it properly, then one will never get caught out. You might notice the configure script generated by autoconf never tests on \"\". \n\nSolaris 10 /bin/sh breaks with [ \"$var\" != \"\" ] for some (very corner-case)\nvalues of $var:\n\n\n```\n  $ /bin/sh -c 'var=\"(\"; [ \"$var\" != \"\" ]'; echo st = $?\n  /bin/sh: test: argument expected\n  st = 1\n  $ /bin/sh -c 'var=\"!\"; [ \"$var\" != \"\" ]'; echo st? = $?\n  /bin/sh: test: argument expected\n  st = 1\n```\n\nWith [ \"$var\" = \"\" ], it doesn't really break, but misbehaves by printing\nspurious diagnostic:\n\n```\n  $ /bin/sh -c 'var=\"!\"; [ \"$var\" = \"\" ]'; echo st = $?\n  /bin/sh: test: argument expected\n  st = 1\n  $ bin/sh -c 'var=\"(\"; [ \"$var\" != \"\" ]'; echo st = $?\n  /bin/sh: test: argument expected\n  st = 1\n```\n\nThe exit status is correct in this cases, though.\n\nI personally try to write my scripts so they don't fail for corner cases. It also saves you one character, as there is no need to quote the \"x\". So you add an \"x\" but remove \"\". So one byte is saved!\n\nDave",
    "created_at": "2011-02-23T00:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106241",
    "user": "drkirkby"
}
```

Replying to [comment:6 jdemeyer]:
> Replying to [comment:5 drkirkby]:
> > It's never a good idea to test on an empty string, though I know you can get away with it in at least recent versions of bash. 
> > 
> > {{{
> > if [ "x$SAGE_LOCAL" = x ]; then
> > }}}
> > is preferable to
> > {{{
> > if [ "$SAGE_LOCAL" = "" ]; then
> > }}}
> 
> Really?  I have yet to see a shell where the latter won't work properly...

The original Bourne shell, and many of its derivatives will fail under some circumstances with the syntax. They are "corner cases", and will not be met much in practice, but if one gets into the habit of doing it properly, then one will never get caught out. You might notice the configure script generated by autoconf never tests on "". 

Solaris 10 /bin/sh breaks with [ "$var" != "" ] for some (very corner-case)
values of $var:


```
  $ /bin/sh -c 'var="("; [ "$var" != "" ]'; echo st = $?
  /bin/sh: test: argument expected
  st = 1
  $ /bin/sh -c 'var="!"; [ "$var" != "" ]'; echo st? = $?
  /bin/sh: test: argument expected
  st = 1
```

With [ "$var" = "" ], it doesn't really break, but misbehaves by printing
spurious diagnostic:

```
  $ /bin/sh -c 'var="!"; [ "$var" = "" ]'; echo st = $?
  /bin/sh: test: argument expected
  st = 1
  $ bin/sh -c 'var="("; [ "$var" != "" ]'; echo st = $?
  /bin/sh: test: argument expected
  st = 1
```

The exit status is correct in this cases, though.

I personally try to write my scripts so they don't fail for corner cases. It also saves you one character, as there is no need to quote the "x". So you add an "x" but remove "". So one byte is saved!

Dave



---

archive/issue_comments_106242.json:
```json
{
    "body": "Hi,\n\nI noticed that 1.57 has been released so I threw together a new package. I kept in mind a few of the comments here. I didn't switch around the order of the change log. This can be changed if this is thought to be important.\n\nI have one test failure in the internal test suite. However, I am running Ubuntu 11.04 beta 2 (AMD64) and this might be a system specific problem. I am also running a Sage built using 10.10 because of a building problem with 11.04. This is being discussed on the sage-devel list. \n\nhttp://news.open-bio.org/news/2011/04/biopython-1-57-released/\n\nNew package at http://sage.math.washington.edu/home/awebb/biopython-1.57.spkg.\n\nCheers,\n\nAdam",
    "created_at": "2011-04-19T12:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106242",
    "user": "awebb"
}
```

Hi,

I noticed that 1.57 has been released so I threw together a new package. I kept in mind a few of the comments here. I didn't switch around the order of the change log. This can be changed if this is thought to be important.

I have one test failure in the internal test suite. However, I am running Ubuntu 11.04 beta 2 (AMD64) and this might be a system specific problem. I am also running a Sage built using 10.10 because of a building problem with 11.04. This is being discussed on the sage-devel list. 

http://news.open-bio.org/news/2011/04/biopython-1-57-released/

New package at http://sage.math.washington.edu/home/awebb/biopython-1.57.spkg.

Cheers,

Adam



---

archive/issue_comments_106243.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-04-20T15:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106243",
    "user": "mhampton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106244.json:
```json
{
    "body": "Fantastic, I will review this very soon.  There are some really nice improvements in 1.57.",
    "created_at": "2011-04-20T15:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106244",
    "user": "mhampton"
}
```

Fantastic, I will review this very soon.  There are some really nice improvements in 1.57.



---

archive/issue_comments_106245.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-04-25T11:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106245",
    "user": "mhampton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_106246.json:
```json
{
    "body": "I've been using this for the last four or five days on a variety of computers.  (The new sqlite indexed databases are great, this is a significant and important improvement in functionality.) No problems in use or installation.  \n\nWhoever updates the spkg should also remove the previous biopython-1.55.p0.spkg; there is no reason to keep older ones around.",
    "created_at": "2011-04-25T11:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106246",
    "user": "mhampton"
}
```

I've been using this for the last four or five days on a variety of computers.  (The new sqlite indexed databases are great, this is a significant and important improvement in functionality.) No problems in use or installation.  

Whoever updates the spkg should also remove the previous biopython-1.55.p0.spkg; there is no reason to keep older ones around.



---

archive/issue_comments_106247.json:
```json
{
    "body": "Replying to [comment:11 mhampton]:\n> Whoever updates the spkg should also remove the previous biopython-1.55.p0.spkg; there is no reason to keep older ones around.\n\nNew package `biopython-1.57.spkg` updated at http://www.sagemath.org/packages/optional/ .",
    "created_at": "2011-04-25T12:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106247",
    "user": "mvngu"
}
```

Replying to [comment:11 mhampton]:
> Whoever updates the spkg should also remove the previous biopython-1.55.p0.spkg; there is no reason to keep older ones around.

New package `biopython-1.57.spkg` updated at http://www.sagemath.org/packages/optional/ .



---

archive/issue_comments_106248.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-25T18:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10347#issuecomment-106248",
    "user": "jdemeyer"
}
```

Resolution: fixed
