# Issue 21536: some speed gains in Tamari interval posets

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2016-10-27 12:25:39

CC:  vivianepons gchatel kdilks tscrim darij

trying to enhance the code there, by using digraph in some places


---

Comment by chapoton created at 2016-10-27 12:26:34

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-10-27 12:26:34

New commits:


---

Comment by tscrim created at 2016-10-27 16:14:37

Do you have some timings?


---

Comment by chapoton created at 2016-10-27 16:49:22

Before

```
sage: set_random_seed(1234)
sage: TIP=TamariIntervalPosets(60)
sage: P=TIP.random_element()
sage: %timeit P.min_linear_extension()
100 loops, best of 3: 6.26 ms per loop
sage: %timeit P.number_of_tamari_inversions()
1 loop, best of 3: 477 ms per loop
sage: hash(P)
4079376095365611926
```

After:

```
sage: set_random_seed(1234)
sage: TIP=TamariIntervalPosets(60)
sage: P=TIP.random_element()
sage: %timeit P.min_linear_extension()
The slowest run took 18.29 times longer than the fastest
This could mean that an intermediate result is being cached.
1000 loops, best of 3: 704 Âµs per loop
sage: %timeit P.number_of_tamari_inversions()
100 loops, best of 3: 3 ms per loop
sage: hash(P)
4079376095365611926
```



---

Comment by chapoton created at 2016-10-28 15:30:14

bot is green. Review, someone ?


---

Comment by tscrim created at 2016-10-28 16:05:52

Nice timing improvements. LGTM.


---

Comment by tscrim created at 2016-10-28 16:05:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-11-02 19:20:05

Resolution: fixed
