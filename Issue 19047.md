# Issue 19047: implement a parser for octave vectors

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2015-09-24 20:23:50

Keywords: octave

as required in http://ask.sagemath.org/question/10159/converting-octave-vector-to-sage-list/


---

Comment by chapoton created at 2015-09-24 20:24:52

New commits:


---

Comment by chapoton created at 2015-09-24 20:24:52

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2015-09-24 23:25:33

Why not having a default when `R` is not provided?

Isn't the octave interface completely broken

```
sage: o = octave('[1,2,3,4]')
sage: o


 1 2 3 4


sage: o[1]

sage: o[2]
sage3
parse error:

  syntax error

sage: o

sage:
```



---

Comment by vdelecroix created at 2015-09-24 23:25:33

Changing status from needs_review to needs_info.


---

Comment by chapoton created at 2015-09-25 07:11:43

Replying to [comment:2 vdelecroix]:
> Why not having a default when `R` is not provided?

oh, well, maybe. Which ring to choose ?

> Isn't the octave interface completely broken

not really completely, because it passes its tests.
But yes, I find it very fragile and it works only if you are very cautious.

In your example, o[1] is not an allowed operation.


---

Comment by git created at 2015-09-25 11:29:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-09-25 15:51:36

Didn't you forgot `# optional - octave`? And what is the point of all these methods: `_equality_symbol`, `_true_symbol` and `_false_symbol`?

For the choice of the ring, you need to get it from the octave side (and raise an error if you are not able to translate it to a Sage ring saying that the ring is not optional). There are builtin functions in octave
- `isnumeric`
- `isinteger` -> Sage `ZZ`?
- `isfloat` -> Sage `RDF`?
- `isreal` -> ?
- `iscomplex` -> Sage `CDF`?
And it would be better to test first with `isvector` if the octave object is actually a vector.


---

Comment by vdelecroix created at 2015-09-25 15:51:36

Changing status from needs_info to needs_work.


---

Comment by git created at 2015-09-25 19:06:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-09-25 19:23:47

The `_equality_symbol` is missing in the interface, which prevent to use the boolean from octave in sage tests. It is also recommended to have the true and false symbols in the interface.

I have made some more things, but I am not able to test that. I do not have a machine with both octave and sage git repo, even if I have both separately.


---

Comment by git created at 2015-10-06 00:31:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-10-06 00:32:47

Tested on machine with sage and octave...


---

Comment by vdelecroix created at 2015-10-06 00:32:47

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2015-10-06 00:42:40

Though `__getitem__` is still broken. But it might be fixed later on.


---

Comment by chapoton created at 2015-10-06 07:52:29

a typo in the first line of `_nonzero_`, otherwise it looks good. This will certainly enhance the current situation.


---

Comment by git created at 2015-10-06 08:04:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-10-06 11:14:37

Thanks for the typo correction.


---

Comment by chapoton created at 2015-10-06 14:24:34

Do you agree to set that to positive review ?


---

Comment by vdelecroix created at 2015-10-06 14:56:52

Sure.


---

Comment by vdelecroix created at 2015-10-06 14:56:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-10-12 07:15:53

Resolution: fixed
