# Issue 10431: Chinese remainder code raises an error when called with Python ints

Issue created by migration from Trac.

Original creator: davidloeffler

Original creation time: 2010-12-16 15:12:50

Assignee: was

Keywords: CRT

Lots of the congruence subgroup code works intensively with small integers, and represents these as Python ints rather than Sage integers for speed reasons. This brought to light the following irritating bug:


```
sage: crt(int(2), int(3), int(5), int(7))
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/storage/masiao/sage-4.6.1.alpha3/devel/sage-reviewing/<ipython console> in <module>()

/usr/local/sage/sage-4.6/local/lib/python2.6/site-packages/sage/rings/arith.pyc in crt(a, b, m, n)
   2737         return CRT_list(a, b)
   2738     g, alpha, beta = XGCD(m, n)
-> 2739     q, r = (b - a).quo_rem(g)
   2740     if r != 0:
   2741         raise ValueError("No solution to crt problem since gcd(%s,%s) does not divide %s-%s" % (m, n, a, b))

AttributeError: 'int' object has no attribute 'quo_rem'
```



---

Comment by davidloeffler created at 2010-12-16 15:15:53

Changing status from new to needs_review.


---

Comment by davidloeffler created at 2010-12-16 15:15:53

Here's a tiny little patch (one line, one comment, one doctest).


---

Comment by robertwb created at 2010-12-16 16:54:06

Changing status from needs_review to positive_review.


---

Comment by mhansen created at 2010-12-16 19:07:27

Shouldn't you use `Integer(a)` instead of `ZZ(a)` since it's about 3.5 times faster (on boxen)?


---

Comment by mhansen created at 2010-12-16 19:07:27

Changing status from positive_review to needs_info.


---

Comment by davidloeffler created at 2010-12-16 20:07:41

new version


---

Comment by davidloeffler created at 2010-12-16 20:08:31

Changing status from needs_info to needs_review.


---

Attachment

Here's a new patch using Integer. Sorry, I meant to overwrite the original patch -- apply only the second one.


---

Comment by mhansen created at 2010-12-16 21:01:28

Thanks!


---

Comment by mhansen created at 2010-12-16 21:01:28

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-01-12 06:40:22

Resolution: fixed
