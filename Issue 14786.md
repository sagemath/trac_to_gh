# Issue 14786: Branching rule A2->A1 never returns

Issue created by migration from https://trac.sagemath.org/ticket/15023

Original creator: vbraun

Original creation time: 2013-08-08 21:51:34

CC:  sage-combinat bump

The following goes into an infinite loop and never returns:

```
sage: A2 = WeylCharacterRing('A2', style='coroots')
sage: A1 = WeylCharacterRing('A1', style='coroots')
sage: A2(1,0).branch(A1)
```



---

Comment by bump created at 2013-08-09 19:41:06

This works:


```
sage: A2(1,0).branch(A1,rule="levi")
A1(0) + A1(1)
```


But it remains a problem that the code is not very forgiving if you forget to specify a branching rule. There are two possible approaches to fixing this.

The first would be to raise a ValueError if the branching rule is omitted. The second would be to try to guess the branching rule by consulting a table. The first way would be easy to implement and I can submit a patch for it.


---

Comment by vbraun created at 2013-08-09 21:49:18

Though generally the `default` rule works, its just here that it doesn't. It is a convenient feature to let Sage guess the branching rule, so having some heuristic / a table would be nice. 

If you really don't want to have a default then `rule` shouldn't be a optional keyword argument: `def branch(weyl_character_ring, rule):` would always force the user to enter something.


---

Comment by bump created at 2013-08-12 18:28:39

> Though generally the default rule works, its just here that it doesn't. It is a 
> convenient feature to let Sage guess the branching rule, so having some heuristic / a table would be > nice.

I agree and I am thinking the default branching rule should be to do the obvious thing
in the following cases:


```
(1) Top Cartan type is irreducible and restriction is to a Levi.
(2) The top group is type A_r, and the bottom group is embedded
    by means of its standard representation. This includes three
    cases B_r -> A_{2r}, C_r -> A_{2r-1} and D_r -> A_{2r-1}.
    Equivalently, either O(n) -> SL(n) or Sp(2n) -> SL(2n).
(3) O(n) -> O(n-1).
```

That might be enough for an initial implementation. I thought of adding `Sp(2n)->Sp(2n-2)` to this list but this BR factors through Sp(2n-2)xA1 which is a Levi branching.

These are the default rules implemented by the patch. If a default rule is not found, an error is raised.


---

Comment by bump created at 2013-08-12 18:29:04

Set assignee to bump.


---

Attachment

#15023: implements correct default branching rules


---

Comment by bump created at 2013-08-13 00:27:16

Changing status from new to needs_review.


---

Comment by bump created at 2013-08-13 00:27:53

Changing keywords from "" to ""branching rule"".


---

Comment by tscrim created at 2013-08-13 02:45:12

Hey Dan,

Here's a review patch which removes the bare `except:` statements, does some doc formatting (in preparation of #15042), and re-organizes the code to make it easier to read (to me at least). If you're happy with my changes, you can go ahead and set this to positive review.


---

Comment by bump created at 2013-08-13 04:36:03

Thanks Travis. The reviewer patch looks good. I'll wait until tomorrow or so to set pos review since Volker Braun might have some comment.


---

Comment by vbraun created at 2013-08-13 11:27:24

Looks good to me, thanks!


---

Comment by vbraun created at 2013-08-13 11:27:24

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-08-13 14:39:02

Your welcome. Thanks.


---

Attachment

I had to do a minor tweak to catch an A<sub>1</sub> issue (change an `elif` to an `if`).


---

Comment by jdemeyer created at 2013-08-20 13:00:59

Resolution: fixed
