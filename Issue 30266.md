# Issue 30266: Apply fossies codespell

Issue created by migration from https://trac.sagemath.org/ticket/30503

Original creator: slelievre

Original creation time: 2020-09-04 13:36:26

CC:  chapoton slelievre @tobiasdiez

Keywords: documentation, spelling, spellcheck

Fossies codespell

- https://fossies.org/features.html#codespell


---

Comment by mkoeppe created at 2020-09-07 05:58:01

New commits:


---

Comment by git created at 2020-09-07 06:13:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-09-07 06:17:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-09-07 06:19:57

Changing status from new to needs_review.


---

Comment by git created at 2020-09-07 06:31:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2020-09-07 10:10:04

I like it! A few observations:

- Documentation needed, especially how it integrates with common IDEs.
- Is the idea to run it as part of a github action, or patchbot on each ticket?
- The exceptions added in .codespell-dictionary.txt seem to be proper missspellings or abbreviations that in my opinion shouldn't be encouraged in a multi-language dev team. I would actually propose to add the conversions ans -> answer, numer -> number as a custom codespell directory (`- D` argument)
- What's the reason to only apply it to the source folder, and not the whole project (including build scripts etc)
- Rename codespell-dictinary.txt to codespell-ignore. In codespell terminology, a dictionary flags misspellings and provides alternatives, e.g https://github.com/codespell-project/codespell/blob/45b67b427489910b0ef5e4566c9b3989be3f0f33/codespell_lib/data/dictionary_rare.txt
-  Is it possible to add the configuration as a config block in tox instead of as cmd line args? https://github.com/codespell-project/codespell#using-a-config-file wasn't clear about tox support for this.


---

Comment by mkoeppe created at 2020-09-07 16:24:50

Thanks a lot for the comments!


---

Comment by mkoeppe created at 2020-09-07 16:24:50

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-09-07 16:40:05

Replying to [comment:9 gh-tobiasdiez]:
> -  Is it possible to add the configuration as a config block in tox instead of as cmd line args? https://github.com/codespell-project/codespell#using-a-config-file wasn't clear about tox support for this.

It only checks for `.codespellrc` and `setup.cfg`. I'm going to use `.codespellrc`


---

Comment by mkoeppe created at 2020-09-07 16:51:01

Actually, the released version (1.17.1) has no support for config files at all, so we have to keep the command line.


---

Comment by git created at 2020-09-07 17:04:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-09-07 17:38:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-09-07 17:41:59

Replying to [comment:9 gh-tobiasdiez]:
> - What's the reason to only apply it to the source folder, and not the whole project (including build scripts etc)

`src/` is the "pure Python" part of the project (sagelib). Most Sage developers are only familiar with this part.

But I have changed the top-level tox.ini so that it runs codespell on the same distribution.

Many of the excluded file/directory patterns could actually be obtained from `.gitignore` - but then again we would need a shell script to do this. I think it's "good enough" for this ticket.


---

Comment by mkoeppe created at 2020-09-07 17:45:35

Replying to [comment:9 gh-tobiasdiez]:
> - Documentation needed, especially how it integrates with common IDEs.

Let's add documentation in #30453 (`sage -advanced` already shows it as part of the help). I will need help there with the IDE angle - I only use the command line.

> - Is the idea to run it as part of a github action, or patchbot on each ticket?

As of this ticket, it's just a dev tool that can be run locally. I don't have plans to work on CI integration for it.


---

Comment by mkoeppe created at 2020-09-07 17:45:35

Changing status from needs_work to needs_review.


---

Comment by git created at 2020-09-07 17:47:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2020-09-07 18:43:02

Thanks! LGTM

(By the way, what are the conventions concerning putting yourself as reviewer, and changing the status to positive review?)


---

Comment by mkoeppe created at 2020-09-07 19:49:07

As soon as you have participated in reviewing a ticket, it is appropriate to add your name to the list of reviewers.

(I have started to use the format "My name, ..." to indicate that more reviewers may be needed to cover other aspects of the ticket that I do not feel confident (or do not have time) to review. But this is not widely used ... yet.)

If you are the only reviewer and you are confident about giving a positive review, you set positive_review. If there are several active reviewers, some communication using comments is needed.


---

Comment by mkoeppe created at 2020-09-07 19:49:33

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-09-07 19:49:33

Thanks for the review.


---

Comment by @tobiasdiez created at 2020-09-07 21:16:49

Thanks to you, for the explanation!


---

Comment by vbraun created at 2020-09-23 21:27:39

Resolution: fixed
