# Issue 13965: Let %attach behave like the old attach, and provide a doctest for %attach

Issue created by migration from Trac.

Original creator: SimonKing

Original creation time: 2013-02-23 11:15:10

Assignee: was

Currently (sage-5.8.beta0), when using `attach /path/to/file.pyx`, one gets a deprecation warning and is told to use `%attach` instead of `attach`.

Problem: If one changes the file that is attached with `%attach` then no automatic re-compilation happens. But that would be the main point of attaching a file! And the automatic re-compilation used to be a feature of `attach`. Hence, changing from `attach` to `%attach` is a regression.

Moreover, it seems that `%attach` is not doc-tested.

Not clear if "user interface" is the right component, but `attach` is used in interactive sessions, after all...


---

Comment by kcrisman created at 2013-02-23 15:40:16

This is presumably due to #12719.  Note that you can still use `attach('foo.spyx')`, apparently, without receiving the warning.

Would an acceptable solution be to change the deprecation warning to say that if you want the magic function, you will be using IPython's native attach, and if you want the recompiling, you can use Sage's version?  I admit that doesn't sound appetizing to me, just brainstorming.


---

Comment by kcrisman created at 2013-02-24 02:10:31

See also #14149.


---

Comment by hthomas created at 2013-04-29 13:50:47

The behaviour I am getting (using 5.9.beta1) is a little different than what was described originally.  Suppose I attach a file using %attach.  If I edit the file and hit return at the sage prompt, my file is not recompiled.  But when I next enter anything non-trivial at the sage prompt (eg, 1+1), the file is recompiled.  

So the behaviour is different from the old behaviour, and a bit surprising, but not entirely broken.  That said, I still prefer the old behaviour.


---

Comment by hthomas created at 2013-04-29 20:14:26

It turns out this phenomenon was discussed at http://trac.sagemath.org/sage_trac/ticket/14066#comment:18
when ipython was upgraded to 0.13.  Apparently it wouldn't be so easy to change.  But it should work as I described in my comment; if it doesn't that's definitely a bug.


---

Comment by hthomas created at 2013-05-04 12:08:14

This behaviour is being changed at #14523, which also includes doctests.  I think this ticket can be closed.


---

Comment by hthomas created at 2013-05-04 12:08:14

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-06-16 12:10:08

I concur.


---

Comment by tscrim created at 2013-06-16 12:10:08

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-06-19 12:18:43

Resolution: duplicate
