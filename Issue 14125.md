# Issue 14125: Remove all the `is_[A-Z]*` from global namespace

Issue created by migration from https://trac.sagemath.org/ticket/14329

Original creator: ppurka

Original creation time: 2013-03-21 14:20:43

Assignee: tbd

Remove all the `is_[A-Z]*` from global namespace. They have been deprecated for over two years.


---

Comment by kini created at 2013-03-22 02:26:43

Do you mean `is_[A-Z][A-Za-z]*`?


---

Comment by ppurka created at 2013-03-22 03:06:52

Arrgghhh! regexp!! There, the current modification should suffice.

On a serious note, what I do mean is all the "is_Vector", "is_Polynomial", "is_Matrix", and what not. The patch will be trivial but tiresome. I don't know any means of listing and testing whether they give a deprecation warning automatically. So, it has to be a slow, manual, and visual process.


---

Comment by kini created at 2013-03-22 03:22:38


```python
import re
from subprocess import check_output, STDOUT, CalledProcessError
for x in globals().keys():
    if re.match("is_[A-Z]", x) is not None:
        try:
            output = check_output(['sage', '-c', x + '(None)'], stderr=STDOUT)
        except CalledProcessError as e:
            output = e.output
        if re.match(".*DeprecationWarning", output) is not None:
            print x
```


is a hack but should work.


---

Comment by ncohen created at 2013-03-26 08:29:39

(cc me)


---

Comment by tscrim created at 2013-04-02 19:19:41

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-04-02 19:19:41

This is a duplicate of #12824.


---

Comment by ppurka created at 2013-04-02 19:23:44

I was definitely not advocating removing the functions themselves. They can still be used internally. Is it desired that the functions themselves are removed?


---

Comment by tscrim created at 2013-04-02 19:33:09

Since they've already been deprecated (from the global namespace in #10107), the trivial ones can be removed since we don't really want to use them IMO (a extra unnecessary _python_ function call). Perhaps we could just use this ticket to explicitly remove these functions only from the global namespace (as a step towards #12824)?


---

Comment by ppurka created at 2013-04-03 01:20:03

Yes. That was my intention. :-)


---

Comment by tscrim created at 2013-04-03 21:12:32

Ah okay, then this patch would just be a matter of finding which `all.py` files are importing these...


---

Comment by tscrim created at 2013-04-03 21:12:32

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2013-08-22 10:04:27

As a first step I propose #15076


---

Comment by chapoton created at 2013-08-25 13:31:38

step 1) should be ok and is wating for review at #15076


---

Comment by mmezzarobba created at 2014-03-11 13:20:51

New commits:


---

Comment by mmezzarobba created at 2014-03-11 13:20:51

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2014-03-11 13:20:51

Changing priority from major to minor.


---

Comment by chapoton created at 2014-03-11 14:11:34

For a ticket like that, it is very important to test sage in full. Did you do that ?


---

Comment by mmezzarobba created at 2014-03-11 14:21:17

Replying to [comment:21 chapoton]:
> For a ticket like that, it is very important to test sage in full. Did you do that ?

I ran `make ptest`, but not `# long time` nor optional tests (...but the few doctests matching `sage:.*is_.*optional` seem to properly import the predicate they call).


---

Comment by pbruin created at 2014-05-15 20:13:36

Changing status from needs_review to needs_info.


---

Comment by pbruin created at 2014-05-15 20:13:36

There are still dozens of `is_*` functions in the global namespace; `is_Radix64StringMonoidElement`, just to name a random example arising from typing `is_[tab]` in Sage 6.3.beta1.  Shouldn't there be some more steps like 1-3 in the ticket description before we can remove the warning?


---

Comment by mmezzarobba created at 2014-05-16 07:15:15

Replying to [comment:24 pbruin]:
> There are still dozens of `is_*` functions in the global namespace; `is_Radix64StringMonoidElement`, just to name a random example arising from typing `is_[tab]` in Sage 6.3.beta1.  Shouldn't there be some more steps like 1-3 in the ticket description before we can remove the warning?

Looks like you are completely right! I don't remember why I thought we were done.

Btw many of the imports that were supposed to be removed as part of steps 1)-3) are still there (or were added back?).


---

Comment by mmezzarobba created at 2014-05-16 07:15:15

Changing status from needs_info to needs_work.


---

Comment by git created at 2014-05-16 15:59:03

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2014-05-16 16:06:22

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mmezzarobba created at 2014-05-16 16:09:43

Work in progress, only partially tested, expect forced pushes!


---

Comment by git created at 2014-05-17 09:42:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mmezzarobba created at 2014-05-17 09:50:02

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2014-05-17 09:50:02

This time there are no `is_[A-Z]*` remaining in the global namespace and all (long) tests pass.

Note that I did _not_ remove `is_pAdic{Ring,Field}` since these were not formally deprecated as far as I understand (but I would not mind removing them as well if other people agree).


---

Comment by pbruin created at 2014-05-17 11:49:31

I would be in favour of removing `is_pAdic{Ring,Field}` as well, but it's better to deprecate them first.  We can do it in a future round of cleaning up the global namespace.


---

Comment by pbruin created at 2014-05-17 11:49:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-05-21 15:33:45

Resolution: fixed
